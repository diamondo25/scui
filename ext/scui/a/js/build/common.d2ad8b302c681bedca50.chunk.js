(window.pk=window.pk||[]).push([[0],[,function(e,t,n){"use strict";var i,a=n(3),r=a(n(25)),o=a(n(5));void 0===(i=function(e){var t=n(62),i=n(4),a=n(14),s={titles:{lanoire:"lanoire",lanoirevr:"lanoirevr",mp3:"mp3",gta5:"gta5",rdr2:"rdr2",gta4:"gta4",bully:"bully",gtasa:"gtasa",gtavc:"gtavc",gta3:"gta3"}},l={};s.pubsub=t,globals.isOfflineBuild=!0,s.processResponseData=function(e){return e},window.onerror=function(e,t,n,i,a){s.pubsub.publish("virtualKeyboard",!1);var r="";a&&a.stack?r=" stack:"+a.stack:!a&&"string"==typeof e&&e.toLowerCase().indexOf("script error")>-1&&(r=" Originating from different origin, details only available via console."),s.pubsub.publish("utils.showFatalError",{errorCode:s.errorCode("1000.104"),supportText:e});var o="url: "+t+"\nline: "+n;o+=i?"\ncolumn: "+i:"",s.pubsub.publish("sdk.writeLocalLogFile",{method:"GlobalError",key:"Unhandled",value:e,error:a,errorLocation:o,stack:r});var l="Error: "+e+"\n"+o+"\n"+a+"\n"+r;return s.WriteDebugLog("GlobalError","Unhandled",l,s.logType.error,s.logController[s.getTitleName()],!1),!0},l.oldAlert=window.alert,window.alert=function(e){s.stringHasContent(e)&&e.indexOf("reCAPTCHA")>-1&&s.pubsub.publish("utils.showFatalError",{errorCode:s.errorCode("1004.108")})},String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,n){return null!=(0,o.default)(e[n])?e[n]:t}))},String.endsWith||(String.prototype.endsWith=function(e){return this.substr(this.length-e.length)===e});var c={4e3:"AuthenticationFailed",4001:"NotAllowed",6e3:"DoesNotExist"},u={23:"LoginAttempts",31:"Password",35:"PlayerAccount",38:"Privilege",49:"SteamAccountLink",50:"SteamAPI",81:"RockstarAccountLink",89:"DupLogin",96:"Password",101:"MfaCodeRequired",103:"MfaCodeMissing",105:"MfaSpecifyDevice",185:"EpicAccessToken",186:"EpicApi",187:"EpicAccountLink"},d=i.invert(c),f=i.invert(u);s.errorCode=function(e){return e||"1000.1"},s.errorCodeLocKey=function(e){return"errorcode_"+e},s.isAjaxRequestAborted=function(e){return"abort"===e||"TypeError: Cannot read property 'send' of undefined"===e},s.isNumeric=function(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0},s.formatDob=function(e,t,n){return void 0===e||void 0===t||void 0===n?"":e+"-"+t+"-"+n},s.errorCodeIs=function(e,t){if(s.isNumeric(e)){var n=parseInt(e,10);return t===s.getErrorCodeString(n)}return e===t},s.errorCodeExIs=function(e,t){if(s.isNumeric(e)){var n=parseInt(e,10);return t===s.getErrorCodeExString(n)}return e===t},s.getErrorCodeString=function(e){var t=c[e];return void 0===t?e:t},s.getErrorCodeExString=function(e){var t=u[e];return void 0===t?e:t},s.getErrorCodeNum=function(e){var t=d[e];return void 0===t?e:t},s.getErrorCodeExNum=function(e){var t=f[e];return void 0===t?e:t},s.splitErrorCode=function(e){var t=[e,""];return"string"==typeof e&&e.indexOf(".")>0&&(t=e.split(".")),{code:t[0],codeEx:t[1]}},s.joinErrorCode=function(e,t){var n="1000";return("number"==typeof e||"string"==typeof e&&e.length)&&(n=""+e),("number"==typeof t||"string"==typeof t&&t.length)&&(n+="."+t),n},s.createFatalErrorOptions=function(e){var t="string"==typeof e;return{errorCode:t?void 0:s.extractErrorFromResponse(e),errorText:t?e:void 0}},s.stringHasContent=function(e){return"string"==typeof e&&e.length>0},s.htmlEncode=function(e){return e?i.escape(e):""},s.htmlDecode=function(e){return e?i.unescape(e):""},s.convertPlaceholderLinks=function(e){return"string"==typeof e?e.replace(/{{a href= *([a-zA-Z0-9\:\/\.\-\_=\?\&]+)}}(.+?) *{{\/a}}/gi,'<a href="$1">$2</a>'):e},s.mapLanguage=function(e){var t;if("string"!=typeof e)return"en-US";switch(e.toLowerCase()){case"pt-pt":t="pt-BR";break;case"zh-cht":case"zh-tw":case"zh":case"zh-hant":t="zh-TW";break;case"zh-cn":case"zh-chs":case"zh-hans":case"zh-hans-cn":t="zh-CN";break;default:t=e,i.contains(v,e)||(s.WriteDebugLog("baseUtils.mapLanguage","unsupported language",e),t="en-US")}return t},s.mapTitleName=function(e){switch(e){case"":case"Launcher":return"launcher";case"bob":return s.titles.rdr2;case"gtav":return s.titles.gta5;case"gtaiii":return s.titles.gta3;case"lan":return s.titles.lanoire;default:return e}};function p(e){switch(e?i.isArray(e)&&(e=e[0]):e=globals.padType,e){case 7:return"Vr2";case 8:default:return"Vr"}}function h(e){e||(e=globals.padType);var t=[7,8];if(i.isArray(e)){var n=i.intersection(t,e);return Boolean(n&&n.length>0)}return i.contains(t,e)}s.hasBase64ImagePrefix=function(e){return"string"==typeof e&&e.length>0&&e.startsWith("data:image/png;base64,")},s.prefixBase64Image=function(e){if("string"==typeof e&&e.length>0)return"data:image/png;base64,"+e},s.getUrlVars=function(e){for(var t,n="string"==typeof e?e.toLowerCase():e,i=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<a.length;r++){if(n===(t=a[r].split("="))[0].toLowerCase())return t[1];i.push(t[0]),i[t[0]]=t[1]}return null!=n?"":i},s.getUrlNum=function(e){var t=s.getUrlVars(e);if("string"==typeof t){var n=Number.parseInt(t,10);return isNaN(n)?t:n}return t},s.getUrlBool=function(e){var t=s.getUrlVars(e);return"string"==typeof t&&"true"===t},s.createCookie=function(e,t,n){var i;if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),i="; expires="+a.toGMTString()}else i="";document.cookie=e+"="+t+i+"; path=/"},s.readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},s.eraseCookie=function(e){s.createCookie(e,"",-1)},s.getDaysForMonth=function(e,t){var n=[31,29,31,30,31,30,31,31,30,31,30,31],i=Number(e)-1,a=Number(t);return 1===i&&a>0&&1!=new Date(a,i,29).getMonth()&&n[i]--,n[i]},s.getYears=function(){for(var e=(new Date).getFullYear(),t=[],n=e,i=e-100;n>=i;n--)t.push(n);return t},s.convertDateString=function(e,t){var n=parseInt(e,10);n<1e10&&(n*=1e3);var i=new Date;i.setTime(n);var a,r=new Date(i.toLocaleString()),o=r.getDate();if(isNaN(o))a=i.toLocaleString();else{var s=r.getMonth();if(s++,a=r.getFullYear()+"-"+s+"-"+o,t){var l=r.getHours(),c=r.getMinutes(),u="AM";l>11&&(u="PM"),l>12&&(l-=12),0==l&&(l=12),l<10&&(l="0"+l),c<10&&(c="0"+c),a+=" "+(l+":"+c+" "+u)}}return a},s.jsToDll=function(e){return e.replace(/RGSC_/g,"RGSC_JS_")+"_ASYNC_RESULT"},s.dllToJs=function(e){return e.replace(/RGSC_JS_/g,"RGSC_").replace(/_ASYNC_RESULT/,"")},s.getBaseUrl=function(){return window.globals.baseUrl},s.getScBaseUrl=function(){return globals.scBaseUrl||"http://socialclub.rockstargames.com/"},s.getSecureScBaseUrl=function(){return s.getScBaseUrl().replace("http://","https://")},s.getStoreImageBaseUrl=function(e){var t=window.globals.storeImageBaseUrl;return t=t.replace("{0}",e).replace("{1}",s.getPlatform())},s.getStoreOrigin=function(){return globals.storeOrigin},s.getMaintenanceMsg=function(e){return e=e||globals.titlelang,globals.cmm&&globals.cmm[e]},s.setMaintenanceMsg=function(e){"object"===(0,o.default)(e)&&"string"==typeof e["en-US"]&&(globals.cmm=e)},s.getAjaxTimeout=function(){return globals.ajaxTimeout},s.getCreateAccount3003=function(){return globals.createAccount3003},s.setCreateAccount3003=function(){globals.createAccount3003=!0},s.clearCreateAccount3003=function(){delete globals.createAccount3003},s.renderCompiledTemplate=function(e,t){return t||(t={}),t.scBaseUrl||(t.scBaseUrl=s.getScBaseUrl()),t.secureScBaseUrl||(t.secureScBaseUrl=s.getSecureScBaseUrl()),t.baseUrl||(t.baseUrl=s.getBaseUrl()),e(t)},s.isLegacyServiceLayer=function(){return globals.RosTitleVersion<11},s.isLegacyGame=function(e){return(e=e||s.getTitleName())===s.titles.lanoire||e===s.titles.mp3},s.isLaNoire=function(e){return(e=e||s.getTitleName())===s.titles.lanoire},s.isLaNoireVr=function(e){return(e=e||s.getTitleName())===s.titles.lanoirevr},s.isSteam=function(){var e=s.isSteamPlatform()&&s.getSteamAppId()>0&&""!==s.getSteamAuthTicket()&&!s.isLegacyServiceLayer();return s.WriteDebugLog("baseUtils.isSteam","value",e.toString()),e},s.isSteamPlatform=function(){return"steam"===s.getGamePlatform()},s.isViveport=function(){return"viveport"===s.getGamePlatform()},s.isOculus=function(){return"oculus"===s.getGamePlatform()},s.isEpic=function(){return"epic"===s.getGamePlatform()},s.setEpicAccessToken=function(e){return globals.epicAccessToken=e,s.WriteDebugLog("setEpicAccessToken"),globals.epicAccessToken},s.getEpicAccessToken=function(){return globals.epicAccessToken},s.setEpicPlayerName=function(e){return globals.epicPlayerName=e,s.WriteDebugLog("setEpicPlayerName","value",JSON.stringify(e)),globals.epicPlayerName},s.setEpicAccountId=function(e){return globals.epicAccountId=e,s.WriteDebugLog("setEpicAccountId","value",JSON.stringify(e)),globals.epicAccountId},s.getEpicAccountId=function(){return globals.epicAccountId},s.setSteamAppId=function(e){var t=parseInt(e,10);return globals.steamAppId=isNaN(t)?0:t,s.WriteDebugLog("setSteamAppId","value",JSON.stringify(e)),globals.steamAppId},s.setSteamAuthTicket=function(e){if(s.stringHasContent(e))return globals.steamAuthTicket=e;s.pubsub.publish("utils.showFatalError",{errorCode:s.errorCode("5002.77")})},s.getSteamAppId=function(){return globals.steamAppId},s.getSteamAuthTicket=function(){return globals.steamAuthTicket},s.removeSteamAuthTicket=function(){globals.steamAuthTicket=""},s.getSteamAppName=function(e){var t=e;switch("string"==typeof t&&(t=parseInt(t,10)),t||s.getSteamAppId()){case 271590:return s.titles.gta5;case 204100:return s.titles.mp3;case 110800:return s.titles.lanoire;case 722230:return s.titles.lanoirevr;case 1174180:return s.titles.rdr2;case 12210:return s.titles.gta4;default:throw s.WriteDebugLog("getSteamAppName","error","unsupported appId: "+e+" ("+(0,o.default)(e)+")"),new Error("Unsupported Steam App Id: "+e)}},s.versionNum=function(){return globals.versionNum},s.isScDownError=function(e){var t=!1;if(void 0===e||""===e)return!1;var n=[2e3,2999],i=parseInt(e,10);return i>=n[0]&&i<=n[1]&&(t=!0),t},s.getLastStringSegment=function(e,t,n){if(e){var i=e.split(t);return i.length>n?i[i.length-2]+t+i[i.length-1]:e}return""},s.isMtl=function(){return!1},s.getLoginTitleName=function(){return s.isMtl()?"launcher":s.getTitleName()},s.getTitleName=function(){return globals.titleName},s.getGamePlatform=function(){return globals.gamePlatform},s.getCountryCode=function(){return globals.cc},s.getIp=function(){return globals.ip},s.getTitleLang=function(){return globals.titlelang},s.getPlatform=function(){return globals.platform},s.setTitleName=function(e){return globals.titleName=s.stringHasContent(e)?s.mapTitleName(e.toLowerCase()):"",globals.titleName},s.setOsVersion=function(e,t){globals.isOs&&(l.osVersionMajor=parseInt(e,10),l.osVersionMinor=parseInt(t,10))},s.getOsDeprecationDateLocalised=function(){return a.locale(s.getTitleLang()),a(globals.osDt).format("ll")},s.isDeprecatedOs=function(){if(!globals.isOs)return!1;if(void 0===l.osVersionMajor||isNaN(l.osVersionMajor)||-1===l.osVersionMajor)return!1;var e=l.osVersionMajor<6,t=6===l.osVersionMajor&&0===l.osVersionMinor;return Boolean(e||t)},s.setGamePlatform=function(e){return globals.gamePlatform="string"==typeof e?e.toLowerCase():"",globals.gamePlatform},s.setReceiveMsgEnabled=function(e){return globals.receiveMsgEnabled=e,e},s.processTitleIdInfo=function(e){if(globals.rosEnvironment=e.RosEnvironment,globals.RosTitleVersion=e.RosTitleVersion,globals.OfflineOnly=e.OfflineOnly,s.isOffline(e.OfflineOnly),globals.platform=e.RosPlatform,s.setSteamAppId(0),s.removeSteamAuthTicket(),null!=e.RosPlatformId&&(globals.platformId=e.RosPlatformId),null!=e.TitleVersion&&(globals.titleVersion=parseFloat(e.TitleVersion)),(s.isLegacyServiceLayer()||!0===e.EnableLocalProfiles)&&(globals.localProfileCreation=!0),s.setTitleName(e.RosTitleName),s.setTitleLanguage(e.Language),s.setOsVersion(e.OsVersionMajor,e.OsVersionMinor),null!=e.TitleDisplayName&&(globals.titleDisplayName=function(e){var t=e;switch(e){case"GTA V":case"GTA5":t="Grand Theft Auto V";break;case"L.A. Noire VR":t="L.A. Noire: The VR Case Files"}return t}(e.TitleDisplayName)),null!=e.Platform){s.setGamePlatform(e.Platform);var t=s.getGamePlatform();"macsteam"===t&&s.setGamePlatform("steam"),"steam"===t||"nhn"===t||"macappstore"===t?(null!=e.SteamAppId&&s.setSteamAppId(e.SteamAppId),null!=e.SteamAuthTicket?s.setSteamAuthTicket(e.SteamAuthTicket):"macappstore"===t&&null!=e.MacAppStoreReceipt&&s.setSteamAuthTicket(e.MacAppStoreReceipt)):s.isEpic()&&s.setEpicAccessToken(e.epicAccessToken)}return globals.fingerprint=e.FingerprintKvp,s.pubsub.publish("baseUtils.processTitleIdInfo"),e},s.setTitleLanguage=function(e){""!=s.getUrlVars("lang")&&(e=s.getUrlVars("lang"));var t=s.mapLanguage(e);return null!=t&&(globals.titlelang=t,s.WriteDebugLog("initLanguage","Language",globals.titlelang)),{mappedLanguage:t}},s.getStoreLanguage=function(e){switch("string"==typeof e&&0!==e.length||(e="en-US"),e){case"pt-BR":case"es-MX":case"zh-CN":return e.replace(/-/,"_").toLowerCase();default:return e.split("-")[0]}},s.setCapsLockStatus=function(e){s.isCapsLockOn=e},s.getCapsLockStatus=function(){return s.isCapsLockOn},s.toggleClassOnHtmlTag=function(e,t){document.documentElement.classList[t?"add":"remove"](e)},s.inGamePadMode=function(){return 1==globals.inputMethod},s.gamePadLocalizationSuffix=function(e){return e&&h(e)?p(e):s.inGamePadMode()?h()?p():"GamePad":""},s.isAmUI=function(){return window.globals.isAmUI},s.setAmUI=function(e){window.globals.isAmUI=e},s.isNewSigninFlowEnabled=function(){return(s.getTitleName()===s.titles.gta5||"launcher"===s.getTitleName()||s.getTitleName()===s.titles.rdr2||s.getTitleName()===s.titles.lanoirevr||s.getTitleName()===s.titles.gta4)&&s.isOnline()},s.isDisplayTitle=function(e){var t=[s.titles.gta5,s.titles.lanoire,s.titles.lanoirevr,s.titles.mp3,s.titles.rdr2,s.titles.gta4,s.titles.bully,s.titles.gtasa,s.titles.gtavc,s.titles.gta3];return i.contains(t,e)},s.getFriendlyTitleName=function(e){return s.getFriendlyTitleNames()[e]},s.getFriendlyTitleNames=function(){var e;return e={},(0,r.default)(e,s.titles.gta5,"Grand Theft Auto V"),(0,r.default)(e,s.titles.rdr2,"Red Dead Redemption 2"),(0,r.default)(e,s.titles.lanoirevr,"L.A. Noire: The VR Case Files"),(0,r.default)(e,s.titles.lanoire,"L.A. Noire"),(0,r.default)(e,s.titles.mp3,"Max Payne 3"),(0,r.default)(e,s.titles.gtasa,"Grand Theft Auto: San Andreas"),(0,r.default)(e,s.titles.gtavc,"Grand Theft Auto: Vice City"),(0,r.default)(e,s.titles.gta3,"Grand Theft Auto 3"),(0,r.default)(e,s.titles.bully,"Bully: Scholarship Edition"),(0,r.default)(e,s.titles.gta4,"Grand Theft Auto IV"),e},s.isOffline=function(e){var t=void 0!==e?!e:void 0;return!s.isOnline(t)},s.isOnline=function(e){return"boolean"==typeof e&&(globals.isOnline=e,s.pubsub.publish("baseUtils.isOnline",e)),void 0===globals.isOnline&&(globals.isOnline=globals.scsServiceEnabled),globals.isOnline&&(globals.hasConnection=!0,globals.hasInternet=!0),globals.isOnline},s.isLoadedInOnlineMode=function(){return globals.isOnlineMode},s.isLoadedInOfflineMode=function(){return!globals.isOnlineMode},s.isLocal=function(e){return void 0!==e&&(globals.isLocal=e),globals.isLocal},s.isSignedIn=function(e){return void 0!==e&&(globals.isSignedIn=e),globals.isSignedIn},s.isAcountCreated=function(e){return void 0!==e&&(l.isAccountCreated=e),l.isAccountCreated},s.isScuiVisible=function(){return globals.isScuiVisible},s.setIsScuiVisible=function(e,t){!e||t||s.isScuiVisible()?globals.isScuiVisible=e:s.pubsub.publish("sdk.requestUiState",e)},s.parseXml=function(e){if("object"===(0,o.default)(e)&&"function"==typeof e.getElementsByTagName)return e;if(!s.stringHasContent(e))return null;var t=(new window.DOMParser).parseFromString(e,"text/xml");if(!t||t.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return t},s.objStrMatch=function(e,t,n){return void 0!==e&&"string"==typeof e[t]&&e[t].toLowerCase()===n},s.urlCombine=function(e,t){return null!=e&&e.length?null!=t&&t.length?("/"==e.charAt(e.length-1)&&(e=e.substr(e,e.length-1)),"/"==t.charAt(0)&&(t=t.substr(1)),e+"/"+t):e:t},s.getApiUrl=function(e){return null!=e&&"/"==e.charAt(0)&&(e=e.substr(1)),s.urlCombine(globals.apiUrl,e)},s.getOnlineTitle=function(e,t){if(!e)return{game:void 0,platform:void 0};var n,a;if(1===t.length)n=t[0].TitleFriendlyName,a=t[0].PlatformFriendlyName;else{var r=i.find(t,(function(e){return"pcros"===e.PlatformName}));r?(n=r.TitleFriendlyName,a=r.PlatformFriendlyName):(n=t[0].TitleFriendlyName,a=t[0].PlatformFriendlyName)}return{game:n,platform:a}},s.areChunkedVoucherCodesEnabled=function(){var e=[s.titles.lanoire,s.titles.mp3,s.titles.gta5,"launcher",s.titles.rdr2,s.titles.lanoirevr,s.titles.gta4,s.titles.gtasa,s.titles.gtavc,s.titles.gta3,s.titles.bully];return i.contains(e,s.getTitleName())},s.chunkCodeLength=function(){return s.getTitleName(),4},s.numChunks=function(){return s.getTitleName(),4},s.getCaretPosition=function(e){var t=0;return(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart),t},s.setCaretPosition=function(e,t){e.setSelectionRange&&(e.focus(),e.setSelectionRange(t,t))},s.logType={error:"error",debug:"debug"},s.logController={debug:"debug",friend:"friend",crew:"crew",profile:"profile",privacy:"privacy",messaging:"messaging",lanoire:"lan",store:"store",mp3:s.titles.mp3,gta5:s.titles.gta5,rdr2:s.titles.rdr2,lanoirevr:s.titles.lanoirevr,launcher:"launcher",gta4:s.titles.gta4},s.formatLogData=function(e,t,n,i,a,r){var o=new Date,l={hours:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),ms:o.getMilliseconds(),method:s.htmlEncode(e),key:s.htmlEncode(t),value:s.htmlEncode(n)};return i&&(l.error=s.htmlEncode(i)),a&&(l.errorLocation=s.htmlEncode(a)),r&&(l.stack=s.htmlEncode(r)),l},s.skipLoggingEvents=function(e,t,n){return null!=e&&void 0!==e&&null!=n&&void 0!==n&&(e.toString().indexOf("RGSC_RAISE_UI_EVENT")>-1||e.toString().indexOf("RGSC_DEBUG_EVENT")>-1)&&n.toString().indexOf('"EventId":3')>-1&&n.toString().indexOf('"Action":"Debug"')>-1},s.skipLogging=function(e,t,n){return null!=e&&void 0!==e&&null!=n&&void 0!==n&&(e.toString().indexOf("RGSC_JS_FINISH_SIGN_IN")>-1||e.toString().indexOf("RGSC_SIGN_IN")>-1)&&t.toString().indexOf("json")>-1},l.hide=["text","password","userpassword","zipcode","ScAuthToken","ticket","userTicket","playerTicket","RememberedMachineToken","SteamAuthTicket","authTicket","volumeSerial","volumeName","computerName","fileSystemName","cpuInfo0","cpuInfo1","cpuInfo2","cpuInfo3","Fingerprint","SessionId","SessionKey","SessionTicket"],l.partial=["email","userlogin"];var g=i.reduce(l.hide.concat(l.partial),(function(e,t,n){return 0===n?t:e+"|"+t}),"");l.sensitiveKeys=new RegExp("(\\\\*?[\"'])("+g+")\\1 *:","ig"),s.containsSensitiveData=function(e,t){return null!=e&&null!=e&&null!=t&&null!=t&&(e.toString().indexOf("RGSC_SET_TEXT_BOX_HAS_FOCUS")>-1&&t.toString().indexOf('"IsPassword":true')>-1||t.toString().search(l.sensitiveKeys)>-1)},s.obfuscateValue=function(e,t){if(void 0===e||!e.length)return e;var n=new RegExp("(\\\\*?[\"'])("+t+")\\1 *: *(\\\\*?[\"']).+?\\3","ig"),i="$1$2$1:$3***$3",a=e.replace(n,i),r=new RegExp("(%3C)("+t+")(%3E).+?(%3C%2F\\2%3E)","ig");return i="$1$2$3***$4",a.replace(r,i)},s.obfuscateEmail=function(e,t){if(void 0===e||!e.length)return e;var n=new RegExp("(\\\\?[\"'])("+t+")\\1 *: *(\\\\?[\"'])(.).*?(.?)@(.+?)\\3","ig"),i="$1$2$1:$3$4***$5@$6$3",a=e.replace(n,i),r=new RegExp("(%3C)("+t+")(%3E)(.).*?(.?)@(.+?)(%3C%2F\\2%3E)","ig");return i="$1$2$3$4***$5@$6$7",a.replace(r,i)},s.obfuscateSensitiveData=function(e){var t=i.reduce(l.hide,(function(e,t){return s.obfuscateValue(e,t)}),e);return i.reduce(l.partial,(function(e,t){return s.obfuscateEmail(e,t)}),t)},s.safeReplace=function(e,t,n){return"string"==typeof e&&e.length>0?e.replace(t,n):e},s.truncateLogVal=function(e,t,n,i){return function(e,t,n,i){return i=i||997,n&&n.length&&n.length>i}(0,0,n,i)&&!function(e,t,n){return"RGSC_JS_RECEIVE_MESSAGE"===e&&'{"Commands":[{"Command":"SetTitle'===n.substr(0,33)}(e,0,n)&&(n=n.substr(0,i)+"..."),n},s.WriteDebugLog=function(e,t,n,a,r,o){var l=globals.isLog;if((globals.logJs||l)&&!s.skipLoggingEvents(e,t,n)&&(o||!s.skipLogging(e,t,n))){s.containsSensitiveData(e,n)&&(n=s.obfuscateSensitiveData(n)),n=s.truncateLogVal(e,t,n,997);var c=s.formatLogData(e,t,n);if(s.pubsub.publish("debug:UpdateDebugTable",c),l){var u=encodeURI((c.minutes+","+c.seconds+","+c.ms+","+c.method+","+c.key+","+c.value).replace(/\"/g,"'"));s.pubsub.publish("sdk:launcherDebugEvent",u)}!function(e,t,n,a){var r=globals.logJs,o=(globals.logDebugJs,e.method+" | SDK:"+globals.sdkVersion);(function(){var e=s.getTitleLang();if(m.indexOf(e)>-1)return!0;var t=s.getTitleLanguages(s.getTitleName());return i.contains(t,e)})()||(o+=" | Unsupported Lang:"+globals.titlelang);n=n||s.logController.debug,void 0!==e.key&&e.key.length&&(o+=" | "+e.key);void 0!==e.value&&e.value.length&&(o+=": "+e.value);var l=JSON.stringify({logData:encodeURIComponent(o)});!r||t!==s.logType.error&&"Error"!==e.key||function(e,t){if(s.isOffline()||s.isLocal())return;var n=s.getApiUrl(e);window.fetch(n,{body:t,credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Requested-With":"XMLHttpRequest"},method:"POST"}).then((function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t})).catch((function(e){s.WriteDebugLog("baseUtils.post","error",n+": "+e)}))}("api/"+n+"/writeerrorlogfile",l);globals.fullLog&&a&&(globals.debugLog+=o+"; ")}(c,a,r,o)}},s.WriteDllLog=function(e,t,n,i,a){"object"===(0,o.default)(n)&&(n=JSON.stringify(n)),s.WriteDebugLog(e,t,n,i,a,!0)},globals.debugLog="",s.errorCodeFromErrorObj=function(e){if(e&&"object"===(0,o.default)(e)){if(e.Error&&"object"===(0,o.default)(e.Error)&&e.Error.Code)return s.errorCodeFromErrorObj(e.Error);if(e.Code)return s.joinErrorCode(e.Code,e.CodeEx);if(e.Message)return e.Message}return e},s.extractErrorFromResponse=function(e){return e&&e.response&&e.response.data?s.errorCodeFromErrorObj(e.response.data):e&&e.data?s.errorCodeFromErrorObj(e.data):("object"===(0,o.default)(e)&&(e=s.errorCodeFromErrorObj(e)),e instanceof Error?e.message:"string"==typeof e?e:void 0)},s.countCharacters=function(e){for(var t=0,n=0,i=e.length;n<i;n++){var a=e[n].charCodeAt();t+=a<128?1:a<2048?2:a<65536?3:4}return t},s.fitStringToMaxChars=function(e,t){for(;s.countCharacters(e)>t;)e=e.slice(0,-1);return e},s.getPasswordRequirements=function(){return{chars:globals.passChars,min:globals.passMin,max:globals.passMax,minSignin:globals.passMin,maxSignin:globals.passMaxSignin,pattern:globals.pattern}},s.getShortLanguageCode=function(e){return(e||globals.titlelang).split("-")[0]};var m=["en-US","fr-FR","it-IT","de-DE","es-ES","ru-RU","ja-JP"],v=m.concat(["pt-BR","pl-PL","ko-KR","zh-TW","es-MX","zh-CN"]),b=[{title:s.titles.gta5,languages:v},{title:s.titles.mp3,languages:m.concat(["pt-BR","pl-PL","ko-KR"])},{title:s.titles.lanoire,languages:["en-US","fr-FR","it-IT","de-DE","es-ES","ru-RU"]},{title:s.titles.rdr2,languages:v},{title:s.titles.lanoirevr,languages:v},{title:s.titles.gta4,languages:m},{title:s.titles.gtasa,languages:["en-US","fr-FR","it-IT","de-DE","es-ES"]},{title:s.titles.gtavc,languages:["en-US","fr-FR","it-IT","de-DE","es-ES"]},{title:s.titles.gta3,languages:["en-US","fr-FR","it-IT","de-DE","es-ES"]},{title:s.titles.bully,languages:["en-US","fr-FR","it-IT","de-DE","es-ES","ru-RU","ja-JP"]}];return s.getTitleLanguages=function(e){var t=i.find(b,(function(t){return t.title===e}));return t?t.languages:m},s.getExternalLauncherFriendlyName=function(e){return{steam:"Steam",viveport:"Viveport",oculus:"Oculus",epic:"Epic",disk:"Disc"}[e]},s}.call(t,n,t,e))||(e.exports=i)},,,,,function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=(n(30),n(16)),a=n(4),r=n(14),o=n(1),s=n(103);n(62);n(104),globals.headerHeight="63px",globals.headerHeightBtm="60px";var l={};l.trimValueIfExceedMaxLength=function(e){var t=e.attr("maxlength")||255,n=e.val();o.countCharacters(n)>t&&e.val(o.fitStringToMaxChars(n,t))},t.fn.preload=function(){this.each((function(){t("<img/>")[0].src=this}))},l.pubsub=a.extend({},i.Events,o.pubsub),i.View.prototype.close=function(){this.remove(),this.off(),this.stopListening(),this.onClose&&this.onClose()},l.getApiUrl=function(e){return o.getApiUrl(e)},l.loadDateDropdowns=function(){if(!globals.underage){var e;t("#monthOfBirth option:first").prop("selected",!0),t("#dayOfBirth").empty();var n,i=[];for(e=1;e<32;e++)i.push('<option value="'+e+'">'+e+"</option>");t("#dayOfBirth").append(i.join(""));var a=l.getYears();for(i=[],t("#yearOfBirth").html('<option value="">-</option>'),e=0,n=a.length;e<n;e++)i.push('<option value="'+a[e]+'">'+a[e]+"</option>");t("#yearOfBirth").append(i.join("")),t("#signupDobContainer").show()}},l.getDaysForMonth=function(e,t){return o.getDaysForMonth(e,t)},l.getYears=function(){return o.getYears()},l.localizedDate=function(e,t){return r(e).format(t)},l.localizedDateFromUnix=function(e,t){var n=r.unix(e);return void 0===t?n.fromNow():n.format(t)},l.toLower=function(e){return null===e||"string"!=typeof e?e:e.toLowerCase()},l.addCommas=function(e){e=Math.round(e,0);for(var t=(e+="").split(".")[0],n=/(\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1,$2");return t},l.logType=o.logType,l.logController=o.logController,l.WriteDebugLog=function(e,t,n,i,a,r){o.WriteDebugLog(e,t,n,i,a,r)},l.WriteDllLog=function(e,t,n,i,a){return o.WriteDllLog(e,t,n,i,a)},l.SortSelect=function(e){var n=t(e);n.length>0&&n.each((function(e,n){var i=t(n).val(),a=t("option",t(n)),r=[];a.each((function(){r.push({val:t(this).val(),text:t(this).text()})})),r.humanSort();e=0;for(var o=r.length;e<o;e++)t(a[e]).val(r[e].val).text(r[e].text);t(n).val(i)}))},l.jhtmlEncode=function(e){return e?t("<div />").text(e).html().replace("'","&#39;"):""},l.jhtmlDecode=function(e){return e?t("<div />").html(e).text():""},l.stripHTMLNewLine=function(e){return e.replace(/<br ?\/?>/gi,"")},l.tryConvertRespToJson=function(e,t){if(!t||"html"!==t.dataType){var n=null;try{n=function(e){var t=e.dataTypes[0];return"xml"===e.dataType||"xml"===t||"text"===t&&"application/xml"===e.accepts.text}(t)?s(e):JSON.parse(e)}catch(t){o.WriteDebugLog("tryConvertRespToJson","JSON parsing exception",e)}return n||{}}},Array.prototype.humanSort=function(){return this.sort((function(e,t){var n,i;n="- "==e.text.substring(0,2)?e.text.substring(2).split(/(\d+)/):e.text.split(/(\d+)/),i="- "==t.text.substring(0,2)?t.text.substring(2).split(/(\d+)/):t.text.split(/(\d+)/);for(var a=0;a<Math.max(n.length,i.length);a++)if(n[a]!=i[a]){var r=isNaN(parseInt(n[a],10))?n[a]:parseInt(n[a],10),o=isNaN(parseInt(i[a],10))?i[a]:parseInt(i[a],10);return null==r||null==o?n.length-i.length:r<o?-1:1}return 0}))},l.isStoreV2Enabled=function(){return t.inArray(o.getTitleName(),["gta5","rdr2"])>-1},l.isEntitlementsV2Enabled=function(){var e=["launcher",o.titles.gta5,o.titles.rdr2,o.titles.lanoirevr,o.titles.gta4];return t.inArray(o.getTitleName(),e)>-1};var c=[o.titles.lanoire,o.titles.lanoirevr,o.titles.mp3];l.isQuitDisabled=function(){return a.contains(c,o.getTitleName())},l.doesCrewLeaveKillSession=function(){var e=[o.titles.gta5,o.titles.mp3];return a.contains(e,o.getTitleName())},l.isActLglEnabled=function(){var e=["launcher",o.titles.gta5,o.titles.rdr2,o.titles.lanoirevr,o.titles.gta4];return t.inArray(o.getTitleName(),e)>-1},l.isSteamV2Enabled=function(){var e=[o.titles.gta5];return t.inArray(o.getTitleName(),e)>-1},l.isGameSupported=function(){var e=[o.titles.lanoire,o.titles.mp3,o.titles.gta5,o.titles.launcher,o.titles.lanoirevr,o.titles.rdr2,o.titles.gta4];return t.inArray(o.getTitleName(),e)>-1},l.isMultiPlayerSupported=function(){var e=[o.titles.mp3,o.titles.gta5,o.titles.rdr2];return t.inArray(o.getTitleName(),e)>-1},l.isNetworkInfoSupported=function(){return l.isMultiPlayerSupported()},l.isLegacyServiceLayer=function(){return o.isLegacyServiceLayer()},l.crewImage404=function(){var e=globals.baseUrl+"images/emblems/128x128/rockstar1.png";e!=this.src&&(this.src=e),t(this).off("error")},l.initSpinner=function(e,t){try{t=a.extend({height:32,width:32,speed:80,image:globals.baseUrl+"images/spinners/spinner32x32black.png",frames:12},t),e.spinner("stop").spinner(t)}catch(e){}return e},l.stopSpinner=function(e){try{e.spinner("stop")}catch(e){}return e},l.removeLoading=function(e){var n=t("#"+e).find(".loadingMask");n.length?n.fadeOut(600,(function(){l.stopSpinner(t(this).find("span.loading")),n.removeClass("noMask")})):l.stopSpinner(t("#"+e).find("span.loading")).fadeOut()},l.parseUri=function(e){var t=document.createElement("a");return t.href=e,t},l.urlCombine=function(e,t){return o.urlCombine(e,t)},l.errorCode=function(e){return o.errorCode(e)},l.errorCodeLocKey=function(e){return o.errorCodeLocKey(e)},l.formatDob=function(e,t,n){return o.formatDob(e,t,n)},l.HideNonSteamFeatures=function(){"lanoire"!==o.getTitleName()&&(t("#signinAction fieldset.options").css({left:"-1000px",position:"fixed"}),t("#toggleAutoSignIn").parent().hide(),t("#profileSettings").find(".deleteLocalUserData").parent().hide())},l.ShowInvisibleMask=function(e,n){null!=e&&(e.each((function(){var e=t(this);e.data("maskTxt",e.text()),e.text(n)})),e.addClass("invisMask")),t("#invisibleMask").show(),setTimeout(l.HideInvisibleMask,1e4)},l.HideInvisibleMask=function(){var e=t(".invisMask");e.length&&(e.each((function(){var e=t(this),n=e.data("maskTxt");null!=n&&n.length&&e.text(n)})),e.removeClass("invisMask")),t("#invisibleMask").hide()},l.UpdateDebugTable=function(e){},l.ToggleCompareFriendElements=function(e){"success"===e||"true"===e?(t("#comparedFriendInfo").show(),t(".pointsFriend").show()):(t("#comparedFriendInfo").hide(),t(".pointsFriend").hide())},l.ActiveFriendsMenuId=function(){var e=t("#friendsPanel").find(".sideMenu a.on");if(e.length)return e.attr("id")},l.IsCountryListEmpty=function(){return 0===t("#editCountry").find("option").length},l.avatar404=function(e){e&&e.preventDefault();var n=t(e.currentTarget).hasClass("extraLargeAvatar")?globals.baseUrl+"images/avatars/128x128/default.png":globals.baseUrl+"images/avatars/default.png";n!=this.src&&(this.src=n),t(this).off("error")};var u=[o.titles.gta5,o.titles.rdr2];return l.customAvatarsEnabled=function(){return a.contains(u,o.getTitleName())},l.getSelfieUrl=function(e,t){return e&&t&&("gen8selfie"===t||"gen8mugshot"===t)?e.replace(/.jpg/gi,"_small.jpg"):e},o.pubsub.subscribe("utils:UpdateDebugTableOverride",(function(e,t){l.UpdateDebugTable(t)})),o.pubsub.subscribe("utils.stopSpinner",(function(e,t){l.stopSpinner(t)})),l}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(30),i=n(4),a=n(1),r={};void 0===window.globals&&(window.globals={});var o=window.globals;function s(e){return e.indexOf(o.baseAssetUrl)<0?o.baseAssetUrl+e:e}function l(e,t,n){var a=!1,r=n,o=window.getLocalizationKey(e,t),s=window.getLocalizationCache();return i.has(s,o)&&(a=!0,r=s[o]||n),{cache:a,text:r}}return window.getLocalizationKey=function(e,t){return"string"==typeof t?t.toLowerCase()+":"+e:""},window.isLocalizationFileCached=function(e){var t=window.getLocalizationCache();if(void 0===t||"string"!=typeof e)return!1;var n=e.toLowerCase();return void 0!==i.find(t,(function(e,t){return 0==t.toLowerCase().indexOf(n)}))},window.getLocalizationCache=function(){var e=o.localizationCache;return void 0!==e?e:{}},window.setLocalizationCache=function(e){o.localizationCache=e},window.appendLocalizationCache=function(e,t){if(!window.isLocalizationFileCached(t)){var n=i.map(e,(function(e,n){return[window.getLocalizationKey(n,t),e]}));e=i.object(n);var a=window.getLocalizationCache(),r=i.extend({},a,e);window.setLocalizationCache(r)}},r.getLocalizationCacheForContext=function(e){e.indexOf(o.baseAssetUrl)<0&&(e=o.baseAssetUrl+e);var t=window.getLocalizationCache(),n=window.getLocalizationKey("",e);return i.pick(t,(function(e,t){return 0===t.indexOf(n)}))},r.getLocalizedText=function(e){e.indexOf(o.baseAssetUrl)<0&&(e=o.baseAssetUrl+e);return Promise.resolve(t.ajax({url:e,type:"GET",dataType:"json",timeout:o.ajaxTimeout,silentFail:!0,success:function(t){void 0!==t&&t&&window.appendLocalizationCache(t,e)}}))},r.getTextAsync=function(e,t,n,i){return function e(t,n,i,o){n=s(n);var c=l(t,n,i);return c.cache?Promise.resolve(c.text):o?Promise.resolve(i):r.getLocalizedText(n).then((function(){return e(t,n,i,!0)})).catch((function(){a.WriteDebugLog("getLocalizedTextAsync","error","Unable to retrieve localization")}))}(e,"xml/"+(i=i||"shared")+"/"+t+o.titlelang+".json",n)},r.getTextCached=function(e,t,n,i){return function(e,t,n){var i=l(e,t=s(t),n);return i.cache?i.text:(r.getLocalizedText(t).catch((function(){a.WriteDebugLog("getLocalizedTextCached","error","Unable to retrieve localization")})),n)}(e,"xml/"+(i=i||"shared")+"/"+t+o.titlelang+".json",n)},r.getError=function(e,t){return r.getTextCached(e,"Errors",t)},r.getRequestDescription=function(e,t){if(null!=e&&e.length){var n=r.getError("request_"+e);if(null!=n&&n.length)return" ("+n+")"}if(window.debugLog){var i=t;if(null!=i&&i.length>20)return" (debug: "+(i=i.substr(-20))+")"}return""},r.getErrorWithCode=function(e,t){var n;a.stringHasContent(e)||(e=a.errorCodeFromErrorObj(e)),a.stringHasContent(e)||(e=a.errorCode("1000.1"));var i=void 0,o=e.split(".")[0],s=a.isScDownError(o);return s?n=r.getError("SC_Down"):(n=r.getError(a.errorCodeLocKey(e)))||(n=r.getError(a.errorCodeLocKey(o))),(s||"1002"==o)&&(i=r.getError("ErrorSupport")),n||(n=r.getError("GenericServerError")),{Message:n,SupportText:i,CodeDescription:r.getError("Code")+":"+e+r.getRequestDescription(t)}},r.localizeError=function(e){var t,n,i=e&&e.errorMsg,o=e&&e.errorMsgContext;if(a.stringHasContent(i)&&a.stringHasContent(o))switch(o){case"ErrorWithCode":i=r.getErrorWithCode(a.errorCode(i)).Message;break;case"ErrorWithCodeAndDesc":var s=r.getErrorWithCode(a.errorCode(i));i=s.Message+" "+s.CodeDescription;break;case"getUserBannedText":t=r.getTextCached("UserBanned","HomeSignin"),n=r.getTextCached("TermsofService","Register"),i=t.replace("[Terms of Service]",'<a href="http://www.rockstargames.com/legal" class="RGSCLoadExt">'+n+"</a>");break;case"Error":i=r.getError(i);break;default:i=r.getTextCached(i,o)}return void 0===i&&(i=r.getErrorWithCode().Message),i},r}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i,a=n(3),r=a(n(105)),o=a(n(5));void 0===(i=function(e){var t=n(4),i=n(1),a=n(44),s={cache:{cmdLineArgs:[]},scAuthTokenRequests:{requestIndex:0,callbacks:{}}};void 0===window.globals&&(window.globals={});var l=window.globals;function c(e){return window[e]}function u(e){return"string"==typeof e&&(e=c(e)),"function"==typeof e}s.isSdkFunction=u,s.isSdkAvailable=function(){return u("RGSC_READY_TO_ACCEPT_COMMANDS")},s.CallGameMethod=function(e,t,n,a){var r;null!=t&&"object"==(0,o.default)(t)&&(t=JSON.stringify(t)),i.WriteDllLog(e,"json",t);var s=c(e);if(u(s))try{return"RGSC_UI_STATE_RESPONSE"!=e||1==l.waitingResponse?("RGSC_UI_STATE_RESPONSE"==e&&(i.WriteDebugLog(e,"waitingResponse",l.waitingResponse),l.waitingResponse=!1),r=s(t),JSON.parse(r||"null")):r}catch(t){return"RGSC_GET_AVATAR"!==e&&i.WriteDebugLog(e,"error "+t.name,t.message,i.logType.error,i.logController[i.getTitleName()]),r}else if(null!=n){if(u(s=c(n))){if("RGSC_GET_PROFILE_LIST"==n)t=null,i.WriteDebugLog("fallback1:"+n,"jsonData",t),"string"==typeof(r=s(t))&&(r=JSON.parse(r));else if(i.WriteDebugLog("fallback1:"+n,"jsonData",t),"string"==typeof(r=s(t)))try{r=JSON.parse(r)}catch(e){return r}return r}if(null!=a&&u(s=c(a)))return i.WriteDebugLog("fallback2:"+a,"jsonData",t),"string"==typeof(r=s(t))&&(r=JSON.parse(r)),r}return r};var d=function(e){return e+"_ASYNC"};function f(e){return e?Promise.resolve(e):s.getCredsAsync().then((function(e){return e&&e.Ticket?0===e.Ticket.length?Promise.reject("emptyTicket"):e.Ticket:Promise.reject("missingTicket")})).catch((function(e){if(void 0!==l.ticket&&null!=l.ticket&&l.ticket.length>0)return Promise.resolve(l.ticket);i.WriteDebugLog("GetAuth","rejected",JSON.stringify(e),i.logType.error,i.logController[i.getTitleName()])}))}function p(e,t,n){var i={EventId:e,Data:{Action:t}};void 0!==n&&(i.Data.Parameter=n);var a=JSON.stringify(i);return a=a.replace(/","/gi,'", "'),s.CallGameMethod("RGSC_RAISE_UI_EVENT",a,"RGSC_RAISE_UI_EVENT_DEMO")}function h(e){if(e.resolutionEnum!==s.resolutionEnum[e.resolutionEnum])throw new Error("invalid resolution enum: "+e.resolutionEnum);return{fileName:e.filename,resolution:e.resolutionEnum}}function g(e){return Boolean(e&&"false"!==e&&"0"!==e&&"no"!==e)}s.CallGameMethodAsync=function(e,t,n,a){var r={};r.promise=new Promise((function(e,t){r.resolve=e,r.reject=t}));var l=d(e),c=!0;if("function"!=typeof window[l]&&(l=e,c=!1),c){var f=i.jsToDll(e);!function(e){if(u(e))return;window[e]=function(t){return function(e,t){i.WriteDllLog(e,"data",t,i.logType.debug);var n=function(e){if(null==m||void 0===e||void 0===m[e]||0===m[e].length)return!1;return m[e].shift()}(e);if("object"!==(0,o.default)(n)||!n.resolve)return i.WriteDebugLog(e,"failed to resolve","",i.logType.error,i.logController[i.getTitleName()]),i.WriteDllLog(e,"failed to resolve",t),t;if("string"==typeof t)try{t=JSON.parse(t)}catch(n){e===i.jsToDll("RGSC_GET_ROS_CREDENTIALS")&&t&&i.WriteDebugLog(i.jsToDll("RGSC_GET_ROS_CREDENTIALS"),"JSON.parse exception",t,i.logType.error,i.logController[i.getTitleName()])}n.resolve(t);return}(e,t)}}(f),function(e){void 0===m[e.fn]&&(m[e.fn]=[]);m[e.fn].push(e.dfd)}({fn:f,dfd:r})}var p=s.CallGameMethod(l,t,n,a);return c||r.resolve(p),r.promise},s.getCredsAsync=function(){return s.CallGameMethodAsync("RGSC_GET_ROS_CREDENTIALS",null,"RGSC_GET_ROS_CREDENTIALS_DEMO")},s.GetAuthHeaderAsync=function(e){return f(e).then(a.wrapAuthHeader)},s.GetAuthHeaderAsyncV8=function(e){return f(e).then(a.wrapAuthHeaderV8)},s.requestUiState=function(e){null==e&&(e=!1);var t={Visible:e};s.CallGameMethod("RGSC_REQUEST_UI_STATE",t,"RGSC_REQUEST_UI_STATE_DEMO")},s.launchExternalBrowserForUrl=function(e){if("pcros"==l.platform)try{s.CallGameMethod("RSGC_LAUNCH_EXTERNAL_WEB_BROWSER",'{ "Url":"'+e+'"}',"RGSC_LAUNCH_EXTERNAL_WEB_BROWSER_DEMO")}catch(e){i.WriteDebugLog("launchExtBrowserForUrl","Error",e.message,i.logType.error,i.logController[i.getTitleName()])}else i.WriteDebugLog("launchExtBrowserForUrl","Error","platform: "+i.getGamePlatform())},s.launchExternalBrowser=function(e){return"pcros"==l.platform&&e?(s.launchExternalBrowserForUrl(this.href),!1):(i.WriteDebugLog("launchExtBrowser","Error","platform: "+i.getGamePlatform()+", has RGSCLoadExt class:"+e),!1)},s.signOutAsync=function(e){return e?s.CallGameMethodAsync("RGSC_SIGN_OUT_EX",e,"RGSC_SIGN_OUT","RGSC_SIGN_OUT_EX_DEMO"):s.CallGameMethodAsync("RGSC_SIGN_OUT",null,"RGSC_SIGN_OUT_DEMO")},s.quitGame=function(){return i.WriteDebugLog("sdk.quitGame"),s.launcherWindowsEvent("Close")},s.exitLauncher=function(){return i.WriteDebugLog("sdk.exitLauncher"),s.launcherWindowsEvent("Quit")},s.minimizeUi=function(){return i.WriteDebugLog("sdk.minimizeUi"),s.launcherWindowsEvent("Minimize")},s.maximizeUi=function(){return i.WriteDebugLog("sdk.maximizeUi"),s.launcherWindowsEvent("Maximize")},s.launcherWindowsEvent=function(e){return p(1,e)},s.launcherUiEvent=function(e){return p(2,"LauncherButton",e)},s.launcherNotifyEvent=function(e){return l.receiveMsgEnabled=!0,p(3,e)},s.launcherData=function(e,t){return p(4,e,t)},s.resolutionEnum={useLocal:"useLocal",useCloud:"useCloud",ignore:"ignore",cancel:"cancel",useCurrent:"useCurrent",useLocalBackup1:"useLocalBackup1",useLocalBackup2:"useLocalBackup2"},s.getCloudSavesEnabledSetting=function(e){return e=e||i.getTitleName(),s.CallGameMethodAsync("RGSC_GET_CLOUD_SAVE_ENABLED",{RosTitleName:e},"RGSC_GET_CLOUD_SAVE_ENABLED_DEMO")},s.updateCloudSavesEnabledSetting=function(e,t){return t=t||i.getTitleName(),s.CallGameMethodAsync("RGSC_SET_CLOUD_SAVE_ENABLED",{Enabled:e,RosTitleName:t},"RGSC_SET_CLOUD_SAVE_ENABLED_DEMO")},s.resolveCloudConflict=function(e){if(null!=e&&"object"===(0,o.default)(e)){var n=[];if(Array.isArray(e))n=t.map(e,h);else{if(!e.resolutionEnum)return;n.push(h(e))}return p(3,"ResolveCloudConflict",n)}},s.resolveLocalBackup=function(e){if(null!=e&&"object"===(0,o.default)(e)){var n=[];if(Array.isArray(e))n=t.map(e,h);else{if(!e.resolutionEnum)return;n.push(h(e))}return p(3,"ResolveLocalBackup",n)}},s.resolveConflicts=function(e){if(null!=e&&"object"===(0,o.default)(e))return p(3,"ResolveCloudConflict",e)},s.sendCloudState=function(e){return p(3,"CloudState",{state:e})},s.migrateGfwlSaves=function(e,t){return p(3,"GfwlSaveMigrationFolderSelected",{titleName:e,folderIdx:t})},s.requestGfwlMigration=function(e){return p(3,"GfwlSaveMigration",{titleName:e})},s.notifyDllOfTextboxFocus=function(e,t,n,i,a,r){var o={HasFocus:e,Text:null!=t?t:"",ForwardToGame:null==n||n,IsPassword:i||!1};isNaN(a)&&(a=0),o.MaxNumChars=a||255,r&&(o.Prompt=r),s.CallGameMethod("RGSC_SET_TEXT_BOX_HAS_FOCUS",JSON.stringify(o),"RGSC_SET_TEXT_BOX_HAS_FOCUS_DEMO")},s.getVersionInfoAsync=function(){return s.CallGameMethodAsync("RGSC_GET_VERSION_INFO",null,"RGSC_GET_VERSION_INFO_DEMO")},s.getCmdLineArgsAsync=function(){return t.isEmpty(s.cache.cmdLineArgs)?s.CallGameMethodAsync("RGSC_GET_COMMAND_LINE_ARGUMENTS",null,"RGSC_GET_COMMAND_LINE_ARGUMENTS_DEMO").then((function(e){return e&&e.Arguments&&e.Arguments.length?e.Arguments:[]})).then((function(e){return t.map(e,(function(e){if("string"==typeof e){var t=e.toLowerCase().split("=");return{key:"-"===t[0][0]?function(e){"string"==typeof e&&e.length>0&&(e=e.substr(1));return e}(t[0]):t[0],val:!(t.length>1)||t[1]}}}))})).then((function(e){return t.filter(e,(function(e){return"object"===(0,o.default)(e)&&null!==e}))})).then((function(e){return s.cache.cmdLineArgs=s.cache.cmdLineArgs.concat(e),e})).catch((function(e){return i.WriteDebugLog("getCmdLineArgsAsync","error",e,i.logType.error,i.logController.launcher),[]})):Promise.resolve(s.cache.cmdLineArgs)},s.getCmdLineArgAsync=function(e){if("string"==typeof e)return s.getCmdLineArgsAsync().then((function(n){if(!n||!n.length)return null;var i=e.toLowerCase(),a=t.find(n,(function(e){return e.key===i}));return a||null})).catch((function(e){return i.WriteDebugLog("getCmdLineArgsAsync","error",e,i.logType.error,i.logController.launcher),[]}));i.WriteDebugLog("getCmdLineArgsAsync","error","invalid argument",i.logType.error,i.logController.launcher)},s.isMtlPreLaunchSettingsCmdLine=function(){return s.getCmdLineArgAsync("showSettings").then((function(e){return g(e&&e.val)})).catch((function(e){return i.WriteDebugLog("sdk.isMtlPreLaunchSettingsCmdLine","error",e,i.logType.error,i.logController.launcher),!1}))},s.isReduxLoggingEnabled=function(){return s.getCmdLineArgAsync("reduxLog").then((function(e){return g(e&&e.val)})).catch((function(e){return i.WriteDebugLog("sdk.isReduxLoggingEnabled","error",e,i.logType.error,i.logController.launcher),!1}))},s.getSteamAppIdAsync=function(){return s.getCmdLineArgAsync("steamAppId").then((function(e){var t=e&&e.val;return i.stringHasContent(t)&&(t=parseInt(t,10)),t})).catch((function(e){i.WriteDebugLog("sdk.getSteamAppIdAsync","error",e,i.logType.error,i.logController.launcher)}))},s.getOculusAppNameAsync=function(){return s.getCmdLineArgAsync("oculusApp").then((function(e){return e&&e.val})).catch((function(e){i.WriteDebugLog("sdk.getOculusAppNameAsync","error",e,i.logType.error,i.logController.launcher)}))},s.getViveAppNameAsync=function(){return s.getCmdLineArgAsync("viveportApp").then((function(e){return e&&e.val})).catch((function(e){i.WriteDebugLog("sdk.getViveAppNameAsync","error",e,i.logType.error,i.logController.launcher)}))};s.isRefreshSteamTicketAsyncAvailable=function(){return u(d("RGSC_REFRESH_STEAM_TICKET"))},s.refreshSteamTicketAsync=function(){return s.CallGameMethodAsync("RGSC_REFRESH_STEAM_TICKET",null,"RGSC_REFRESH_STEAM_TICKET_DEMO")};s.isRefreshEpicAccessTokenAsyncAvailable=function(){return u(d("RGSC_REFRESH_EPIC_ACCESS_TOKEN"))},s.refreshEpicAccessTokenAsync=function(){return s.CallGameMethodAsync("RGSC_REFRESH_EPIC_ACCESS_TOKEN",null,"RGSC_REFRESH_EPIC_ACCESS_TOKEN_DEMO")},s.retailOutput=function(e){if("string"==typeof e&&e.length>4e3&&(e=e.substr(0,3997)+"..."),"function"!=typeof window.RGSC_RETAIL_OUTPUT)return p(3,"Log",e),!1;var t={EventId:3,Data:{Action:"Log"}};void 0!==e&&(t.Data.Parameter=e);var n=JSON.stringify(t);return s.CallGameMethod("RGSC_RETAIL_OUTPUT",n,"RGSC_RAISE_UI_EVENT_DEMO")},s.debugEvent=function(e){if("string"==typeof e&&e.length>4e3&&(e=e.substr(0,3997)+"..."),"function"!=typeof window.RGSC_DEBUG_EVENT)return p(3,"Debug",e),!1;var t={EventId:3,Data:{Action:"Debug"}};void 0!==e&&(t.Data.Parameter=e);var n=JSON.stringify(t);return s.CallGameMethod("RGSC_DEBUG_EVENT",n,"RGSC_RAISE_UI_EVENT_DEMO")},s.sendRequestIdResponse=function(e,n,a){t.isNumber(e)||i.WriteDebugLog("sdk.RequestIdResponse","Error","requestId not a number"),t.isObject(a)||i.WriteDebugLog("sdk.RequestIdResponse","Error","data is not an object");var r={RequestId:e,Data:a};return s.CallGameMethod("RGSC_REQUEST_ID_RESPONSE",r,"RGSC_REQUEST_ID_RESPONSE_DEMO")},s.updateHibernationData=function(e){return s.CallGameMethod("RGSC_SET_HIBERNATION_DATA",{Data:e},"RGSC_SET_HIBERNATION_DATA_DEMO")},s.didSteamPurchaseFail=function(){var e,t=s.CallGameMethod("RGSC_DID_LAST_STEAM_PURCHASE_FAIL",null,"RGSC_DID_LAST_STEAM_PURCHASE_FAIL_DEMO");return"object"===(0,o.default)(t)&&void 0!==t.Result?e=JSON.parse(t.Result):"boolean"==typeof t&&(e=JSON.parse(t)),Boolean(e)},s.attemptAutoSignin=function(){return s.CallGameMethod("RGSC_REQUEST_AUTOSIGNIN",null,"RGSC_REQUEST_AUTOSIGNIN_DEMO")};var m=[];return s.clearAsyncFnInvocation=function(e){null!=m&&void 0!==e&&void 0!==m[e]&&0!==m[e].length&&(m[e]=[])},s.getScAuthToken=function(){return new Promise((function(e,t){if(s.isSdkAvailable()&&!s.isSdkFunction("RGSC_REQUEST_SC_AUTH_TOKEN"))return t(new Error("Retrieval of scAuthToken from SDK is not supported"));var n=s.scAuthTokenRequests.requestIndex;s.scAuthTokenRequests.requestIndex=s.scAuthTokenRequests.requestIndex+1,s.scAuthTokenRequests.callbacks[n]=[e,t],s.CallGameMethod("RGSC_REQUEST_SC_AUTH_TOKEN",{RequestId:n},"RGSC_REQUEST_SC_AUTH_TOKEN_DEMO")}))},i.pubsub.subscribe("SDK.RGSC_JS_REQUEST_SC_AUTH_TOKEN_RESULT",(function(e,t){var n=JSON.parse(t);if("number"==typeof n.RequestId&&s.scAuthTokenRequests.callbacks[n.RequestId]){var i=(0,r.default)(s.scAuthTokenRequests.callbacks[n.RequestId],2),a=i[0],o=i[1];return delete s.scAuthTokenRequests.callbacks[n.RequestId],n.Result?a(n):o(new Error("Could not retrieve scAuthToken from SDK",n))}})),i.pubsub.subscribe("sdk:launcherDebugEvent",(function(e,t){s.debugEvent(t)})),i.pubsub.subscribe("sdk.launchExternalBrowserForUrl",(function(e,t){s.launchExternalBrowserForUrl(t)})),i.pubsub.subscribe("sdk.requestUiState",(function(e,t){s.requestUiState(t)})),i.pubsub.subscribe("sdk.writeLocalLogFile",(function(e,n){var a,r,o,l,c,u;a=n.method,r=n.key,o=n.value,l=n.error,c=n.errorLocation,u=n.stack,s.getCmdLineArgAsync("scDebugLogging").then((function(e){if(e){var n=e.val;if(n&&"false"!==n&&"0"!==n&&"no"!==n){var d=i.formatLogData(a,r,o,l,c,u),f=t.values(d).join(",");f=(f=i.truncateLogVal(a,r,f,997)).replace(/"/g,"'"),s.retailOutput(f)}}})).catch((function(){}))})),s}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i,a;i=[n(53)],void 0===(a=function(e){function t(e,t,n){return void 0!==e&&void 0!==t&&isNaN(e)&&isNaN(t)?e.toLowerCase()==t.toLowerCase()?n.fn(this):n.inverse(this):e==t?n.fn(this):n.inverse(this)}return e.registerHelper("ifequals",t),t}.apply(t,i))||(e.exports=a)},,,function(e,t,n){"use strict";var i,a,r=n(3)(n(5));i=[n(0),n(16),n(4),n(6),n(1),n(7),n(136),n(137)],void 0===(a=function(e,t,n,i,a,o,s,l){var c={};return c.showModal=function(){e("body").addClass("modal")},c.hideModal=function(){e("body").removeClass("modal")},c.ShowConfirmModal=function(e,t,n,i,r,o,s,l){a.WriteDebugLog("ShowConfirmModal","statusMessage, playerNickname",+e+","+t),a.isScuiVisible()&&(window.amd.modals.ConfirmModalView=new c.ConfirmModalView({Message:e,Name:t,pubsubKey:n,pubsubParams:i,Btn1Text:r,Btn2Text:o,Title:s,SubMessage:l,FocusBtn:"cancel"}))},c.ShowErrorModal=function(t){if(a.isScuiVisible()&&!(e("#confirmModal").find(".statusbar").length>0)){var n=t.errorCode,i=t.message;if(n&&!i){var s=t.errorText||o.getErrorWithCode(n);t={errorCode:n,errorText:s,message:s.Message,supportText:s.SupportText,codeDesc:s.CodeDescription}}var l=t.supportText,u=t.codeDesc,d=t.title||o.getError("ErrorHasOccurred");"object"===(0,r.default)(i)&&(u=i.CodeDescription,i=i.Message),u&&(i=(i||"")+" "+u),c.ShowConfirmModal(i,null,null,null,"Close",null,d,l)}},c.ShowFeatureDisabledModal=function(e,t,n,i,a){var r=o.getError("FeatureDisabled");void 0!==t&&t.length||(t=o.getError("FeatureDisabledDesc")),c.ShowErrorModal({errorCode:e,message:t,contentEl:n,supportText:i,errorCodeDesc:a,title:r})},c.ConfirmModalView=t.View.extend({el:"#confirmModal",events:{"click .cancel":"cancel","click .confirm":"confirm","keydown .cancel":"setBtnFocus","keydown .confirm":"setBtnFocus"},render:function(){c.showModal();var e={Message:this.getMessage(),Name:this.model.get("Name"),ShowButtons:!0,btn1Text:o.getTextCached(this.model.get("Btn1Text"),"HomeSignin"),btn2Text:o.getTextCached(this.model.get("Btn2Text"),"HomeSignin"),Title:this.model.get("Title"),SubMessage:this.getSubMessage()},t=a.renderCompiledTemplate(l,e);this.$el.append(t);var n=this.$(".statusbar");n.show().css({top:globals.headerHeight}),n.find("div").animate({"margin-top":"150px"},300,"easeOutQuart");var i=void 0!==this.model.get("FocusBtn")?this.model.get("FocusBtn"):"cancel";return this.$el.find("."+i).focus(),this},getMessage:function(){var e=this.model.get("Message");if(null==e)return e;var t=this.model.get("Name");t=this.model.get("NameWrapper").replace(/{name}/,i.jhtmlEncode(t));var n=this.extractWhitelistedAnchorTags(e),a=n.anchortags;return e=n.msg,(e=i.jhtmlEncode(i.stripHTMLNewLine(e))).indexOf("[")>=0?(e=(e=e.replace(/\[PlayerNickname\]/gi,t)).replace(/\[CrewName\]/gi,t)).indexOf("[anchortag]")>=0&&(e=this.replaceAnchorTags(a,e)):e+=" "+t,e},getSubMessage:function(){var e=this.model.get("SubMessage");if(null==e)return e;var t=this.extractWhitelistedAnchorTags(e),n=t.anchortags;return e=t.msg,(e=i.jhtmlEncode(i.stripHTMLNewLine(e))).indexOf("[anchortag]")>=0&&(e=this.replaceAnchorTags(n,e)),e},extractWhitelistedAnchorTags:function(t){var n=t.match(/\<a[^>]*>([^<]+)<\/a>/g);if(null==n||0==n.length)return{anchortags:void 0,msg:t};for(var i=n.slice(),a=globals.redirectUrlWhitelist.split(","),r=n.length-1;r>-1;r--){var o=n[r],s=this.getAnchorTagHostName(o),l=s.replace(/^www./i,"");e.inArray(s,a)>-1||e.inArray(l,a)>-1?t=t.replace(o,"[anchortag]"):i.splice(r,1)}return{anchortags:i,msg:t}},getAnchorTagHostName:function(t){var n=e(document.createElement("div"));return n.append(t),n.find("a")[0].hostname},replaceAnchorTags:function(e,t){return e.forEach((function(e){t=t.replace("[anchortag]",e)})),t},confirm:function(e){e.preventDefault(),this.closeConfirmationDialog(),i.pubsub.trigger(this.model.get("pubsubKey"),this.model.get("pubsubParams")),a.pubsub.publish(this.model.get("pubsubKey"),this.model.get("pubsubParams"))},cancel:function(){null!=this.model.get("cancelPubsubKey")&&(i.pubsub.trigger(this.model.get("cancelPubsubKey"),this.model.get("cancelPubsubParams")),a.pubsub.publish(this.model.get("cancelPubsubKey"),this.model.get("cancelPubsubParams"))),this.closeConfirmationDialog()},closeConfirmationDialog:function(){c.hideModal();var e=this.$(".statusbar");e.find("div").animate({"margin-top":"-200px"},200,"easeInQuart",(function(){e.css({top:"-100%"}),e.remove()})),this.onClose()},onClose:function(){this.$el.find(".statusbar").remove(),this.undelegateEvents()},setBtnFocus:function(e){if(9==(e.keyCode||e.which)){e.preventDefault();var t=this.$el.find(".cancel"),n=this.$el.find(".confirm");n.is(":focus")?t.focus():n.focus()}},initialize:function(e){n.bindAll(this,"render","setBtnFocus"),this.model=new s.ModalModel(e),this.render()}}),a.pubsub.subscribe("modal.hide",c.hideModal),a.pubsub.subscribe("modal.showConfirmModal",(function(e,t){return c.ShowConfirmModal(t.statusMessage,t.playerNickname,t.pubsubKey,t.pubsubParams,t.btn1Text,t.btn2Text,t.title,t.subMessage)})),c}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t={category:{profile:"Profile",settings:"Settings",store:"Store",activation:"Activation",message:"Message",friend:"Friend",crew:"Crew",game:"Game",advert:"Advert",mfa:"MFA",notifications:"Notifications",policy:"Policy",error:"Error",marketing:"Marketing"},action:{profile_sign_in:"Sign In",profile_sign_in_launcher:"Sign In - Launcher",profile_sign_in_steam_linked:"Sign In - Steam Linked",profile_sign_in_epic_linked:"Sign In - Epic Linked",profile_sign_out:"Sign Out",profile_sign_in_failure_steam_already_linked:"Sign In Failure - Steam Already Linked",profile_sign_in_failure_other_steam_error:"Sign In Failure - Other Steam Error",profile_sign_in_failure_other_epic_error:"Sign In Failure - Other Epic Error",profile_sign_in_recaptcha_failure:"Sign In Failure - Invalid ReCaptcha",profile_sign_in_failure_banned:"Sign In Failure - Banned",profile_sign_in_auth_failed:"Sign In Failure - Auth Failed",profile_sign_in_failure:"Sign In Failure - Unknown Error",profile_sign_in_failure_too_many_login_attempts:"Sign In Failure - Too Many Login Attempts",profile_sign_in_offline:"Sign In Offline",profile_sign_in_password_reset:"Sign In - Reset Password",profile_create_account_scui_submit:"Create Account SCUI Submit",profile_create_account_scui_success:"Create Account SCUI Success",profile_create_account_mtl_submit:"Create Account MTL - Submit",profile_create_account_mtl_under_age:"Create Account MTL - Under Age",profile_create_account_mtl_nickname_taken:"Create Account MTL - Nickname Taken",profile_create_account_mtl_email_taken:"Create Account MTL - Email Taken",profile_create_account_mtl_success:"Create Account MTL - Success",profile_create_account_mtl_password_reset:"Create Account MTL - Reset Password",settings_profile_edit_nickname:"Edit Nickname",settings_profile_edit_email:"Edit Email",settings_profile_edit_password:"Edit Password",settings_profile_edit_country:"Edit Country",settings_profile_edit_auto_sign_in:"Edit Auto Sign In",settings_profile_edit_save_email:"Edit Remember Me",settings_profile_edit_hide_notifications:"Edit Hide Notifications",settings_privacy_change_platform_visibility:"Change Platform Visibility",settings_privacy_change_profile_visibility:"Change Profile Visibility",settings_privacy_change_country_visibility:"Change Country Visibility",settings_privacy_change_stats_visibility:"Change Stats Visibility",settings_game_change_presence_visibility:"Change Game Presence Visibility",settings_game_change_cloud_save_enabled:"Change Cloud Save Enabled Status",settings_account_linking_link:"Link Account",settings_account_linking_unlink:"UnLink Account",settings_block_list_unblock:"Unblock Player",settings_change_avatar:"Change Avatar",friend_delete:"Delete Friend",friend_invite_accept:"Accept Friend Invite",friend_invite_decline:"Decline Friend Invite",friend_search:"Search for Player",friend_invite_send:"Send Friend Invite",friend_cancel_invite:"Cancel Friend Invite",crew_leave:"Leave Crew",crew_make_active:"Make Active Crew",crew_members_search:"Search for Crew Member",crew_invite_accept:"Accept Crew Invite",crew_invite_decline:"Decline Crew Invite",crew_invite_sent:"Sent Crew Invite",crew_delete_request:"Delete Crew Join Request",crew_search:"Search for Crew",crew_join:"Join Crew",crew_request_invite:"Request Crew Invite",game_invite_accept:"Accept Game Invite",game_invite_decline:"Decline Game Invite",game_quit:"Game Quit",dashboard_cta_button_clicked:"Game Dashboard CTA Button Clicked",dashboard_sidebar_clicked:"Game Dashboard Sidebar Clicked",activation_check_success:"Check Code Success",activation_check_failed:"Check Code Fail",activation_redeem_success:"Redeem Code Success",activation_redeem_failed:"Redeem Code Fail",message_send:"Send Message",message_reply:"Send Reply",message_delete:"Delete Message",advert_storeWithSearch:"Advert Clicked - Store with Search",advert_storeWithCategory:"Advert Clicked - Store with Category",advert_storeDefault:"Advert Clicked - Default Store",advert_findCrew:"Advert Clicked - Find Crew",advert_goToUrl:"Advert Clicked - Go to Url",marketing_items_visible:"Marketing_Items_Visible",mfa_signIn_submit_verification_code:"MFA SignIn Submit Verification Code",mfa_signIn_submit_verification_code_success:"MFA SignIn Submit Verification Code Success",mfa_signIn_submit_verification_code_error:"MFA SignIn Submit Verification Code Error",mfa_signIn_invalid_verification_code_entered:"MFA SignIn Invalid Verification Code Entered",mfa_support_click:"MFA Support Link Clicked",notification_Network:"Network Notification Received",notification_Achievements:"Achievements Notification Received",notification_GameInvites:"Game Invites Notification Received",notification_MessageReceived:"Message Received Notification Received",notification_FriendRequestReceived:"Friend Request Received Notification Received",notification_FriendRequestAccepted:"Friend Request Accepted Notification Received",notification_Information:"Information Notification Received",notification_DownloadStatus:"Download Status Notification Received",notification_DuplicateSignedOut:"Duplicate Signed Out Notification Received",notification_FriendRequests:"Friend Request Notification Received",notification_FriendsOnline:"Friends Online Notification Received",notification_RosClanInvite:"Crew Invite Notification Received",notification_JoinRequest:"Crew Join Request Notification Received",notification_RosClanMemberPromoted:"Crew Member Promoted Notification Received",notification_ConnectionLost:"Connection Lost Notification Received",notification_Achievements_Click:"Achievements Notification Clicked",notification_Information_Click:"Information Notification Clicked",notification_Friends_Click:"Friends Notification Clicked",notification_FriendRequest_Click:"Friend Request Notification Clicked",notification_GameInvites_Click:"Game Invites Notification Clicked",notification_MessageReceived_Click:"Message Received Notification Clicked",notification_RosClanInvite_Click:"Crew Invite Notification Clicked",notification_JoinRequest_Click:"Crew Join Request Notification Clicked",policy_pp_accept:"Privacy Policy Accepted",policy_pp_deny:"Privacy Policy Denied",policy_tos_accept:"Terms of Service Accepted",policy_tos_deny:"Terms of Service Denied",policy_eula_accept:"End User Level Agreement Accepted",policy_eula_deny:"End User Level Agreement Denied",error_fatal:"Fatal Error",rdr2_select_edition:"RDR2 Pre-purchase: Select Edition",rdr2_compare_editions:"RDR2 Pre-purchase: Compare Editions",rdr2_view_offer_games:"RDR2 Pre-purchase: View Offered Games",rdr2_close_offer_games:"RDR2 Pre-purchase: Close Offered Games",rdr2_select_promo_game:"RDR2 Pre-purchase: Select Promotional Game",rdr2_deselect_promo_game:"RDR2 Pre-purchase: Deselect Promotional Game"},label:{dashboard_exit:"Dashboard Exit Button",dashboard_install:"Dashboard Install Button",dashboard_install_external:"Dashboard Install External Button",dashboard_update:"Dashboard Update Button",dashboard_launch_external:"Dashboard Launch External",dashboard_play:"Dashboard Play Button",dashboard_activate:"Dashboard Activate Button"},paymentType:{creditcard:"CreditCard",paypal:"PayPal",undefined:"Undefined"},dimensionsMetricsMap:{environment:"dimension1",validationStatus:"dimension2",memberId:"dimension3",loginState:"dimension4",creationDate:"dimension5",creationPath:"dimension6",platformsOwned:"dimension7",gamesOwned:"dimension8",isFriendCount:"dimension9",isCrewCount:"dimension10",linkedAccounts:"dimension11",currentlyPlaying:"dimension12",game:"dimension13",platform:"dimension14",previousPurchase:"dimension16",lastPurchaseDate:"dimension17",score:"dimension18",paymentType:"dimension19",offerRedeemed:"dimension20",pia1:"dimension15",pia2:"dimension21",pia3:"dimension22",pia4:"dimension23",pia5:"dimension24",pia6:"dimension25",mfaEnabled:"dimension26",language:"dimension27",gamePlatform:"dimension28",friendCount:"metric1",crewCount:"metric2",daysOfMembership:"metric3",offlineSigninCount:"metric4"},dimensions:{environment:"environment",validationStatus:"validationStatus",memberId:"memberId",loginState:"loginState",creationDate:"creationDate",creationPath:"creationPath",platformsOwned:"platformsOwned",gamesOwned:"gamesOwned",isFriendCount:"isFriendCount",isCrewCount:"isCrewCount",linkedAccounts:"linkedAccounts",currentlyPlaying:"currentlyPlaying",game:"game",platform:"platform",previousPurchase:"previousPurchase",lastPurchaseDate:"lastPurchaseDate",score:"score",paymentType:"paymentType",offerRedeemed:"offerRedeemed",pia1:"pia1",pia2:"pia2",pia3:"pia3",pia4:"pia4",pia5:"pia5",pia6:"pia6",mfaEnabled:"mfaEnabled",language:"language",gamePlatform:"gamePlatform"},metrics:{friendCount:"friendCount",crewCount:"crewCount",daysOfMembership:"daysOfMembership",offlineSigninCount:"offlineSigninCount"}};return t}.call(t,n,t,e))||(e.exports=i)},,function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(30),i=n(1),a=n(4),r=n(8),o=n(23),s={};void 0===window.globals&&(window.globals={});var l=window.globals;return s.getStdAjaxData=function(){return{platform:l.platform,env:l.rosEnvironment,title:i.getTitleName(),version:l.RosTitleVersion,gamePlatform:i.getGamePlatform(),RosVersion:l.RosTitleVersion}},s.ajax=function(e){return t.ajax(e)},s.fetch=function(e,t){return o.fetch(e,t)},s.signInAsync=o.signInAsync,s.getCountries=o.getCountries,s.validateAccountDetails=o.validateAccountDetails,s.createAccount=o.createAccount,s.resetPassword=o.resetPassword,s.updateLanguage=o.updateLanguage,s.UpdateDOBAndCountry=o.UpdateDOBAndCountry,s.updateDob=o.updateDob,s.updateCountry=o.updateCountry,s.requestMultiplayerPresenceInfo=o.requestMultiplayerPresenceInfo,s.GetUserNetworks=function(e,t,n,a,o){i.WriteDebugLog("GetUserNetworks","rockstarId",e);var c='{ "env":"'+l.rosEnvironment+'","title":"'+i.getTitleName()+'","version":'+l.RosTitleVersion+',"rockstarId":"'+e+'","email":"'+t+'","nickname":"'+n+'" }';r.GetAuthHeaderAsync().then((function(e){s.ajax({type:"POST",url:i.getApiUrl("/api/profile/getusernetworks"),services:["accounts"],headers:e,data:c,contentType:"application/json; charset=utf-8",dataType:"xml",requestDescription:"UserNetworks",fatalError:o,success:function(e){"function"==typeof a&&a(e)}})}))},s.UpdateLinkedAccounts=function(e,t,n,a){r.GetAuthHeaderAsync().then((function(r){s.ajax({type:"POST",url:i.getApiUrl("/api/profile/updatelinkedaccounts"),services:["accounts"],headers:r,data:JSON.stringify({NetworkName:e,LinkSuccess:t}),contentType:"application/json; charset=utf-8",dataType:"xml",requestDescription:"UpdateLinkedAccounts",fatalError:a,success:function(e){"function"==typeof n&&n(e)}})}))},s.checkPasswordAsync=function(e){var t={password:e,env:l.rosEnvironment,title:i.getTitleName(),version:l.RosTitleVersion};return Promise.resolve(s.ajax({type:"POST",url:i.getApiUrl("/api/profile/checkpassword"),services:["accounts","registration"],data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"xml",requestDescription:"CheckPassword"}))},s.updateAvatar=function(e,t,n,a){return r.GetAuthHeaderAsync().then((function(r){var o={AvatarUrl:e,AvatarId:t,AvatarContextId:n,CustomAvatar:void 0!==n&&""!==n};return s.ajax({type:"POST",url:i.getApiUrl("/api/profile/UpdateAvatar"),services:["accounts"],headers:r,data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"xml",fatalError:a,requestDescription:"UpdateAvatar"})}))},s.updateLegacyProfile=function(e,t,n,o){return r.GetAuthHeaderAsyncV8().then((function(r){var l=JSON.stringify(a.extend(s.getStdAjaxData(),{avatarUrl:e,countryCode:t,dob:n}));return s.ajax({type:"POST",url:i.getApiUrl("/api/profile/UpdateAccount"),headers:r,data:l,contentType:"application/json; charset=utf-8",dataType:"xml",requestDescription:"UpdateProfile",fatalError:o})}))},s.getAvatarsAsync=function(){return r.GetAuthHeaderAsync().then((function(e){return s.ajax({type:"POST",headers:e,url:i.getApiUrl("/api/profile/GetAvatars"),contentType:"application/json; charset=utf-8",dataType:"json",requestDescription:"GetAvatars",services:["accounts"]})}))},s.getCustomAvatarsAsync=function(){return r.GetAuthHeaderAsync().then((function(e){return s.ajax({type:"POST",headers:e,url:i.getApiUrl("/api/profile/GetCustomAvatars"),data:'{"Title":"'+i.getTitleName()+'"}',contentType:"application/json; charset=utf-8",dataType:"json",requestDescription:"GetCustomAvatars",services:["accounts"]})}))},s.GetCrewById=function(e,t){i.WriteDebugLog("GetCrewById","crewId",e),r.GetAuthHeaderAsync().then((function(n){s.ajax({type:"POST",headers:n,url:i.getApiUrl("/api/crew/getcrewbyid"),data:'{"CrewId":'+e+"}",contentType:"application/json; charset=utf-8",dataType:"xml",requestDescription:"GetCrewById",success:function(e,n){"function"==typeof t&&t(e)}})}))},s.ClearProxyCache=function(){var e='{ "env":"'+l.rosEnvironment+'","title":"'+i.getTitleName()+'","version":'+l.RosTitleVersion+" }";r.GetAuthHeaderAsync().then((function(t){s.ajax({type:"POST",url:i.getApiUrl("/api/profile/clearproxycache"),headers:t,data:e,contentType:"application/json; charset=utf-8",dataType:"xml",success:function(){i.WriteDebugLog("ClearProxyCache","Success","")},error:function(e,t,n){i.WriteDebugLog("ClearProxyCache","ERROR",n),i.WriteDebugLog("ClearProxyCache","ERROR status",t),i.WriteDebugLog("ClearProxyCache","ERROR responseText",e.responseText,i.logType.error,i.logController.profile)}})}))},s.ClearCrewCache=function(e){var t='{ "env":"'+l.rosEnvironment+'","title":"'+i.getTitleName()+'","version":'+l.RosTitleVersion+',"crewId":'+e+" }";r.GetAuthHeaderAsync().then((function(e){s.ajax({type:"POST",url:i.getApiUrl("/api/crew/clearcrewcache"),headers:e,data:t,contentType:"application/json; charset=utf-8",dataType:"xml",silentFail:!0,disableSlowMsg:!0,success:function(){i.WriteDebugLog("ClearCrewCache","Success","")},error:function(e,t,n){i.WriteDebugLog("ClearCrewCache","ERROR",n),i.WriteDebugLog("ClearCrewCache","ERROR status",t),i.WriteDebugLog("ClearCrewCache","ERROR responseText",e.responseText,i.logType.error,i.logController.crew)}})}))},s.reportProfile=function(e,t){return r.GetAuthHeaderAsync().then((function(n){return s.ajax({type:"POST",data:JSON.stringify(e),url:i.getApiUrl("/api/profile/ReportProfile"),services:["accounts"],headers:n,contentType:"application/json; charset=utf-8",dataType:"json",fatalError:t,requestDescription:"SubmitProfileReport"})}))},s.launchExternalBrowserWithScAuth=function(e,t){if("pcros"!=l.platform||void 0===e&&!t)return i.WriteDebugLog("RSGC_LAUNCH_EXTERNAL_WEB_BROWSER","Error","platform: "+i.getGamePlatform()+", has RGSCLoadExtAuth class:"+t),!1;var n=void 0===e?this.href:e;return r.getScAuthToken().then((function(e){if(e&&e.Status){var t="ScAuthToken="+encodeURIComponent(e.ScAuthToken),i=-1!==n.indexOf("?");n+=i?"&":"?",n+=t,r.launchExternalBrowserForUrl(n)}})),!1},i.pubsub.subscribe("dataFn.launchExternalBrowserWithScAuth",(function(e,t){s.launchExternalBrowserWithScAuth(t.url,t.hasExternalClass)})),s}.call(t,n,t,e))||(e.exports=i)},,function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(39),n(52),n(124)],void 0===(r="function"==typeof(i=function(e){
/*!
  jQuery UI Virtual Keyboard
  Version 1.18.12
  
  Author: Jeremy Satterfield
  Modified: Rob Garrison (Mottie on github)
  Modified: R*
  -----------------------------------------
  Licensed under the MIT License
  
  Caret code modified from jquery.caret.1.02.js
  Licensed under the MIT License:
  http://www.opensource.org/licenses/mit-license.php
  -----------------------------------------
  */
e.keyboard=function(t,n){var i,a=this;a.version="1.18.12",a.$el=e(t),a.el=t,a.$el.data("keyboard",a),a.init=function(){a.options=i=e.extend(!0,{},e.keyboard.defaultOptions,n),a.shiftActive=a.altActive=a.metaActive=a.sets=a.capsLock=!1,a.lastKeyset=[!1,!1,!1],a.rows=["","-shift","-alt","-alt-shift"],e('\x3c!--[if lte IE 8]><script>jQuery("body").addClass("oldie");<\/script><![endif]--\x3e\x3c!--[if IE]><script>jQuery("body").addClass("ie");<\/script><![endif]--\x3e').appendTo("body").remove(),a.msie=e("body").hasClass("oldie"),a.allie=e("body").hasClass("ie"),a.inPlaceholder=a.$el.attr("placeholder")||"",a.watermark=void 0!==document.createElement("input").placeholder&&""!==a.inPlaceholder,a.regex=e.keyboard.comboRegex,a.decimal=!!/^\./.test(i.display.dec),a.repeatTime=1e3/(i.repeatRate||20),i.preventDoubleEventTime=i.preventDoubleEventTime||100,a.isOpen=!1,a.wheel=e.isFunction(e.fn.mousewheel),a.alwaysAllowed=[20,33,34,35,36,37,38,39,40,45,46],a.$keyboard=[],a.lastCaret={start:0,end:0},a.temp=["",0,0],e.each("initialized beforeVisible visible hidden canceled accepted beforeClose".split(" "),(function(t,n){e.isFunction(i[n])&&a.$el.bind(n+".keyboard",i[n])})),i.alwaysOpen&&(i.stayOpen=!0),e(document).bind("mousedown keyup touchstart checkkeyboard ".split(" ").join(".keyboard "),(function(t){if(!a.opening&&(a.escClose(t),t.target&&e(t.target).hasClass("ui-keyboard-input"))){var n=e(t.target).data("keyboard");n===a&&n.options.openOn&&n.focusOn()}})),a.$el.addClass("ui-keyboard-input "+i.css.input).attr({"aria-haspopup":"true",role:"textbox"}),(a.$el.is(":disabled")||a.$el.attr("readonly")&&!a.$el.hasClass("ui-keyboard-lockedinput"))&&a.$el.addClass("ui-keyboard-nokeyboard"),i.openOn&&a.$el.bind(i.openOn+".keyboard",(function(){a.focusOn()})),a.watermark||""!==a.$el.val()||""===a.inPlaceholder||""===a.$el.attr("placeholder")||a.$el.addClass("ui-keyboard-placeholder").val(a.inPlaceholder),a.$el.trigger("initialized.keyboard",[a,a.el]),i.alwaysOpen&&a.reveal()},a.setCurrent=function(){e(".ui-keyboard-has-focus").removeClass("ui-keyboard-has-focus"),e(".ui-keyboard-input-current").removeClass("ui-keyboard-input-current"),a.$el.addClass("ui-keyboard-input-current"),a.$keyboard.addClass("ui-keyboard-has-focus"),a.isCurrent(!0),a.isOpen=!0},a.isCurrent=function(t){var n=e.keyboard.currentKeyboard||!1;return t?n=e.keyboard.currentKeyboard=a.el:!1===t&&n===a.el&&(n=e.keyboard.currentKeyboard=""),n===a.el},a.isVisible=function(){return!(!a.$keyboard||!a.$keyboard.length)&&a.$keyboard.is(":visible")},a.focusOn=function(){a.$el.is(":visible")&&setTimeout((function(){"number"!=a.$el.attr("type")&&(a.lastCaret=a.$el.caret())}),20),a.isVisible()||(clearTimeout(a.timer),a.reveal()),i.alwaysOpen&&a.setCurrent()},a.reveal=function(){var t,n;if(a.opening=!0,e(".ui-keyboard").not(".ui-keyboard-always-open").remove(),!(a.$el.is(":disabled")||a.$el.attr("readonly")&&!a.$el.hasClass("ui-keyboard-lockedinput")))return a.$el.removeClass("ui-keyboard-nokeyboard"),i.openOn&&a.$el.unbind(i.openOn+".keyboard"),a.$keyboard&&(!a.$keyboard||a.$keyboard.length&&!e.contains(document.body,a.$keyboard[0]))||a.startup(),a.watermark||a.el.value!==a.inPlaceholder||a.$el.removeClass("ui-keyboard-placeholder").val(""),a.originalContent=a.$el.val(),a.$preview.val(a.originalContent),i.acceptValid&&a.checkValid(),i.resetDefault&&(a.shiftActive=a.altActive=a.metaActive=!1,a.showKeySet()),i.appendLocally||"body"!==i.appendTo||a.$keyboard.css({position:"absolute",left:0,top:0}),a.$el.trigger("beforeVisible.keyboard",[a,a.el]),a.setCurrent(),a.$keyboard.show(),i.usePreview&&a.msie&&(void 0===a.width&&(a.$preview.hide(),a.width=Math.ceil(a.$keyboard.width()),a.$preview.show()),a.$preview.width(a.width)),a.position=i.position,e.ui&&e.ui.position&&!e.isEmptyObject(a.position)&&(a.position.of=a.position.of||a.$el.data("keyboardPosition")||a.$el,a.position.collision=a.position.collision||"flipfit flipfit",a.$keyboard.position(a.position)),a.checkDecimal(),a.lineHeight=parseInt(a.$preview.css("lineHeight"),10)||parseInt(a.$preview.css("font-size"),10)+4,i.caretToEnd&&(n=a.originalContent.length,a.lastCaret={start:n,end:n}),a.allie&&(t={start:n=a.lastCaret.start||a.originalContent.length,end:n},a.lastCaret||(a.lastCaret=t),0===a.lastCaret.end&&a.lastCaret.start>0&&(a.lastCaret.end=a.lastCaret.start),a.lastCaret.start<0&&(a.lastCaret=t)),setTimeout((function(){a.opening=!1,i.initialFocus&&a.$preview.focus().caret(a.lastCaret),a.$el.trigger("visible.keyboard",[a,a.el])}),10),a;a.$el.addClass("ui-keyboard-nokeyboard")},a.startup=function(){a.$keyboard&&a.$keyboard.length||("custom"===i.layout&&(i.layoutHash="custom"+a.customHash()),a.layout="custom"===i.layout?i.layoutHash:i.layout,void 0===e.keyboard.builtLayouts[a.layout]&&(e.isFunction(i.create)&&i.create(a),a.$keyboard.length||a.buildKeyboard()),a.$keyboard=e.keyboard.builtLayouts[a.layout].$keyboard.clone(),i.usePreview?(a.$preview=a.$el.clone(!1).removeAttr("id").removeClass("ui-keyboard-placeholder ui-keyboard-input").addClass("ui-keyboard-preview "+i.css.input).removeAttr("aria-haspopup").attr("tabindex","-1").show(),"number"==a.$preview.attr("type")&&a.$preview.attr("type","text"),e("<div />").addClass("ui-keyboard-preview-wrapper").append(a.$preview).prependTo(a.$keyboard)):(a.$preview=a.$el,e.isEmptyObject(a.position)||(i.position.at=i.position.at2))),a.preview=a.$preview[0],a.$decBtn=a.$keyboard.find(".ui-keyboard-dec"),(i.enterNavigation||"TEXTAREA"===a.el.tagName)&&a.alwaysAllowed.push(13),i.lockInput&&a.$preview.addClass("ui-keyboard-lockedinput").attr({readonly:"readonly"}),a.bindKeyboard(),a.$keyboard.appendTo(i.appendLocally?a.$el.parent():i.appendTo||"body"),a.bindKeys(),e.ui&&e.ui.position&&!e.isEmptyObject(a.position)&&e(window).bind("resize.keyboard",(function(){a.isVisible()&&a.$keyboard.position(a.position)}))},a.bindKeyboard=function(){var t=e.keyboard.builtLayouts[a.layout];a.$preview.unbind("keypress keyup keydown mouseup touchend ".split(" ").join(".keyboard ")).bind("keypress.keyboard",(function(n){var r=a.lastKey=String.fromCharCode(n.charCode||n.which);if(a.$lastKey=[],a.checkCaret&&(a.lastCaret=a.$preview.caret()),a.capsLock=!!(r>=65&&r<=90&&!n.shiftKey||r>=97&&r<=122&&n.shiftKey),i.restrictInput){if((8===n.which||0===n.which)&&e.inArray(n.keyCode,a.alwaysAllowed))return;-1===e.inArray(r,t.acceptedKeys)&&n.preventDefault()}else if((n.ctrlKey||n.metaKey)&&(97===n.which||99===n.which||118===n.which||n.which>=120&&n.which<=122))return;t.hasMappedKeys&&t.mappedKeys.hasOwnProperty(r)&&(a.lastKey=t.mappedKeys[r],a.insertText(a.lastKey),n.preventDefault()),a.checkMaxLength()})).bind("keyup.keyboard",(function(t){switch(t.which){case 9:if(a.tab&&i.tabNavigation&&!i.lockInput){a.shiftActive=t.shiftKey;var n=e.keyboard.keyaction.tab(a);if(a.tab=!1,!n)return!1}else t.preventDefault();break;case 27:return a.close(),!1}clearTimeout(a.throttled),a.throttled=setTimeout((function(){a.isVisible()&&a.checkCombos()}),100),a.checkMaxLength(),e.isFunction(i.change)&&i.change(e.Event("change"),a,a.el),a.$el.trigger("change.keyboard",[a,a.el])})).bind("keydown.keyboard",(function(t){switch(t.which){case 8:e.keyboard.keyaction.bksp(a,null,t),t.preventDefault();break;case 9:return i.tabNavigation,a.tab=!0,!1;case 13:e.keyboard.keyaction.enter(a,null,t);break;case 20:a.shiftActive=a.capsLock=!a.capsLock,a.showKeySet(this);break;case 86:if(t.ctrlKey||t.metaKey){if(i.preventPaste)return void t.preventDefault();a.checkCombos()}}})).bind("mouseup.keyboard touchend.keyboard",(function(){a.checkCaret&&(a.lastCaret=a.$preview.caret())})),a.$keyboard.bind("mousedown.keyboard click.keyboard touchstart.keyboard",(function(t){t.stopPropagation(),a.isCurrent()||(a.reveal(),e(document).trigger("checkkeyboard.keyboard"))})),i.preventPaste&&(a.$preview.bind("contextmenu.keyboard",(function(e){e.preventDefault()})),a.$el.bind("contextmenu.keyboard",(function(e){e.preventDefault()})))},a.bindKeys=function(){var t=(i.keyBinding+" repeater mouseenter mouseleave touchstart mousewheel mouseup click ").split(" ").join(".keyboard ")+"mouseleave mousedown touchstart touchend touchmove touchcancel ".split(" ").join(".kb ");a.$allKeys=a.$keyboard.find("button.ui-keyboard-button").unbind(t).bind(i.keyBinding.split(" ").join(".keyboard ")+".keyboard repeater.keyboard",(function(t){if(!a.$keyboard.is(":visible"))return!1;var n,r=e(this),o=r.attr("data-action"),s=(new Date).getTime();if(o=":"===o?":":o.split(":")[0],!(s-(a.lastEventTime||0)<i.preventDoubleEventTime)){if(a.lastEventTime=s,a.$preview.focus(),a.$lastKey=r,a.lastKey=r.attr("data-curtxt"),a.checkCaret&&a.$preview.caret(a.lastCaret),o.match("meta")&&(o="meta"),e.keyboard.keyaction.hasOwnProperty(o)&&e(this).hasClass("ui-keyboard-actionkey")){if(!1===e.keyboard.keyaction[o](a,this,t))return!1}else void 0!==o&&(n=a.lastKey=a.wheel&&!e(this).hasClass("ui-keyboard-actionkey")?a.lastKey:o,a.insertText(n),a.capsLock||i.stickyShift||t.shiftKey||(a.shiftActive=!1,a.showKeySet(this)));a.$preview.focus().caret(a.lastCaret),a.checkCombos(),a.checkMaxLength(),e.isFunction(i.change)&&i.change(e.Event("change"),a,a.el),a.$el.trigger("change.keyboard",[a,a.el]),t.preventDefault()}})).bind("mouseenter.keyboard mouseleave.keyboard touchstart.keyboard",(function(t){if(a.isCurrent()){var n=e(this),r=n.data("layers")||a.getLayers(n);n.data("layers",r=e.grep(r,(function(t,n){return e.inArray(t,r)===n}))),"mouseenter"!==t.type&&"touchstart"!==t.type||"password"===a.el.type||n.hasClass(i.css.buttonDisabled)||n.addClass(i.css.buttonHover).attr("title",(function(e,n){return a.wheel&&""===n&&a.sets&&r.length>1&&"touchstart"!==t.type?i.wheelMessage:n})),"mouseleave"===t.type&&(n.data({curtxt:n.data("original"),curnum:0}),n.removeClass("password"===a.el.type?"":i.css.buttonHover).attr("title",(function(e,t){return t===i.wheelMessage?"":t})).find("span").html(n.data("original")))}})).bind("mousewheel.keyboard",(function(t,n){if(a.wheel){n=n||t.deltaY;var i,r,o=e(this);return(r=o.data("layers")||a.getLayers(o)).length>1?((i=o.data("curnum")+(n>0?-1:1))>r.length-1&&(i=0),i<0&&(i=r.length-1)):i=0,o.data({curnum:i,layers:r,curtxt:r[i]}),o.find("span").html(r[i]),!1}})).bind("mouseup.keyboard mouseleave.kb touchend.kb touchmove.kb touchcancel.kb",(function(t){return/(mouseleave|touchend|touchcancel)/.test(t.type)?e(this).removeClass(i.css.buttonHover):(a.isVisible()&&a.isCurrent()&&a.$preview.focus(),a.checkCaret&&a.$preview.caret(a.lastCaret)),a.mouseRepeat=[!1,""],clearTimeout(a.repeater),!1})).bind("click.keyboard",(function(){return!1})).not(".ui-keyboard-actionkey").add(".ui-keyboard-tab, .ui-keyboard-bksp, .ui-keyboard-space, .ui-keyboard-enter",a.$keyboard).bind("mousedown.kb touchstart.kb",(function(){if(0!==i.repeatRate){var t=e(this);a.mouseRepeat=[!0,t],setTimeout((function(){a.mouseRepeat[0]&&a.mouseRepeat[1]===t&&a.repeatKey(t)}),i.repeatDelay)}return!1}))},a.insertText=function(e){var t,n,i,r=a.$preview.val(),o=a.$preview.caret(),s=a.$preview.scrollLeft(),l=a.$preview.scrollTop(),c=r.length;o.end<o.start&&(o.end=o.start),o.start>c&&(o.end=o.start=c),"TEXTAREA"===a.preview.tagName&&(a.msie&&"\n"===r.substr(o.start,1)&&(o.start+=1,o.end+=1),i=r.split("\n").length-1,a.preview.scrollTop=i>0?a.lineHeight*i:l),t="bksp"===e&&o.start===o.end,e="bksp"===e?"":e,n=o.start+(t?-1:e.length),s+=parseInt(a.$preview.css("fontSize"),10)*("bksp"===e?-1:1),a.$preview.val(a.$preview.val().substr(0,o.start-(t?1:0))+e+a.$preview.val().substr(o.end)).scrollLeft(s).caret(n,n),a.lastCaret={start:n,end:n}},a.checkMaxLength=function(){var e,t=a.$preview.val();!1!==i.maxLength&&t.length>i.maxLength&&(e=Math.min(a.$preview.caret().start,i.maxLength),a.$preview.val(t.substring(0,i.maxLength)),a.$preview.caret(e,e),a.lastCaret={start:e,end:e}),a.$decBtn.length&&a.checkDecimal()},a.repeatKey=function(e){e.trigger("repeater.keyboard"),a.mouseRepeat[0]&&(a.repeater=setTimeout((function(){a.repeatKey(e)}),a.repeatTime))},a.showKeySet=function(e){var t="",n=(a.shiftActive?1:0)+(a.altActive?2:0);if(a.shiftActive||(a.capsLock=!1),a.metaActive?(""===(t=e&&e.name&&/meta/.test(e.name)?e.name:"")?t=!0===a.metaActive?"":a.metaActive:a.metaActive=t,(!i.stickyShift&&a.lastKeyset[2]!==a.metaActive||(a.shiftActive||a.altActive)&&!a.$keyboard.find(".ui-keyboard-keyset-"+t+a.rows[n]).length)&&(a.shiftActive=a.altActive=!1)):!i.stickyShift&&a.lastKeyset[2]!==a.metaActive&&a.shiftActive&&(a.shiftActive=a.altActive=!1),t=0!=(n=(a.shiftActive?1:0)+(a.altActive?2:0))||a.metaActive?""===t?"":"-"+t:"-default",!a.$keyboard.find(".ui-keyboard-keyset"+t+a.rows[n]).length)return a.shiftActive=a.lastKeyset[0],a.altActive=a.lastKeyset[1],void(a.metaActive=a.lastKeyset[2]);a.$keyboard.find(".ui-keyboard-alt, .ui-keyboard-shift, .ui-keyboard-actionkey[class*=meta]").removeClass(i.css.buttonAction).end().find(".ui-keyboard-alt")[a.altActive?"addClass":"removeClass"](i.css.buttonAction).end().find(".ui-keyboard-shift")[a.shiftActive?"addClass":"removeClass"](i.css.buttonAction).end().find(".ui-keyboard-lock")[a.capsLock?"addClass":"removeClass"](i.css.buttonAction).end().find(".ui-keyboard-keyset").hide().end().find(".ui-keyboard-keyset"+t+a.rows[n]).show().end().find(".ui-keyboard-actionkey.ui-keyboard"+t).addClass(i.css.buttonAction),a.lastKeyset=[a.shiftActive,a.altActive,a.metaActive]},a.checkCombos=function(){if(!a.isVisible())return a.$preview.val();var t,n,r,o,s=a.$preview.val(),l=a.$preview.caret(),c=e.keyboard.builtLayouts[a.layout],u=s.length;if(l.end<l.start&&(l.end=l.start),l.start>u&&(l.end=l.start=u),a.msie&&"\n"===s.substr(l.start,1)&&(l.start+=1,l.end+=1),i.useCombos&&(a.msie?s=s.replace(a.regex,(function(e,t,n){return i.combos.hasOwnProperty(t)&&i.combos[t][n]||e})):a.$preview.length&&(r=l.start-(l.start-2>=0?2:0),a.$preview.caret(r,l.end),o=(a.$preview.caret().text||"").replace(a.regex,(function(e,t,n){return i.combos.hasOwnProperty(t)&&i.combos[t][n]||e})),a.$preview.val(a.$preview.caret().replace(o)),s=a.$preview.val())),i.restrictInput&&""!==s){for(r=s,n=c.acceptedKeys.length,t=0;t<n;t++)""!==r&&(o=c.acceptedKeys[t],s.indexOf(o)>=0&&(/[\[|\]|\\|\^|\$|\.|\||\?|\*|\+|\(|\)|\{|\}]/g.test(o)&&(o="\\"+o),r=r.replace(new RegExp(o,"g"),"")));""!==r&&(s=s.replace(r,""))}return l.start+=s.length-u,l.end+=s.length-u,a.$preview.val(s),a.$preview.caret(l.start,l.end),a.preview.scrollTop=a.lineHeight*(s.substring(0,l.start).split("\n").length-1),a.lastCaret={start:l.start,end:l.end},i.acceptValid&&a.checkValid(),s},a.checkValid=function(){var e=!0;i.validate&&"function"==typeof i.validate&&(e=i.validate(a,a.$preview.val(),!1)),a.$keyboard.find(".ui-keyboard-accept")[e?"removeClass":"addClass"]("ui-keyboard-invalid-input")[e?"addClass":"removeClass"]("ui-keyboard-valid-input")},a.checkDecimal=function(){a.decimal&&/\./g.test(a.preview.value)||!a.decimal&&/\,/g.test(a.preview.value)?a.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(i.css.buttonDefault+" "+i.css.buttonHover).addClass(i.css.buttonDisabled):a.$decBtn.prop("disabled",!1).attr({"aria-disabled":"false"}).addClass(i.css.buttonDefault).removeClass(i.css.buttonDisabled)},a.getLayers=function(t){var n;return n=t.attr("data-pos"),t.closest(".ui-keyboard").find('button[data-pos="'+n+'"]').map((function(){return e(this).find("> span").html()})).get()},a.switchInput=function(t,n){if("function"==typeof i.switchInput)i.switchInput(a,t,n);else{a.$keyboard.hide();var r,o=!1,s=e("button, input, textarea, a:not(.dk_toggle.dk_label), .dk_container").filter(":visible"),l=s.index(a.$el)+(t?1:-1);if(a.$keyboard.show(),l>s.length-1&&(o=i.stopAtEnd,l=0),l<0&&(o=i.stopAtEnd,l=s.length-1),!o){if(!(n=a.close(n)))return;(r=s.eq(l).data("keyboard"))&&r.options.openOn.length?r.focusOn():s.eq(l).focus()}}return!1},a.close=function(t){if(a.isOpen){clearTimeout(a.throttled);var n=t?a.checkCombos():a.originalContent;if(t&&i.validate&&"function"==typeof i.validate&&!i.validate(a,n,!0)&&(n=a.originalContent,t=!1,i.cancelClose))return;a.isCurrent(!1),a.isOpen=!1,a.$preview.val(n),a.$el.removeClass("ui-keyboard-input-current ui-keyboard-autoaccepted").addClass(t?!0===t?"":"ui-keyboard-autoaccepted":"").trigger(i.alwaysOpen?"":"beforeClose.keyboard",[a,a.el,t||!1]).val(n).scrollTop(a.el.scrollHeight).trigger(t?"accepted.keyboard":"canceled.keyboard",[a,a.el]).trigger(i.alwaysOpen?"inactive.keyboard":"hidden.keyboard",[a,a.el]).blur(),i.openOn&&(a.timer=setTimeout((function(){a.$el.bind(i.openOn+".keyboard",(function(){a.focusOn()})),e(":focus")[0]===a.el&&a.$el.blur()}),500)),!i.alwaysOpen&&a.$keyboard&&(a.$keyboard.remove(),a.$keyboard=[]),a.watermark||""!==a.el.value||""===a.inPlaceholder||a.$el.addClass("ui-keyboard-placeholder").val(a.inPlaceholder),a.$el.trigger("change")}return!!t},a.accept=function(){return a.close(!0)},a.escClose=function(e){if(e&&"keyup"===e.type)return 27===e.which?a.close():"";a.isOpen&&(!a.isCurrent()&&a.isOpen||a.isOpen&&e.target!==a.el&&!i.stayOpen)&&(a.allie&&e.preventDefault(),a.close(!!i.autoAccept&&"true"))},a.keyBtn=e("<button />").attr({role:"button",type:"button","aria-disabled":"false",tabindex:"-1"}).addClass("ui-keyboard-button"),a.addKey=function(t,n,r){var o,s,l,c,u,d=!0===r?t:i.display[n]||t,f=!0===r?t.charCodeAt(0):t;return/\(.+\)/.test(d)&&(c=d.replace(/\(([^()]+)\)/,""),l=d.match(/\(([^()]+)\)/)[1],d=c,u=c.split(":"),c=""!==u[0]&&u.length>1?u[0]:c,e.keyboard.builtLayouts[a.layout].mappedKeys[l]=c),""===(u=d.split(":"))[0]&&""===u[1]&&(d=":"),d=""!==u[0]&&u.length>1?e.trim(u[0]):d,o=u.length>1&&e.trim(u[1]).replace(/_/g," ")||"",s=d.length>1?" ui-keyboard-widekey":"",s+=r?"":" ui-keyboard-actionkey",a.keyBtn.clone().attr({"data-value":d,name:f,"data-pos":a.temp[1]+","+a.temp[2],title:o,"data-action":t,"data-original":d,"data-curtxt":d,"data-curnum":0}).addClass((""===f?"":"ui-keyboard-"+f+s+" ")+i.css.buttonDefault).html("<span>"+d+"</span>").appendTo(a.temp[0])},a.customHash=function(){var e,t,n,a,r=i.customLayout,o=[],s=[];for(t in r)r.hasOwnProperty(t)&&o.push(r[t]);if(n=0,0===(a=(s=s.concat.apply(s,o).join(" ")).length))return n;for(e=0;e<a;e++)n=(n<<5)-n+s.charCodeAt(e),n&=n;return n},a.buildKeyboard=function(){var t,n,r,o,s,l,c,u,d,f=0,p=e.keyboard.builtLayouts[a.layout]={mappedKeys:{},acceptedKeys:[]},h=p.acceptedKeys=[],g=e("<div />").addClass("ui-keyboard "+i.css.container+(i.alwaysOpen?" ui-keyboard-always-open":"")).attr({role:"textbox"}).hide();return"custom"!==i.layout&&e.keyboard.layouts.hasOwnProperty(i.layout)||(i.layout="custom",e.keyboard.layouts.custom=i.customLayout||{default:["{cancel}"]}),e.each(e.keyboard.layouts[i.layout],(function(p,m){if(""!==p)for(f++,o=e("<div />").attr("name",p).addClass("ui-keyboard-keyset ui-keyboard-keyset-"+p).appendTo(g)["default"===p?"show":"hide"](),r=0;r<m.length;r++){for(l=e.trim(m[r]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),u=l.split(/\s+/),c=0;c<u.length;c++)if(a.temp=[o,r,c],s=!1,0!==u[c].length)if(/^\{\S+\}$/.test(u[c])){if(n=u[c].match(/^\{(\S+)\}$/)[1].toLowerCase(),/\!\!/.test(n)&&(n=n.replace("!!",""),s=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/.test(n)&&(d=parseFloat(n.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/)[1]||0),e("<span>&nbsp;</span>").width(n.match("px")?d+"px":2*d+"em").addClass("ui-keyboard-button ui-keyboard-spacer").appendTo(o)),/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/.test(n)&&(d=/:/.test(n)?parseFloat(n.replace(/,/,".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/)[1]||0):"",a.addKey(""," ").addClass(i.css.buttonDisabled+" "+i.css.buttonEmpty).attr("aria-disabled",!0).width(d?n.match("px")?d+"px":2*d+"em":"")),/^meta\d+\:?(\w+)?/.test(n)){a.addKey(n,n);continue}switch(n){case"a":case"accept":a.addKey("accept",n).addClass(i.css.buttonAction);break;case"alt":case"altgr":a.addKey("alt","alt");break;case"b":case"bksp":a.addKey("bksp",n);break;case"c":case"cancel":a.addKey("cancel",n).addClass(i.css.buttonAction);break;case"combo":a.addKey("combo","combo").addClass(i.css.buttonAction);break;case"dec":h.push(a.decimal?".":","),a.addKey("dec","dec");break;case"e":case"enter":a.addKey("enter",n).addClass(i.css.buttonAction);break;case"s":case"shift":a.addKey("shift",n);break;case"sign":h.push("-"),a.addKey("sign","sign");break;case"space":h.push(" "),a.addKey("space","space");break;case"t":case"tab":a.addKey("tab",n);break;default:e.keyboard.keyaction.hasOwnProperty(n)&&a.addKey(n,n)[s?"addClass":"removeClass"](i.css.buttonAction)}}else t=u[c],h.push(":"===t?t:t.split(":")[0]),a.addKey(t,t,!0);o.find(".ui-keyboard-button:last").after('<br class="ui-keyboard-button-endrow">')}})),f>1&&(a.sets=!0),p.hasMappedKeys=!e.isEmptyObject(p.mappedKeys),p.$keyboard=g,g},a.destroy=function(){e(document).unbind("mousedown.keyboard keyup.keyboard touchstart.keyboard"),a.$keyboard.length&&a.$keyboard.remove();var t=e.trim(i.openOn+" accepted beforeClose canceled change contextmenu hidden initialized keydown keypress keyup visible ").split(" ").join(".keyboard ");a.$el.removeClass("ui-keyboard-input ui-keyboard-lockedinput ui-keyboard-placeholder ui-keyboard-notallowed ui-keyboard-always-open "+i.css.input).removeAttr("aria-haspopup").removeAttr("role").unbind(t+".keyboard").removeData("keyboard")},a.init()},e.keyboard.keyaction={accept:function(e){return e.close(!0),!1},alt:function(e,t){e.altActive=!e.altActive,e.showKeySet(t)},bksp:function(e){e.insertText("bksp")},cancel:function(e){return e.close(),!1},clear:function(e){e.$preview.val("")},combo:function(e){var t=!e.options.useCombos;return e.options.useCombos=t,e.$keyboard.find(".ui-keyboard-combo").toggleClass(e.options.css.buttonAction,t),t&&e.checkCombos(),!1},dec:function(e){e.insertText(e.decimal?".":",")},default:function(e,t){e.shiftActive=e.altActive=e.metaActive=!1,e.showKeySet(t)},enter:function(t,n,i){var a=t.el.tagName,r=t.options;return i.shiftKey?r.enterNavigation?t.switchInput(!i[r.enterMod],!0):t.close(!0):r.enterNavigation&&("TEXTAREA"!==a||i[r.enterMod])?t.switchInput(!i[r.enterMod],!!r.autoAccept&&"true"):void("TEXTAREA"===a&&e(i.target).closest("button").length&&t.insertText(" \n"))},lock:function(e,t){e.lastKeyset[0]=e.shiftActive=e.capsLock=!e.capsLock,e.showKeySet(t)},left:function(e){var t=e.$preview.caret();t.start-1>=0&&(e.lastCaret={start:t.start-1,end:t.start-1})},meta:function(t,n){t.metaActive=!e(n).hasClass(t.options.css.buttonAction),t.showKeySet(n)},next:function(e){return e.switchInput(!0,e.options.autoAccept),!1},prev:function(e){return e.switchInput(!1,e.options.autoAccept),!1},right:function(e){var t=e.$preview.caret();t.start+1<=e.$preview.val().length&&(e.lastCaret={start:t.start+1,end:t.start+1})},shift:function(e,t){e.lastKeyset[0]=e.shiftActive=!e.shiftActive,e.showKeySet(t)},sign:function(e){/^\-?\d*\.?\d*$/.test(e.$preview.val())&&e.$preview.val(-1*e.$preview.val())},space:function(e){e.insertText(" ")},tab:function(e){var t=e.el.tagName,n=e.options;if("INPUT"===t)return!!n.tabNavigation&&e.switchInput(!e.shiftActive,!0);e.insertText("\t")}},e.keyboard.builtLayouts={},e.keyboard.layouts={alpha:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~             {bksp}","{tab}             ","   f g h j k    {enter}","{shift}  x  v b    >  {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~             {bksp}","{tab}             ","   F G H J K    {enter}","{shift}  X  V B    .  {shift}","{accept} {alt} {space} {alt} {cancel}"]},colemak:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w f p g j l u y ; [ ] \\","{bksp} a r s t d h n e i o ' {enter}","{shift} z x c v b k m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W F P G J L U Y : { } |",'{bksp} A R S T D H N E I O " {enter}',"{shift} Z X C V B K M < > ? {shift}","{accept} {space} {cancel}"]},dvorak:{default:["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{default:["= ( ) {b}","{clear} / * -","7 8 9 +","4 5 6 {sign}","1 2 3 %","0 . {a} {c}"]}},e.keyboard.defaultOptions={layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},usePreview:!0,alwaysOpen:!1,initialFocus:!0,stayOpen:!1,display:{a:":Accept (Shift-Enter)",accept:"Accept:Accept (Shift-Enter)",alt:"Alt: AltGr",b:":Backspace",bksp:"Bksp:Backspace",c:":Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",empty:"",enter:"Enter:Enter ",left:"",lock:"Lock: Caps Lock",next:"Next ",prev:" Prev",right:"",s:":Shift",shift:"Shift:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:"Use mousewheel to see other keys",css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!1,lockInput:!1,restrictInput:!1,acceptValid:!1,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,appendTo:"body",stickyShift:!0,preventPaste:!1,caretToEnd:!1,maxLength:!1,repeatDelay:500,repeatRate:20,resetDefault:!1,openOn:"focus",keyBinding:"mousedown touchstart",useCombos:!0,combos:{"`":{a:"",A:"",e:"",E:"",i:"",I:"",o:"",O:"",u:"",U:"",y:"",Y:""},"'":{a:"",A:"",e:"",E:"",i:"",I:"",o:"",O:"",u:"",U:"",y:"",Y:""},'"':{a:"",A:"",e:"",E:"",i:"",I:"",o:"",O:"",u:"",U:"",y:"",Y:""},"^":{a:"",A:"",e:"",E:"",i:"",I:"",o:"",O:"",u:"",U:"",y:"",Y:""},"~":{a:"",A:"",e:"",E:"",i:"",I:"",o:"",O:"",u:"",U:"",y:"",Y:"",n:"",N:""}},validate:function(e,t,n){return!0}},e.keyboard.comboRegex=/([`\'~\^\"ao])([a-z])/gim,e.keyboard.currentKeyboard="",e.fn.keyboard=function(t){return this.each((function(){e(this).data("keyboard")||new e.keyboard(this,t)}))},e.fn.getkeyboard=function(){return this.data("keyboard")}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i=n(8),a={};function r(){var e=globals.avatarUrl+"s/default.png";return t.isOffline()&&(e=globals.avatarUrl+"default.png"),e}function o(e,t,n){if(!e)return n;var i="n/";l(t)?i="s/":c(t)&&(i="l/");var a=s(e);return a?globals.avatarUrl+"s/"+a.category+"/"+i+a.name:n}function s(e){if(t.stringHasContent(e)){var n=e.split("/");if(!(n.length<=1)){var i=n[n.length-2];return n.length>2&&1===i.length&&i.match(/[snl]/)&&(i=n[n.length-3]),{category:i,name:n[n.length-1]}}}}function l(e){return"s"===e||"S"===e||32===e||"32"===e||64===e||"64"===e}function c(e){return"l"===e||"L"===e||128==e||"128"==e}return a.getAvatarUrl=function(e,n,i){return null==n||""===n||t.isOffline()?function(e,n){if(t.isOffline()){var i=a.getBase64AvatarSrc(e,n);return a.getAvatarSource(i,e,n)}var s=r();if(function(e){return null==e||""==e||"undefined"==e||e.match(/default.png$/)}(e))return s;return o(e,n,s)}(e,i):function(e,t){if("string"!=typeof e)return r();var n="";l(t)?n="/s":c(t)&&(n="/l");var i,a=e.toLowerCase();i=globals.account&&e===globals.account.Nickname&&globals.account.AvatarCacheBust?"n"+globals.account.AvatarCacheBust+"/"+a:"n/"+a;return globals.avatarCloudBase+i+n}(n,i)},a.getAvatarSource=function(e,t,n){return"string"==typeof e&&e.length>0?e:o(t,n,r())},a.getBase64AvatarSrc=function(e,n){if(t.hasBase64ImagePrefix(e))return e;0!==n&&1!==n&&2!==n&&(n=function(e){switch(e){case"l":case"L":case"128":case 128:case!0:return 2;case"64":case 64:return 1;case"s":case"S":case"32":case 32:case!1:return 0;default:return 1}}(n));var a=i.CallGameMethod("RGSC_GET_AVATAR",{AvatarUrl:e,LargeVersion:2===n,Size:n},null);return"string"==typeof a&&a.length>0?t.prefixBase64Image(a):r()},a.buildAvatarUrlForSdk=function(e){var t=s(e);return t?t.category+"/"+t.name:"default.png"},t.pubsub.subscribe("SDK.RGSC_JS_REQUEST_AVATAR_URLS",(function(e,t){var n=JSON.parse(t||"{}"),r=n.RequestId,o={Gamerpic:n.Gamerpic,AvatarPath:a.getAvatarUrl(n.Gamerpic),AvatarPathSm:a.getAvatarUrl(n.Gamerpic,"","s"),AvatarPathLg:a.getAvatarUrl(n.Gamerpic,"","l")};i.sendRequestIdResponse(r,"RGSC_JS_REQUEST_AVATAR_URLS",o)})),a}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(e){var t,n;n=(t=e)(window),t.fn.visible=function(e,t,i,a){if(!(this.length<1)){var r=void 0!==a;if(void 0===t&&(t=!0),void 0===e&&(e=!0),r)var o=a.offset().top,s=a.height()+o;var l=this.length>1?this.eq(0):this,c=l.get(0),u=n.width(),d=n.height(),f=i||"both",p=!0!==t||c.offsetWidth*c.offsetHeight;if("function"==typeof c.getBoundingClientRect){var h,g,m=c.getBoundingClientRect(),v=m.left>=0&&m.left<u,b=m.right>0&&m.right<=u;r?(h=m.top>=0&&m.top<d&&m.top>=o&&m.top<s,g=m.bottom>0&&m.bottom<=d&&m.bottom>o&&m.bottom<=s):(h=m.top>=0&&m.top<d,g=m.bottom>0&&m.bottom<=d);var C=e?h||g:h&&g,S=e?v||b:v&&b;if("both"===f)return p&&C&&S;if("vertical"===f)return p&&C;if("horizontal"===f)return p&&S}else{var y=n.scrollTop(),E=y+d,w=n.scrollLeft(),k=w+u,_=l.offset(),T=_.top,I=T+l.height(),A=_.left,R=A+l.width(),P=!0===e?I:T,x=!0===e?T:I,L=!0===e?R:A,N=!0===e?A:R;if(r){if("both"===f)return!!p&&x<=E+o&&P>=y+o&&N<=k&&L>=w;if("vertical"===f)return!!p&&x<=E+o&&P>=y+o;if("horizontal"===f)return!!p&&N<=k&&L>=w}else{if("both"===f)return!!p&&x<=E&&P>=y&&N<=k&&L>=w;if("vertical"===f)return!!p&&x<=E&&P>=y;if("horizontal"===f)return!!p&&N<=k&&L>=w}}}}}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(4),o=n(15),s=n(12),l=n(58),c=n(8),u=n(10),d=n(7),f=n(11),p=n(13);n(46);var h={getFriendsCache:{}},g=[];return h.findPlayer=function(e,t,n){var i='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"searchNickname":"'+e+'","pageIndex":"'+t+'" }';return a.WriteDebugLog("FindPlayer","options",i),c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/accountsearch"),services:["accounts"],headers:e,data:i,contentType:"application/json; charset=utf-8",dataType:"json",fatalError:n,requestDescription:"AccountSearch"})}))},h.GetFriendsJS=function(e){a.WriteDebugLog("GetFriendsJS","options",JSON.stringify(e));var t={env:globals.rosEnvironment,title:globals.titleName,version:globals.RosTitleVersion,pageSize:e.PageSize,pageIndex:e.PageIndex,rockstarId:""};return c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/getfriendsandinvitessent"),services:["friends"],headers:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",fatalError:s.ShowErrorModal,requestDescription:"GetFriends"})}))},h.ClearGetFriendsCache=function(){h.getFriendsCache={}},h.getFriendCompare=function(e,t,n){var i='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"pageSize":"0","rockstarId":"" }';if(a.WriteDebugLog("FriendCompare","options",i),h.getFriendsCache[e]){var r=h.getFriendsCache[e];return Promise.resolve(r)}return c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/getfriends"),services:["friends"],headers:e,data:i,contentType:"application/json; charset=utf-8",dataType:"json",fatalError:n,contentEl:t,requestDescription:"GetFriends"})}))},h.getFriendInvites=function(e,t){return a.WriteDebugLog("getFriendInvites","options",e),c.GetAuthHeaderAsync().then((function(n){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/getinvites"),services:["accounts","friends"],headers:n,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",fatalError:t,requestDescription:"GetFriendInvites"})}))},h.GetFriendAchievementsJS=function(e){return c.getCredsAsync().then((function(t){if(!t.Ticket)return Promise.reject();var n='{ "playerTicket":"'+t.Ticket+'","env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"friendRockstarId":"'+e+'" }';return a.WriteDebugLog("GetFriendAchievements","options",n),c.GetAuthHeaderAsync(t.Ticket).then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/"+globals.titleName+"/getfriendachievements"),services:["gameachievements"],headers:e,data:n,contentType:"application/json; charset=utf-8",dataType:"xml",fatalError:s.ShowErrorModal,requestDescription:"GetFriendAchievements"})}))}))},h.accountSearch=function(e,t,n,i){return c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/accountsearch"),services:["accounts"],headers:e,dataType:"json",data:{searchNickname:n},fatalError:i,requestDescription:"AccountSearch"})}))},h.SendMessage=function(e,t){var n='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"recipientRockstarId":"'+e+'","messageText":"'+t+'" }';return a.WriteDebugLog("SendMessage","options",n),c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/messaging/sendmessage"),services:["messaging"],headers:e,data:n,contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,noRetryModal:!0,fatalError:s.ShowErrorModal,requestDescription:"SendMessage"})}))},h.SendFriendAcceptInvite=function(e){a.WriteDebugLog("SendFriendAcceptInvite","id",e);var t='{ "RequestId":'+e+', "RockstarId":"'+e+'", "Success":true }';c.CallGameMethod("RGSC_FRIEND_ACCEPT_INVITE",t,"RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT"),h.ClearFriendsCache(e),f.trackEvent(p.category.friend,p.action.friend_invite_accept)},h.getNicknameAsync=function(e){if(void 0===e||!e.length)return Promise.reject({jqXhr:{responseText:""},textStatus:"error",errorThrown:"rockstarId is undefined or empty"});var t=g[e];return null!=t&&t.length?Promise.resolve(t):function(e){return c.getCredsAsync().then((function(t){if(!t.Ticket)return Promise.reject();var n='{ "playerTicket":"'+t.ticket+'","env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"rockstarId":"'+e+'" }';return c.GetAuthHeaderAsync(t.Ticket).then((function(e){var t=o.ajax({type:"POST",url:a.getApiUrl("/api/friend/getnickname"),services:["accounts"],headers:e,data:n,contentType:"application/json; charset=utf-8",dataType:"text",silentFail:!0,disableSlowMsg:!0,showSlowTimeout:!1}).then((function(e){return{data:e}}),(function(e,t,n){return{jqXhr:e,textStatus:t,errorThrown:n}}));return Promise.resolve(t)}))}))}(e).then((function(t){var n=JSON.parse(t.data);return g[e]=n,Promise.resolve(n)}))},h.ClearFriendsCache=function(e){if(h.ClearGetFriendsCache(),void 0!==e){var t='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"friendRockstarId":'+e+" }";c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/clearfriendscache"),services:["friends"],headers:e,data:t,contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,silentFail:!0,disableSlowMsg:!0,error:function(e,t,n){a.WriteDebugLog("ClearFriendsCache","ERROR,status",n+","+t),a.WriteDebugLog("ClearFriendsCache","responseText",e.responseText,a.logType.error,a.logController.friend)}})}))}else a.WriteDebugLog("ClearFriendsCache","Handled Error","undefined friendRockstarId",a.logType.error,a.logController.friend)},h.SendGameInvite=function(e){a.WriteDebugLog("SendGameInvite","id",e);var t='{ "RequestId":'+globals.account.RockstarId+', "RockstarId":"'+e+'"}';c.CallGameMethod("RGSC_GAME_INVITE_SEND",t,"RGSC_JS_GAME_INVITE_SEND_RESULT")},h.SendJoinGame=function(e){a.WriteDebugLog("SendJoinGame","id",e);var t='{ "RockstarId":"'+e+'"}';c.CallGameMethod("RGSC_JOIN_VIA_PRESENCE",t,"RGSC_JS_JOIN_VIA_PRESENCE_RESULT")},h.sendDeclineGameInvite=function(e){a.WriteDebugLog("DeclineGameInvite","msgId",e),c.CallGameMethod("RGSC_GAME_INVITE_DECLINED",'{ "GameInviteId" : '+e.replace("gameInviteId","")+" }",null),f.trackEvent(p.category.game,p.action.game_invite_decline)},h.sendAcceptGameInvite=function(e){a.WriteDebugLog("SendAcceptGameInvite","msgId",e),c.CallGameMethod("RGSC_GAME_INVITE_ACCEPTED",'{ "GameInviteId" : '+e.replace("gameInviteId","")+" }",null),f.trackEvent(p.category.game,p.action.game_invite_accept)},h.updatePrivacySetting=function(e,t,n){var i=e+"="+t;return a.WriteDebugLog("updatePrivacySetting","setting",i),c.GetAuthHeaderAsync().then((function(e){var t=r.extend(o.getStdAjaxData(),{settingsNameValueCSV:i,accountId:n});return o.ajax({type:"POST",url:a.getApiUrl("/api/privacy/updateprivacysettings"),services:["accounts"],headers:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,fatalError:s.ShowErrorModal,requestDescription:"UpdatePrivacySettings"})}))},h.getMessageCount=function(e){if(null!=e&&0!=e){var t=JSON.stringify(r.extend(o.getStdAjaxData(),{rockstarId:e}));return c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/messaging/getmessagecount"),services:["messaging"],headers:e,data:t,contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,silentFail:!0})}))}},h.getMessages=function(e,t,n){var i=JSON.stringify(r.extend(o.getStdAjaxData(),{rockstarId:e,pageIndex:t}));return a.WriteDebugLog("GetMessages","options",i),c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/messaging/getmessagesenderlist"),services:["messaging"],headers:e,data:i,contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,fatalError:n,requestDescription:"GetMessageSenderList"})}))},h.GetMessageThread=function(e,t,n,i){var r='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"senderRockstarId":"'+e+'","pageIndex":'+i+"}";return a.WriteDebugLog("GetMessageThread","options",r),c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/messaging/getmessages"),services:["messaging"],headers:e,data:r,contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,fatalError:s.ShowErrorModal,requestDescription:"GetMessages"})}))},h.MarkMessagesReadJS=function(e){var t=JSON.stringify(r.extend(o.getStdAjaxData(),{messageIdCsv:e}));return a.WriteDebugLog("MarkMessagesReadJS","options",t),c.GetAuthHeaderAsync().then((function(e){var n=o.ajax({type:"POST",url:a.getApiUrl("/api/messaging/markmessagesread"),services:["messaging"],headers:e,data:t,contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,silentFail:!0}).then((function(e){return e}),(function(e,t,n){return{jqXhr:e,textStatus:t,errorThrown:n}}));return Promise.resolve(n)}))},h.GetGameInvites=function(){return c.CallGameMethodAsync("RGSC_GET_GAME_INVITE_LIST",null,"RGSC_GET_GAME_INVITE_LIST_DEMO")},h.deleteMessage=function(e,t){a.WriteDebugLog("DeleteMessage","messageId",e);var n=JSON.stringify(r.extend(o.getStdAjaxData(),{messageId:e.replace("messageId","")}));return a.WriteDebugLog("DeleteMessage","options",n),c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/messaging/deletemessage"),services:["messaging"],headers:e,data:n,contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,fatalError:t,requestDescription:"DeleteMessage"})}))},h.friendProfileView=function(e){a.WriteDebugLog("friendProfileView","rockstarId",e),u.clearActivePanel((function(){u.setUpLoadingPanel("#friendProfilePanel"),c.GetAuthHeaderAsync().then((function(t){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/getprofile"),services:["accounts","friends","crews"],headers:t,data:JSON.stringify({RockstarId:e}),contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,requestDescription:"GetFriendProfile",success:function(e,t){"success"==t&&e&&e.Accounts&&e.Accounts.length&&e.Accounts.length>0&&e.Accounts[0]&&e.Accounts[0].RockstarAccount&&(e.Accounts[0].RockstarAccount.ViewerRelationship=e.Accounts[0].RockstarAccount.Relationship,void 0===window.amd.profileView?window.amd.profileView=new l.ProfileView({profileData:e.Accounts[0]}):window.amd.profileView.reinitialize({profileData:e.Accounts[0]}),f.trackPage("/FriendProfile"))}})})).catch((function(e){a.WriteDebugLog("friendProfileView","error",e&&e.message)}))}))},h.friendProfileViewByRockstarId=function(e){h.friendProfileView(e,"","")},h.getUserPrivacyInfo=function(e,t){a.WriteDebugLog("getUserPrivacyInfo","rockstarId",e);var n=JSON.stringify(r.extend(o.getStdAjaxData(),{rockstarId:e,email:"",nickname:""}));return c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/profile/getuseraccountinfo"),services:["accounts"],headers:e,data:n,contentType:"application/json; charset=utf-8",dataType:"json",fatalError:h.GetUserPrivacyInfoError,requestDescription:"GetUserAccountInfo",contentEl:t})}))},h.GetUserPrivacyInfoError=function(e){e.contentEl.hide(),s.ShowErrorModal(e)},h.GetRelationShipCode=function(e){switch(e){case"Friend":return 32;case"BlockedByMe":return 2;case"BlockedByBoth":case"InvitedByMe":return 8;case"InvitedByThem":return 16;default:return 1}},h.GetAccountActivity=function(e){if(null!=e&&0!=e&&!a.isOffline()&&!a.isLocal()){var n='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"rockstarId":"'+e+'" }';a.WriteDebugLog("GetAccountActivity","options",n),c.GetAuthHeaderAsync().then((function(e){return o.ajax({type:"POST",url:a.getApiUrl("/api/friend/getaccountactivity"),services:["accounts"],headers:e,data:n,contentType:"application/json; charset=utf-8",dataType:"xml",cache:!1,silentFail:!0,success:function(e,n){if("success"===n){var i=t(e).find("UnreadMessageCount").text(),a=t(e).find("CrewInviteCount").text(),r=t("#menuMessages");r.find("span.count").html("0"==i?"":i),t("#crewInvitesLink span.count").html("0"==a?"":a),r.attr("countRetrieved",!0)}t("#checkName").fadeOut()}})})).catch((function(){t("#checkName").fadeOut()}))}},i.pubsub.on("datafnfriends:friendProfileView",h.friendProfileView),i.pubsub.on("datafnfriends:SendFriendAccept",h.SendFriendAcceptInvite),i.pubsub.on("datafnfriends:SendFriendDeclineInvite",(function(e){a.WriteDebugLog("SendFriendDeclineInvite","id",e);var t='{ "RequestId":'+e+', "RockstarId":"'+e+'"}';c.CallGameMethod("RGSC_FRIEND_DECLINE_INVITE",t,"RGSC_JS_FRIEND_DECLINE_INVITE_RESULT"),h.ClearFriendsCache(e),f.trackEvent(p.category.friend,p.action.friend_invite_decline)})),i.pubsub.on("datafnfriends:SendFriendRemove",(function(e){a.WriteDebugLog("SendFriendRemove","id",e);var t='{ "RequestId":'+e+', "RockstarId":"'+e+'"}';c.CallGameMethod("RGSC_FRIEND_DELETE_FRIEND",t,"RGSC_JS_FRIEND_DELETE_FRIEND_RESULT"),h.ClearFriendsCache(e),f.trackEvent(p.category.friend,p.action.friend_delete)})),i.pubsub.on("datafnfriends:SendFriendRequest",(function(e){a.WriteDebugLog("SendFriendRequest","id",e);var t='{ "RequestId":'+e+', "RockstarId":"'+e+'", "Success":true, "ResultCode":0 }';c.CallGameMethod("RGSC_FRIEND_SEND_INVITE",t,"RGSC_JS_FRIEND_SEND_INVITE_RESULT"),h.ClearFriendsCache(e),f.trackEvent(p.category.friend,p.action.friend_invite_send)})),i.pubsub.on("datafnfriends:SendInviteCancel",(function(e){a.WriteDebugLog("SendInviteCancel","id",e);var t='{ "RequestId":'+e+', "RockstarId":"'+e+'"}';c.CallGameMethod("RGSC_FRIEND_CANCEL_INVITE",t,"RGSC_JS_FRIEND_CANCEL_INVITE_RESULT"),h.ClearFriendsCache(e),f.trackEvent(p.category.friend,p.action.friend_cancel_invite)})),i.pubsub.on("datafnfriends:RedirectToBlockList",(function(e){Promise.all([d.getTextAsync("MessageBlocked1","Social"),d.getTextAsync("MessageBlocked2","Social"),d.getTextAsync("SendMessageTitle","Social")]).then((function(t){var n=t[0].format(e);s.ShowConfirmModal(n,null,"settingsFn.showBlockList",null,"Yes","No",t[2],t[1])})).catch((function(e){a.WriteDebugLog("redirectToBlockList","error",e&&e.message)}))})),i.pubsub.on("datafnfriends:SendGameInvite",h.SendGameInvite),i.pubsub.on("datafnfriends:SendJoinGame",h.SendJoinGame),i.pubsub.on("datafnfriends:SendFriendUnblock",(function(e){a.WriteDebugLog("SendFriendUnblock","id",e);var t='{ "RequestId":'+e+', "RockstarId":"'+e+'"}';c.CallGameMethod("RGSC_FRIEND_UNBLOCK_PLAYER",t,"RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT"),f.trackEvent(p.category.settings,p.action.settings_block_list_unblock)})),i.pubsub.on("datafnfriends:ClearFriendsCache",h.ClearFriendsCache),i.pubsub.on("datafnfriends:ClearGetFriendsCache",h.ClearGetFriendsCache),h}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},,function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(28),o=n(10),s=n(24),l=n(27),c=n(11),u=n(7),d=n(57);n(19);var f={ShowCountryOrDobPrompt:function(){if(i.WriteDebugLog("ShowCountryOrDobPrompt","Visible:",a.isScuiVisible()?"true":"false"),a.isScuiVisible()){var e,n=f.isDobMissing(),r=f.isCountryMissing();e=n&&r?"DOBAndCountryUpdate":n?"DOBUpdate":"countryUpdate",t("#dob").addClass(e),o.requestUiState(!0),f.showDOBPrompt()}},isDobMissing:function(){var e=r.isLoginAccountAvailable()?r.getLoginAccount():globals.account;return e&&(void 0===e.Age||isNaN(e.Age)||e.Age<1)},isCountryMissing:function(){var e=r.isLoginAccountAvailable()?r.getLoginAccount():globals.account;return e&&!a.stringHasContent(e.CountryCode)},showDOBPrompt:function(){var e=t("#dob");if(!e.visible()){i.WriteDebugLog("showDOBPrompt"),o.showHeaderMenu();var n="MissingRequiredData";(e.hasClass("DOBUpdate")||e.hasClass("DOBAndCountryUpdate"))&&i.loadDateDropdowns(),e.hasClass("DOBUpdate")&&(n="MissingDOB",t("#dob .intro").text(u.getTextCached("EnterDOB2","Register","Please enter your date of birth."))),e.hasClass("countryUpdate")&&(n="MissingCountry",e.find(".intro").text(u.getTextCached("EnterCountry","Register","Please enter your country/region."))),e.hasClass("DOBAndCountryUpdate")&&(n="MissingDOBandCountry",e.find(".intro").text(u.getTextCached("EnterDOBAndCountry","Register","Please enter your date of birth and country/region."))),e.find("#submitAccount").text(u.getTextCached("Submit","Register","Submit")).removeClass("disabled"),e.find("p.intro, #signupCountryContainer").show(),t("span.errorText").remove(),t("#signupPanelsWrapper").hasClass("active")||f.showDobForm(),o.initHeaderMenu(!1),c.trackPage("/"+n)}},showDobForm:function(){var e=t("#dob");return f.clearSignUpForms(),(e.hasClass("countryUpdate")||e.hasClass("DOBAndCountryUpdate"))&&i.pubsub.trigger("settingsFn.getCountriesAsync"),o.clearActivePanel((function(){t("#signUpConfirm").hide(),t("#dob, #AccountDetailsForm").show(),t("#signupPanels").css({left:"0"}),(e.hasClass("DOBUpdate")||e.hasClass("DOBAndCountryUpdate"))&&i.loadDateDropdowns(),o.setUpLoadingPanel("#signupPanelsWrapper",(function(){(e.hasClass("DOBUpdate")||e.hasClass("DOBAndCountryUpdate"))&&(f.signupDropkick(),f.signupClickOnEnter()),o.removeLoading("signupPanelsWrapper")}))})),!1},navigatePendingSignIn:function(e){"function"==typeof e?globals.navAfterSigninCallback=e:(delete globals.navAfterSigninCallback,t("#mainNav, #headerLoginOptions, .sideMenu").find(".pendingSignIn").removeClass("pendingSignIn").end().find(e).addClass("pendingSignIn")),t("#headerLoginButton").click()},CaptchaSelector:function(){var e="";return window.globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha&&(e="#"+l.getSigninContainerId()),e},isSignupCaptchaEnabled:function(){return window.globals.signUpReCaptchaEnabled&&window.globals.showSignUpRecaptcha},setSignUpStepText:function(e){if(t.isNumeric(e))switch(!f.isSignupCaptchaEnabled()&&e>1&&e--,e){case 1:e="One";break;case 2:e="Two";break;case 3:e="Three";break;case 4:e="Four";break;case 5:e="Five"}t("#signUpSteps").find(".signUpStepCount").text(u.getTextCached("NewStep"+e,"Register"))},clearSignUpForms:function(){p();var e=t("#AccountDetailsForm");e.find("span.nickvalid").remove(),e.find("span.emailvalid").remove(),e.find("span.confirmemailvalid").remove(),e.find("span.pwvalid").remove(),e.find("span.dobvalid").remove(),t("#altNicksContainer").remove(),t("#signUpNickname").attr("placeholder",u.getTextCached("EnterNickname","HomeSignIn"));var n=window.globals.showSignUpRecaptcha?5:4;f.setSignUpStepText("One"),t("#signUpSteps").find(".totalSignUpSteps").text(n),globals.underage||t("#signupDetailsContainer .clearfix, #signupCountryContainer, #dob p.intro").show(),s.clearErrorClasses(),globals.signUpreCaptchaValidated=!1},signupDropkick:function(){var e=t("#dayOfBirth"),n=t("#monthOfBirth"),i=t("#yearOfBirth");e.dropkick().hide(),n.dropkick().hide(),i.addClass("ignoreChange"),i.dropkick().hide(),e.dropkick("setValue","1"),n.dropkick("setValue","1"),i.dropkick("setValue","")},signupClickOnEnter:function(){t("#onlinePoliciesContainer").find("a").keydown((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()}))},resetSigninButtonText:function(){var e=t("#buttonSignInProfile");null!=e.attr("title")&&e.text(e.attr("title"))},setAutoSignInValues:function(e){var n=t("input[name=radioAutoSignIn][value="+(e?"enabled":"disabled")+"]").parent();d.processUpdateSetting(Promise.resolve(),"autoSignin",n)}},p=function(){var e=f.CaptchaSelector();o.clearForms(e)};return f.renderPolicy=function(e,t){var n=e.Text.replace(new RegExp(/\[PAGE\]/g),"<br /><br />").replace(new RegExp(/\n/g),"<br />").replace(/\u00B5/g,"&nbsp;").replace("~EX_R*~",'<span class="rockstarLogo"></span>').replace("[R*]",'<span class="rockstarLogo"></span>');return!!a.stringHasContent(n)&&(t.html(n),!0)},f.onGetPolicyError=function(){var e=a.errorCode("3000.19"),t=u.getErrorWithCode(e,"GetPrivacyPolicy").Message;o.showGenericFatalError(e,t)},f}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i=n(4),a=n(8),r=n(44),o=n(64),s=n(11),l=n(13),c=n(50);n(63);var u={};void 0===window.globals&&(window.globals={});var d=window.globals;function f(){return{platform:d.platform,env:d.rosEnvironment,title:t.getTitleName(),version:d.RosTitleVersion,gamePlatform:t.getGamePlatform(),RosVersion:d.RosTitleVersion}}function p(e){var t={IsCaptcha:!1};return e&&"boolean"==typeof e.isCaptcha&&(t.IsCaptcha=e.isCaptcha,t[e.responseFieldId]=e.response,t[e.responseFieldIdV3]=e.responseV3),t}function h(e){var t={storename:e};return u.fetch("/api/profile/storestatus",{body:t,silentFail:!0,method:"GET"})}return d.account=null,d.avatarXML=null,d.rosEnvironment="",d.titlelang="en-US",t.setTitleName(""),d.titleVersion=2382.1,t.setGamePlatform(""),d.ticket="",d.platformId="9",d.titleDisplayName="",d.RosTitleVersion=0,d.localProfileCreation=!1,d.isLauncher=!1,d.hasConnection=!1,d.hasInternet=!1,d.inputMethod=0,d.localUrl="/robots.txt",d.isScuiVisible=!1,d.launcherClass="",d.showLockedAccountCaptchaSignIn=!1,d.receiveMsgEnabled=!1,d.waitingResponse=!1,u.resolveEnvironment=function(e){return e.length>5?"prod":e},u.fetch=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.isOffline()||t.isLocal()?(t.WriteDebugLog("Ajax Call","aborted","offline or local mode"),Promise.reject("offline or local mode")):(t.WriteDebugLog("Ajax Call",e,""),o.fetch(fetch,e,n))},u.checkLocalAvailable=function(){return u.fetch(d.localUrl+"?_="+(new Date).getTime(),{method:"HEAD",silentFail:!0,noUrlTransform:!0,cache:!1})},u.signInAsync=function(e,n){var a=void 0,r=d.ajaxTimeout,o=n.email,h=n.password,g=i.extend(f(),p(n.captchaData),{Lang:d.titlelang}),m={};e?(g.userLogin=o||"",m.userPassword=h||"",m.ScAuthToken=e.ScAuthToken||"",m.Ticket=e.Ticket||""):(g.userLogin=o,m.userPassword=h);var v="/login";g.Fingerprint=c.getFingerprint(),g.RememberedMachineToken=n.rememberedMachineToken,n.isMfa&&(v="/loginwithmfacode",g.MfaCode=n.mfaCode,g.RememberDevice=n.rememberDevice,s.trackEvent(l.category.mfa,l.action.mfa_signIn_submit_verification_code)),t.isEpic()&&(m.authTicket=t.getEpicAccessToken(),m.platformUserId=t.getEpicAccountId(),r=3*d.ajaxTimeout,a=2*d.slowAjaxMsgTimeout,!e||e.Email||e.Password||(v="/autologinepic")),t.isSteam()&&(m.authTicket=t.getSteamAuthTicket(),r=3*d.ajaxTimeout,a=2*d.slowAjaxMsgTimeout,g.AppName=t.getSteamAppName(),!e||e.Email||e.Password||(v="/autologinsteam"));var b=JSON.stringify(g);t.WriteDebugLog("dataFnUtils.signInAsync","options",b);var C=JSON.stringify(i.extend(g,m));return u.fetch("/api/"+t.getLoginTitleName()+v,{body:C,timeout:r,slowMsgTimeout:a,silentFail:!0})},u.steamTicketSignInAsync=function(e,n){return u.fetch("/api/"+t.getLoginTitleName()+"/autologinsteam",{body:{appName:t.getSteamAppName(n),authTicket:e,platform:"pcros"},timeout:3*d.ajaxTimeout,slowMsgTimeout:2*d.slowAjaxMsgTimeout,silentFail:!0})},u.epicTicketSignInAsync=function(e){return u.fetch("/api/"+t.getLoginTitleName()+"/autologinepic",{body:{authTicket:e,platform:"pcros"},timeout:3*d.ajaxTimeout,slowMsgTimeout:2*d.slowAjaxMsgTimeout,silentFail:!0})},u.signOut=function(){var e={ScAuthToken:d.account.ScAuthToken};return a.GetAuthHeaderAsync().then((function(t){return u.fetch("/api/profile/signout",{services:["accounts"],body:e,headers:t,disableSlowMsg:!0})}))},u.createAccount=function(e){var n=i.extend(f(),e,{avatarUrl:"default.png",lang:d.titlelang,zipCode:"",authTicket:t.getSteamAuthTicket()});return t.isSteam()&&(n.AppName=t.getSteamAppName()),n.title=t.getLoginTitleName(),delete n.authValue,u.fetch("/api/profile/createprofile",{body:JSON.stringify(n),headers:r.getCombinedSyncHeaders(e.authValue),services:["accounts","registration"],silentFail:!0})},u.resetPassword=function(e){var n=i.extend({env:d.rosEnvironment,title:t.getTitleName(),version:d.RosTitleVersion,email:e.email},p(e.captchaData));return u.fetch("/api/profile/resetpassword",{services:["accounts"],body:n,requestDescription:"ResetPassword"})},u.getCountries=function(){var e={env:d.rosEnvironment,title:t.getTitleName(),version:d.RosTitleVersion,language:t.getTitleLang()};return u.fetch("/api/profile/getcountries",{body:e,requestDescription:"GetCountries"})},u.validateAccountDetails=function(e){var t=i.extend({},e,p(e.captchaData));return delete t.captchaData,u.fetch("/api/profile/validateaccountdetails",{services:["accounts","registration"],body:t,requestDescription:"ValidateAccountDetails",silentFail:!0})},u.requestMultiplayerPresenceInfo=function(e){if(d.account){var t={RequestId:d.account.RockstarId,Players:e.map((function(e){return{RockstarId:e}}))};a.CallGameMethod("RGSC_REQUEST_PLAYER_MULTIPLAYER_PRESENCE_INFO",t,"RGSC_REQUEST_PLAYER_MULTIPLAYER_PRESENCE_INFO_DEMO")}},u.getAnalyticsData=function(e){var n,i="/api/profile/getanalyticsdata";return t.isLegacyServiceLayer()?(n=a.GetAuthHeaderAsyncV8(),i+="lan",e.Nickname=d.account&&d.account.Nickname):n=a.GetAuthHeaderAsync(),n.then((function(n){return t.isLegacyServiceLayer()&&(n=r.appendLanAuthHeader(n)),u.fetch(i,{services:["accounts"],headers:n,body:e,silentFail:!0,disableSlowMsg:!0})}))},u.getUserNetworks=function(){var e={};return a.GetAuthHeaderAsync().then((function(t){return u.fetch("/api/profile/getusernetworks",{services:["accounts"],headers:t,data:e,requestDescription:"UserNetworks"})}))},u.getPolicyDocuments=function(e,n){var i={policies:e,language:"string"==typeof n&&n.length>1?n:t.getTitleLang(),env:u.resolveEnvironment(d.rosEnvironment),version:d.RosTitleVersion,ticket:""};return u.fetch("/api/policy/getdocuments",{body:i,requestDescription:"GetPolicyDocuments",silentFail:!0})},u.getPolicyVersions=function(e){var n={policies:e,language:t.getTitleLang(),env:u.resolveEnvironment(d.rosEnvironment),version:d.RosTitleVersion,ticket:""};return u.fetch("/api/policy/getversions",{body:n,requestDescription:"GetPolicyVersions",silentFail:!0})},u.getExpiredPolicies=function(e,n){var i={policies:e,language:"string"==typeof n&&n.length>1?n:t.getTitleLang()};return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/policy/getexpiredpolicies",{body:i,headers:e,requestDescription:"GetExpiredPolicies",silentFail:!0}).catch((function(e){return t.WriteDebugLog("getExpiredPolicies","error",JSON.stringify(e)),{data:[]}}))}))},u.acceptPolicies=function(e,n){var r="string"==typeof n&&n.length>1?n:t.getTitleLang(),o={policies:i.isArray(e)?e:[e],language:r};return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/policy/acceptpolicies",{body:o,headers:e,requestDescription:"AcceptPolicies",silentFail:!0})}))},u.updateLanguage=function(e){var t={Language:e};return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/profile/UpdateLanguage",{services:["accounts"],body:t,headers:e,requestDescription:"UpdateLanguage"})}))},u.UpdateDOBAndCountry=function(e,n){var i={env:d.rosEnvironment,title:t.getTitleName(),version:d.RosTitleVersion,dob:e,countrycode:n};return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/profile/UpdateDobAndCountry",{services:["accounts"],body:i,headers:e,requestDescription:"UpdateDobCountry"})}))},u.updateDob=function(e){var n={env:d.rosEnvironment,title:t.getTitleName(),version:d.RosTitleVersion,dob:e};return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/profile/UpdateDob",{services:["accounts"],body:n,headers:e,requestDescription:"UpdateDob"})}))},u.updateCountry=function(e){var t={CountryCode:e};return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/profile/UpdateCountry",{services:["accounts"],body:t,headers:e,requestDescription:"UpdateCountry"})}))},u.osDeprecationNotice=function(){var e={lang:t.getTitleLang()};return u.fetch("/api/notification/osdeprecationnotice",{body:e,silentFail:!0}).then((function(e){return e&&e.data&&e.data.Status&&t.stringHasContent(e.data.Message)&&(e.data.Message=e.data.Message.replace("{date}",t.getOsDeprecationDateLocalised())),e}))},u.storeStatus=i.throttle(h,3e4),u.storeStatusImmediate=h,u.requestMfaCodeToDevice=function(e,n){var i={email:e,deviceId:n};return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/"+t.getLoginTitleName()+"/requestsendmfacode",{services:["accounts"],body:i,headers:e,requestDescription:"MfaCodeToDevice"})}))},u.requestMfaResetByEmail=function(e){var n={UserLogin:e};return u.fetch("/api/"+t.getLoginTitleName()+"/requestmfaresetbyemail",{services:["accounts"],body:n,requestDescription:"MfaResetByEmail"})},u.forgetMachine=function(e){return a.GetAuthHeaderAsync().then((function(n){var i={ScAuthToken:e};return u.fetch("/api/"+t.getLoginTitleName()+"/forgetmachine",{services:["accounts"],body:i,headers:n,silentFail:!0})}))},u.resendEmailVerification=function(){return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/profile/resendVerificationEmail",{headers:e})}))},u.getMarketingFeed=function(e,t){return a.GetAuthHeaderAsync().then((function(n){return u.fetch("/api/feed/marketingItems",{headers:n,body:{language:t,title:e}})}))},u.getAccountInfo=function(){return a.GetAuthHeaderAsync().then((function(e){return u.fetch("/api/profile/getsignedinuseraccountinfo",{headers:e})}))},u.getAccountLinkingAuthHeaderAsync=function(e){return void 0!==d.ticket&&null!=d.ticket&&d.ticket.length>0?Promise.resolve(r.wrapAuthHeader(d.ticket)):a.GetAuthHeaderAsync(e)},u.bindEpicAccount=function(e,n){var i={env:d.rosEnvironment,title:t.getTitleName(),version:d.RosTitleVersion,playerTicket:n,epicPlayerJwt:e};return u.getAccountLinkingAuthHeaderAsync(n).then((function(e){return u.fetch("/api/"+t.getLoginTitleName()+"/bindepicaccount",{services:!0,body:i,headers:e,timeout:3*d.ajaxTimeout,slowMsgTimeout:2*d.slowAjaxMsgTimeout,requestDescription:"BindEpicAccount"})}))},u.getExternalPlatformsAsync=function(e,t){var n={rockstarId:e};return u.getAccountLinkingAuthHeaderAsync(t).then((function(e){return u.fetch("/api/profile/getexternalplatforms",{services:["accounts"],body:n,headers:e,requestDescription:"UserNetworks"})}))},u.getCurrentVersion=function(){return u.fetch("/api/launcher/version",{method:"GET"}).then((function(e){return e&&e.data}))},u}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a,r=n(3)(n(5));void 0===(a=function(e){var t=n(0),i=n(4),a=n(1),o=n(6),s=n(10),l=n(158),c=n(27),u=n(7),d={};function f(e){e.parents("form").one("click",(function(n){n.preventDefault(),t("#altNicksContainer").remove(),e.attr("placeholder",u.getTextCached("EnterNickname","HomeSignin"))}))}return d.SignInValidation=function(){var e=!0;d.clearErrorClasses();var n=t.trim(t("#signInEmailProfile").val());return o.isLegacyServiceLayer()||!globals.isNLE||n.indexOf("@")>-1?d.EmailValidation("signInEmailProfile")||(e=!1):d.NicknameValidation("signInEmailProfile",!0)||(e=!1),d.PasswordValidation("signInPasswordProfile","")||(e=!1),d.signinCaptchaValidation()||(e=!1),e},d.signinCaptchaValidation=function(){if(!window.globals.showSignInRecaptcha)return!0;if(!c.initializeCalled())return!0;var e=c.getResponseValue(c.getSigninContainerId());return!(void 0===e||!e.length)||(c.showError(c.getSigninContainerId(),"incorrect-captcha-sol"),!1)},d.resetPasswordCaptchaValidation=function(){if(!window.globals.showSignInRecaptcha)return!0;if(!c.initializeCalled())return!0;var e=c.getResponseValue(c.getResetPasswordContainerId());return!(void 0===e||!e.length)||(c.showError(c.getResetPasswordContainerId(),"incorrect-captcha-sol"),!1)},d.CreateAccountValidation=function(){var e=!0;return d.NicknameValidation("signUpNickname")?0==t(".nickvalid").length&&(e=!1):e=!1,d.EmailValidation("signUpEmail")?0==t(".emailvalid").length&&(e=!1):e=!1,d.ConfirmEmail(t("#signUpEmailConfirm"))?0==t(".emailvalid").length&&(e=!1):e=!1,d.PasswordValidation("signUpPassword","signUpPasswordConf")||(e=!1),t(".pwerror").length>0&&(e=!1),0===t("#signUpCountry").children().length&&(e=!1),d.DOBValidation(!0)||(e=!1),e&&d.clearErrorClasses(),e},d.DOBValidation=function(e){var n="",i=t("#monthOfBirth").find(":selected").val(),a=t("#dayOfBirth").find(":selected").val(),r=t("#yearOfBirth").find(":selected").val(),o=l.dob(i,a,r,e);if(o.status)return d.showValidTick(t("#yearOfBirth").parent(),"dob"),!0;switch(o.reason){case"emptyInput":n=u.getError("EntryDOB");break;case"invalidDate":n=u.getError("ValidDOB");break;case"tooYoung":return d.handleUnderAgeError(),!1}return d.showError("dob",t("#yearOfBirth").parent(),n),!1},d.handleUnderAgeError=function(){d.clearErrorClasses(),globals.underage=!0,t("#dk_container_monthOfBirth").addClass("disabled"),t("#dk_container_dayOfBirth").addClass("disabled"),t("#dk_container_yearOfBirth").addClass("disabled"),t("#signupDobContainer, #signupMailingListContainer, #signupDetailsContainer .clearfix, #signupCountryContainer, #dob p.intro").hide();var e=u.getError("GenericError1");d.showError("dob",t("#yearOfBirth").parent(),e),t("#submitAccount").addClass("disabled")},d.EmailValidation=function(e,n){var i,a,r=t("#"+e),o=!1,s=!1,c="",f=t.trim(r.val());return t(".emailvalid").remove(),r.parent().find(".error").remove(),t(".errors .emailerror").remove(),a=t("#signUpEmailConfirm"),function(e){return t("#"+e+"Checked").val()!=t("#"+e).val()}("signUpEmail")&&(a.val(""),t(".emailerror").remove(),t(".confirmemailerror").remove(),a.closest(".error").remove(),t(".emailvalid").remove()),""==f?(c=u.getError("EntryEmail"),o=!0):l.email(f)||(c=u.getError("ValidEmail"),o=!0),o||null==n||(i=t("#"+n)).length&&!i.val().length&&(s=!0,c=u.getError("ErrorUpdate")),1==o?(d.showError("email",r,c),t("#"+e+"Checked").val(t("#"+e).val()),!1):1==s&&null!=i?(d.showError("pw",i,c),!1):("signUpEmail"==e&&t("#signUpEmailChecked").val(t("#signUpEmail").val()),!t(".errors .emailerror").length&&("signInEmailProfile"!==e&&d.showValidTick(r,"email"),!0))},d.ConfirmEmail=function(e){if(t("#formAccountDetails").find(".emailerror ").length)return!1;var n=t.trim(t("#formAccountDetails #signUpEmail").val());if(t.trim(e.val()).toLowerCase()===n.toLowerCase())return""!=n&&(d.showValidTick(e,"email"),t(".confirmemailerror").remove()),!0;var i=u.getError("EmailDoesNotMatch");return d.showError(["confirmemail","email"],e,i),!1},d.PasswordValidation=function(e,n,o){if(s.isOffline())return!0;var c=!1,f=t("#"+e),p=f.val(),h="",g="pw";if(0===p.length)h=u.getError("EntryPassword"),c=!0;else if("string"==typeof o&&p===t("#"+o).val())h=u.getError("PasswordSame"),c=!0;else{!function(e,n){i.each(e,(function(e){var i=t(".errors ."+e+"error");i.length?i.html(""):n.closest("form").find(".errors."+e+"error").remove()}))}(["signUpPasswordConf","pw"],f);var m=a.getPasswordRequirements();if("signUpPassword"!=e&&"editNewPassword"!=e||!(p.length<m.min||p.length>m.max))if(l.passwordForSignin(p)){if("signInPasswordProfile"!=e)if(void 0!==n&&t("#"+n).length&&f.val()!=t("#"+n).val())h=d.getPasswordError("ConfirmMatch"),d.showErrorCross(t("#"+n)),g="signUpPasswordConf",c=!0;else{var v=m.pattern;"object"!==(0,r.default)(v)||"string"!=typeof m.chars||l.password(p,v)?l.password(p)||(h=d.getPasswordError("InvalidPasswordNew"),c=!0):(h=d.getPasswordError("InvalidPassPattern").format(m.chars),c=!0)}}else h=d.getPasswordErrorSignin("SignInPasswordCount"),c=!0;else h=d.getPasswordError("PasswordCount"),c=!0}return 1==c?(d.showError(g,f,h),!1):("editNewPassword"==e&&d.showValidTick(f,"pw"),!0)},d.getPasswordErrorSignin=function(e){var t=u.getError(e);return l.getPasswordError(t,!0)},d.getPasswordError=function(e){var t=u.getError(e);return l.getPasswordError(t,!1)},d.ConfirmPassword=function(e){if(t("#formAccountDetails").find(".pwerror ").length)return!1;var n=t("#formAccountDetails #signUpPassword").val();if(""===n)return!0;if(e.val()===n)return d.showValidTick(e,"pw"),t(".signUpPasswordConferror").remove(),!0;var i=u.getError("ConfirmMatch");return d.showError(["signUpPasswordConf","pw"],e,i),!1},d.AvatarValidation=function(e){d.clearErrorClasses();var n=t("#"+e).attr("src");return!n.match(/blank.gif$/)&&!n.match(/default.png$/)||(t("#lblAvatarError").after('<span class="errorText">'+u.getError("SelectAvatar")+"</span>"),t("#signUpAvatarForm").find("span.errorText").after('<span class="error"></span>'),!1)},d.NicknameValidation=function(e,n,i){var a,r=t("#"+e),o=!1,s=!1,c=r.val(),f="";return"boolean"==typeof n&&void 0===i&&(i=n,n=void 0),t(".nickvalid").remove(),r.parent().find(".error").remove(),t(".errors .nickerror").remove(),!(t("#altNicksContainer").is(":visible")&&!function(e){return t("#"+e+"Checked").val()!=t("#"+e).val()}(e))&&(""==c?(f=u.getError("EnterNick"),o=!0):l.nicknameLength(c)?l.nickname(c)||(f=u.getError("NickInvalid"),o=!0):(f=u.getError("NickChar"),o=!0),o||void 0===n||(a=t("#"+n)).length&&!a.val().length&&(s=!0,f=u.getError("ErrorUpdate")),t("#"+e+"Checked").val(t("#"+e).val()),1==o?(d.showError("nick",r,f),!1):1==s&&void 0!==a?(d.showError("pw",a,f),!1):!t(".errors .nickerror").length&&(d.showValidTick(r,"nick",i),!0))},d.SearchNicknameRegExValidation=function(e){return l.nicknameForSearch(e)},d.LocalNicknameValidation=function(){var e=t("#createProfileNickname"),n=e.closest("form").find(".errors"),i=t.trim(e.val().toLowerCase()),a=!1;return t("#existingProfiles").children().each((function(){var e=t(this).find(".profilenickname");e.length&&e.html().toLowerCase()==i&&(a=!0)})),1!=a||(n.append('<span class="errorText">'+u.getError("NickExists")+"</span>"),e.after('<span class="error"></span>'),!1)},d.NicknameExists=function(e,n,i,a){var r=t("#"+e);n?(d.showError("nick",r,u.getError("NickExists")),d.DisplayAltNicknames(i,e,a)):d.showValidTick(r,"nick")},d.DisplayAltNicknames=function(e,n,i){var a,r="",o=t("#"+n);e.forEach((function(e){r+='<li><a href="#" title="Select name">'+e+"</a></li>"})),a='<div id="altNicksContainer"><h3>'+u.getTextCached("Alternatives","Register")+':</h3><div><ul id="altNicks">',a+=r+"</ul></div></div>",i?o.on("click",(function(e){e.stopPropagation(),t("#altNicksContainer").length||(o.parent().append(a),o.attr("placeholder",u.getTextCached("EnterNickname","HomeSignin")),f(o))})):(o.parent().append(a),o.val(""),o.attr("placeholder",u.getTextCached("WhyNotTry","Register")),f(o)),o.parent().on("click","#altNicks li a",(function(e){e.preventDefault(),o.val(t(e.currentTarget).text()),t("#altNicksContainer").remove(),o.attr("placeholder",u.getTextCached("EnterNickname","HomeSignin")),d.showValidTick(o,"nick")}))},d.PasswordInvalid=function(e,n){var i=t("#"+e);n?d.showError("pw",i,d.getPasswordError("InvalidPasswordNew")):"editNewPassword"==e&&d.showValidTick(i,"pw")},d.EmailExists=function(e,n){var i=t("#"+e);n&&d.showError("email",i,u.getError("EmailExists"))},d.clearPasswordConfirmationInput=function(){var e=t("#signUpPasswordConf");e.val(""),e.closest(".error").remove(),t(".pwerror, .pwvalid, .signUpPasswordConferror").remove()},d.ActivationCodeValidation=function(e,n){if(d.clearErrorClasses(),t("div.errorText:not(.emailerror, .nickerror, div.errorCode)").remove(),n){var i=t("#legalActivation"),a=t("#formActivation").find("input:checkbox:checked");if(null!=a&&!a.length)return i.find(".legal").after('<span class="errorText">'+u.getError("ActivationLegalCheck")+"</span>").after('<span class="error"></span>'),i.focus(),!1}var r=t("#activationCode"),o=t.trim(r.val());return 0==o.length?(e?r.after('<span class="errorText">'+u.getError("EnterRedemption")+"</span>"):r.after('<span class="errorText">'+u.getError("EnterActivation")+"</span>"),r.after('<span class="error"></span>').focus(),!1):!!o.match(/^[a-zA-Z0-9-]+$/)||(e?r.after('<span class="errorText">'+u.getTextCached("i39","Activation")+"</span>"):r.after('<span class="errorText">'+u.getTextCached("i33","Activation")+"</span>"),r.after('<span class="error"></span>').focus(),!1)},d.clearErrorClasses=function(){t("span.error:not(.emailerror,.nickerror,.pwerror,.doberror)").remove(),globals.underage?t("span.errorText:not(.doberror)").remove():t("span.errorText").remove()},d.showError=function(e,n,a){"string"==typeof e&&(e=[e]),i.each(e,(function(e){n.parent().find("."+e+"valid").remove()}));var r=i.first(e),o=t(".errors ."+r+"error");o.length?o.html(a):n.closest("form").find(".errors").append('<span class="'+r+'error errorText">'+a+"</span>");d.showErrorCross(n)},d.showErrorCross=function(e){if(!e.parent().find(".error").length)switch(e.attr("id")){case"signUpEmail":t("#signUpEmailConfirm").after('<span class="error"></span>');break;case"signUpPassword":t("#signUpPasswordConf").after('<span class="error"></span>');break;default:e.after('<span class="error"></span>')}},d.showValidTick=function(e,n,i){if(t(".errors ."+n+"error").remove(),e.parent().find(".error").remove(),!t("."+n+"valid").length&&!i){var a='<span class="'+n+'valid tick"></span>';switch(e.attr("id")){case"signUpEmail":t("#signUpEmailConfirm").after(a);break;case"signUpPassword":t("#signUpPasswordConf").after(a);break;default:e.after(a)}}d.EnableSubmit()},d.EnableSubmit=function(){var e=!!t(".dobvalid").length,n=!!t(".nickvalid").length,i=!!t(".emailvalid").length,a=!!t(".emailvalid").length;!!(e&&n&&i&&a)&&t("#submitAccount").removeClass("disabled")},d}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},,,function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(117),a=n(7),r={},o=!1,s={key:window.globals.reCaptchaPublicKey,keyV3:window.globals.reCaptchaV3PublicKey,reCaptchaIsInvisible:!1,language:window.globals.titlelang};function l(e,t,n){if(!window.globals.signInReCaptchaEnabled)return!1;if(void 0===e)return!1;if(null!=n&&void 0!==n){if("1"===n)return!0;if("0"===n)return!1}var i;return i=t,r.isCaptchaError(i)&&"incorrect-captcha-sol"===i.Error.Code}function c(e){var t=null;switch(e){case r.getSigninContainerId():t=4;break;case r.getSignupContainerId():t=14;break;case r.getResetPasswordContainerId():t=99;break;default:t=1}return t}function u(e){var t="SCUI_";switch(e){case r.getSigninContainerId():t+="SignIn";break;case r.getSignupContainerId():t+="SignUp";break;case r.getResetPasswordContainerId():t+="ResetPassword"}return t}return r.initializeCalled=function(){return o},r.isShowSignInCaptcha=function(){return window.globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha},r.getSigninContainerId=function(){return"signInReCaptchaInput"},r.getSignupContainerId=function(){return"signUpReCaptchaInput"},r.getResetPasswordContainerId=function(){return"resetPasswordReCaptchaInput"},r.init=function(e,n){t.remove(e),s.language=window.globals.titlelang,t.load(s,e,n,c(e),u(e)),o=!0},r.reload=function(e,n){r.initializeCalled()?t.reload(e,n,c(e),u(e)):r.init(e,n)},r.showError=function(e,t){if(t){var n=i("#"+e),r=n.siblings(".recaptcha-v2-error");r&&r.length||n.after("<div class='recaptcha-v2-error'></div>"),(r=i(".recaptcha-v2-error")).html(function(e){var t;switch(e){case"incorrect-captcha-sol":t=a.getTextCached("CaptchaError0","HomeSignin");break;case"captcha-timeout":t=a.getTextCached("CaptchaError2","HomeSignin");break;case"recaptcha-not-reachable":t=a.getTextCached("CaptchaError3","HomeSignin");break;default:t=a.getTextCached("CaptchaError4","HomeSignin")}return t}(t)).fadeIn("fast"),setTimeout((function(){r.fadeOut("slow")}),5e3)}},r.hideError=function(e,t){i("#"+e).siblings(".recaptcha-v2-error").hide()},r.isCaptchaRequired=function(e){if(!e)return!1;var t=e.data,n=e.headers.get("signinCaptcha");return l(e,t,n)},r.getCaptchaData=function(e){return{captchaId:e,responseFieldId:t.getResponseFieldId(),response:t.getResponseValue(e),responseFieldIdV3:t.getResponseFieldIdV3(),responseV3:t.getResponseValueV3(),isCaptcha:r.isVisible(e)}},r.getResponseValue=function(e){return t.getResponseValue(e)},r.isVisible=function(e){return t.isVisible(e)},r.remove=function(e){return t.remove(e)},r.isCaptchaError=function(e){return e&&!e.Status&&e.Error&&e.Error.Code.toLowerCase().indexOf("captcha")>-1},r.isError=function(e){return t.isError(e)},r.getErrorCode=function(e){switch(e){case"incorrect-captcha-sol":return"ReCaptchaError1";case"captcha-timeout":return"ReCaptchaError2";case"recaptcha-not-reachable":return"ReCaptchaError3";default:return}},r}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i,a=n(3)(n(5));void 0===(i=function(e){var t=n(4),i=n(1),r=n(27),o=n(8),s=n(40),l=n(11),c=n(13),u=n(36),d=n(23),f={autoSignInData:null,sdkSignInFailure:!1,cache:{},loginAccount:{},signinJson:null};function p(){var e=s.getItem("offlineSigninCount");return e?parseInt(e,10):0}function h(e){return!isNaN(e)&&s.setItem("offlineSigninCount",e)}function g(){if(void 0!==f.cache.profileList)return f.cache.profileList;var e=o.CallGameMethod("RGSC_GET_PROFILE_LIST",null,"RGSC_GET_PROFILE_LIST_DEMO");return void 0!==e&&e.NumProfiles>0&&(f.cache.profileList=e),e}return f.setGlobalsAccountScAuthToken=function(e){try{var t="string"==typeof e?JSON.parse(e||"null"):e;t&&t.ScAuthToken&&i.stringHasContent(t.ScAuthToken)&&(globals.account.ScAuthToken=t.ScAuthToken)}catch(e){i.WriteDebugLog("setGlobalsAccountScAuthToken","try-catch","failed to set ScAuthToken",i.logType.error,i.logController[i.getTitleName()])}},f.Account=function(e,t,n,i,a,r,o,s,l,c,u,d){return{AvatarUrl:e,CountryCode:t,Age:n,Email:i,isApproxDob:a,Nickname:r,RockstarId:o,ZipCode:s,Local:l,Minor:c,NickEditable:u,Validated:d,ScAuthToken:null}},f.clearAccount=function(){globals.account=null,globals.ticket="",f.clearAutoSigninData(),f.clearLoginAccount()},f.setAutoSigninData=function(e){f.autoSignInData=e},f.clearAutoSigninData=function(){f.autoSignInData=null},f.storeSignInAccount=function(e,t){i.WriteDebugLog("storeSignInAccount","ticket length",e.Ticket&&e.Ticket.length);var n=void 0;"string"==typeof e.Nickname&&e.Nickname.length&&(n=e.Nickname);var a=void 0;"string"==typeof e.AvatarUrl&&e.AvatarUrl.length&&(a=i.getLastStringSegment(e.AvatarUrl,"/",2)),f.signinAccount=new f.Account(a,e.CountryCode,e.Age,e.Email,e.IsApproxDob,n,e.RockstarId.toString(),e.ZipCode,e.Local||!1,e.Minor,void 0,void 0),f.signinAccount.IsAutoSignin=t&&t.AutoSignIn,f.signinAccount.isUpdatePassword=e&&e.UpdatePassword,f.signinAccount.Xml=e.Xml,globals.ticket=e.Ticket},f.getLoginAccount=function(){return f.signinAccount},f.isLoginAccountAvailable=function(){return f.signinAccount&&i.stringHasContent(f.signinAccount.Email)},f.clearLoginAccount=function(){f.signinAccount={}},f.isAutoSignin=function(){return f.signinAccount.IsAutoSignin},f.isUpdatePassword=function(e){if(!e)return!1;if(f.signinAccount&&"boolean"==typeof f.signinAccount.isUpdatePassword)return f.signinAccount.isUpdatePassword;throw new Error("signinAccount.isUpdatePassword is not defined, this function call should occur before clearing signinAccount")},f.updateGlobalsOnSignIn=function(e){globals.underage=!1;var t=f.getLoginAccount();globals.account=new f.Account(t.AvatarUrl,t.CountryCode,t.Age,t.Email,t.isApproxDob,t.Nickname,t.RockstarId,t.ZipCode,t.Local,t.Minor,t.NickEditable,t.Validated),i.stringHasContent(e)&&(globals.account.ScAuthToken=e),o.isSdkAvailable()&&(globals.ticket=""),f.clearLoginAccount()},f.signInSuccessMissingDetails=function(e,t){var n={hasAge:!isNaN(e)&&e>=1,hasCountry:"string"==typeof t&&t.length>0};return n.hasBoth=n.hasAge&&n.hasCountry,n},f.isCredsFromGameAvailable=function(e){var t=i.stringHasContent(e.Email),n=t&&i.stringHasContent(e.Password),a=i.stringHasContent(e.ScAuthToken),r=t&&i.stringHasContent(e.Ticket)&&e.TicketRefresh;return n||a||r},f.getProfileAsync=function(e,n,i){var a=null!=e&&null!=e&&"undefined"!=e,r=null!=i&&null!=i&&"undefined"!=i;if(!a&&!r)return Promise.reject();if(null!=n&&void 0!==n||(n=a?o.CallGameMethod("RGSC_GET_PROFILE_LIST_FILTERED",'{ "RockstarId":"'+e+'" }',"RGSC_GET_PROFILE_LIST","RGSC_GET_PROFILE_LIST_DEMO"):g()),!n)return Promise.resolve({});var s={};return n.NumProfiles>0&&(r&&"string"==typeof i&&(i=i.toLowerCase()),s=t.find(n.Profiles,(function(t){return e&&t.RockstarId==e||i&&("string"==typeof t.Email&&t.Email.toLowerCase()==i||"string"==typeof t.Nickname&&t.Nickname.toLowerCase()==i)}))),void 0===s||void 0!==s.RockstarId?Promise.resolve(s):Promise.resolve({Error:"6000.80"})},f.getOfflineProfileAsync=function(e,n){var r=e,o=g();if(null!=r)return f.getProfileAsync(r,o);var s=n;"string"==typeof s&&(s=s.toLowerCase());var l=t.find(o.Profiles,(function(e){return i.objStrMatch(e,"Email",s)||i.objStrMatch(e,"Nickname",s)}));return"object"===(0,a.default)(l)?f.getProfileAsync(l.id,o,s):Promise.resolve({})},f.getSignInPageData=function(e,t){var n;return e?void 0===f.cache.loadProfilesPromise?(f.cache.loadProfilesPromise=t(),n=f.cache.loadProfilesPromise):n=f.cache.loadProfilesPromise:(f.cache.loadProfilesPromise=t(),n=f.cache.loadProfilesPromise),n},f.isShowInProfileList=function(e){return null!==e&&"object"===(0,a.default)(e)&&(e.SaveEmail||e.Local)},f.isRememberMeProfile=function(e,t){return!e&&t.SaveEmail},f.prepSignin=function(e,t,n){return globals.signInRequested?(i.WriteDebugLog("prepSignin","denied","RGSC_JS_FINISH_SIGN_IN not yet returned"),{status:!1,isShowError:!1}):((null==e||e)&&globals.scsServiceEnabled||i.isOffline(!0),f.sdkSignInFailure&&(t=!0),n||(u.startSession(),l.trackPage("/Signin")),{status:!0,isShowError:t})},f.signInToGame=function(e){!function(){if(globals.signInRequested)return;globals.signInRequested=!0,setTimeout(f.clearSignInRequestNote,8e3)}(),o.CallGameMethod("RGSC_SIGN_IN",e,"RGSC_SIGN_IN_DEMO","RGSC_JS_FINISH_SIGN_IN")},f.clearSignInRequestNote=function(){delete globals.signInRequested},f.getSigninJson=function(e,t){var n={accountId:e.PlayerAccountId,Age:e.Age,AvatarPath:e.AvatarPath||"",AvatarPathSm:e.AvatarPathSm||"",AvatarPathLg:e.AvatarPathLg||"",Email:e.Email,EmailValidated:e.EmailValidated,DateSignedUp:e.DateSignedUp,expiration:e.SecsUntilExpiration,Local:!1,RockstarId:e.RockstarId.toString(),SaveEmail:!1,SaveMachine:e.SaveMachine,SavePassword:!1,sessionKey:e.SessionKey,SignedIn:!0,SignedOnline:!0,ticket:e.Ticket,XMLResponse:encodeURIComponent(e.Xml)};return i.stringHasContent(e.Nickname)&&(n.Nickname=e.Nickname),i.stringHasContent(e.AvatarUrl)&&(n.AvatarUrl=i.getLastStringSegment(e.AvatarUrl,"/",2)),f.autoSignInData&&(n.AutoSignIn=f.autoSignInData.AutoSignIn,n.SaveEmail=f.autoSignInData.SaveEmail,f.autoSignInData.DOB&&(n.DOB=f.autoSignInData.DOB)),n.AutoSignIn=n.AutoSignIn||t.checked,n.SaveEmail=n.SaveEmail||t.save,n},f.setupSignInGoogleAnalytics=function(e){i.WriteDebugLog("setupSignInGoogleAnalytics","rockstarId",e),e&&l.clearCustomDimensionData()},f.trackSignInEvents=function(e){if(e){l.trackEvent(c.category.profile,i.isMtl()?c.action.profile_sign_in_launcher:c.action.profile_sign_in);var t=p();t>0&&(l.setCustomDimensionOrMetric(c.metrics.offlineSigninCount,t),l.trackEvent(c.category.profile,c.action.profile_sign_in_offline),h(0))}},f.setSignInClassOnHtmlTag=function(e){i.toggleClassOnHtmlTag("isLoggedIn",e)},f.notifyGameSignInFailed=function(e,t){e=i.getErrorCodeString(e),t=i.getErrorCodeExString(t),o.CallGameMethod("RGSC_SIGN_IN",{Error:{ErrorCode:e,ErrorCodeEx:t}},"RGSC_SIGN_IN_DEMO","RGSC_JS_FINISH_SIGN_IN")},f.errorToCode=function(e){var t={errorCode:"",errorCodeEx:""};return e?("string"==typeof e&&(e=i.splitErrorCode(i.errorCode(e))),t.errorCode=e.Code||e.code,t.errorCodeEx=e.CodeEx||e.codeEx,t):t},f.parseSignInError=function(e,t,n,a,o){var s={errorMsg:"",errorMsgContext:"Error",reloadLoginForm:n,type:"Unknown"};if(i.errorCodeIs(e,"NotAllowed")&&(i.errorCodeExIs(t,"SteamAccountLink")||i.errorCodeExIs(t,"RockstarAccountLink")))i.errorCodeExIs(t,"SteamAccountLink")?s.errorMsg="SteamAlreadyLinked":s.errorMsg="RockstarAlreadyLinked",s.type="SteamAlreadyLinked";else if(i.errorCodeIs(e,"NotAllowed")&&i.errorCodeExIs(t,"EpicAccountLink"))s.errorMsg="EpicAlreadyLinked",s.type="EpicAlreadyLinked";else if(i.errorCodeExIs(t,"Privilege"))s.errorMsg="getUserBannedText",s.errorMsgContext="getUserBannedText",s.type="Banned";else if(i.errorCodeExIs(t,"LoginAttempts"))globals.showLockedAccountCaptchaSignIn=!globals.showLockedAccountCaptchaSignIn,s.errorMsg="TooManyLoginAttempts",s.type="TooManyLoginAttempts";else if(i.errorCodeIs(e,"AuthenticationFailed")){if(i.errorCodeExIs(t,"DupLogin")||i.errorCodeExIs(t,"SteamAPI")||"95"===t)s.errorMsg=i.joinErrorCode(i.getErrorCodeNum(e),i.getErrorCodeExNum(t)),s.errorMsgContext="ErrorWithCode";else if("101"===t)s.errorMsg="";else if("102"===t||"103"===t)s.reloadLoginForm=!1,s.errorMsg="4000."+t,s.errorMsgContext="ErrorWithCode";else if("105"===t)s.reloadLoginForm=!1,s.errorMsg="";else if("106"===t)s.reloadLoginForm=!1,s.errorMsg="MfaCodeInvalid";else if("115"===t)s.reloadLoginForm=!0,s.clearLoginForm=!0,s.errorMsg="4000."+t,s.errorMsgContext="ErrorWithCode";else if("116"===t)s.reloadLoginForm=!0,s.clearLoginForm=!0,s.errorMsg="4000."+t,s.errorMsgContext="ErrorWithCode";else if("119"===t)s.reloadLoginForm=!0,s.clearLoginForm=!0,s.errorMsg="4000."+t,s.errorMsgContext="ErrorWithCode";else{var l=globals.isNLE?"NotFound":"NotFoundEmail";s.errorMsg=l}s.type="AuthenticationFailed"}else if(a&&a.data&&r.isCaptchaError(a.data)){s.errorMsg="ReCaptchaError1",s.errorMsgContext="HomeSignin",s.type="InvalidCAPTCHA"}else a&&429===a.status?(s.errorMsg="8000",s.errorMsgContext="ErrorWithCodeAndDesc",s.type="RateLimit"):i.isSteam()&&o?s.type="SteamAutoLogin":i.isSteam()?(s.errorMsg="1000.50",s.errorMsgContext="ErrorWithCodeAndDesc",s.type="Steam"):i.isEpic()&&o?s.type="EpicAutoLogin":i.isEpic()&&(s.errorMsg="1000.186",s.errorMsgContext="ErrorWithCodeAndDesc",s.type="Epic");return s},f.clearCachedProfileList=function(){f.cache.profileList=void 0},f.getProfileListAsync=function(){if(void 0!==f.cache.profileList)return Promise.resolve(f.cache.profileList);return"RGSC_GET_PROFILE_LIST_ASYNC_DEMO",o.CallGameMethodAsync("RGSC_GET_PROFILE_LIST",null,"RGSC_GET_PROFILE_LIST_ASYNC_DEMO").then((function(e){return void 0!==e&&e.NumProfiles>0&&(f.cache.profileList=e),e}))},f.getNicknameFromRockstarId=function(e){var n="";if(e){var i=g();if(i&&i.Profiles){var a=t.find(i.Profiles,(function(t){return t&&t.RockstarId===e}));a&&(n=a.Nickname)}}return n},f.getRockstarIdAsync=function(e){return f.autoSignInData&&null!=f.autoSignInData.RockstarId?Promise.resolve(f.autoSignInData.RockstarId):f.getProfileAsync(void 0,void 0,e).then((function(e){if(void 0!==e)return e.RockstarId}))},f.getRememberedMachineTokenTokenAsync=function(e,t){return f.autoSignInData&&null!=f.autoSignInData.RememberedMachineToken?Promise.resolve(f.autoSignInData.RememberedMachineToken):f.getProfileAsync(e,void 0,t).then((function(e){if(void 0!==e)return e.RememberedMachineToken}))},f.forgetMachine=function(e){d.forgetMachine(e).catch((function(e){i.WriteDebugLog("signinUtils.forgetMachine","ajax error caught",e)}))},f.checkOfflineFallbackAsync=function(e,t){var n=i.errorCodeExIs(t,"Password");return"string"==typeof e&&e.length>0&&!n?Promise.resolve(e):Promise.reject()},f.constructOfflineSigninJson=function(e,t,n,i,a,r,o){return{AutoSignIn:i,Email:t,Local:!1,Password:n,RockstarId:e?e.toString():"0",SaveEmail:a,SavePassword:!1,SignedIn:!0,SignedOnline:!1,Nickname:r,AvatarUrl:o}},f.formatOfflineFallbackDataAsync=function(e,t){return{isOfflineFallback:e.isOfflineSignin,reloadLoginForm:t,errorMsg:"",selectedProfile:e.selectedProfile}},f.fallbackSigninFailedAsync=function(){return f.hasProfileListAsync().catch((function(){return{isOfflineFallback:!1,reloadLoginForm:!1}})).then((function(e){return{isOfflineFallback:!1,reloadLoginForm:!1,errorCode:e?i.errorCode("6000.80"):i.errorCode("6000.87")}}))},f.signInOfflineAsync=function(e,t,n){return t=t||{},n=n||!1,f.getOfflineProfileAsync(e,t.Email).then((function(a){var r,o=!1,s=void 0;if(!a||null==a.Email&&null==a.Nickname){if(!a||null==a.Error)return f.hasProfileListAsync().catch((function(e){throw new Error(e)})).then((function(e){return e})).then((function(e){return{errorMsg:e?"OfflineSigninError":"OfflineSigninErrorNoProfiles",errorMsgContext:"HomeSignin",isOfflineSignin:o}}));s=a.Error}else t.RockstarId=e||a.RockstarId||0,n||0==a.AutoSignIn?(void 0!==a.Email&&(t.Email=a.Email),void 0!==a.Password&&(t.Password=a.Password),void 0!==a.ScAuthToken&&(t.ScAuthToken=a.ScAuthToken),i.stringHasContent(a.Nickname)&&(t.Nickname=a.Nickname),i.stringHasContent(a.AvatarUrl)&&(t.AvatarUrl=a.AvatarUrl)):t=f.constructOfflineSigninJson(e,a.Email,a.Password,!0,!0,a.Nickname,a.AvatarUrl,a.AvatarUrl),f.storeSignInAccount(t,a.AutoSignIn),r=p(),h(++r),f.signInToGame(t),i.isOffline(!0),o=!0;return{errorMsg:s,isOfflineSignin:o,selectedProfile:a}}))},f.hasProfileListAsync=function(){return Promise.resolve(f.getProfileListAsync()).then((function(e){return e&&e.NumProfiles>0})).catch((function(){return!1}))},f.signOut=function(e,t){o.signOutAsync(t),e&&i.isOnline()&&globals.account&&i.stringHasContent(globals.account.ScAuthToken)&&d.signOut().catch((function(e){i.WriteDebugLog("signinUtils.signOut","ajax error caught",e)})),f.clearAccount(),f.setSignInClassOnHtmlTag(!1),i.isAcountCreated(!1),i.isLocal(!1),i.isSignedIn(!1),l.trackEvent(c.category.profile,c.action.profile_sign_out),u.endSession(),o.CallGameMethod("RGSC_DESTROY_COMMERCE_DATA",null,"RGSC_DESTROY_COMMERCE_DATA_DEMO")},i.pubsub.subscribe("signinUtils.notifyGameSignInFailed",(function(e,t){f.notifyGameSignInFailed(t.errorCode,t.errorCodeEx)})),f}.call(t,n,t,e))||(e.exports=i)},,function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0);n(63);var i=fetch.bind(window);return{ajax:t.ajax,fetch:i}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(40),i={};function a(e){var n=new Date;n.setDate(n.getDate()-globals.expireSocialCountsDays);var i="friendCountSaveDate";e&&(i="crewCountSaveDate");var a=t.getItem(i);return null!==(a=null!==a?new Date(a):null)&&a<n}function r(e,t){var n=i.getSocialCountTotals(),a="FriendCount";t&&(a="CrewCount");var r=-1;void 0!==n&&void 0!==n[a]&&null!==n[a]&&(r=n[a]),"subtract"==e&&r>0?r--:"add"==e&&r>-1&&r++,t?i.setSocialCountTotals(r,-1):i.setSocialCountTotals(-1,r)}return i.setSocialCountTotals=function(e,n){e>-1&&(t.setItem("crewCount",e),t.setItem("crewCountSaveDate",new Date)),n>-1&&(t.setItem("friendCount",n),t.setItem("friendCountSaveDate",new Date))},i.getSocialCountTotals=function(){var e=a(!0)?-1:t.getItem("crewCount"),n=a()?-1:t.getItem("friendCount");return{CrewCount:null!==e?e:-1,FriendCount:null!==n?n:-1}},i.updateFriendCount=function(e){r(e,!1)},i.updateCrewCount=function(e){r(e,!0)},i}.call(t,n,t,e))||(e.exports=i)},,function(e,t,n){"use strict";var i,a;i=[n(53)],void 0===(a=function(e){function t(e,t,n){return e<t?n.fn(this):n.inverse(this)}return e.registerHelper("ifless",t),t}.apply(t,i))||(e.exports=a)},,function(e,t,n){"use strict";var i,a;i=[n(0),n(30),n(1),n(6),n(7),n(10),n(8),n(22),n(15),n(20),n(47),n(12),n(11),n(31),n(18),n(4),n(171),n(19)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c,u,d,f,p,h,g,m){var v={},b={lastChecked:0};function C(t){return n.WriteDebugLog("GetFriendAchievements","data",t),r.LoadGameAchievements(null,e(t).find("AchievementList")),t}function S(t){var n=e(t).find("Status").text();i.ToggleCompareFriendElements(n),r.removeLoading("accomplishPanel")}v.init=function(){e("#compareAccomplish").click((function(e){e.preventDefault(),u.loadCompareAccomplish()})),e("#compareSelect").find(".close").click((function(){return r.closeCompareAccomplish(),e("#accomplishPanel").removeClass("compared"),y(),!1})),e("#compareSelectList").on("click","a",(function(t){t&&t.preventDefault();var n=e(this);T(n.attr("data-userid"),n.attr("data-useravatar"),n.text());var i=e("#accomplishPanel .friendStatsTitle");i.html().length>12&&i.html(i.html().substring(0,9)+"...")})),e("#compareAccomplishLink").click((function(){var t=e("#friendProfileHead");return T(t.closest("#friendProfile").attr("data-id"),n.getLastStringSegment(t.find("img.avatarImg").attr("src"),"/",2),t.find("h5.profilenickname").text()),!1})),e("#accomplishHeaderBtn").click((function(t){if(t&&t.preventDefault(),globals.isLauncher)return!1;if(!e(this).hasClass("disabled")){r.closeCompareAccomplish();var i=e("#accomplishPanel");i.removeClass("compared"),i.find("#comparedFriend").hide(),i.hasClass("active")?e("#awardsLink2").click():e("div.active").is(":animated")||(n.isSignedIn()?r.clearActivePanel((function(){e("#accomplishPanel").removeClass("achievements"),e("#awardsLink2").click()})):(0==e("#awardsButton").find(".on").length&&(i.removeClass("achievements"),r.setSelected(this)),s.navigatePendingSignIn("#accomplishHeaderBtn")))}return!1})),e("#accomplishPanel").on("keydown",".sideMenu a",(function(t){var n=e(t.currentTarget);13==t.which&&n.visible()&&e(this).click()})),e("#awardsButton").click((function(t){if(t&&t.preventDefault(),globals.isLauncher)return!1;if(!e(this).hasClass("disabled")){var i=e("#accomplishPanel");r.setSelected(e(this)),i.hasClass("active")||e("div.active").is(":animated")?e("#awardsLink2").click():n.isSignedIn()?r.clearActivePanel((function(){r.setUpLoadingPanel("#accomplishPanel"),e("#awardsLink2").click()})):s.navigatePendingSignIn("#awardsButton")}return!1})),e("#awardsLink2").click((function(t){if(t&&t.preventDefault(),!globals.isLauncher){var i=e(this),a=e("#accomplishPanel");i.hasClass("disabled")||i.hasClass("on")&&a.hasClass("active")?n.WriteDebugLog("awardsLink2 click disabled"):(a.find(".content").hide(),a.find("#achievementsHeader").show(),e("#awardsButton").length?r.setSelected(e("#awardsButton")):0==e("#accomplishHeaderBtn").find(".on").length&&r.setSelected("#accomplishHeaderBtn"),r.setSelectedSide(e(this)),n.isSignedIn()?r.setUpLoadingPanel("#accomplishPanel",(function(){e("#achievementsData2").html(""),e("#achievementsContent").show(),e("#accomplishPanel").hasClass("compared")?e("#accomplishPanel").attr("class","panel active achievements compared"):e("#accomplishPanel").attr("class","panel active achievements"),e("#accomplishPanel").hasClass("compared")?c.GetFriendAchievementsJS(e("#comparedFriendNickname").attr("data-userid")).then(C).catch().then(S):e("#accomplishPanel").find("#achievementsContent").animate({opacity:"1"},500,(function(){r.LoadGameAchievements()}))})):(a.attr("class","panel achievements"),s.navigatePendingSignIn("#accomplishHeaderBtn")),f.trackPage("/Accomplishments"))}}))},v.LoadHomeScreen=function(){n.isOnline()&&n.isSignedIn()&&!n.isLocal()&&i.isMultiPlayerSupported()?(e("#landingFriends #noFriends").hide(),e("#landingFriendsList").empty(),r.setUpLoading("#landingFriends",E)):r.removeLoading("landingFriends")},v.getHomePageFriends=function(i){if(n.WriteDebugLog("gamecommon.getHomePageFriends","",""),!n.isOffline()&&n.isSignedIn()){var a={PageSize:250,PageIndex:0,Players:[]},s={env:globals.rosEnvironment,title:globals.titleName,version:globals.RosTitleVersion,pageSize:a.PageSize,pageIndex:a.PageIndex,rockstarId:"",updatedFriendIds:i},l=["getfriends",globals.account.RockstarId].join(":");if(void 0===i&&c.getFriendsCache[l]&&Date.now()-b.lastChecked<=3e4){n.WriteDebugLog("gamecommon.getHomePageFriends","use cached","true");var u=c.getFriendsCache[l];w(u,a)}else{n.WriteDebugLog("gamecommon.getHomePageFriends","fetch","true"),b.lastChecked=Date.now();var f=o.GetAuthHeaderAsync();f.then((function(i){t.ajax({type:"POST",url:n.getApiUrl("/api/friend/getfriends"),headers:i,data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",silentFail:!0,fatalError:d.ShowErrorModal,contentEl:e("#landingFriendsList"),services:["friends"],success:function(e,t){"success"===t&&(c.getFriendsCache[l]=e),w(e,a)},error:function(){r.removeLoading("landingFriends")}})})),f.catch((function(){r.removeLoading("landingFriends")}))}}else n.WriteDebugLog("gamecommon.getHomePageFriends","cancelled","offline: "+n.isOffline()+", signedIn: "+n.isSignedIn())};var y=function(){var t=e("#accomplishPanel .sideMenu li a.on");"awardsLink2"===t.attr("id")&&t.removeClass("on").click()},E=function(){n.isScuiVisible()&&r.isActivePanel("#homefeedPanel")&&setTimeout(v.getHomePageFriends,globals.homePageFriendsDelay)},w=function(t,i){var a=t.RockstarAccountList.RockstarAccounts;null!=t.RockstarAccountList&&null!=a&&a.length>0?(e.each(a,(function(){var e=n.getOnlineTitle(this.IsOnline,this.OnlineGames);i.Players.push({RockstarId:this.RockstarId,AvatarUrl:this.AvatarUrl,DisplayName:this.DisplayName,MutualFriends:this.MutualFriendCount,ViewerMutualFriendCount:this.MutualFriendCount,Relationship:this.Relationship,ViewerRelationship:this.ViewerRelationship,IsOnline:this.IsOnline,Game:this.IsOnline?e.game:null,Platform:this.IsOnline?e.platform:null})})),i.Success=!0,i.Count=i.Players.length,i.Total=t.RockstarAccountList.Total,i.OnlineTotal=t.RockstarAccountList.OnlineTotal,i.PageIndex=t.RockstarAccountList.PageIndex,p.setSocialCountTotals(-1,i.Total),k(i)):_()},k=function(t){if(t){var o="",s=e("#landingFriendsList");if(e("#onlineFriendCount").text(t.OnlineTotal),e("#landingFriends").find("h3").show(),void 0!==t.PageIndex&&0!==t.PageIndex||(s.data("total",t.Total),s.empty()),t.Count>0){var u=a.getTextCached("PlayingGameOn","Social","Playing {0} on {1}"),d=[];e.each(t.Players,(function(e,t){t.IsOnline&&d.push(t.RockstarId)})),d.length&&l.requestMultiplayerPresenceInfo(d);var f=function(e){e&&e.length&&e.length>0&&(e=g.sortBy(e,(function(e){return e.IsOnline?0:1})));return e}(t.Players);e.each(f,(function(e,t){var i=h.getAvatarUrl(t.AvatarUrl,t.DisplayName);t.AvatarUrl=i;var r=t.IsOnline?u.format(t.Game,t.Platform):a.getTextCached("Offline","Social");t.PlayingGame=r,o+=n.renderCompiledTemplate(m,t)})),s.append(o),s.find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),s.find("a.profileButton").click((function(){var t=e(this).parent();t.find(".arrow").is(":visible")&&t.toggleClass("open")})),s.find(".avatarImg").on("error",i.avatar404),s.off("click","a.optionGameInvite").on("click","a.optionGameInvite",(function(){return c.SendGameInvite(e(this).attr("data-id")),!1})),s.off("click","h5.optionProfile, img.avatarImg").on("click","h5.optionProfile, img.avatarImg",(function(){return e("#friendProfilePanel .content").hide(),c.friendProfileView(e(this).parents("a").attr("data-id")),!1})),s.off("click","a.optionJoingame").on("click","a.optionJoingame",(function(){return c.SendJoinGame(e(this).attr("data-id")),!1}))}r.removeLoading("landingFriends"),s.find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),r.resetScrollbar("#landingFriends")}};var _=function(){var t=e("#landingFriends"),n=t.find("#noFriends.emptySocial");n.find(".btn").off("click").on("click",(function(e){e.preventDefault(),i.pubsub.trigger("setupEnv.showSocial","#findPlayerLink")})),n.find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),t.find("h3").hide(),r.resetScrollbar("#landingFriends"),n.show(),r.removeLoading("landingFriends")},T=function(t,i,a){n.WriteDebugLog("CompareWithFriend","friendRockstarId, friendAvatarUrl, friendNickname",t+","+i+","+a);var o,s=e("#accomplishPanel"),l=t;o=""==i||"null"==i||i.match(/default.png$/)?h.getAvatarUrl(void 0,void 0,32):h.getAvatarUrl(i,a,32);var u=a;r.closeCompareAccomplish(),s.find("#comparedFriendNickname").text(u),s.find("#comparedFriendNickname").attr("data-userid",l),s.find("#comparedFriendAvatar").attr("src",o),s.find("#achievementsHeader").find("h5.friendStatsTitle").html(u),s.find("#comparedFriend").fadeIn().addClass("compare"),s.find("#compareAccomplish").addClass("compare"),s.addClass("compared"),s.hasClass("active")?s.hasClass("achievements")&&c.GetFriendAchievementsJS(l).then(C).catch().then(S):r.setUpLoadingPanel("#accomplishPanel",(function(){(s=e("#accomplishPanel")).find(".content").hide(),e("#achievementsContent").show(),s.find("#achievementsHeader ").show(),r.setSelectedSide(s.find("#awardsLink2")),s.hasClass("compared")?s.attr("class","panel active achievements compared"):s.attr("class","panel active achievements"),s.hasClass("achievements")&&c.GetFriendAchievementsJS(l).then(C).catch().then(S),l=null}))};return v}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(11),i=n(13),a=n(31),r=n(23),o=n(1),s={};function l(){return new Promise((function(e){var t={};t[i.dimensions.environment]=s.environment,t[i.dimensions.loginState]="false",e(t)}))}function c(e){var t=e;return Array.isArray(e)&&e.length>0&&(t=e[0]),function(e){return e&&(e.currencyCode||e.CurrencyCode)}(t)}function u(e){return e&&e.length&&0!==e.length?"string"==typeof e?e:e.join("/"):""}s.environment=location.hostname.replace(/.ros.rockstargames.com/gi,"").replace(/.scui/gi,"")+".scui",s.startSession=function(){t.startSession(),t.setCustomDimensionOrMetric(i.dimensions.loginState,"false"),t.setCustomDimensionOrMetric(i.dimensions.environment,s.environment)},s.endSession=function(){t.endSession()},s.dashboardCtaButtonClicked=function(e){t.trackEvent(i.category.game,i.action.dashboard_cta_button_clicked,e)},s.dashboardPageViewed=function(e){t.trackPage("/Games/".concat(e))},s.pageViewPickN=function(e){t.trackPage("/Store/".concat(e,"/Offers/PickN"))},s.trackPageSignInSdk=function(){t.trackPage("/SignIn/Sdk")},s.dashboardSideBarTitleClicked=function(e){t.trackEvent(i.category.game,i.action.dashboard_sidebar_clicked,e)},s.setUserId=function(e){o.isAmUI()&&(t.setUserId(e),t.setCustomDimensionOrMetric(i.dimensions.memberId,e))},s.getCustomDimensionData=function(){if(!o.isSignedIn()&&!o.isAcountCreated()||o.isOffline()||o.isLocal())return l();var e=a.getSocialCountTotals();return e.environment=s.environment,r.getAnalyticsData(e).then((function(e){if(e.ok&&e.data){var n=e.data.memberId||"0";return e.data.memberId=n,function(e){o.setAmUI(!e),t.set("anonymizeIp",e)}("0"===n),s.setUserId(n),o.isAcountCreated()&&(setTimeout(t.clearCustomDimensionData,0),o.isAcountCreated(!1)),e.data}return{}})).catch((function(e){return o.WriteDebugLog("getCustomDimensionData","handled err",JSON.stringify(e)),l()}))},s.setCurrentlyPlaying=function(e,n){var a=p(e),r=h(n);t.setCustomDimensionOrMetric(i.dimensions.game,a),t.setCustomDimensionOrMetric(i.dimensions.platform,r),t.setCustomDimensionOrMetric(i.dimensions.currentlyPlaying,g(a,r))},s.setLanguage=function(e){t.setCustomDimensionOrMetric(i.dimensions.language,e)},s.setGamePlatform=function(e){t.setCustomDimensionOrMetric(i.dimensions.gamePlatform,e)},s.getCreationPath=function(e,t){return g(p(e),h(t))},s.productInfo=function(e,n){t.ecClickProduct(e,n,c(e)),t.trackEvent(i.category.store,i.action.store_select_item),t.ecDetailProduct(e,n,c(e)),t.trackPage("/Store/ProductInfo")},s.productListRendered=function(){t.trackPage("/Store/Products")},s.addImpressions=function(e,n){e&&e.length>0&&(t.ecAddImpressions(e,c(e)),t.trackEvent(i.category.store,n?i.action.store_select_item:i.action.store_product_scroll))},s.addImpressionsForMtlStore=function(e){e&&e.length>0&&t.ecAddImpressions(e,c(e))},s.trackStoreScroll=function(){t.trackEvent(i.category.store,i.action.store_product_scroll)},s.checkout=function(e){t.ecCheckout(e,void 0,1,c(e)),t.trackPage("/Store/Checkout")},s.formatProduct=function(e,t,n,i){if(e)return{brand:t,category:u(e.CategoryMemberships),currencyCode:c(e),id:e.Id,list:n,name:e.Name,position:i,price:e.Price,quantity:1}},s.formatImpression=function(e,t,n,i){if(e)return{brand:t,category:u(e.CategoryMemberships),currencyCode:c(e),id:e.Id,list:n,name:e.Name,position:i,price:e.Price}},s.formatPromotion=function(e,t,n,i){if(e||t){var a={id:e,name:t};return n&&(a.creative=n),i&&(a.position=i),a}},s.marketingItemsViewable=function(){t.trackEvent(i.category.marketing,i.action.marketing_items_visible)},s.proceedToPayment=function(){t.trackPage("/Store/ProceedToPayment")},s.confirmPurchase=function(e,n){t.ecCheckout(e,n,2,c(e)),t.setCustomDimensionOrMetric(i.dimensions.paymentType,n),t.trackPage("/Store/ConfirmPurchase")},s.checkoutCompletion=function(e,n,a){n.affiliation=n.affiliation||"SCUI Store",t.ecPurchase(e,n,a),t.trackPage("/Store/CheckoutCompletion"),t.isEcSetup()&&(t.setCustomDimensionOrMetric(i.dimensions.previousPurchase,"true"),t.setCustomDimensionOrMetric(i.dimensions.lastPurchaseDate,(new Date).toISOString()))},s.requestCheckout=function(e){t.ecAddProductToShoppingCart(e,c(e)),t.trackEvent(i.category.store,i.action.store_start_purchase,e.id)},s.rdr2SelectEdition=function(e){t.trackEvent(i.category.store,i.action.rdr2_select_edition,e)},s.rdr2CompareEditions=function(){t.trackEvent(i.category.store,i.action.rdr2_compare_editions)},s.rdr2ViewOfferGames=function(){t.trackEvent(i.category.store,i.action.rdr2_view_offer_games)},s.rdr2CloseOfferGames=function(){t.trackEvent(i.category.store,i.action.rdr2_close_offer_games)},s.rdr2SelectPromoGame=function(e){t.trackEvent(i.category.store,i.action.rdr2_select_promo_game,e)},s.rdr2DeSelectPromoGame=function(e){t.trackEvent(i.category.store,i.action.rdr2_deselect_promo_game,e)},s.rdr2ClickProduct=function(e,n){t.ecClickProduct(e,n,c(e))};var d={mp3:"mp3",lanoire:"lanoire",lanoirevr:"lanoirevr",gta5:"gta5",rdr2:"rdr2"},f="pcros";function p(e){if("string"!=typeof e)throw new Error("Invalid argument");var t=d[e.toLowerCase()];return void 0===t&&(t="unknown"),t}function h(e){return e||f}function g(e,t){return e+"_"+t}return s}.call(t,n,t,e))||(e.exports=i)},,,function(e,t,n){(function(t){var i=n(0),a=n(3)(n(5));!function(e,t){
/*! jQuery UI - v1.10.4 - 2014-05-08
  * http://jqueryui.com
  * Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.menu.js, jquery.ui.effect.js
  * Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
var n,i,a=0,r=/^ui-id-\d+$/;function o(t,n){var i,a,r,o=t.nodeName.toLowerCase();return"area"===o?(a=(i=t.parentNode).name,!(!t.href||!a||"map"!==i.nodeName.toLowerCase())&&(!!(r=e("img[usemap=#"+a+"]")[0])&&s(r))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:(n=e.fn.focus,function(t,i){return"number"==typeof t?this.each((function(){var n=this;setTimeout((function(){e(n).focus(),i&&i.call(n)}),t)})):n.apply(this,arguments)}),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(n=a.css("position"))||"relative"===n||"fixed"===n)&&(i=parseInt(a.css("zIndex"),10),!isNaN(i)&&0!==i))return i;a=a.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++a)}))},removeUniqueId:function(){return this.each((function(){r.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return o(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),i=isNaN(n);return(i||n>=0)&&o(t,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(t,n){var i="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function o(t,n,a,r){return e.each(i,(function(){n-=parseFloat(e.css(t,"padding"+this))||0,a&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)})),n}e.fn["inner"+n]=function(t){return void 0===t?r["inner"+n].call(this):this.each((function(){e(this).css(a,o(this,t)+"px")}))},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each((function(){e(this).css(a,o(this,t,!0,i)+"px")}))}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(i=e.fn.removeData,function(t){return arguments.length?i.call(this,e.camelCase(t)):i.call(this)})),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var a,r=e.ui[t].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(e,t,n){var i,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)e.options[a[i][0]]&&a[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i,a=n&&"left"===n?"scrollLeft":"scrollTop";return t[a]>0||(t[a]=1,i=t[a]>0,t[a]=0,i)}})}(t),function(e,t){var n=0,i=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(e){}a(t)},e.widget=function(t,n,i){var a,r,o,s,l={},c=t.split(".")[0];t=t.split(".")[1],a=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[c]=e[c]||{},r=e[c][t],o=e[c][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,(function(t,i){var a,r;e.isFunction(i)?l[t]=(a=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)},function(){var e,t=this._super,n=this._superApply;return this._super=a,this._superApply=r,e=i.apply(this,arguments),this._super=t,this._superApply=n,e}):l[t]=i})),o.prototype=e.widget.extend(s,{widgetEventPrefix:r&&s.widgetEventPrefix||t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:a}),r?(e.each(r._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(t){for(var n,a,r=i.call(arguments,1),o=0,s=r.length;o<s;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&void 0!==a&&(e.isPlainObject(a)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],a):e.widget.extend({},a):t[n]=a);return t},e.widget.bridge=function(t,n){var a=n.prototype.widgetFullName||t;e.fn[t]=function(r){var o="string"==typeof r,s=i.call(arguments,1),l=this;return r=!o&&s.length?e.widget.extend.apply(null,[r].concat(s)):r,o?this.each((function(){var n,i=e.data(this,a);return i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")})):this.each((function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,a,r,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(a=o[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)a[i[r]]=a[i[r]]||{},a=a[i[r]];if(t=i.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var a,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=a=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),e.each(i,(function(i,o){function s(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?r[o]:o).apply(r,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?a.delegate(u,c,s):n.bind(c,s)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var a,r,o=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?!0===a||"number"==typeof a?n:a.effect||n:t;"number"==typeof(a=a||{})&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),o&&e.effects&&e.effects.effect[s]?i[t](a):s!==t&&i[s]?i[s](a.duration,a.easing,r):i.queue((function(n){e(this)[t](),r&&r.call(i[0]),n()}))}}))}(t),function(e,t){var n=!1;e(document).mouseup((function(){n=!1})),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,a=1===t.which,r=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(a&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(t),function(e,t){e.ui=e.ui||{};var n,i=Math.max,a=Math.abs,r=Math.round,o=/left|center|right/,s=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=e.fn.position;function f(e,t,n){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function h(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,a=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=a.children()[0];return e("body").append(a),t=r.offsetWidth,a.css("overflow","scroll"),t===(i=r.offsetWidth)&&(i=a[0].clientWidth),a.remove(),n=t-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,isDocument:!!n[0]&&9===n[0].nodeType,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var n,u,g,m,v,b,C=e(t.of),S=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(S),E=(t.collision||"flip").split(" "),w={};return b=h(C),C[0].preventDefault&&(t.at="left top"),u=b.width,g=b.height,m=b.offset,v=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=o.test(i[0])?i.concat(["center"]):s.test(i[0])?["center"].concat(i):["center","center"]),i[0]=o.test(i[0])?i[0]:"center",i[1]=s.test(i[1])?i[1]:"center",e=l.exec(i[0]),n=l.exec(i[1]),w[this]=[e?e[0]:0,n?n[0]:0],t[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]})),1===E.length&&(E[1]=E[0]),"right"===t.at[0]?v.left+=u:"center"===t.at[0]&&(v.left+=u/2),"bottom"===t.at[1]?v.top+=g:"center"===t.at[1]&&(v.top+=g/2),n=f(w.at,u,g),v.left+=n[0],v.top+=n[1],this.each((function(){var o,s,l=e(this),c=l.outerWidth(),d=l.outerHeight(),h=p(this,"marginLeft"),b=p(this,"marginTop"),k=c+h+p(this,"marginRight")+y.width,_=d+b+p(this,"marginBottom")+y.height,T=e.extend({},v),I=f(w.my,l.outerWidth(),l.outerHeight());"right"===t.my[0]?T.left-=c:"center"===t.my[0]&&(T.left-=c/2),"bottom"===t.my[1]?T.top-=d:"center"===t.my[1]&&(T.top-=d/2),T.left+=I[0],T.top+=I[1],e.support.offsetFractions||(T.left=r(T.left),T.top=r(T.top)),o={marginLeft:h,marginTop:b},e.each(["left","top"],(function(i,a){e.ui.position[E[i]]&&e.ui.position[E[i]][a](T,{targetWidth:u,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:o,collisionWidth:k,collisionHeight:_,offset:[n[0]+I[0],n[1]+I[1]],my:t.my,at:t.at,within:S,elem:l})})),t.using&&(s=function(e){var n=m.left-T.left,r=n+u-c,o=m.top-T.top,s=o+g-d,f={target:{element:C,left:m.left,top:m.top,width:u,height:g},element:{element:l,left:T.left,top:T.top,width:c,height:d},horizontal:r<0?"left":n>0?"right":"center",vertical:s<0?"top":o>0?"bottom":"middle"};u<c&&a(n+r)<u&&(f.horizontal="center"),g<d&&a(o+s)<g&&(f.vertical="middle"),i(a(n),a(r))>i(a(o),a(s))?f.important="horizontal":f.important="vertical",t.using.call(this,e,f)}),l.offset(e.extend(T,{using:s}))}))},e.ui.position={fit:{left:function(e,t){var n,a=t.within,r=a.isWindow?a.scrollLeft:a.offset.left,o=a.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,c=s+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&c<=0?(n=e.left+l+t.collisionWidth-o-r,e.left+=l-n):e.left=c>0&&l<=0?r:l>c?r+o-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=i(e.left-s,e.left)},top:function(e,t){var n,a=t.within,r=a.isWindow?a.scrollTop:a.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,c=s+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&c<=0?(n=e.top+l+t.collisionHeight-o-r,e.top+=l-n):e.top=c>0&&l<=0?r:l>c?r+o-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=i(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];u<0?((n=e.left+f+p+h+t.collisionWidth-s-o)<0||n<a(u))&&(e.left+=f+p+h):d>0&&((i=e.left-t.collisionPosition.marginLeft+f+p+h-l)>0||a(i)<d)&&(e.left+=f+p+h)},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,f="top"===t.my[1],p=f?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];u<0?(i=e.top+p+h+g+t.collisionHeight-s-o,e.top+p+h+g>u&&(i<0||i<a(u))&&(e.top+=p+h+g)):d>0&&(n=e.top-t.collisionPosition.marginTop+p+h+g-l,e.top+p+h+g>d&&(n>0||a(n)<d)&&(e.top+=p+h+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,a,r,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(r in t=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[r]=i[r];t.appendChild(s),(n=o||document.documentElement).insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",a=e(s).offset().left,e.support.offsetFractions=a>10&&a<11,t.innerHTML="",n.removeChild(t)}()}(t),function(e,t){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,a=this.element[0].nodeName.toLowerCase(),r="textarea"===a,o="input"===a;this.isMultiLine=!!r||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[r||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(a.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",a);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case r.UP:t=!0,this._keyEvent("previous",a);break;case r.DOWN:t=!0,this._keyEvent("next",a);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case r.TAB:this.menu.active&&this.menu.select(a);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:n=!0,this._searchTimeout(a)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var a=e.ui.keyCode;switch(i.keyCode){case a.PAGE_UP:this._move("previousPage",i);break;case a.PAGE_DOWN:this._move("nextPage",i);break;case a.UP:this._keyEvent("previous",i);break;case a.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()}))}))},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var i=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,a){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(t),function(e,t){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,i,a,r,o,s=!0;function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,i=this.previousFilter||"",a=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),a===i?r=!0:a=i+a,o=new RegExp("^"+l(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter((function(){return o.test(e(this).children("a").text())})),(n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(a=String.fromCharCode(t.keyCode),o=new RegExp("^"+l(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter((function(){return o.test(e(this).children("a").text())}))),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=a,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev("a"),a=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(a),t.attr("aria-labelledby",i.attr("id"))})),(t=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,a,r,o,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.height(),a<0?this.activeMenu.scrollTop(r+a):a+s>o&&this.activeMenu.scrollTop(r+a-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,a;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i-a<0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var n,i,a;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=e(this)).offset().top-i+a>0})),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(t),function(e,n){var i;e.effects={effect:{}},
/*!
   * jQuery Color Animations v2.1.2
   * https://github.com/jquery/jquery-color
   *
   * Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   *
   * Date: Wed Jan 16 08:47:09 2013 -0600
   */
function(e,t){var n,i=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],r=e.Color=function(t,n,i,a){return new e.Color.fn.parse(t,n,i,a)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=r.support={},c=e("<p>")[0],u=e.each;function d(e,t,n){var i=s[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function f(t){var i=r(),s=i._rgba=[];return t=t.toLowerCase(),u(a,(function(e,n){var a,r=n.re.exec(t),l=r&&n.parse(r),c=n.space||"rgba";if(l)return a=i[c](l),i[o[c].cache]=a[o[c].cache],s=i._rgba=a._rgba,!1})),s.length?("0,0,0,0"===s.join()&&e.extend(s,n.transparent),i):n[t]}function p(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}c.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=c.style.backgroundColor.indexOf("rgba")>-1,u(o,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),r.fn=e.extend(r.prototype,{parse:function(t,i,a,s){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=e(t).css(i),i=void 0);var l=this,c=e.type(t),p=this._rgba=[];return void 0!==i&&(t=[t,i,a,s],c="array"),"string"===c?this.parse(f(t)||n._default):"array"===c?(u(o.rgba.props,(function(e,n){p[n.idx]=d(t[n.idx],n)})),this):"object"===c?(u(o,t instanceof r?function(e,n){t[n.cache]&&(l[n.cache]=t[n.cache].slice())}:function(n,i){var a=i.cache;u(i.props,(function(e,n){if(!l[a]&&i.to){if("alpha"===e||null==t[e])return;l[a]=i.to(l._rgba)}l[a][n.idx]=d(t[e],n,!0)})),l[a]&&e.inArray(null,l[a].slice(0,3))<0&&(l[a][3]=1,i.from&&(l._rgba=i.from(l[a])))}),this):void 0},is:function(e){var t=r(e),n=!0,i=this;return u(o,(function(e,a){var r,o=t[a.cache];return o&&(r=i[a.cache]||a.to&&a.to(i._rgba)||[],u(a.props,(function(e,t){if(null!=o[t.idx])return n=o[t.idx]===r[t.idx]}))),n})),n},_space:function(){var e=[],t=this;return u(o,(function(n,i){t[i.cache]&&e.push(n)})),e.pop()},transition:function(e,t){var n=r(e),i=n._space(),a=o[i],l=0===this.alpha()?r("transparent"):this,c=l[a.cache]||a.to(l._rgba),f=c.slice();return n=n[a.cache],u(a.props,(function(e,i){var a=i.idx,r=c[a],o=n[a],l=s[i.type]||{};null!==o&&(null===r?f[a]=o:(l.mod&&(o-r>l.mod/2?r+=l.mod:r-o>l.mod/2&&(r-=l.mod)),f[a]=d((o-r)*t+r,i)))})),this[i](f)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),a=r(t)._rgba;return r(e.map(n,(function(e,t){return(1-i)*a[t]+i*e})))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,(function(e,t){return null==e?t>2?1:0:e}));return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),r.fn.parse.prototype=r.fn,o.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,a=e[1]/255,r=e[2]/255,o=e[3],s=Math.max(i,a,r),l=Math.min(i,a,r),c=s-l,u=s+l,d=.5*u;return t=l===s?0:i===s?60*(a-r)/c+360:a===s?60*(r-i)/c+120:60*(i-a)/c+240,n=0===c?0:d<=.5?c/u:c/(2-u),[Math.round(t)%360,n,d,null==o?1:o]},o.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],a=e[3],r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;return[Math.round(255*p(o,r,t+1/3)),Math.round(255*p(o,r,t)),Math.round(255*p(o,r,t-1/3)),a]},u(o,(function(t,n){var a=n.props,o=n.cache,s=n.to,l=n.from;r.fn[t]=function(t){if(s&&!this[o]&&(this[o]=s(this._rgba)),void 0===t)return this[o].slice();var n,i=e.type(t),c="array"===i||"object"===i?t:arguments,f=this[o].slice();return u(a,(function(e,t){var n=c["object"===i?e:t.idx];null==n&&(n=f[t.idx]),f[t.idx]=d(n,t)})),l?((n=r(l(f)))[o]=f,n):r(f)},u(a,(function(n,a){r.fn[n]||(r.fn[n]=function(r){var o,s=e.type(r),l="alpha"===n?this._hsla?"hsla":"rgba":t,c=this[l](),u=c[a.idx];return"undefined"===s?u:("function"===s&&(r=r.call(this,u),s=e.type(r)),null==r&&a.empty?this:("string"===s&&(o=i.exec(r))&&(r=u+parseFloat(o[2])*("+"===o[1]?1:-1)),c[a.idx]=r,this[l](c)))})}))})),r.hook=function(t){var n=t.split(" ");u(n,(function(t,n){e.cssHooks[n]={set:function(t,i){var a,o,s="";if("transparent"!==i&&("string"!==e.type(i)||(a=f(i)))){if(i=r(a||i),!l.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&o&&o.style;)try{s=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}i=i.blend(s&&"transparent"!==s?s:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(e){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=r(t.elem,n),t.end=r(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}}))},r.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return u(["Top","Right","Bottom","Left"],(function(n,i){t["border"+i+"Color"]=e})),t}},n=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(t),function(){var n,i=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function r(t){var n,i,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(a&&a.length&&a[0]&&a[a[0]])for(i=a.length;i--;)"string"==typeof a[n=a[i]]&&(r[e.camelCase(n)]=a[n]);else for(n in a)"string"==typeof a[n]&&(r[n]=a[n]);return r}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(n,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(t.style(e.elem,i,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,n,o,s){var l=e.speed(n,o,s);return this.queue((function(){var n,o=e(this),s=o.attr("class")||"",c=l.children?o.find("*").addBack():o;c=c.map((function(){return{el:e(this),start:r(this)}})),(n=function(){e.each(i,(function(e,n){t[n]&&o[n+"Class"](t[n])}))})(),c=c.map((function(){return this.end=r(this.el[0]),this.diff=function(t,n){var i,r,o={};for(i in n)r=n[i],t[i]!==r&&(a[i]||!e.fx.step[i]&&isNaN(parseFloat(r))||(o[i]=r));return o}(this.start,this.end),this})),o.attr("class",s),c=c.map((function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()})),e.when.apply(e,c.get()).done((function(){n(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(o[0])}))}))},e.fn.extend({addClass:(n=e.fn.addClass,function(t,i,a,r){return i?e.effects.animateClass.call(this,{add:t},i,a,r):n.apply(this,arguments)}),removeClass:function(t){return function(n,i,a,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,a,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,a,r,o){return"boolean"==typeof i||void 0===i?a?e.effects.animateClass.call(this,i?{add:n}:{remove:n},a,r,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,a,r)}}(e.fn.toggleClass),switchClass:function(t,n,i,a,r){return e.effects.animateClass.call(this,{add:n,remove:t},i,a,r)}})}(),function(){function t(t,n,i,a){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(a=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(a=i,i=n,n={}),e.isFunction(i)&&(a=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=a||n.complete,t}function n(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"===(0,a.default)(t)&&!t.effect))}var i;e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data("ui-effects-"+t[n],e[0].style[t[n]])},restore:function(e,t){var n,i;for(i=0;i<t.length;i++)null!==t[i]&&(void 0===(n=e.data("ui-effects-"+t[i]))&&(n=""),e.css(t[i],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(i),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(a),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,a){return a=a||{},e.each(n,(function(e,n){var r=t.cssUnit(n);r[0]>0&&(a[n]=r[0]*i+r[1])})),a}}),e.fn.extend({effect:function(){var n=t.apply(this,arguments),i=n.mode,a=n.queue,r=e.effects.effect[n.effect];if(e.fx.off||!r)return i?this[i](n.duration,n.complete):this.each((function(){n.complete&&n.complete.call(this)}));function o(t){var i=e(this),a=n.complete,o=n.mode;function s(){e.isFunction(a)&&a.call(i[0]),e.isFunction(t)&&t()}(i.is(":hidden")?"hide"===o:"show"===o)?(i[o](),s()):r.call(i[0],n,s)}return!1===a?this.each(o):this.queue(a||"fx",o)},show:(i=e.fn.show,function(e){if(n(e))return i.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="show",this.effect.call(this,a)}),hide:function(e){return function(i){if(n(i))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="hide",this.effect.call(this,a)}}(e.fn.hide),toggle:function(e){return function(i){if(n(i)||"boolean"==typeof i)return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="toggle",this.effect.call(this,a)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],(function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])})),i}})}(),i={},e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,t){i[t]=function(t){return Math.pow(t,e+2)}})),e.extend(i,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(i,(function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(-2*e+2)/2}}))}(t),e.exports=i}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(){var e={},t=window.localStorage,n=void 0,i=function(){return void 0!==n?n:n=function(){try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(e){return!1}}()},a=function(e,t){return e+"."+t},r=function(e){return void 0!==e?e:null===globals.account||void 0===globals.account?"anon":globals.account.RockstarId};return e.getItem=function(n,o){if(!i())return"";o=r(o);var s=t.getItem(a(n,o));if(null!==s)return s;var l=t.getItem(n);return null!==l?(t.removeItem(n),e.setItem(n,l,o),l):null},e.setItem=function(e,n,o){return!!i()&&(o=r(o),t.setItem(a(e,o),n))},e}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i=n(2);function a(e){return e&&(e.__esModule?e.default:e)}e.exports=(i.default||i).template({1:function(e,t,n,i,a){return"private"},3:function(e,t,n,i,a){return"public"},5:function(e,t,n,i,a){return"Gold"},7:function(e,t,i,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span "+(null!=(s=a(n(9)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"IsMember"):t,!1,{name:"ifequals",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:4,column:27},end:{line:4,column:120}}}))?s:"")+"></span>"},8:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'class="crewColor" style="background:'+e.escapeExpression(e.lambda(null!=t?r(t,"CrewColour"):t,t))+';"'},10:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"IsPrivate"):t,{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.noop,data:a,loc:{start:{line:7,column:4},end:{line:25,column:11}}}))?r:""},11:function(e,t,i,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="hierarchy">\r\n'+(null!=(s=a(n(33)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"RankOrder"):t,5,{name:"ifless",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:9,column:8},end:{line:23,column:19}}}))?s:"")+"    </div>\r\n"},12:function(e,t,i,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(n(33)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"RankOrder"):t,4,{name:"ifless",hash:{},fn:e.program(13,o,0),inverse:e.noop,data:o,loc:{start:{line:10,column:8},end:{line:21,column:19}}}))?s:"")+'        <span style="background:'+e.escapeExpression(e.lambda(null!=t?l(t,"CrewColour"):t,t))+';"></span>\r\n'},13:function(e,t,i,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(n(33)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"RankOrder"):t,3,{name:"ifless",hash:{},fn:e.program(14,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:8},end:{line:19,column:19}}}))?s:"")+'        <span style="background:'+e.escapeExpression(e.lambda(null!=t?l(t,"CrewColour"):t,t))+';"></span>\r\n'},14:function(e,t,i,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(n(33)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"RankOrder"):t,2,{name:"ifless",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o,loc:{start:{line:12,column:8},end:{line:17,column:19}}}))?s:"")+'        <span style="background:'+e.escapeExpression(e.lambda(null!=t?l(t,"CrewColour"):t,t))+';"></span>\r\n'},15:function(e,t,i,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(n(33)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"RankOrder"):t,1,{name:"ifless",hash:{},fn:e.program(16,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:8},end:{line:15,column:19}}}))?s:"")+'        <span style="background:'+e.escapeExpression(e.lambda(null!=t?l(t,"CrewColour"):t,t))+';"></span>\r\n'},16:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span style="background:'+e.escapeExpression(e.lambda(null!=t?r(t,"CrewColour"):t,t))+';"></span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="crewTag '+(null!=(r=s(n,"if").call(o,null!=t?s(t,"IsPrivate"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:1,column:20},end:{line:1,column:65}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"IsFounderCrew"):t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:65},end:{line:1,column:97}}}))?r:"")+'">\n    <span>'+e.escapeExpression(e.lambda(null!=t?s(t,"CrewTag"):t,t))+"</span>\n\n    "+(null!=(r=s(n,"if").call(o,null!=t?s(t,"IsPrivate"):t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a,loc:{start:{line:4,column:4},end:{line:4,column:135}}}))?r:"")+"\n\n"+(null!=(r=s(n,"if").call(o,null!=t?s(t,"IsMember"):t,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a,loc:{start:{line:6,column:4},end:{line:26,column:11}}}))?r:"")+"\r\n</div>"},useData:!0})},function(e,t,n){"use strict";var i,a;i=[n(0),n(4),n(30),n(8),n(6),n(1),n(10),n(7),n(22),n(12),n(28),n(15),n(20),n(24),n(40),n(79),n(57),n(11),n(13),n(18),n(177),n(46),n(19),n(178),n(19),n(43)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c,u,d,f,p,h,g,m,v,b,C,S){var y={};function E(){var t=e("#editProfile");e("#headerLoginOptionsDrop").is(":visible")&&e("#headerLoginOptionsButton").click(),o.setSelected(),t.find("span.errorText, span.error, span.tick").remove(),t.find(".errors").html(""),t.find(".btn").prop("disabled",!1),e("#profileSettings li a.editlink").show().siblings(".formWrapper").hide()}function w(){if(a.isNetworkInfoSupported()){var t=i.CallGameMethodAsync("RGSC_GET_NETWORK_INFO","","RGSC_GET_NETWORK_INFO_DEMO");return t.then((function(t){void 0!==t&&a.isNetworkInfoSupported()&&e("#myNetworkDetails").parent().show()})),t}e("#editProfile").find(".sideMenu li.network").remove()}function k(t,n){if(a.isNetworkInfoSupported()){if(void 0===t)return;var i=function(e){var t,n,i,a,r=!1;switch(e.NATDetectionState){case 1:t=s.getTextCached("NatDetecting","Settings");break;case 3:t=s.getTextCached("NatFailed","Settings");break;default:t=s.getTextCached("Nat"+e.NATType,"Settings"),3===e.NATType&&(r=!0)}switch(e.uPnP){case 0:n=void 0;break;default:n=s.getTextCached("Upnp"+e.uPnP,"Settings")}void 0!==e.PCP&&0!==e.PCP&&(i=s.getTextCached("PcpTitle"+e.PCP,"Settings"),a=s.getTextCached("Pcp"+e.PCP,"Settings"));return{publicAddress:e.PublicAddress,privateAddress:e.PrivateAddress,nat:t,natBold:r,upnp:n,warning:e.ShowNatTypeWarning?s.getTextCached("NatWarning","Settings"):void 0,pcpLabel:i,pcp:a}}(t),r=e("#networkSettings");r.find(".public").html(i.publicAddress),r.find(".private").html(i.privateAddress),r.find(".nat").html(i.nat),i.natBold?r.find(".nat").addClass("error"):r.find(".nat").removeClass("error"),i.pcp?(r.find(".pcp .settingLabel").html(i.pcpLabel),r.find(".pcp .settingContent").html(i.pcp).parents("li").show()):r.find(".pcp").parents("li").hide(),i.upnp?r.find(".upnp").html(i.upnp).parents("li").show():r.find(".upnp").parents("li").hide(),i.warning?e("#connectionDetails").show().find("p").html(i.warning):e("#connectionDetails").hide()}}function _(){if(a.isNetworkInfoSupported()){var e=s.getTextCached("NatDetecting","Settings");k({PublicAddress:e,PrivateAddress:e,NATDetectionState:1,NATType:0,uPnP:1,PCP:1,ShowNatTypeWarning:!1})}}function T(){return e("#privacySettings").is(":visible")?e("#privacySettings"):e("#gameSettings")}function I(t,n){var i=e("#dob");if(t&&t.Status){g.updateGlobalAccountCountry(n),g.updateGlobalAccountAge(t.Age,t.Minor);var l={CountryCode:n};return g.modifyProfile(l),i.hasClass("countryUpdate")&&(o.initHeaderMenu(!0),i.hide(),i.find("p.intro").hide(),e("#activation").hasClass("pending")?o.clearActivePanel((function(){o.setUpLoadingPanel("#activation")})):(globals.isLauncher&&(o.setupSignedInOptionsLauncher(),o.launcherNotifyEvent("SignIn")),e("#homeButton").click()),i.removeClass("countryUpdate"),o.initHeaderMenu(!0)),!0}var c=t&&t.Error?t.Error.ErrorMessage:void 0;return r.WriteDebugLog("OnSuccessUpdateCountry","ERROR",c,r.logType.error,r.logController.profile),null!=c&&"too young"===c.toLowerCase()&&p.handleUnderAgeError(),i.hasClass("countryUpdate")&&null!=c&&"missing dob"===c.toLowerCase()&&(i.removeClass("countryUpdate"),i.addClass("DOBAndCountryUpdate"),i.find(".intro").text(s.getTextCached("EnterDOBAndCountry","Register","Please enter your date of birth and country/region.")),a.loadDateDropdowns()),!1}function A(t){if(t&&"true"==e(t).find("Status").text()){var n;e("#imgEditSelectedAvatar").attr("src").indexOf("ugc/")>-1?n=globals.account.AvatarUrl:(n=C.buildAvatarUrlForSdk(e("#imgEditSelectedAvatar").attr("src")),globals.account.AvatarUrl=n);var i={AvatarUrl:n,AvatarPath:C.getAvatarUrl(n),AvatarPathSm:C.getAvatarUrl(n,"","s"),AvatarPathLg:C.getAvatarUrl(n,"","l")};g.modifyProfile(i),u.clearCachedProfileList();var o=s.getTextCached("AvatarBeingProcessedTitle","Settings"),l=s.getTextCached("AvatarBeingProcessedMsg","Settings");c.ShowConfirmModal(l,null,"settingsFn.refreshAvatar",null,"Ok",null,o);var d=window.setTimeout((function(){R()}),35e3);a.pubsub.once("signout:completed",(function(){window.clearTimeout(d)}))}else{var f=e("#signedInUserAvatar").attr("src").replace(/\/images\/avatars\/32x32/,"/images/avatars/128x128/");e("#imgEditSelectedAvatar").attr("alt","").attr("title","").attr("src",f),r.WriteDebugLog("OnSuccessUpdateAvatar","ERROR",t?e(t).find("Error").text():"",r.logType.error,r.logController.profile)}}function R(){globals.account&&(globals.account.AvatarCacheBust=(new Date).valueOf(),o.setProfileHtml())}function P(t){t.errorCode==r.errorCode("6001.11")&&(e(".emailvalid").remove(),e("#editEmail").after('<span class="error"></span>')),c.ShowErrorModal(t)}function x(t){if(void 0!==t&&t.val().length){var n=t.val();e("#editAvatarPanelInner").attr("class",n),a.initSpinner(e("#editAvatarPanel span.loading")).fadeIn(),e("#editAvatarPanelInner").animate({opacity:"0"},200,(function(){y.setAvatarThumbsHtml(n,"avatarSlider","imgEditSelectedAvatar"),setTimeout((function(){e("#editAvatarPanelInner").animate({opacity:"1"},600),o.removeLoading("editAvatarPanel")}),300)}))}}function L(){e("#mainNav li").removeClass("on"),e("#editProfile").hasClass("active")?(e("#blockListPlayercards").empty().removeData(),y.blockListQuery()):o.clearActivePanel((function(){o.setUpLoadingPanel("#editProfile"),e("#blockListPlayercards").empty().removeData(),y.blockListQuery()}))}function N(t){var n=e(t),i=n.find("OnlineServiceName"),a="";r.WriteDebugLog("LoadUserNetworksPrivacy","networkAccounts.length",i.length),i.length>0&&(n.find("PlayerAccount").each((function(){var t=e(this).find("OnlineServiceName").text(),n="",i="";if("facebook"==t?(n="Facebook",i="FB"):"np"==t?(n="PlayStation&reg; Network",i="PSN"):"sc"==t?(n="Social Club",i="SC"):"twitter"==t?(n="Twitter",i="TWIT"):"xbl"==t?(n="Xbox Live&reg;",i="XBOX"):"google"==t?(n="Google",i="google"):"steam"==t?(n="Steam",i="steam"):"epic"==t?(n="Epic Games",i="epic"):"twitch"==t?(n="Twitch",i="twitch"):"legacygfwl"==t&&(n="Games for Windows LIVE",i="GFWL"),""!=n){var o={icon:i,accountId:e(this).find("AccountId").text(),visibility:e(this).find("Visibility").text().toLowerCase(),minor:globals.account.Minor,settingId:"PlatformVisibility",settingName:"PlatformVisibility"+t,label:n};a+=r.renderCompiledTemplate(S,o)}})),o.resetScrollbar("#editProfile"));var s=e("#linkedAccountOptions");""!=a?(s.html(a).closest("fieldset").show(),s.find(".toggleOptions a").click((function(t){t&&t.preventDefault();var n=e(this);if(n.is(".selected"))return!1;var i=n.find("input:radio").attr("name"),a="default";i.indexOf("Cloud")>-1&&(a="cloud"),m.showPrivacyChangeTick(n);var r=m.getSettingsValue(i),o=n.find("input:radio").val(),s=n.closest("span.toggleOptions").attr("data-accountId"),l=g.updateSetting(i,o,r,s,a,(function(){return f.updatePrivacySetting(i,o,s)}));return m.processUpdateSetting(l,a,n),!1})),s.find("[rel*=localize]").localize("Settings",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"})):s.html("").closest("fieldset").hide(),a=null,n=null,t=null;var l=150;e("#privacySettingsForm .toggleOptions a").each((function(){e(this).attr("tabindex",l),l++}))}return y.init=function(){function t(e){var t=i.getCloudSavesEnabledSetting();void 0===t&&(t=Promise.resolve({RosTitleName:globals.titleName,Enabled:"unknown"})),t.then((function(t){o.setPrivacyAndGameOptions(e,t)}))}e("#menuSettings").click((function(e){e&&e.preventDefault(),y.loadSettings()})),e("#editAvatarGame").change((function(){return x(e(this).find("option:selected")),!1})),e("#editProfile").find(".sideMenu a").keydown((function(t){var n=e(t.currentTarget);13==t.which&&n.visible()&&e(this).click()})),e("#myProfileLink").click((function(){e(this).is(".on")||globals.isLauncher||function(){e("#headerLoginOptionsDrop").is(":visible")&&e("#headerLoginOptionsButton").click();var t=globals.account;if(r.isOffline()||!t||t.Local)return;r.WriteDebugLog("setupProfileSettings","account",JSON.stringify(t));var n=e("#editProfile");n.find(".content").removeAttr("style"),function(t){var n=t?"Yes":"No";e("#editHideNotificationsInput").prop("checked",t),e("#editHideNotificationsDisplay").text(s.getTextCached(n,"HomeSignin"))}("true"==h.getItem("hideNotifications")),n.hasClass("active")?n.removeClass().addClass("panel active myProfile"):o.clearActivePanel((function(){o.setUpLoadingPanel("#editProfile",(function(){o.removeLoading("editProfile"),n.removeClass().addClass("panel active myProfile"),e("#myProfile").show()}))}));o.setSelectedSide(e("#myProfileLink")),o.resetScrollbar("#editProfile"),v.trackPage("/ProfileSettings")}()})),e("#privacyLink").click((function(){if(!e(this).is(".on")&&!globals.isLauncher){p.clearErrorClasses(),e("#headerLoginOptionsDrop").is(":visible")&&e("#headerLoginOptionsButton").click();var n=e("#editProfile");n.hasClass("active")?n.attr("class","panel active privacySettings"):o.clearActivePanel((function(){o.setUpLoadingPanel("#editProfile"),n.attr("class","panel active privacySettings")})),e("#editProfile .content").hide(),e(this).hasClass("on")||(o.setSelectedSide(e(this)),o.setUpLoadingPanel("#editProfile",(function(){setTimeout((function(){f.getUserPrivacyInfo(globals.account.RockstarId,T()).then(t).catch((function(e){r.WriteDebugLog("dataFnFriends.getUserPrivacyInfo","unhandled exception",JSON.stringify(e),r.logType.error,r.logController.privacy)})),e("#linkedAccountOptions").show(),d.GetUserNetworks(globals.account.RockstarId,"","",N,c.ShowErrorModal),e("#privacySettingsForm").show()}),0)}))),e("#privacySettings").show(),e("#privacySettingsHeader").show(),v.trackPage("/PrivacySettings")}})),e("#gameSettingsLink").click((function(){if(!e(this).is(".on")&&!globals.isLauncher){e("#headerLoginOptionsDrop").is(":visible")&&e("#headerLoginOptionsButton").click();var n=e("#editProfile");n.hasClass("active")?n.attr("class","panel active gameSettings"):o.clearActivePanel((function(){o.setUpLoadingPanel("#editProfile"),n.attr("class","panel active gameSettings")})),e(this).hasClass("on")||(o.setSelectedSide(e(this)),o.setUpLoadingPanel("#editProfile",(function(){setTimeout((function(){f.getUserPrivacyInfo(globals.account.RockstarId,T()).then(t).catch((function(e){r.WriteDebugLog("dataFnFriends.getUserPrivacyInfo","unhandled exception",JSON.stringify(e),r.logType.error,r.logController.privacy)}))}),0)}))),n.find(".content").removeAttr("style"),o.resetScrollbar("#editProfile"),v.trackPage("/GameSettings")}})),e("#blockListLink").click((function(t){t&&t.preventDefault(),e(this).is(".on")||globals.isLauncher||L()})),e("#profileSettings").find(".editlink").click((function(t){t&&t.preventDefault(),E(),e("#profileSettings ."+e(this).data("field")).toggle().find("span.errorText").remove().end().find("span.error").remove().end().find("div.reCaptchaContainer").trigger("init")})),e("#profileSettings").find(".closeRow").click((function(e){e&&e.preventDefault(),E()})),e("#accountSettings").on("click",".btn.linkAccount",(function(t){var n=e(t.currentTarget);v.trackEvent(b.category.settings,b.action.settings_account_linking_link,n.attr("data-os"))})).on("click",".btn.unlink",(function(t){var n=e(t.currentTarget);v.trackEvent(b.category.settings,b.action.settings_account_linking_unlink,n.attr("data-os"))})),e("#lnkChangeAvatar, #editAvatar").click((function(){e(this).is(".on")||globals.isLauncher||(y.setAvatarThumbsHtml("","avatarSlider","imgEditSelectedAvatar"),e("#selectedAvatarContainer").removeClass(),e("#editProfile").hasClass("active")||o.clearActivePanel((function(){o.setUpLoadingPanel("#editProfile")})),o.closeModalsAndHideMenu(),o.setSelectedSide(e("#lnkChangeAvatar")),e("#editProfile .content").removeAttr("style"),o.setUpLoadingPanel("#editProfile",(function(){e("#editProfile").attr("class","panel active avatar"),e("#avatar").show()})),e(".selectAvatarPanel .inner .loadingAvatarGames").show(),e(".selectAvatarPanel form").hide(),d.getAvatarsAsync().then((function(e){var t=Array.isArray(e.avatars)&&e.avatars.length>0;y.getAvatarsSuccess(e,t,"editAvatarGame")})).catch((function(e){r.WriteDebugLog("get avatar","unhandled exception",JSON.stringify(e),r.logType.error,r.logController.profile)})),o.removeLoading("editProfile"),"en-US"==globals.titlelang||e("#editProfile").hasClass("localized")||(e("#editProfile").find("[rel*=localize]").localize("Settings",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),e("#editProfile").addClass("localized")),o.resetScrollbar("#editProfile"),v.trackPage("/ChangeAvatar"))})),e("#avatarSlider").on("click","li a",(function(t){t&&t.preventDefault();var n=e(this).find("img");n.length&&(y.changeSelectedAvatar(n[0],n.attr("data-image")),e("#editAvatarSubmit").focus())})),e("#editAvatarSubmit").click((function(){return!!e("#editAvatarGame").val()&&(p.clearErrorClasses(),y.updateAvatar(),!1)})),e("#myNetworkDetails").on("click",(function(t){if(t&&t.preventDefault(),a.isNetworkInfoSupported()){if(e(this).is(".on"))return;if(globals.isLauncher)return;!function(){if(a.isNetworkInfoSupported()){_(),w().then(k),t="#myNetworkDetails",n="networkSettings",i=e("#editProfile"),o.closeModalsAndHideMenu(),o.setSelectedSide(e(t)),i.find(".content").removeAttr("style"),i.hasClass("active")?i.removeClass().addClass("panel active "+n):o.clearActivePanel((function(){o.setUpLoadingPanel("#editProfile",(function(){o.removeLoading("editProfile"),i.removeClass().addClass("panel active "+n),e("#"+n).show()}))})),v.trackPage("/MyNetworkDetails")}var t,n,i}()}})),e("#networkInformation").on("click","a",(function(e){e&&e.preventDefault()})),e("#retryNetworkSettings").on("click","a",(function(t){if(a.isNetworkInfoSupported()){if(t&&t.preventDefault(),!e("#retryNetworkSettings").is(":visible"))return;e("#retryNetworkSettings").fadeOut("fast"),setTimeout((function(){e("#retryNetworkSettings").fadeIn()}),3e3),_(),w().then(k)}}))},y.loadSettings=function(){globals.isLauncher||(e("#editProfile").hasClass("localized")||(e("#editProfile [rel*=localize]").localize("Settings",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),e("#editProfile").addClass("localized")),w(),E(),e("#myProfileLink").click())},y.updateCountry=function(t){a.ShowInvisibleMask(e("#submitAccount"),s.getError("Loading")),v.trackEvent(b.category.settings,b.action.settings_profile_edit_country),a.isLegacyServiceLayer()?y.updateProfile(t):d.updateCountry(t).catch((function(e){r.WriteDebugLog("settingsFn.updateCountry","ajax error handled by fatalError",e);var t=r.extractErrorFromResponse(e),n=s.getErrorWithCode(t,"UpdateCountry");c.ShowErrorModal({message:n.Message,codeDesc:n.CodeDescription,supportText:n.SupportText})})).then((function(e){return I(e.data,t)})).catch((function(e){r.WriteDebugLog("settingsFn.updateCountry","unhandled exception",e,r.logType.error,r.logController.profile)}))},y.updateAvatar=function(){e(".editSelectedAvatar .errors").html(""),v.trackEvent(b.category.settings,b.action.settings_change_avatar),o.setUpLoading("#editProfile");var t=e("#imgEditSelectedAvatar").data("id"),n=e("#imgEditSelectedAvatar").data("cid");d.updateAvatar("",t,n,c.ShowErrorModal).catch((function(e){r.WriteDebugLog("settingsFn.updateAvatar","ajax error handled by fatalError",e)})).then((function(e){return A(e)})).then((function(){o.clearActivePanel((function(){e("#myProfileLink").click()}))})).catch((function(e){r.WriteDebugLog("settingsFn.updateAvatar","unhandled exception",e,r.logType.error,r.logController.profile)}))},y.updateProfile=function(t,n){var i;r.WriteDebugLog("settingsFn.updateProfile","",""),e("#editProfile").find("#lblEditProfileError").html("");var o=e("#imgEditSelectedAvatar").attr("src");i=!e("#imgEditSelectedAvatar").length||-1!=o.indexOf("base64")||o.match(/default.png$/)?"":r.getLastStringSegment(o,"/",2),d.updateLegacyProfile(i,t,n,P).catch((function(e){r.WriteDebugLog("settingsFn.updateProfile","ajax error handled by fatalError",e)})).then((function(i){!function(t,n,i){var a=e("#editProfile");if(t&&"true"===e(t).find("Status").text()){var o=void 0;if(i){var l=Date.now()-new Date(i);o=l/1e3/60/60/24/365}var c={data:{Status:!0,Age:o,Minor:!1,CountryCode:n}},d={};n!=globals.account.CountryCode&&(d.CountryCode=n,globals.account.CountryCode=d.CountryCode,I(c.data,n)),d.AutoSignIn=a.find("#editAutoSignIn").is(":checked"),g.modifyProfile(d),u.clearCachedProfileList(),i&&y.updateDobSuccess(c)}else{var f=t?e(t).find("Error").attr("ErrorMessage"):"";r.WriteDebugLog("onSuccessUpdateProfile()","ERROR",f,r.logType.error,r.logController.profile),a.find("#lblEditProfileError").html(s.getError("ServerError"))}a.find("#editProfileButtonWrapper span").hide(),a.find("a.disabled:first").removeClass("disabled")}(i,t,n)})).then((function(){e("#editProfileContainer input.btn").prop("disabled",!1),e("#editProfileContainer a.btn").removeClass("disabled"),a.isLegacyServiceLayer()&&e("#editProfile").is(".active.avatar")&&e("#myProfileLink").click(),a.HideInvisibleMask()})).catch((function(e){r.WriteDebugLog("settingsFn.updateProfile","unhandled exception",e,r.logType.error,r.logController.profile)}))},y.updateDobSuccess=function(t){var n=t.data;if(n&&n.Status){g.updateGlobalAccountAge(n.Age,n.Minor),g.updateGlobalAccountCountry(n.CountryCode),o.setProfileHtml();var i=e("#dob");i.removeClass("DOBUpdate DOBAndCountryUpdate"),i.hide(),i.find("p.intro").hide(),o.initHeaderMenu(!0),e("#activation").hasClass("pending")?o.clearActivePanel((function(){o.setUpLoadingPanel("#activation")})):(globals.isLauncher&&(o.setupSignedInOptionsLauncher(),o.launcherNotifyEvent("SignIn")),e("#homeButton").click())}else{var a=n?n.Error.ErrorMessage:void 0;null!=a&&"too young"===a.toLowerCase()&&p.handleUnderAgeError()}},y.getCountriesAsync=function(n){if(!a.IsCountryListEmpty())return Promise.resolve();if(globals.getCountriesInProgress)return r.WriteDebugLog("getCountries","skipped","already in progress"),Promise.reject("getCountries skipped: already in progress");globals.getCountriesInProgress=!0,r.WriteDebugLog("getCountries","selectedCountryCode",n),e("span.loadFailed").hide();var i=["#editCountry","#signUpCountry"];return t.forEach(i,(function(t){e(t).hide()})),e("span.loadingText").fadeIn(),d.getCountries(n).then((function(a){if(!function(n,i,a){var r=n&&n.data;if(!r||!r.Status)return!1;var o=[],s=[];return t.forEach(r.List,(function(e){var t=o,n=e.Code;"US"!=n&&"GB"!=n||(t=s),t.push("<option value='"+n+"'>"+e.Name+"</option>")})),t.forEach(a,(function(t){var n=e(t);n.html(s.join("")+o.join("")),i&&"#editCountry"===t?n.find("option[value="+i+"]").prop("selected",!0):(n.find("option:first").prop("selected",!0),i="US"),e("span.loadingText").hide(),n.dropkick(),n.dropkick("setValue",i)})),!0}(a,n,i))throw"getCountries error";globals.getCountriesInProgress=!1,i=null})).catch((function(e){throw y.getCountriesError(i),globals.getCountriesInProgress=!1,i=null,e}))},y.getCountriesError=function(n){t.forEach(n,(function(t){e(t).hide()})),e("span.loadingText").hide(),e("span.loadFailed").show()},y.UpdateAccountLinking=function(e,t,n){if(!e&&t){if(!r.isSignedIn())return;d.UpdateLinkedAccounts(t,n,void 0,c.ShowErrorModal)}},y.blockListQuery=function(){e("#editProfile").hasClass("active")||o.clearActivePanel((function(){o.setUpLoadingPanel("#editProfile")})),o.closeModalsAndHideMenu(),o.setSelectedSide(e("#blockListLink")),e("#editProfile .content").removeAttr("style"),o.setUpLoadingPanel("#editProfile",(function(){e("#blockList").show(),e("#editProfile").attr("class","panel active blockList")}));var t=e("#blockListPlayercards").data("PageIndex");void 0===t&&(t=0,e("#blockListPlayercards").data("PageIndex",t)),v.trackPage("/BlockList");var n=Math.round((new Date).getTime()/1e3);i.CallGameMethod("RGSC_REQUEST_PLAYER_LIST",'{ "RequestId": '+n+', "PlayerListType": 8, "PageIndex": '+t+', "PageSize": 10 }',"RGSC_JS_PLAYER_LIST_RESPONSE_DEMO")},y.getAvatarGamesSuccess=function(t,n,i){if("success"==n){var o=e("#"+i);o.empty(),globals.avatarXML=t;var l="",c=[];e(t).find("avatars g").each((function(){l!=e(this).attr("g")&&(l=e(this).attr("g"),c.push("<option value='"+e(this).attr("g")+"'>"+e(this).attr("dn")+"</option>"))})),o.append(c.join("")),a.SortSelect("#"+i),o.prepend("<option value=''>"+s.getTextCached("SelectbyGame","Register")+"</option>"),o.find("option:first").prop("selected",!0),o.dropkick(),o.dropkick("setValue",""),o.hide()}else r.WriteDebugLog("LoadAvatarGamesError","error","Error getting avatar xml",r.logType.error,r.logController.profile);e("div.selectAvatarPanel .inner .loadingAvatarGames").hide(),e("div.selectAvatarPanel form").show(),e("#dk_container_editAvatarGame").focus(),i=null},y.getAvatarsSuccess=function(n,i,o){if(i){var l=e("#"+o);l.empty(),globals.avatarXML=n;var c="",u=[];t.each(n.categories,(function(e){if(c!=e.c){if("UserCreated"===(c=e.c)&&!a.customAvatarsEnabled())return;var t="UserCreated"!==c?e.n:s.getTextCached("SelfiesAndMugshots","Settings");u.push("<option value='"+c+"'>"+t+"</option>")}})),l.append(u.join("")),l.find("option:first").prop("selected",!0);var d=l.find("option:selected");l.dropkick(),l.dropkick("setValue",d.val()),l.hide(),x(d)}else r.WriteDebugLog("LoadAvatarGamesError","error","Error getting avatar xml",r.logType.error,r.logController.profile);e("div.selectAvatarPanel .inner .loadingAvatarGames").hide(),e("div.selectAvatarPanel form").show(),e("#dk_container_editAvatarGame").focus(),o=null},y.changeSelectedAvatar=function(t,n){r.WriteDebugLog("changeSelectedAvatar","control, destinationControl",t+" , "+n),e("#"+n).data("id","").data("cid","");var i=e(t);if(i.length>0){i.closest("div.avatarPanel").find("img.selected").removeClass("selected");var a=i.attr("src");a=a.replace(/\/images\/avatars\//,"/images/avatars/128x128/"),e("#selectedAvatarContainer").removeClass().addClass(i.data("type")),e("#"+n).attr("alt",i.attr("alt")).attr("title",i.attr("title")).attr("src",a).data("id",i.data("id")).data("cid",i.data("cid")),i.addClass("selected")}},y.setAvatarThumbsHtml=function(n,i,s){if(globals.avatarXML)if("UserCreated"===n&&a.customAvatarsEnabled())d.getCustomAvatarsAsync().catch((function(e){r.WriteDebugLog("settingsFn.setAvatarThumbsHtml","ajax error handled by fatalError",e)})).then((function(n){!function(n,i,r){var o=[],s=0;o.push("<li>");var l=301;t.each(n,(function(e){15===s&&(o.push("</li><li>"),s=0),s+=1;var t=a.getSelfieUrl(e.src,e.t);o.push("<a href='#' tabindex='"+l+"'><img src='"+t+"' data-id='"+e.i+"' data-type='"+e.t+"' data-cid='"+e.cid+"' alt='"+t+"' data-image='"+r+"' /></a>"),l++})),o.push("</li>");var c=e("#"+i);c.html(o.join("")),c.basicSlider()}(n,i,s),o.showCustomAvatarInfoContainer()})).catch((function(e){r.WriteDebugLog("settingsFn.customAvatarsEnabled","unhandled exception",e,r.logType.error,r.logController.profile)}));else{o.hideCustomAvatarInfoContainer();var l=[];l.push("<li>");var c=0,u=301,f=t.where(globals.avatarXML.avatars,{c:n});t.each(f,(function(e){15===c&&(l.push("</li><li>"),c=0),c+=1;var t=C.getAvatarUrl(e.a);l.push("<a href='#' tabindex='"+u+"'><img src='"+t+"' data-id='"+e.i+"' alt='"+e.n+"' title='"+e.n+"' width='64' height='64' data-image='"+s+"' /></a>"),u++})),l.push("</li>");var p=e("#"+i);p.html(l.join("")),p.basicSlider()}},y.modifyProfileComplete=function(t){e("#editProfileButtonWrapper span").hide(),y.changeSelectedAvatar("#editAvatar","signedInUserAvatar"),u.setGlobalsAccountScAuthToken(t),o.setProfileHtml()},a.pubsub.on("settingsFn.loadSettings",y.loadSettings),a.pubsub.on("settingsFn.showBlockList",L),a.pubsub.on("settingsFn.getCountriesAsync",y.getCountriesAsync),a.pubsub.on("settingsFn.refreshAvatar",R),r.pubsub.subscribe("settings.modifyProfileComplete",y.modifyProfileComplete),y}.apply(t,i))||(e.exports=a)},function(e,t,n){(function(t){var i=n(0),a=n(3)(n(5));!function(e,t,n){"use strict";var i=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/),r=!!i,o=r&&parseFloat(i[1])<7,s=navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i),l={},c=[],u=33,d=34,f=35,p=36,h=38,g=40,m=13,v=9,b=48,C=90,S=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}" aria-hidden="true">','<a class="dk_toggle dk_label">{{ label }}</a>','<div class="dk_options">','<ul class="dk_options_inner" role="main" aria-hidden="true">',"</ul>","</div>","</div>"].join(""),y='<li><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',E=(S=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}" aria-hidden="true">','<a class="dk_toggle dk_label">{{ iconTmp }}{{ imgTmp }}{{ label }}</a>','<div class="dk_options">','<ul class="dk_options_inner" role="main" aria-hidden="true">',"</ul>","</div>","</div>"].join(""),y='<li class="{{ current }}{{ disabled }}"><a data-dk-dropdown-value="{{ value }}">{{ iconTmp }}{{ imgTmp }}{{ text }}</a></li>',{startSpeed:400,theme:!1,changes:!1,syncReverse:!0,nativeMobile:!0,autoWidth:!0}),w=null,k=null,_=function(e,t,n){var i,a,r,o;i=e.attr("data-dk-dropdown-value"),e.text(),a=e.html(),(o=(r=t.data("dropkick")).$select).val(i).trigger("change"),t.find(".dk_label").text(a),t.find(".dk_label").html(a),n=n||!1,!r.settings.change||n||r.settings.syncReverse||r.settings.change.call(o,i,a)},T=function(e){e.removeClass("dk_open dk_open_top"),w=null},I=function(n){var i=n.find(".dk_toggle"),a=n.find(".dk_options").outerHeight(),r=e(t).height()-i.outerHeight()-i.offset().top+e(t).scrollTop();return!(a<i.offset().top-e(t).scrollTop())||a<r},A=function(e,t,n){var i=e.find(".dk_options_inner"),a=t.prevAll("li").outerHeight()*t.prevAll("li").length,r=i.scrollTop(),o=i.height()+i.scrollTop()-t.outerHeight();(n&&"keydown"===n.type||a<r||a>o)&&i.scrollTop(a)},R=function(e,t){if(!e.hasClass("disabled")){var n=I(e);w=e.toggleClass("dk_open");var i=(n=I(e))?"dk_open":"dk_open_top dk_open";e.find(".dk_options").css({top:n?e.find(".dk_toggle").outerHeight()-1:"",bottom:n?"":e.find(".dk_toggle").outerHeight()-1}),w=e.addClass(i),A(e,e.find(".dk_option_current"),t)}},P=function(e,t,n){t.find(".dk_option_current").removeClass("dk_option_current"),e.addClass("dk_option_current"),A(t,e,n)},x=function(t){return e.trim(t).length>0&&t},L=function(t,n){var i,a,r,o,s,l,c,u=t.replace("{{ id }}",n.id).replace("{{ label }}",n.label).replace("{{ tabindex }}",n.tabindex),d=[],f=null!=n.icon?'<i class="dkicon {{ icon }}"></i>'.replace("{{ icon }}",n.icon):"",p=null!=n.img?'<img class="dkimg" src="{{ img }}"/>'.replace("{{ img }}",n.img):"";if(u=u.replace("{{ iconTmp }}",f).replace("{{ imgTmp }}",p),n.options&&n.options.length)for(a=0,r=n.options.length;a<r;a++)o=e(n.options[a]),null!=(s=0===a&&void 0!==o.attr("selected")&&void 0!==o.attr("disabled")?null:y.replace("{{ value }}",o.val()).replace("{{ current }}",x(o.val())===n.value?"dk_option_current":"").replace("{{ disabled }}",void 0!==o.attr("disabled")?"disabled":"").replace("{{ text }}",e.trim(o.html())))&&o.data("icon")?(l='<i class="dkicon {{ icon }}"></i>'.replace("{{ icon }}",o.data("icon")),s=s.replace("{{ iconTmp }}",l)):null!=s&&(s=s.replace("{{ iconTmp }}","")),null!=s&&o.data("img")?(c='<img class="dkimg" src="{{ img }}"/>'.replace("{{ img }}",o.data("img")),s=s.replace("{{ imgTmp }}",c)):null!=s&&(s=s.replace("{{ imgTmp }}","")),d[d.length]=s;return(i=e(u)).find(".dk_options_inner").html(d.join("")),i};o||(n.documentElement.className=n.documentElement.className+" dk_fouc"),l.init=function(t){return t=e.extend({},E,t),S=t.dropdownTemplate?t.dropdownTemplate:S,y=t.optionTemplate?t.optionTemplate:y,this.each((function(){var n,i,a=e(this),r=a.find(":selected").first(),o=a.find("option"),l=a.data("dropkick")||{},u=a.attr("id")||a.attr("name"),d=t.width||a.outerWidth(),f=a.attr("tabindex")||"0",p=!1;if(l.id)return a;l.settings=t,l.tabindex=f,l.id=u,l.$original=r,l.$select=a,l.value=x(a.val())||x(r.attr("value")),l.label=r.text(),l.options=o,l.icon=r.data("icon"),l.img=r.data("img"),p=L(S,l),l.settings.autoWidth&&p.find(".dk_toggle").css({width:d+"px"}),a.before(p).appendTo(p),p=e('div[id="dk_container_'+u+'"]').fadeIn(t.startSpeed),n=t.theme||"default",p.addClass("dk_theme_"+n),l.theme=n,l.$dk=p,a.data("dropkick",l),p.addClass(a.attr("class")),p.data("dropkick",l),c[c.length]=a,p.on("focus.dropkick",(function(){k=p.addClass("dk_focus")})).on("blur.dropkick",(function(){p.removeClass("dk_focus"),k=null})),s&&l.settings.nativeMobile&&p.addClass("dk_mobile"),l.settings.syncReverse&&a.on("change",(function(t){var n=a.val(),i=e('a[data-dk-dropdown-value="'+n+'"]',p),r=i.text();p.find(".dk_label").text(r),l.settings.change&&l.settings.change.call(a,n,r),P(i.parent(),p,t)})),(i=a.attr("form")?e("#"+a.attr("form").replace(" ",", #")):a.closest("form")).length&&i.on("reset",(function(){a.dropkick("reset")}))}))},l.theme=function(t){var n=e(this).data("dropkick"),i=n.$dk,a="dk_theme_"+n.theme;i.removeClass(a).addClass("dk_theme_"+t),n.theme=t},l.reset=function(){return this.each((function(){var t=e(this).data("dropkick"),n=t.$dk,i=e('a[data-dk-dropdown-value="'+t.$original.attr("value")+'"]',n);t.$original.prop("selected",!0),n.find(".dk_label").text(t.label),P(i.parent(),n)}))},l.setValue=function(t){return this.each((function(){var n=e(this).data("dropkick").$dk,i=e('.dk_options a[data-dk-dropdown-value="'+t+'"]',n);i.length?(_(i,n),P(i.parent(),n)):console.warn("There is no option with this value in "+n.selector)}))},l.refresh=function(t){return this.each((function(){var n,i,a=e(this).data("dropkick"),r=a.$select,o=a.$dk;a.options=r.children(),i=L(S,a).find(".dk_options_inner"),o.find(".dk_options_inner").replaceWith(i),a.$original.parent().length||(a.$original=r.find(":selected").first(),a.label=a.$original.text()),n=e('a[data-dk-dropdown-value="'+r.val()+'"]',o),P(n.parent(),o),_(n,o,!t)}))},e.fn.dropkick=function(e){if(!o){if(l[e])return l[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"===(0,a.default)(e)||!e)return l.init.apply(this,arguments)}},e((function(){e(n).on(r?"mousedown":"click",".dk_options a",(function(){var t=e(this),n=t.parents(".dk_container").first();return t.parent().hasClass("disabled")||(_(t,n),P(t.parent(),n),T(n)),!1})),e(n).on("keydown.dk_nav",(function(t){var n;w?n=w:k&&(n=k),n&&function(t,n){var i,a,r,o,s,l,c,S=t.keyCode,y=n.data("dropkick"),E=String.fromCharCode(S),w=n.find(".dk_options"),k=n.hasClass("dk_open"),I=w.find("li"),A=n.find(".dk_option_current"),x=I.first(),L=I.last(),N=w.length&&A.length?Math.floor(w.height()/A.height()):0,D=e(I.get(Math.max(0,A.index()-N))),M=e(I.get(Math.min(I.length-1,A.index()+N)));switch(S){case u:k?P(D,n,t):R(n,t),t.preventDefault();break;case d:k?P(M,n,t):R(n,t),t.preventDefault();break;case p:k?P(x,n,t):R(n,t),t.preventDefault();break;case f:k?P(L,n,t):R(n,t),t.preventDefault();break;case m:k?A.hasClass("disabled")||(_(A.find("a"),n),T(n)):R(n,t),t.preventDefault();break;case v:k&&(A.length&&_(A.find("a"),n),T(n));break;case h:a=A.prev("li"),k?a.length?P(a,n,t):P(L,n,t):R(n,t),t.preventDefault();break;case g:k?(i=A.next("li").first()).length?P(i,n,t):P(x,n,t):R(n,t),t.preventDefault()}if(S>=b&&S<=C){for(r=(new Date).getTime(),null===y.finder||void 0===y.finder||r>parseInt(y.timer,10)+1e3?(y.finder=E.toUpperCase(),y.timer=r):(y.finder=y.finder+E.toUpperCase(),y.timer=r),s=0,l=(o=I.find("a")).length;s<l;s++)if(0===(c=e(o[s])).html().toUpperCase().indexOf(y.finder)){_(c,n),P(c.parent(),n,t);break}n.data("dropkick",y)}}(t,n)})),e(n).on("click",null,(function(t){var n,i=e(t.target);if(w&&0===i.closest(".dk_container").length)T(w);else{if(i.is(".dk_toggle, .dk_label"))return(n=i.parents(".dk_container").first()).hasClass("dk_open")?T(n):(w&&T(w),R(n,t)),!1;i.attr("for")&&e("#dk_container_"+i.attr("for"))[0]&&e("#dk_container_"+i.attr("for")).trigger("focus.dropkick")}}));var i="onwheel"in t?"wheel":"onmousewheel"in n?"mousewheel":"MouseScrollEvent"in t&&"DOMMouseScroll MozMousePixelScroll";i&&e(n).on(i,".dk_options_inner",(function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.deltaY||-e.originalEvent.detail;return r?(this.scrollTop-=Math.round(t/10),!1):!(t>0&&this.scrollTop<=0||t<0&&this.scrollTop>=this.scrollHeight-this.offsetHeight)}))}))}(t,window,document),e.exports=i}).call(this,n(0))},function(e,t,n){"use strict";var i,a=n(3)(n(5));void 0===(i=function(e){var t=n(1),i={};return i.storeAuthValue=function(e){globals.authToken=e},i.getAuthToken=function(){return function(){var e=void 0,t=document.getElementById("Auth");null!==t&&"object"===(0,a.default)(t)&&t.value&&(e=t.value);return e}()||globals.authToken},i.clearAuthValue=function(){delete globals.authToken},i.storeLanAuthValue=function(e){globals.authTokenLan=e},i.getLanAuthValue=function(){return globals.authTokenLan},i.wrapAuthHeader=function(e){return"string"!=typeof e&&(e=""),{Authorization:'SCAUTH val="'+e+'"'}},i.wrapAuthHeaderV8=function(e){return"string"!=typeof e&&(e=""),{Authorization:'SCAUTH8 val="'+e+'"'}},i.appendLanAuthHeader=function(e){var n=i.getLanAuthValue();return void 0!==n&&n.length||t.WriteDebugLog("getLanAuthHeader","Auth header missing","",t.logType.error,t.logController[t.getTitleName()]),e.Auth=n,e},i.getCombinedSyncHeaders=function(e){return{Sync:function(){var e=i.getAuthToken();return void 0!==e&&e.length?{Sync:e}:(t.WriteDebugLog("getSyncHeader","Sync header missing","",t.logType.error,t.logController[t.getTitleName()]),{})}().Sync,AuthVal:e}},i}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i,a;i=[n(53)],void 0===(a=function(e){var t=globals.crewEmblemUrl,n={emblemDefault:"",emblem:t.format("{0}","{1}","64"),emblem32:t.format("{0}","{1}","32"),emblem50:t.format("{0}","{1}","64"),emblem64:t.format("{0}","{1}","64"),emblem90:t.format("{0}","{1}","128"),emblem100:t.format("{0}","{1}","128"),emblem128:t.format("{0}","{1}","128"),emblem256:t.format("{0}","{1}","256"),emblem512:t.format("{0}","{1}","512")};function i(e,t){if(!e)return n.emblemDefault;var i=n["emblem"+(t=t||"")]||n.emblem;return i.length?i.format(function(e){e=String(e);for(var t=5381,n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);var i=(t>>>=0).toString(2);i.length>32&&(t=parseInt(i.substr(0,32),2));if(t%=1e4,(t=String(t)).length<4){var a=4-t.length;for(n=0;n<a;n++)t="0"+t}return t}(e),e):n.emblemDefault}return e.registerHelper("emblemUrl",i),i}.apply(t,i))||(e.exports=a)},function(e,t,n){(function(t){var i=n(0);n(170);!function(e){
/*!
  Copyright (c) Jim Garvin (http://github.com/coderifous), 2008.
  Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses.
  Written by Jim Garvin (@coderifous) for use on LMGTFY.com.
  http://github.com/coderifous/jquery-localize
  Based off of Keith Wood's Localisation jQuery plugin.
  http://keith-wood.name/localisation.html
   */
var t;t=function(e){return(e=e.replace(/_/,"-").toLowerCase()).length>3&&(e=e.substring(0,3)+e.substring(3).toUpperCase()),e},e.defaultLanguage=t(navigator.language||navigator.userLanguage),e.localize=function(n,i){var a,r,o,s,l,c,u,d,f,p,h,g,m,v,b,C,S,y,E,w;null==i&&(i={}),y=this,o={};return r=i.fileExtension||"json",E=function(){return"xml"===r},c=function(e,t,n){switch(null==n&&(n=1),n){case 1:return o={},i.loadBase?s(e+"."+r,e,t,n):c(e,t,2);case 2:if(t.length>=2)return s(""+e+t+"."+r,e,t,n)}},s=function(t,n,a,s){var l,u,d;return null!=i.pathPrefix&&(t=i.pathPrefix+"/"+t),w=t,d=function(i,r,l,u){var d;return d=!0===u?i:E()?e.xml2json(i):i,e.extend(o,d),window.appendLocalizationCache(d,t),m(o),c(n,a,s+1)},u=function(){if(i.fallback&&i.fallback!==a)return c(n,i.fallback)},l={url:t,dataType:r,timeout:null!=i.timeout?i.timeout:3e3,success:d,error:u},"file:"===window.location.protocol&&(l.error=function(t){var n=E()?e.xml2json(t.responseText):t.responseText;return d(e.parseJSON(n||"null"))}),window.isLocalizationFileCached(t)?l.success(window.getLocalizationCache(),null,null,!0):e.ajax(l)},m=function(e){return null!=i.callback?i.callback(e,a):a(e)},a=function(t){return y.each((function(){var n,i,a;if((i=(n=e(this)).data("localize"))||(i=n.attr("rel").match(/localize\[(.*?)\]/)[1]),null!=(a=S(i,t)))return u(n,i,a)}))},u=function(t,n,i){if(t.is("input")||t.is("textarea")?h(t,n,i):t.is("img")?f(t,n,i):t.is("optgroup")?g(t,n,i):e.isPlainObject(i)||(p(t,n,i),t.html(i)),e.isPlainObject(i))return d(t,i)},h=function(t,n,i){var a;return a=e.isPlainObject(i)?i.value:i,t.is("[placeholder]")?t.attr("placeholder",a):t.val(a)},d=function(e,t){return b(e,"title",t),C(e,"text",t)},g=function(e,t,n){return e.attr("label",n)},f=function(e,t,n){return b(e,"alt",n),b(e,"src",n)},p=function(e,t,n){if(null!=e.attr("title"))return e.attr("title",n)},S=function(e,t){var n,i,a,r,o=null;for(i=t,a=0,r=(n=e.split(/\./)).length;a<r;a++)e=n[a],null==(o=null!=i?i[e]:null)&&(o=i[e=window.getLocalizationKey(n[a],w)]);return o},b=function(e,t,n){if(null!=(n=S(t,n)))return e.attr(t,n)},C=function(e,t,n){if(null!=(n=S(t,n)))return e.text(n)},v=function(e){var t;return"string"==typeof e?"^"+e+"$":null!=e.length?function(){var n,i,a;for(a=[],n=0,i=e.length;n<i;n++)t=e[n],a.push(v(t));return a}().join("|"):e},l=t(i.language?i.language:e.defaultLanguage),i.skipLanguage&&l.match(v(i.skipLanguage))||c(n,l,1),y},e.fn.localize=e.localize,e.localize.data={}}(t),e.exports=i}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(4),o=n(10),s=n(12),l=n(20),c=n(31),u=n(7),d=n(11),f={};function p(e){if(e.errorCode===a.errorCode("5005")){var n=t("#friendSearch .searchTip");n.html(u.getError("NickInvalid")),n.fadeIn()}else s.ShowErrorModal(e);var r=t(".panel.active").attr("id");i.removeLoading(r)}function h(e){s.ShowErrorModal(e),i.stopSpinner($el.find(".spinner")).fadeOut(),l.ClearGetFriendsCache()}return f.localize=function(){t("#friendsPanel").hasClass("localized")||(t("#friendProfilePanel, #friendsPanel").find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),t("#friendsPanel").addClass("localized"))},f.triggerFindFriend=function(){var e=t("#findFriendsList");if(void 0===e.data("total")||e.find("div.profileButton").length<e.data("total")){var n=parseInt(e.data("pageIndex"),10);f.findPlayer(t("#friendSearchbox").val(),n)}},f.findPlayer=function(e,n){a.WriteDebugLog("FindPlayer","searchTerm; pageIndex",e+"; "+t("#friendSearchbox").data("pageIndex")),t("#findFriendsIntro").hide(),t("#friendSearchTerm").show().find("span.purple").html(e),t("#friendsPanel .loadingMask").addClass("noMask bottom"),o.setUpLoadingPanel("#friendsPanel",(function(){t("#findFriends .emptyContainer").remove()}));var i={PlayerListType:99,PageIndex:n,Players:[]};l.findPlayer(e,n,p).catch((function(e){a.WriteDebugLog("friendsFn.findPlayer","ajax error handled by fatalError",e)})).then((function(e){return function(e,n,i){var r;t("#friendSearch #friendSearchForm .errors").empty(),r=n>0?t("#findFriendsList").data("total"):e&&e.Total>0?e.Total:"0";var o,s=e&&e.BlockedCount>0?e.BlockedCount:"0";o=parseInt(r,10)>0&&parseInt(s,10)>0?parseInt(r,10)-parseInt(s,10).toString():r;i.Total=o;var c=e&&e.Accounts?e.Accounts:[];i.Count=c.length,t("#findFriendsList").data("pageIndex",e.NextOffset),i.NextOffset=e.NextOffset,t.each(c,(function(){a.WriteDebugLog("FindPlayer","RockstarId",this.RockstarId),a.WriteDebugLog("FindPlayer","Nickname",this.Nickname),i.Players.push({RockstarId:this.RockstarId,DisplayName:this.Nickname,ViewerRelationship:l.GetRelationShipCode(this.Relationship),Relationship:l.GetRelationShipCode(this.Relationship)})}));var u=JSON.stringify(i);a.WriteDebugLog("FindPlayer","jsonString",u),"0"==n&&(t("#findFriendsList").empty(),t("#findFriendsList").data("total",e&&e.Total>0?e.Total:"0"));a.pubsub.publish("friendFn.handlePlayerListResponse",u)}(e,n,i)})).catch((function(e){a.WriteDebugLog("friendsFn.findPlayer","unhandled exception",e,a.logType.error,a.logController.profile)}))},f.loadCompareAccomplish=function(){t("#compareSelect").is(".open")?(a.WriteDebugLog("CompareAccomplish","click","close"),o.closeCompareAccomplish()):(a.WriteDebugLog("CompareAccomplish","click","open"),t("#comparedFriend").fadeOut(),t("#compareSelect").show().addClass("open").animate({height:"252px"},200,"easeOutQuart").promise().then((function(){var e;i.initSpinner(t("#compareSelect .spinner")).fadeIn(),e=["getfriends",globals.account.RockstarId].join(":"),l.getFriendCompare(e,t("#compareSelect"),h).catch((function(e){a.WriteDebugLog("friendsFn.getFriendCompare","ajax error handled by fatalError",e)})).then((function(n){!function(e,n){e.Status&&(l.getFriendsCache[n]=e,c.setSocialCountTotals(-1,e.RockstarAccountList.Total)),a.WriteDebugLog("getFriendCompareSuccess","data",e),function(e){var n=e.RockstarAccountList.RockstarAccounts,o=[];r.each(n,(function(e){var t="<li><a data-userid='"+e.RockstarId+"' data-useravatar='"+e.AvatarUrl+"'>"+e.Name+"</a></li>";!function(e){a.WriteDebugLog("getFriendCompare","RockstarId",e.RockstarId),a.WriteDebugLog("getFriendCompare","Nickname",e.Name),a.WriteDebugLog("getFriendCompare","Avatar",e.AvatarUrl)}(e),o.push(t)})),a.WriteDebugLog("renderFriendCompare","friendsList.join('')",o.join("")),t("#compareSelectList").html(o.join("")),o=null,i.stopSpinner(t("#compareSelect .spinner")).fadeOut(),t("#compareSelectContainer").fadeIn((function(){t(this).data("antiscroll").refresh()}))}(e),d.trackPage("/FriendCompare")}(n,e),e=null})).catch((function(e){a.WriteDebugLog("friendsFn.getFriendCompare","unhandled exception",e,a.logType.error,a.logController.profile)}))})))},f.getFriendInvites=function(e){l.getFriendInvites(e,s.ShowErrorModal).catch((function(e){a.WriteDebugLog("friendsFn.getFriendInvites","ajax error handled by fatalError",e)})).then((function(n){!function(e,n){void 0===e&&(e={RockstarAccountList:{Total:0}});void 0===n&&(n={PageIndex:0});if(!o.TabIsActive(t("#friendsPanel .sideMenu #friendInvitesLink")))return;var i={RequestId:123456,ResultCode:0,PlayerListType:4,PageIndex:n.PageIndex,Players:[]},r=e.RockstarAccountList.RockstarAccounts;null!=e.RockstarAccountList&&null!=r&&r.length>0&&t.each(r,(function(){i.Players.push({RockstarId:this.RockstarId,AvatarUrl:this.AvatarUrl,DisplayName:this.DisplayName,InviteShortMsg:this.ShortMessage,InviteMsg:this.Message,MutualFriends:this.MutualFriendCount,ViewerMutualFriendCount:this.MutualFriendCount,ViewerRelationship:l.GetRelationShipCode(this.Relationship)})}));i.Success=!0,i.Count=i.Players.length,i.Total=e.RockstarAccountList.Total;var s=JSON.stringify(i);t("#friendInvitesList").data("friendInvitesList",i),a.pubsub.publish("friendFn.handlePlayerListResponse",s)}(n,e)})).catch((function(e){a.WriteDebugLog("friendsFn.getFriendInvites","unhandled exception",e,a.logType.error,a.logController.profile)}))},f.processMpPresenceInfo=function(e){var n=o.activePanelId();if(void 0!==n){var s=function(e){e&&e.length&&e.length>0&&(e=r.sortBy(e,(function(e){return e.InSameSession?0:e.CanJoinGame?1:2})));return e}(e.Players);if("homefeedPanel"!==n){if(s.length){var l=s[0].RockstarId;"friendProfilePanel"===n&&t("#cardInfoVitals").attr("data-id")===l.toString()&&i.pubsub.trigger("profile:SetGameButtonVisibility_"+l,e)}}else!function(e){var n=t("#landingFriendsList"),i=t("<div>");r.each(e,(function(e){var t=e.RockstarId,r=n.find('a[data-id="'+t+'"]'),o=r.closest("li");o.detach(),i.append(o),a.WriteDebugLog("renderFriendsListPresence","rockstarId;canSend;canJoin",t+";"+e.CanSendGameInvite+";"+e.CanJoinGame),(e.CanSendGameInvite||e.CanJoinGame)&&r.find(".arrow").show(),e.CanSendGameInvite&&o.find(".optionGameInvite").show(),e.CanJoinGame&&o.find(".optionJoingame").show()})),i.find("li").prependTo(n),i=null}(s)}},f}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){
/*!
Copyright (c) 2011 Guillermo Rauch <guillermo@learnboost.com>
Licensed under the MIT license.
https://github.com/LearnBoost/antiscroll#license
*/
!function(e){function t(t,n){this.el=e(t),this.options=n||{},this.padding=null==this.options.padding?2:this.options.padding,this.autoHide=!1!==this.options.autoHide,this.inner=this.el.find(".antiscroll-inner"),this.inner.css({width:"+="+r(),height:"+="+r()}),this.refresh()}function n(t){this.pane=t,this.pane.el.append(this.el),this.innerEl=this.pane.inner.get(0),this.dragging=!1,this.enter=!1,this.shown=!1,this.pane.el.mouseenter(e.proxy(this,"mouseenter")),this.pane.el.mouseleave(e.proxy(this,"mouseleave")),this.el.mousedown(e.proxy(this,"mousedown")),this.pane.inner.scroll(e.proxy(this,"scroll")),this.pane.inner.bind("mousewheel",e.proxy(this,"mousewheel"));var n=this.pane.options.initialDisplay;!1!==n&&(this.show(),this.pane.autoHide&&(this.hiding=setTimeout(e.proxy(this,"hide"),parseInt(n,10)||3e3)))}function i(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n}var a;function r(){if(!a){var t=e('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');e("body").append(t);var n=e("div",t).innerWidth();t.css("overflow-y","scroll");var i=e("div",t).innerWidth();e(t).remove(),a=n-i}return a}e.fn.antiscroll=function(t){return this.each((function(){e(this).data("antiscroll")&&e(this).data("antiscroll").destroy(),e(this).data("antiscroll",new e.Antiscroll(this,t))}))},e.Antiscroll=t,t.prototype.refresh=function(){var e=this.inner.get(0).scrollWidth>this.el.width(),t=this.inner.get(0).scrollHeight>this.el.outerHeight();!this.horizontal&&e?this.horizontal=new n.Horizontal(this):this.horizontal&&!e&&(this.horizontal.destroy(),this.horizontal=null),!this.vertical&&t?this.vertical=new n.Vertical(this):this.vertical&&!t&&(this.vertical.destroy(),this.vertical=null)},t.prototype.destroy=function(){return this.horizontal&&this.horizontal.destroy(),this.vertical&&this.vertical.destroy(),this},t.prototype.rebuild=function(){return this.destroy(),this.inner.attr("style",""),t.call(this,this.el,this.options),this},n.prototype.destroy=function(){return this.el.remove(),this},n.prototype.mouseenter=function(){this.enter=!0,this.show()},n.prototype.mouseleave=function(){this.enter=!1,this.dragging||this.pane.autoHide&&this.hide()},n.prototype.scroll=function(){this.shown||(this.show(),this.enter||this.dragging||this.pane.autoHide&&(this.hiding=setTimeout(e.proxy(this,"hide"),1500))),this.update()},n.prototype.mousedown=function(t){t.preventDefault(),this.dragging=!0,this.startPageY=t.pageY-parseInt(this.el.css("top"),10),this.startPageX=t.pageX-parseInt(this.el.css("left"),10),document.onselectstart=function(){return!1};this.pane;var n=e.proxy(this,"mousemove"),i=this;e(document).mousemove(n).mouseup((function(){i.dragging=!1,document.onselectstart=null,e(document).unbind("mousemove",n),i.enter||i.hide()}))},n.prototype.show=function(e){this.shown||(this.update(),this.el.addClass("antiscroll-scrollbar-shown"),this.hiding&&(clearTimeout(this.hiding),this.hiding=null),this.shown=!0)},n.prototype.hide=function(){!1!==this.pane.autoHide&&this.shown&&(this.el.removeClass("antiscroll-scrollbar-shown"),this.shown=!1)},n.Horizontal=function(t){this.el=e('<div class="antiscroll-scrollbar antiscroll-scrollbar-horizontal">'),n.call(this,t)},i(n.Horizontal,n),n.Horizontal.prototype.update=function(){var e=this.pane.el.width(),t=e-2*this.pane.padding,n=this.pane.inner.get(0);this.el.css("width",t*e/n.scrollWidth).css("left",t*n.scrollLeft/n.scrollWidth)},n.Horizontal.prototype.mousemove=function(e){var t=this.pane.el.width()-2*this.pane.padding,n=e.pageX-this.startPageX,i=this.el.width(),a=this.pane.inner.get(0),r=Math.min(Math.max(n,0),t-i);a.scrollLeft=(a.scrollWidth-this.pane.el.width())*r/(t-i)},n.Horizontal.prototype.mousewheel=function(e,t,n,i){if(n<0&&0==this.pane.inner.get(0).scrollLeft||n>0&&this.innerEl.scrollLeft+this.pane.el.width()==this.innerEl.scrollWidth)return e.preventDefault(),!1},n.Vertical=function(t){this.el=e('<div class="antiscroll-scrollbar antiscroll-scrollbar-vertical">'),n.call(this,t)},i(n.Vertical,n),n.Vertical.prototype.update=function(){var e=this.pane.el.height(),t=e-2*this.pane.padding,n=this.innerEl;this.el.css("height",t*e/n.scrollHeight).css("top",t*n.scrollTop/n.scrollHeight)},n.Vertical.prototype.mousemove=function(e){var t=this.pane.el.height(),n=t-2*this.pane.padding,i=e.pageY-this.startPageY,a=this.el.height(),r=this.innerEl,o=Math.min(Math.max(i,0),n-a);r.scrollTop=(r.scrollHeight-t)*o/(n-a)},n.Vertical.prototype.mousewheel=function(t,n,i,a){if(!e(t.target).closest(".dk_options").length&&(a>0&&0==this.innerEl.scrollTop||a<0&&this.innerEl.scrollTop+this.pane.el.height()==this.innerEl.scrollHeight))return t.preventDefault(),!1}}(e)}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a,r=n(3)(n(5));void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),o=n(22),s=n(28),l=n(10),c=n(15),u=n(23),d=n(20),f=n(24),p=n(27),h=n(77),g=n(8),m=n(7),v=n(11),b=n(13),C=n(44),S=n(18),y=n(78),E=n(50),w=n(12),k=n(4);n(19);var _={cache:{},signInRetry:!1};function T(e,n){var c,u,d,f,p=e;"object"===(0,r.default)(e)&&(p=e.rockstarId,c=e.email,u=e.password,d=e.autoSignIn,f=e.isRememberMe);var h=s.constructOfflineSigninJson(p,c,u,d,f);return s.signInOfflineAsync(p,h,!n).then((function(e){if(e.isOfflineSignin)t("#mainNav").show(),l.setOffline(!0);else{t("a.btn.disabled:first").removeClass("disabled"),i.stopSpinner(t("div.buttonSignInWrapper").find("span")).hide(),o.resetSigninButtonText();var r=e.errorMsgContext?m.getTextCached(e.errorMsg,e.errorMsgContext):m.getErrorWithCode(a.errorCode(e.errorMsg)).Message;t("#lblSignInErrorProfile").after('<span class="errorText">'+r+"</span>"),M(n)}return i.HideInvisibleMask(),e})).catch(l.showGenericFatalError)}function I(e,n,i){a.WriteDebugLog("signInOffline","rockstarId",e);var r=t("#selectProfile.active").length,o=!(!n&&!t("#autoSignInProfile").is(":checked")),s=!(!i&&!t("#rememberMeProfile").is(":checked"));T({rockstarId:e,email:t("#signInEmailProfile").val(),password:t("#signInPasswordProfile").val(),autoSignIn:o,isRememberMe:s},!r)}function A(e,n){if(a.WriteDebugLog("signInLocal","rockstarId, Nickname",e+","+n),null!=e||null!=n)if(null!=e&&"undefined"!=e||(e=""),null!=n&&"undefined"!=n||(n=""),e.length>0||n.length>0){var r={Nickname:n,RockstarId:e.toString(),Local:!0,AutoSignIn:!0,SignedOnline:!1,SignedIn:!0};s.storeSignInAccount(r),s.signInToGame(r)}else l.showMessagePanel(m.getError("ServerError"),"",m.getError("SorryTry")),t("#buttonCancelMessage").hide(),t("#messagePanel .closeCurrentPanel").unbind("click").click((function(){l.requestUiState(!1)}));i.HideInvisibleMask(),t("#createProfileOffline .nickvalid").remove()}function R(e){return c.signInAsync(s.autoSignInData,e).then(_.onSuccessSignIn).catch(x).then(P)}function P(){s.clearAutoSigninData(),i.HideInvisibleMask()}function x(e){if(s.autoSignInData)return _.signOut();var n=a.extractErrorFromResponse(e);a.WriteDebugLog("handleSignInError","error",n);var r,o="errorText",c=!0,u=e.response,d=function(e){var t=p.isCaptchaRequired(e);return t||(t=p.isVisible(p.getSigninContainerId())),t}(u);r=p.isCaptchaRequired(u);var f=s.errorToCode(n),h=f.errorCodeEx,C=f.errorCode;l.initStyling(!0),d&&!E.isMfaCodeRequired(h)||r?(p.reload(p.getSigninContainerId()),c=!1):p.remove(p.getSigninContainerId());var S=t("#buttonSignInProfile");if(null!=S.attr("title")&&S.text(S.attr("title")),"string"==typeof C&&C.toLowerCase().indexOf("captcha")>-1)return p.showError(p.getSigninContainerId(),C),t("#buttonSignInProfile").removeClass("disabled").show(),i.stopSpinner(t("div.buttonSignInWrapper span")).hide(),v.trackEvent(b.category.profile,b.action.profile_sign_in_recaptcha_failure),void s.notifyGameSignInFailed(C,h);if(!_.signInRetry&&"3003"===C)return _.signInRetry=!0,void _.signInOnline();var w=s.parseSignInError(C,h,c,u,s.autoSignInData);w.errorMsg=m.localizeError(w);var k=Promise.resolve({isOfflineFallback:!1,reloadLoginForm:w.reloadLoginForm,errorMsg:w.errorMsg});switch(w.type){case"SteamAlreadyLinked":v.trackEvent(b.category.profile,b.action.profile_sign_in_failure_steam_already_linked);break;case"Banned":v.trackEvent(b.category.profile,b.action.profile_sign_in_failure_banned);break;case"TooManyLoginAttempts":o+=" signInErrorText",v.trackEvent(b.category.profile,b.action.profile_sign_in_failure_too_many_login_attempts);break;case"AuthenticationFailed":if(ie(),o+=" signInErrorText",a.errorCodeExIs(h,"SteamAPI")||a.errorCodeExIs(h,"EpicApi")||v.trackEvent(b.category.profile,b.action.profile_sign_in_auth_failed),E.isMfaSigninErrorCode(h))return v.trackEvent(b.category.mfa,b.action.mfa_signIn_submit_verification_code_error),void y.showMfaSigninError(w.errorMsg);if(E.isMfaCodeRequired(h))return y.showMfaCodeForm(),void _.resetSignInWrapper();w.reloadLoginForm&&w.clearLoginForm&&(t("#signInEmailProfile").val(""),t("#signInPasswordProfile").val(""));break;case"Steam":v.trackEvent(b.category.profile,b.action.profile_sign_in_failure_other_steam_error);break;case"Epic":v.trackEvent(b.category.profile,b.action.profile_sign_in_failure_other_epic_error);break;case"RateLimit":case"SteamAutoLogin":case"EpicAutoLogin":break;case"Unknown":var I=t("#signInEmailProfile").val();k=s.getRockstarIdAsync(I).then((function(e){return s.checkOfflineFallbackAsync(e,w.errorCodeEx)})).then(T).then((function(e){return s.formatOfflineFallbackDataAsync(e,w.reloadLoginForm)})).catch(s.fallbackSigninFailedAsync).then((function(e){if(a.stringHasContent(e.errorCode)){var n=m.getErrorWithCode(e.errorCode);e.errorMsg=n.Message,e.errorCodeDesc=n.CodeDescription}return e.reloadLoginForm?(t("div.signIn span.errorText").remove(),t(".headerMask").hide(),t("#mainNav").show()):l.showGenericFatalError(e.errorCode,e.errorMsg,m.getError("ErrorSupport"),e.errorCodeDesc),e})).catch(l.showGenericFatalError)}k.catch((function(e){a.WriteDebugLog("handleSignInError","asyncComplete error",e)})).then((function(e){var n,r;e&&e.isOfflineFallback||(a.isSteam()&&i.isSteamV2Enabled()&&a.errorCodeExIs(h,"SteamAPI")&&a.errorCodeIs(C,"AuthenticationFailed")?g.refreshSteamTicketAsync():a.isEpic()&&a.errorCodeExIs(h,"EpicApi")&&a.errorCodeIs(C,"AuthenticationFailed")?g.refreshEpicTicketAsync():(a.isSteam()&&s.autoSignInData&&(a.errorCodeExIs(h,"SteamAPI")||a.errorCodeIs(C,"DoesNotExist")&&a.errorCodeExIs(h,"PlayerAccount"))?(l.requestUiState(!0),setTimeout((function(){_.signOut()}),0)):e&&e.reloadLoginForm?(l.requestUiState(!0),i.pubsub.once("RGSC_JS_UI_STATE_RESPONSE",(n=o,r=e.errorMsg,i.pubsub.trigger("signin.showSignin",a.isOnline(),!0),void L(n,r)))):L(o,e.errorMsg),s.notifyGameSignInFailed(C,h),i.stopSpinner(t("div.buttonSignInWrapper span")).hide(),t("a.buttonSignIn.disabled").removeClass("disabled"),t("#buttonSignInProfile").show()))}))}function L(e,n){var i=t("div.signIn");i.find(".errorText").remove(),i.find(".SignInError").after('<span class="'+e+'">'+n+"</span>")}function N(e){"string"==typeof e&&e.length?_.cache.prepopulateEmail=e:_.cache.prepopulateEmail=void 0}function D(e,n,r,o){return a.WriteDebugLog("selectProfile","rockstarId, local, profileList, nickname",e+","+n+","+r+","+o),t("#existingProfiles").find("a.profileButton").removeClass("selected").end().find("[data-userid='"+e+"']").addClass("selected"),n?(A(e,o),Promise.resolve()):(null!=r?Promise.resolve(JSON.parse(r||"null")):s.getProfileAsync(e)).then((function(e){if(e){if(void 0===e.Nickname)return a.WriteDebugLog("SelectProfile","ERROR","Profile not found"),void l.showGenericFatalError();a.WriteDebugLog("SelectProfile","Loading profile nickname, email",e.Nickname+","+e.Email);var n=t("#selectProfile").find(".selectSignIn");a.WriteDebugLog("SelectProfile","selectSignInButton.length",n.length),N(e.Email),t("#signInProfile").is(":visible")||(l.forceLoginForm(),i.pubsub.trigger("signin:showPageSignIn"));var r=t("#selectProfile");r.find("input[name=signInOptionsProfile]").prop("checked",!1),r.find("#signInEmailProfile").val(""),r.find("#signInPasswordProfile").val(""),(e.SaveEmail||e.AutoSignIn)&&(e.Email&&(r.find("#signInEmailProfile").val(e.Email),r.find("#rememberMeProfile").prop("checked",!0)),e.Password&&r.find("#signInPasswordProfile").val(e.Password)),e.AutoSignIn&&r.find("#autoSignInProfile").prop("checked",!0),r.find("#buttonSignInProfile").focus()}})).catch(l.showGenericFatalError)}function M(e){if(e)return _.signOut();var n=t("#selectProfile.active").length;a.isScuiVisible()?n||l.clearActivePanel((function(){_.showSignin(a.isOnline(),!0)})):(t("div.panel.active").removeClass("active"),l.requestUiState(!0),l.clearActivePanel((function(){l.setUpLoadingPanel("#selectProfile",(function(){_.showSignin(a.isOnline(),!0)}))})))}function O(e){_.cache.policiesToRender||(_.cache.policiesToRender=[]),e&&a.stringHasContent(e.Text)?_.cache.policiesToRender.push(e):a.WriteDebugLog("prepPolicyRender","error","missing policy text")}function U(){var e=_.cache.policiesToRender[0];if(!e)return!1;var n=o.renderPolicy(e,t("#policyPanel #policyText"));return n&&l.showPanel(t("#policyPanel")),n}function G(){t("#policyAgree").on("click",k.debounce(F,500,!0)),t("#policyDisagree").on("click",(function(){_.signOut()}))}function F(){var e=_.cache.policiesToRender.shift();e&&u.acceptPolicies({name:e.Name,version:e.Version}),U()||(t("#policyAgree, #policyDisagree").off("click"),s.signInToGame(_.cache.loginResult))}function V(){setTimeout((function(){i.pubsub.trigger("signin:signinComplete"),a.pubsub.publish("signin:signinComplete")}),500)}function B(e){var n=t("div.panel.active");if(n.length&&parseInt(n.css("top"),10)<0&&l.showPanel(n),window.globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha)!function(e){if((t(".previousSignInErrorMessage").is(":visible")||p.isVisible(p.getSigninContainerId()))&&!Z())return void W();_.loadGameProfilesAsync().then((function(){ee(),H(),W(e),a.isNewSigninFlowEnabled()||q()}))}();else{if(globals.signInReCaptchaEnabled&&globals.showLockedAccountCaptchaSignIn){globals.showLockedAccountCaptchaSignIn=!1;return W(!0),t("#signInProfile .formSignIn").find("fieldset").hide(),void(t("#selectProfile").hasClass("active")||l.showPanel(t("#selectProfile")))}var i=t("#signInProfile"),r=!Z(i)&&(i.is(":visible")||t("#createProfileOffline").is(":visible"));s.getSignInPageData(r,_.loadGameProfilesAsync).then((function(){var n=t("#signInProfile");ee(n),H(e);var i=J(),r=a.isOffline(),o=a.isNewSigninFlowEnabled(),s=a.isLegacyServiceLayer();r?(o?$():(q(),s&&!l.isForceLoginForm(n)?X():i&&$()),i||function(e){if(t("#headerLogin").hide(),e){var n=t("#signInProfile");n.find(".formSignIn").hide(),n.find("div.offlineMode").addClass("noProfiles")}else{var i=t("#selectProfile").find(".profileList");i.find("h1").first().hide(),i.find("h3").hide(),i.find("div.offlineMode").addClass("noProfiles")}}(o),Q(i)):(o||q(),$(),i||Y())}))}}function W(e){H(e),a.isNewSigninFlowEnabled()||q(),$(),a.isNewSigninFlowEnabled()?t("#signInProfile").find(".noExistingProfiles").hide():t(".profileList").find(".noExistingProfiles").hide(),t("#signInProfile").addClass("verify"),p.reload(p.getSigninContainerId())}function J(){var e=t("#selectProfile #existingProfiles"),n=e&&e.length&&e.html().length>0;return n||(_.loadGameProfiles(),n=e&&e.length&&e.html().length>0),n}function H(e){0==t("#mainNav").find(".pendingSignIn").length&&l.setSelected(),i.removeLoading("selectProfile");var n=t("#selectProfile");j(),t("div.active").find("form.resetPasswordForm, .buttonResetWrapper").hide(),ie();var a=n.find(".profileList");a.hide(),a.find(".noExistingProfiles").hide(),n.find(".noProfiles").hide(),n.find(".profilesExist").hide(),n.find("a.needAccountLink").hide(),n.find(".troubleSigningIn").hide(),n.find(".resetPasswordForm.signInEmailPasswordResetForm").hide(),n.find(".resetSuccessMsg").hide(),n.removeClass("nobg"),t("#createProfileOffline").hide(),o.resetSigninButtonText(),e||te(),function(e){null!=e&&e||(t("div.signIn").find("span.errorText, span.error").remove(),t("#rememberMeProfile, #autoSignInProfile").prop("checked",!1),globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha||t("signInProfile").find("#"+p.getSigninContainerId()).empty());t("#buttonSignInProfile").removeClass("disabled").show(),i.stopSpinner(t("div.buttonSignInWrapper span")).hide()}(e),function(e){null!=e&&e||t("div.troubleSigningIn").find("span.errorText, span.error").remove();t("#buttonSignInPasswordReset").removeClass("disabled"),i.stopSpinner(t(".resetSpinner")).hide(),i.stopSpinner(t("div.buttonSignInWrapper span")).hide()}(e)}function j(){var e=t("#signInProfile"),n=t(".formSignIn");n.hide(),n.find(".forgot").hide(),e.hide(),e.find(".buttonSignInQuitGame").hide(),e.find(".offlineMode").hide(),e.find(".previousSignInErrorMessage").hide(),e.find("#buttonSignInProfile").hide(),e.find("#buttonGoToSignIn").hide(),e.find(".orCreateAccount").hide(),e.find(".noExistingProfiles").hide()}function z(){var e=t("#signInProfile"),n=J();t(".troubleSigningIn, .resetPasswordForm, .buttonResetWrapper").show(),j(),window.globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha&&!p.isVisible(p.getResetPasswordContainerId())&&p.init(p.getResetPasswordContainerId()),t(".formSignIn").find(".forgot").hide(),e.find(".buttonSignInQuitGame").hide(),!a.isNewSigninFlowEnabled()||globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha?t(".noExistingProfiles").hide():n||t(".noExistingProfiles").show(),t("#selectProfile").addClass("nobg")}function $(){var e=t("#signInProfile");l.resetForceLoginForm(e);var n=a.isOffline(),i=a.isLegacyServiceLayer(),r=window.globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha,o=a.isNewSigninFlowEnabled();e.show(),r||e.removeClass("verify"),t(".formSignIn").show(),t(".formSignIn").find("fieldset").show(),t("div.active, .active .buttonSignInWrapper").show(),t("#buttonSignInProfile").show(),e.find(".buttonSignInQuitGame").show(),function(){if(void 0!==_.cache.prepopulateEmail){var e=t("#signInEmailProfile");if(e.val().length>0&&e.val()!==_.cache.prepopulateEmail)return;e.val(_.cache.prepopulateEmail),t("#rememberMeProfile").prop("checked",!0)}}(),i&&t("#signInEmailProfile").attr("placeholder",m.getTextCached("Email","HomeSignin")),n?t("#selectProfile").addClass("nobg"):(e.find(".forgot").show(),o&&t(".orCreateAccount").show())}function q(){if(J()){var e=a.isOffline();t("#selectProfile").find(".profilesExist").show(),e||t("a.needAccountLink").show()}else K()}function K(){if(a.isOffline()){var e=t("#selectProfile");globals.signInReCaptchaEnabled&&window.globals.showSignInRecaptcha||e.find(".profilesExist").show()}else t("#selectProfile").find(".noProfiles").show(),t("a.needAccountLink").show(),Y()}function Y(){var e,n=m.getTextCached("CreateSCAccount2","HomeSignin");n=n.replace("[title]",globals.titleDisplayName),(e=a.isNewSigninFlowEnabled()?t("#selectProfile").find(".noExistingProfiles"):t(".profileList").find(".noExistingProfiles")).html("<p>"+n+"</p>"),e.find("a").attr("tabindex","6"),e.show()}function Q(e){e?(t(".offline-NoLocalProfiles").hide(),t(".offline-LocalProfiles").show(),t("#selectProfile").addClass("hasProfiles")):l.InternetConnectedStateAsync().done((function(e){var n="";!1===e&&(n=m.getError("NoInternet"));var i=t(".offline-NoLocalProfiles");i.find("#offline-connectionCheckMsg").remove();var r=i.find("p");"lanoire"===a.getTitleName()&&(i.find("h1").text(m.getTextCached("offlineTitle","HomeSignin")),r.text(m.getTextCached("OfflineSigninNotAvailableLan","HomeSignin"))),r.append("<span id='offline-connectionCheckMsg'><br/><br/>"+n+"</span>"),i.show(),t(".offline-LocalProfiles").hide()}))}function X(){var e=t("#createProfileOffline");e.is(":visible")?K():(e.show(),e.find(".buttonSignInWrapper").show(),t(".formSignIn").show())}function Z(e){var n=e||t("#signInProfile");return null!=n.data("reload")&&!0===n.data("reload")}function ee(e){(e||t("#signInProfile")).removeData("reload")}function te(){var e=o.CaptchaSelector();l.clearForms(e)}function ne(){t(".buttonSignInWrapper span").show()}function ie(){t(".buttonSignInWrapper span").hide()}return _.init=function(){t(".buttonSignInQuitGame").click((function(e){e&&e.preventDefault(),t(this).hasClass("disabled")||l.quitGame()})),t("#lnkCreateOfflineProfile").click((function(e){e&&e.preventDefault(),globals.localProfileCreation&&function(){if(!globals.localProfileCreation)return;_.loadGameProfilesAsync().then((function(){H();var e=J(),t=a.isOffline();q(),X(),t&&Q(),e||Y()}))}()})),t("#createProfileOffline").find(".formSignIn").on("submit",(function(){return t("#buttonCreateProfileOffline").click(),!1})),t("#buttonCreateProfileOffline").click((function(){var e=!1;return f.clearErrorClasses(),f.NicknameValidation("createProfileNickname")&&f.LocalNicknameValidation()&&(ne(),A("",t.trim(t("#createProfileNickname").val())),e=!0),e})),t("#autoSignInProfile").on("click",(function(){t(this).is(":checked")&&t("#rememberMeProfile").prop("checked",!0)})),t("#rememberMeProfile").on("click",(function(){t(this).is(":checked")||t("#autoSignInProfile").prop("checked",!1)})),t("#buttonSignInProfile").click((function(e){e&&e.preventDefault();var n=t(this);if(!n.hasClass("disabled")){if(t("#joinClub").addClass("disabled"),n.addClass("disabled").hide(),n.attr("title",n.text()),i.ShowInvisibleMask(n,m.getError("Loading")),i.initSpinner(n.next()).fadeIn(),o.setAutoSignInValues(t("#autoSignInProfile").is(":checked")),!f.SignInValidation())return t("#joinClub").removeClass("disabled"),n.removeClass("disabled").show(),i.HideInvisibleMask(),void i.stopSpinner(n.next()).hide();ne(),setTimeout(_.signInOnline,100)}})),t("#formSignInProfile").on("submit",(function(){return t("#buttonSignInProfile").click(),!1})),t("a.forgotPasswordLink").keydown((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})).click((function(){return _.showPageResetPassword(!1),!1})),t("#signInEmailPasswordResetForm").submit((function(e){e&&e.preventDefault(),t("#buttonSignInPasswordReset").click()})),t("#buttonGoToSignIn").click((function(e){e&&e.preventDefault(),W()})),t("#existingProfiles").on("click","a.profileButton",(function(e){e&&e.preventDefault();var n=t(this),i=n.attr("data-userid");B(),D(i,n.data("local"),null,n.data("nick"))})),t("#buttonSignOutYes").click((function(e){e&&e.preventDefault(),_.signOut()})),t("#buttonSignOutNo").click((function(){var e=t("#mainNav").find("li.on a");return e.length?e.click():t("#signOut").attr("data-prevPanel").length?l.clearActivePanel((function(){var e=t("#signOut").attr("data-prevPanel");l.setUpLoadingPanel("#"+e),l.removeLoading(e)})):i.pubsub.trigger("setupEnv:showHomepage",!0),!1})),G(),t("#buttonSignInPasswordReset").click((function(){var e=t(this);return!e.hasClass("disabled")&&(e.addClass("disabled"),f.clearErrorClasses(),f.resetPasswordCaptchaValidation()&&f.EmailValidation("signInEmailRetrievePassword")?(e.hide(),i.initSpinner(t("#resetSpinner")).show(),t(".emailvalid").remove(),t("div.active .buttonResetWrapper span").show(),_.resetPassword("signInEmailRetrievePassword"),v.trackEvent(b.category.profile,b.action.profile_sign_in_password_reset),!0):(e.removeClass("disabled"),!1))})),t("#buttonCancelPasswordReset").click((function(e){var n;e&&e.preventDefault(),(n||t("#signInProfile")).data("reload",!0),_.showSignin()}))},_.signOut=function(e,n){l.clearActivePanel((function(){var r=!n;return s.signOut(r),l.closeModalsAndHideMenu(),t(".statusbar").empty().hide(),t("#activation").removeClass("redemption"),d.ClearGetFriendsCache(),delete _.cache.loginResult,delete _.cache.policiesToRender,i.pubsub.trigger("signout:completed"),l.closeCompareAccomplish(),l.setUpSignedInOptions(!1,a.isOffline()),G(),function(e){a.WriteDebugLog("quitOnSignOut","",""),a.isScuiVisible()||(t("div.panel.active").removeClass("active"),l.requestUiState(!0)),t("#confirmPanel .inner a, #confirmPanel .inner div").hide(),l.clearActivePanel((function(){l.setUpLoadingPanel("#confirmPanel",(function(){if(l.initHeaderMenu(!1,!1),l.setUpLoadingPanel("#confirmPanel"),t("#confirmPanel .inner a, #confirmPanel .inner div").hide(),t("#confirmPanel .inner #confirmPanelButtonWrapperYesNo").show(),!i.isQuitDisabled()&&t("#confirmPanelButtonWrapperYesNo a.buttonQuitConfirm").show().off().on("click",g.quitGame),i.isQuitDisabled()){var n=t("#confirmPanelButtonWrapperYesNo a.buttonCancelConfirm"),r=n.text();n.text(m.getTextCached("SigninShort","HomeSignin")),n.show().off().on("click",(function(){_.showSignin(a.isOnline()),t(this).text(r)}))}t("#confirmPanelText").html("<h2>"+m.getTextCached("SignedOutHeader","HomeSignin")+"</h2>"),t("#confirmPanelTextLong").html(e||m.getTextCached("SignedOutBody","HomeSignin"))}))}))}(e)}))},_.sdkAutoSignInRequest=function(e){s.setAutoSigninData(e),a.isLoadedInOfflineMode()&&(l.setOffline(!0),!e.Local&&e.RockstarId)?I(e.RockstarId,e.AutoSignIn,e.SaveEmail):s.isCredsFromGameAvailable(e)||a.isSteam()||a.isEpic()?(v.trackPage("/Signin_Auto"),_.signInOnline()):null==e.Local||!e.Local||null==e.Nickname&&null==e.RockstarId?(a.WriteDebugLog("sdkAutoSignInRequest","failed","no creds, not Steam and local not supported"),s.clearAccount()):A(e.RockstarId,e.Nickname)},_.signInOnline=function(e){if(s.clearLoginAccount(),a.isOffline())return null==s.autoSignInData||null==s.autoSignInData.RockstarId&&null==s.autoSignInData.Nickname?I(null):D(s.autoSignInData.RockstarId,!1,null,s.autoSignInData.Nickname);p.hideError(p.getSigninContainerId());var n={captchaData:p.getCaptchaData(p.getSigninContainerId())};if(s.autoSignInData?(n.email=s.autoSignInData.Email,n.password=s.autoSignInData.Password,n.rockstarId=s.autoSignInData.RockstarId):(n.email=t("#signInEmailProfile").val(),n.password=t("#signInPasswordProfile").val()),n.email&&t("#mfaEmail").text(n.email),e){var i=y.getMfaLoginData();if(!i)return;n.mfaCode=i.mfaCode,n.rememberDevice=i.rememberDevice}if(n.isMfa=e,!a.stringHasContent(n.email)&&(null==n.RockstarId||null==n.RockstarId||0==n.rockstarId))return R(n);s.getRememberedMachineTokenTokenAsync(n.rockstarId,n.email).then((function(e){return n.rememberedMachineToken=e,R(n)}))},_.onSuccessSignIn=function(e){var n=e.data;if(n.Status){p.remove(p.getSigninContainerId()),t("#formAccountDetails").find("span.errorText").remove(),t("#signupDobContainer").find("select").prop("disabled",!1),t("#signupDobContainer").find(".dk_container").removeClass("disabled"),t("#signupDetailsContainer").show(),n.MfaCodeUsed&&v.trackEvent(b.category.mfa,b.action.mfa_signIn_submit_verification_code_success),n.SaveMachine=t("#rememberDevice").is(":checked")||e.data.MfaEnabled&&!e.data.MfaCodeUsed;var i={checked:!!t("#autoSignInProfile").is(":checked"),save:!(!t("#rememberMeProfile").is(":checked")&&!n.SaveMachine)},r=s.getSigninJson(n,i);if(s.storeSignInAccount(n,s.autoSignInData),function(e){if(globals.fullLog)try{parseInt(e.RockstarId,10)%10!=0&&(globals.fullLog=!1,globals.debugLog="")}catch(e){}}(n),a.isLegacyServiceLayer()&&C.storeLanAuthValue(n.Auth),function(e){var n=s.signInSuccessMissingDetails(e.Age,e.CountryCode);if(n.hasBoth)return;n.hasAge||n.hasCountry?n.hasCountry?t("#dob").addClass("DOBUpdate"):t("#dob").addClass("countryUpdate"):t("#dob").addClass("DOBAndCountryUpdate")}(n),o.setAutoSignInValues(r.AutoSignIn),r.SaveEmail||(_.cache.prepopulateEmail=void 0),null!=r.RockstarId&&null!=r.RockstarId&&t("#editRockstarId").val(r.RockstarId),a.isSteam())try{var l=h.getSteamNetworkAsync(s.getLoginAccount().RockstarId,r.ticket);l.then((function(e){e&&null!=e.AccountId?h.BindSteamAccount(a.getSteamAppId(),a.getSteamAuthTicket(),r).catch((function(e){g.CallGameMethod(null,null,"RGSC_JS_FINISH_SIGN_IN"),a.WriteDebugLog("onSuccessSignIn","ERROR in BindSteamAccount","",a.logType.error,a.logController[a.getTitleName()]),x(e)})):h.SteamLinkPrompt(r),e=null})),l.catch((function(){h.SteamLinkPrompt(r)}))}catch(t){return g.CallGameMethod(null,null,"RGSC_JS_FINISH_SIGN_IN"),a.WriteDebugLog("onSuccessSignIn","ERROR in getSteamNetwork","",a.logType.error,a.logController[a.getTitleName()]),void x(e)}else try{_.preSignInToGame(r)}catch(e){return g.CallGameMethod(null,null,"RGSC_JS_FINISH_SIGN_IN"),r={code:"error",content:"<redacted>"},a.WriteDebugLog("onSuccessSignIn","ERROR jsonString",JSON.stringify(r)),void a.WriteDebugLog("onSuccessSignIn","signInToGame exception",e&&e.message?e.message:"",a.logType.error,a.logController[a.getTitleName()])}_.signInRetry=!1}else x(e)},_.preSignInToGame=function(e){(function(e){if(!e||a.isOffline())return Promise.resolve([]);return u.getExpiredPolicies(["pp","tos","eula"],a.getTitleLang()).then((function(e){return e&&e.data&&k.isArray(e.data)?e.data:(a.WriteDebugLog("getPoliciesToAgree","error","invalid data"),[])})).catch((function(e){return a.WriteDebugLog("getPoliciesToAgree","error",e&&e.toString?e.toString():""),[]}))})(e.SignedOnline).then((function(t){return t&&0!==t.length?(_.cache.loginResult=e,function(e){return u.getPolicyDocuments(e,a.getTitleLang()).then((function(e){var t;if(!e||!e.data)throw t="no response or data",a.WriteDebugLog("showSignInPolicies","error",t),t;if(k.map(e.data,O),!U())throw t="no policy to render",a.WriteDebugLog("showSignInPolicies","error",t),t;v.trackPage("/SigninPolicies")})).catch((function(e){throw a.WriteDebugLog("showSignInPolicies","error",e&&e.toString?e.toString():""),e}))}(t)):(s.signInToGame(e),!1)})).catch((function(){s.signInToGame(e)}))},_.loadGameProfilesAsync=function(){return t("#selectProfile").hasClass("active")?_.loadGameProfiles():new Promise((function(e){l.clearActivePanel((function(){l.setUpLoadingPanel("#selectProfile",(function(){e(_.loadGameProfiles())}))}))}))},_.loadGameProfiles=function(){return a.WriteDebugLog("LoadGameProfiles"),s.getProfileListAsync().then((function(e){if(e&&0!==e.NumProfiles){var n=0,r=[],o=m.getTextCached("LastVisit","HomeSignin")||"",c=!1;t.each(e.Profiles,(function(e,t){try{if(!s.isShowInProfileList(t))return;s.isRememberMeProfile(c,t)&&(N(t.Email),c=!0);var i="info";n++,null==t.Local&&(t.Local=!1),t.Local&&(i+=" local","0"==t.RockstarId&&"1969-12-31"==a.convertDateString(t.LastSignInTime)&&n--);var l=null!=t.RockstarId?t.RockstarId:"";r.push('<a class="profileButton gold" href="#" data-userid="'+l+'" data-local="'+t.Local+'" data-nick="'+t.Nickname+'"><img id="imgProfile'+e+'" width="32" height="32" class="avatarImg" alt="'+t.Nickname+'" src=""/><span class="text '+i+'"><h5 class="profilenickname">'+t.Nickname+'</h5><span class="subText">'+o+" "+a.convertDateString(t.LastSignInTime)+"</span></span></a>")}catch(e){a.WriteDebugLog("LoadGameProfiles","ERROR LOADING PROFILE nick",t.Nickname,a.logType.error,a.logController.profile)}})),t("#profileCount").html(n),t("#existingProfiles").html(r.join("")),t("#existingProfiles").find(".avatarImg").on("error",i.avatar404),t.each(e.Profiles,(function(e,n){var i=n.Nickname;n.Local&&(i=void 0),t("#imgProfile"+e).attr("src",S.getAvatarUrl(n.AvatarUrl,i,32))})),l.resetScrollbar("#existingProfilesContainer, #profileList")}}))},_.showSignin=function(e,t){var n=s.prepSignin(e,t,a.isSignedIn());return!!n.status&&(t=n.isShowError,(null==e||e)&&globals.scsServiceEnabled||l.setOffline(!0),a.isSteam()&&i.HideNonSteamFeatures(),l.showHeaderMenu(),a.isSignedIn()?i.pubsub.trigger("setupEnv:showHomepage",!0):(l.initHeaderMenu(!1,!0),B(t)),!0)},_.clearSigninForm=function(){te(),t("#signIn input:checkbox").prop("checked",!1),t("#selectProfile input:checkbox").prop("checked",!1)},_.resetSignInWrapper=function(){t("a.btn.disabled:first").removeClass("disabled"),t("a.buttonSignIn.disabled").removeClass("disabled"),t("#buttonSignInProfile").show(),i.stopSpinner(t("div.buttonSignInWrapper span")).hide()},_.isCountryOrDobRequired=function(e){var t=o.isDobMissing(),n=o.isCountryMissing();return e&&(t||n)},_.gameFinishedSignin=function(e){i.HideInvisibleMask(),s.clearSignInRequestNote(),s.sdkSignInFailure=!1;var r=t.parseJSON(e||"null");r&&r.SignedIn?(a.WriteDebugLog("gameFinishedSignin","jsonResult.SignedIn",r.SignedIn),g.isSdkAvailable()||a.pubsub.publish("signin.gameFinishedSignin:success"),function(e){delete _.cache.loginResult,delete _.cache.policiesToRender;var r=s.isUpdatePassword(e&&e.SignedOnline);if(s.updateGlobalsOnSignIn(e.ScAuthToken),null==e.SignedOnline&&null==e.SignedOnline){var c=a.isOnline();e.Nickname&&"LocalProfile1"===e.Nickname&&(c=!1),e={SignedIn:!0,SignedOnline:c,ProfileSaved:!0,AchievementsSynched:!0},a.WriteDebugLog("handleSigninSuccess","jsonResult",JSON.stringify(e))}if(null!=e.SignedOnline){if(e.SignedOnline)a.WriteDebugLog("handleSigninSuccess","UpdatePassword",r?"true":"false"),l.setProfileHtml(e.Local),a.isSteam()&&l.isActivation()?i.pubsub.trigger("steam:showActivationSteamSuccess"):r&&(t("#accomplishHeaderBtn").show(),i.pubsub.trigger("settingsFn.loadSettings"),t("a.editPassword").click(),t("#editProfile").find(".rowAnchor.editlink.editPassword").hide(),t("#passwordForm .errors").append('<span class="pwerror errorText">'+m.getError("PasswordUpdate")+"</span>"));else if(e.Local){if(l.setProfileHtml(!0),null!=e.CallbackData&&1&e.CallbackData)return l.setUpSignedInOptions(e.SignedIn,e.Local),l.requestUiState(!1),void V()}else globals.account&&(a.isOffline(!0),l.setProfileHtml(!1));l.setUpSignedInOptions(e.SignedIn,e.Local),s.setupSignInGoogleAnalytics(globals.account.RockstarId),s.trackSignInEvents(globals.account.RockstarId)}(function(e){var t,n="",i="",r=1,o=m.getTextAsync("SignedIn","Notifications"),s=m.getTextAsync("offlineTitle","HomeSignin");Promise.all([o,s]).then((function(o){!e.SignedOnline&&o[1]&&(o[0]+=" ["+o[1]+"]"),t='{ "Type" : "SIGNEDIN", "Count" : 1, "Data" : [ { "Id" : "SignedIn", "Name": "'+globals.account.Nickname+'", "Description" : "'+o[0]+'" } ] }',e.NumInvitesReceieved&&e.NumInvitesReceieved>0&&(n=', { "Type" : "FRIENDREQUESTS", "Count" : 1, "Data" : [ { "Id" : "NumInvites", "Name": "[ '+e.NumInvitesReceieved+' ]", "Description" : "'+m.getTextCached("FriendRequests","Notifications")+'" } ] }',r++),e.NumFriendsPlayingSameTitle&&e.NumFriendsPlayingSameTitle>0&&(i=', { "Type" : "FRIENDSONLINE", "Count" : 1, "Data" : [ { "Id" : "NumFriends", "Name": "[ '+e.NumFriendsPlayingSameTitle+' ]", "Description" : "'+m.getTextCached("FriendsOnline","Notifications")+'" } ] }',r++),a.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",'{ "Count" : '+r+', "Notifications" : ['+t+n+i+"] }")}))})(e),s.clearCachedProfileList(),_.isCountryOrDobRequired(e.SignedOnline)?(i.pubsub.once("RGSC_JS_UI_STATE_RESPONSE",(function(){o.ShowCountryOrDobPrompt()})),l.requestUiState(!0)):(g.launcherNotifyEvent("SignIn"),function(){if(s.isAutoSignin())l.requestUiState(!1);else{(function(){if("function"==typeof globals.navAfterSigninCallback)return globals.navAfterSigninCallback(),delete globals.navAfterSigninCallback,!0;var e=t("#mainNav, #headerLoginOptions, .sideMenu").find(".pendingSignIn");if(e.length>0){e.removeClass("pendingSignIn");var n=e.filter(":first");return a.WriteDebugLog("navigateAfterSignIn","Pending Sign In",n.attr("id")),n.click(),!0}return!1})()||!a.isScuiVisible()||l.isActivation()||l.isEditProfile()||l.isSignInOrSignUpOrMissingDetails()||t("#homeButton").hasClass("disabled")&&"pcros"===globals.platform||Promise.resolve().then((function(){var e=[n(37)];(function(e){e.showHomepage(!0)}).apply(null,e)})).catch(n.oe)}_.clearSigninForm(),(a.isSteam()||a.isEpic())&&i.HideNonSteamFeatures();_.resetSignInWrapper()}());V()}(r)):(r&&a.WriteDebugLog("gameFinishedSignin","jsonResult.SignedIn",r.SignedIn),function(e){var n,i=Boolean(s.autoSignInData&&s.autoSignInData.AutoSignIn||a.stringHasContent(e.ScAuthToken)),r=t("div.signIn");if(e&&e.ScAuthTokenError)n="AuthTokenInvalid",s.sdkSignInFailure=!0,i=!0;else{if(E.isMfaCodeRequired(e))return y.showMfaCodeForm(),void _.resetSignInWrapper();r.find(".errorText").length||p.isError(p.getSigninContainerId())||globals.showLockedAccountCaptchaSignIn||(n=globals.isNLE?"NotFound":"NotFoundEmail")}"string"==typeof n&&r.find(".SignInError").after('<span class="errorText">'+m.getError(n)+"</span>");s.clearAutoSigninData(),M(i),_.resetSignInWrapper()}(r)),i.stopSpinner(t("div.buttonSignInWrapper span")).hide()},_.resetPassword=function(e){var n=t("#"+e).val();a.WriteDebugLog("signin.resetPassword","email",n),t(".troubleSigningIn .resetPasswordForm .errors").html("");var r={email:n,captchaData:p.getCaptchaData(p.getResetPasswordContainerId())};c.resetPassword(r).then((function(e){e.data.Status&&(t(".active .resetSuccessMsg").show(),t("#signInEmailPasswordResetForm").hide())})).catch((function(e){if(e&&e.response&&e.response.data&&e.response.data.Error){if(!(void 0!==p.getErrorCode(e.response.data.Error.Code)))return;return p.reload(p.getResetPasswordContainerId()),void p.showError(p.getResetPasswordContainerId(),e.response.data.Error.Code)}w.ShowErrorModal(a.createFatalErrorOptions(e)),a.WriteDebugLog("signin.resetPassword","ajax error caught",e)})).then((function(){i.stopSpinner(t("#resetSpinner")).fadeOut((function(){var e=t("#buttonSignInPasswordReset");e.removeClass("disabled"),e.fadeIn()})),t("a.btn.disabled:first").removeClass("disabled")})).catch((function(e){a.WriteDebugLog("signin.resetPassword","unhandled exception",e,a.logType.error,a.logController.profile)}))},_.showPageResetPassword=function(e){if(!a.isOffline()){H(e);$(),z()}},a.pubsub.subscribe("signin.signOut",(function(e,t){t?_.signOut(t.errorMsg,t.excludeScs):_.signOut()})),i.pubsub.on("signin.showSignin",_.showSignin),i.pubsub.on("signin:showPageSignIn",B),a.pubsub.subscribe("signin.handleSigninError",(function(e,t){x(t)})),a.pubsub.subscribe("signin.preSignInToGame",(function(e,t){_.preSignInToGame(t)})),_}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(11),i=n(13),a=n(4),r={getMfaLoginData:function(e,t){return{mfaCode:e.trim(),rememberDevice:t}}},o=["101","102","103","105","106"];return r.isMfaCodeRequired=function(e){return o.indexOf(e)>-1},r.isMfaSigninErrorCode=function(e){return"102"===e||"103"===e},r.isMfaCookieExpired=function(e){return"115"===e},r.isMfaCodeAttemptsError=function(e){return"119"===e},r.validateMfaCode=function(e){var n=!1,a="";"string"!=typeof e||0===e.trim().length?(n=!0,a="MfaCodeMissing"):new RegExp("^\\d{6}$").test(e)||(n=!0,a="MfaCodeInvalid",t.trackEvent(i.category.mfa,i.action.mfa_signIn_invalid_verification_code_entered));return n?{isValid:!1,errorMsg:a}:{isValid:!0}},r.getFingerprint=function(){return void 0===globals.fingerprint||a.isArray(globals.fingerprint)?"":'{"fp":'+JSON.stringify(globals.fingerprint)+"}"},r.isShowDeviceList=function(e){return null!=e&&e.length>1},r.isShowResendButton=function(e,t){return!r.isShowDeviceList(e)&&null!=t&&"GoogleAuthenticator"!==t.DeviceType},r.isAccountRecoveryAllowed=function(){return globals.mfaAccountRecoveryAllowed},r}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a,r;a=[n(1),n(6),n(4),n(123),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(17),n(135)],void 0===(r=function(e,t,n){var a={layout:"qwerty",langConfig:[{id:"en-US",name:"english",layout:"qwerty"},{id:"de-DE",name:"german",layout:"german-qwertz-1"},{id:"es-MX",name:"mexican",layout:"mexican-qwerty"},{id:"es-ES",name:"spanish",layout:"spanish-qwerty"},{id:"fr-FR",name:"french",layout:"french-azerty-1"},{id:"ja-JP",name:"japanese",layout:"qwerty"},{id:"pl-PL",name:"polish",layout:"polish-qwerty"},{id:"pt-BR",name:"portuguese",layout:"portuguese-qwerty"},{id:"ru-RU",name:"russian",layout:"russian-qwerty"},{id:"zh-TW",name:"chinese",layout:"qwerty"},{id:"zh-CN",name:"chinese",layout:"qwerty"},{id:"it-IT",name:"italian",layout:"standard-italian"},{id:"ko-KR",name:"korean",layout:"standard-2-beolsik"}]};function r(){var e=i.data(document.body,"virtualKeyboard");return!(!e||!e.jquery)&&e}function o(e,t){e?a.showVirtualKeyboard(t):a.closeVirtualKeyboard()}function s(e){var t=null;return e&&"recaptcha_response_field"===e.attr("id")&&i("body").hasClass("launcher")&&(t="#recaptcha_challenge_image"),t}return a.setInputElement=function(e){e&&e.jquery&&i.data(document.body,"virtualKeyboard",e)},a.isActive=function(){var e=r();return e&&e.getkeyboard&&e.getkeyboard()&&e.getkeyboard().isVisible()},a.showVirtualKeyboard=function(e){null==e&&(e=r()),e&&e.getkeyboard&&null==e.getkeyboard()&&function(e){(function(){var e=n.find(a.langConfig,(function(e){return e.id==globals.titlelang}));if(void 0===e||void 0===i.keyboard.language[e.name])return;a.layout=e.layout;var t=i.keyboard.language[e.name];i.extend(!0,i.keyboard.defaultOptions,t)})(),null==e?e=r():a.setInputElement(e);var t=function(e){return e.hasClass("ui-autocomplete-input")}(e),o={layout:a.layout,position:{of:s(e),my:"left top",at:t?"right top":"left bottom",at2:t?"right top":"left bottom"},initialFocus:!0,usePreview:!1,autoAccept:!0,enterNavigation:!0,tabNavigation:!0,openOn:"focus",css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonDisabled:"ui-state-disabled"}};t&&i(document).one("beforeVisible.keyboard",(function(e,t,n){i(n).addAutocomplete()}));e.on("initialized.keyboard",(function(){i(this).trigger("focus.keyboard")})),e.keyboard(o)}(e)},a.closeVirtualKeyboard=function(){var e=r();e&&e.getkeyboard&&e.getkeyboard()&&e.getkeyboard().close()},a.destroyKeyboard=function(){var e=r();null!=e&&(null!=(e.getkeyboard&&e.getkeyboard())&&e.getkeyboard().destroy())},a.setFocusedInput=function(e){var n=i(document.activeElement);(n.is("input")||n.is("textarea"))&&n.val(e),t.pubsub.trigger("virtualKeyboard:keyboardResult",n)},t.pubsub.on("virtualKeyboard",o),e.pubsub.subscribe("virtualKeyboard",(function(e,t,n){o(t,n)})),a}.apply(t,a))||(e.exports=r)}).call(this,n(0))},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0)],void 0===(r="function"==typeof(i=function(e){
/*! Mousewheel version: 3.1.12 * (c) 2014 Brandon Aaron * MIT License */
var t,n,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(e.event.fixHooks)for(var o=i.length;o;)e.event.fixHooks[i[--o]]=e.event.mouseHooks;var s=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=a.length;t;)this.addEventListener(a[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",s.getLineHeight(this)),e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=a.length;t;)this.removeEventListener(a[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(i){var a=i||window.event,o=r.call(arguments,1),l=0,d=0,f=0,p=0,h=0,g=0;if((i=e.event.fix(a)).type="mousewheel","detail"in a&&(f=-1*a.detail),"wheelDelta"in a&&(f=a.wheelDelta),"wheelDeltaY"in a&&(f=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*f,f=0),l=0===f?d:f,"deltaY"in a&&(l=f=-1*a.deltaY),"deltaX"in a&&(d=a.deltaX,0===f&&(l=-1*d)),0!==f||0!==d){if(1===a.deltaMode){var m=e.data(this,"mousewheel-line-height");l*=m,f*=m,d*=m}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");l*=v,f*=v,d*=v}if(p=Math.max(Math.abs(f),Math.abs(d)),(!n||p<n)&&(n=p,u(a,p)&&(n/=40)),u(a,p)&&(l/=40,d/=40,f/=40),l=Math[l>=1?"floor":"ceil"](l/n),d=Math[d>=1?"floor":"ceil"](d/n),f=Math[f>=1?"floor":"ceil"](f/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();h=i.clientX-b.left,g=i.clientY-b.top}return i.deltaX=d,i.deltaY=f,i.deltaFactor=n,i.offsetX=h,i.offsetY=g,i.deltaMode=0,o.unshift(i,l,d,f),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,o)}}function c(){n=null}function u(e,t){return s.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})?i.apply(t,a):i)||(e.exports=r)},,function(e,t,n){"use strict";var i,a=n(3),r=a(n(70)),o=a(n(71)),s=a(n(5));void 0===(i=function(e){"".concat(globals.baseUrl,"images/games/");var t=n(1),i=n(8),a=n(4),l={supportedEvents:{complete:"complete",backtostore:"backtostore",error:"error",openlink:"openlink",pageview:"pageview",focuschange:"focuschange",discount:"discount"},supportedPages:{checkout:"checkout",confirmpurchase:"confirmpurchase",proceedtopayment:"proceedtopayment",complete:"complete"},durableContainerProduct:{gta5:{Id:"durableBundle",CategoryMemberships:"Extras",NameKey:"DLCStarterPack_Title",DescKey:"DLCStarterPack_Desc",ImagePaths:[t.getBaseUrl()+"images/store/criminalEnterprise.png"],AllDurablesOneProduct:!0}},parseMaintenanceSupportText:function(e){return e?(((e=e.replace(/{{a href= *([a-zA-Z0-9:/.\-_=?]+)}}(.+?) *{{\/a}}/gi,'<a href="$1" class="RGSCLoadExt">$2</a>')).indexOf("{{")>0||e.indexOf("}}")>0)&&(e=""),e):e},getImageUrlData:function(e,n){var i=t.getStoreImageBaseUrl(e);if(i&&n&&i.length&&n.length){var a="/"===i.substr(-1),r=0===n.indexOf("/");a||r?a&&r&&(n=n.substr(1)):i+="/"}else i="",n=t.getBaseUrl()+"images/store/fallback.jpg";return{storeImageBaseUrl:i,imagePath:n,imageUrl:i+n}},hasAnyDurables:function(e){return Boolean(e&&e.length&&e.some((function(e){return!e.Consumable})))},hasAnyConsumables:function(e){return Boolean(e&&e.length&&e.some((function(e){return e.Consumable})))},addStoreMessageHandler:function(e){window.addEventListener("message",e,!1)},removeStoreMessageHandler:function(e){t.WriteDebugLog("removeStoreMessageHandler","","",t.logType.debug,t.logController.store),window.removeEventListener("message",e,!1)},postMessageToCommerceProvider:function(e,n,i){e&&"function"==typeof e.postMessage?"string"==typeof n?i?e.postMessage(i,n):t.WriteDebugLog("postMessage","error","no val",t.logType.error,t.logController.store):t.WriteDebugLog("postMessage","error","no targetOrigin",t.logType.error,t.logController.store):t.WriteDebugLog("postMessage","error","no targetWindow",t.logType.error,t.logController.store)},postUsersEmailAddressToDigtalRiver:function(e,t,n){var i={command:"useremail",email:n};return l.postMessageToCommerceProvider(e,t,i)},formatCurrencyCode:function(e){switch((0,s.default)(e)){case"string":return 3===e.length?e.toUpperCase():void 0;default:return}},parseEventData:function(e){var n=e.data;try{"string"==typeof n&&(n=JSON.parse(n))}catch(e){return void t.WriteDebugLog("processStoreEvents","event exception",e.toString(),t.logType.error,t.logController.store)}if(null!=n)return n;t.WriteDebugLog("processStoreEvents","Undefined event data","",t.logType.error,t.logController.store)},extractEventCommand:function(e){var n=e.command;if(a.has(l.supportedEvents,n))return n;t.WriteDebugLog("processStoreEvents","Unsupported event command","'"+n+"'",t.logType.error,t.logController.store)},checkProductData:function(e){for(var t=["productid","revenue","currency","transactionid"],n=!1,i=[],a=0,r=t.length;a<r;a++){var o=t[a];e[o]&&void 0!==e[o]||(n=!0,i.push(o))}return{missingData:n,missingDataList:i}},checkStoreAgeAppropriate:function(e){var n=void 0,a=void 0,s=!1,l="RGSC_GET_USER_STORE_AGE_APPROPRIATE_INFO";function c(){clearInterval(n),clearTimeout(a),n=void 0,a=void 0,i.clearAsyncFnInvocation(l)}function u(e){a||(a=setTimeout((function(){c(),e("ageCheckError")}),1e4))}var d=new Promise((function(e,t){n=setInterval((0,o.default)(r.default.mark((function n(){var a;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s){n.next=2;break}return n.abrupt("return");case 2:return u(t),s=!0,n.next=6,i.CallGameMethodAsync(l,null,l+"_DEMO");case 6:if(a=n.sent,s=!1,"string"==typeof(r=a)&&(r=JSON.parse(r)),!r.Valid){n.next=15;break}if(c(),!a.AgeAppropriate){n.next=13;break}return e(),n.abrupt("return");case 13:return t("age"),n.abrupt("return");case 15:case"end":return n.stop()}var r}),n)}))),500)}));return e?(d.then((function(){"function"==typeof e.ofAgeCallbkFn&&e.ofAgeCallbkFn()})).catch((function(n){"age"===n?"function"==typeof e.underAgeCallbkFn&&e.underAgeCallbkFn():"ageCheckError"===n?"function"==typeof e.errorCallbkFn&&e.errorCallbkFn():t.WriteDebugLog("storeUtils.checkStoreAgeAppropriate","error",JSON.stringify(n),t.logType.error,t.logController.store)})),d):d}};return l}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t={},i=n(1),a=n(8);return t.initLauncher=function(){return i.WriteDebugLog("initLauncher"),globals.isLauncher=!0,i.setReceiveMsgEnabled(!0),function(){try{var e=i.getCountryCode();"string"==typeof e&&a.launcherData("Geo",e)}catch(e){i.WriteDebugLog("geo","unable to locate","country")}try{var t=i.getIp();"string"==typeof t&&a.launcherData("ExternIP",t)}catch(e){i.WriteDebugLog("geo","unable to locate","ip")}}(),!0},t.processLauncherText=function(e){var t=e;try{t=decodeURI(e)}catch(t){i.WriteDebugLog("processLauncherText","decodeURI error",t.toString()+'"'+e+'"',i.logType.error,i.logController[i.getTitleName()])}return i.htmlEncode(t).replace(/(https?:\/\/[^\s]+)/g,(function(e){return'<a class="RGSCLoadExt" href="'+e+'">'+e+"</a>"})).replace(/\r\n/g,"<br>")},t.getButtonHtml=function(e,n,i,a){var r="";return null!=a&&a.length&&(r='id="'+a+'"'),'<a href="#" {3} class="btn btnLarge {0} btn1" data="{1}">{2}</a>'.format(e||"",i.toString()||"",t.processLauncherText(n||""),r)},t}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i={RGSC_JS_PING:function(){t.pubsub.publish("SDK.RGSC_JS_PING")},RGSC_JS_READY_TO_ACCEPT_COMMANDS:function(){t.pubsub.publish("SDK.RGSC_JS_READY_TO_ACCEPT_COMMANDS")},RGSC_JS_SIGN_IN:function(e){t.pubsub.publish("SDK.RGSC_JS_SIGN_IN",e)},RGSC_JS_FINISH_SIGN_IN:function(e){t.pubsub.publish("SDK.RGSC_JS_FINISH_SIGN_IN",e)},RGSC_JS_FINISH_SIGN_OUT:function(e){t.pubsub.publish("SDK.RGSC_JS_FINISH_SIGN_OUT",e)},RGSC_JS_SIGN_OUT:function(e){t.pubsub.publish("SDK.RGSC_JS_SIGN_OUT",e)},RGSC_JS_REQUEST_UI_STATE:function(e,n){t.pubsub.publish("SDK.RGSC_JS_REQUEST_UI_STATE",{request:e,noResponse:n})},RGSC_JS_UI_STATE_RESPONSE:function(e){t.pubsub.publish("SDK.RGSC_JS_UI_STATE_RESPONSE",e)},RGSC_JS_SET_CAPSLOCK_STATE:function(e){t.pubsub.publish("SDK.RGSC_JS_SET_CAPSLOCK_STATE",e)},RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED:function(e){t.pubsub.publish("SDK.RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED",e)},RGSC_JS_FINISH_MODIFY_PROFILE:function(e){t.pubsub.publish("SDK.RGSC_JS_FINISH_MODIFY_PROFILE",e)},RGSC_JS_RECEIVE_MESSAGE:function(e){t.pubsub.publish("SDK.RGSC_JS_RECEIVE_MESSAGE",e)},RGSC_JS_CHECKOUT_URL_REQUEST_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_CHECKOUT_URL_REQUEST_RESULT",e)},RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE:function(e){t.pubsub.publish("SDK.RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE",e)},RGSC_JS_SET_INPUT_METHOD:function(e){t.pubsub.publish("SDK.RGSC_JS_SET_INPUT_METHOD",e)},RGSC_JS_SHOW_VIRTUAL_KEYBOARD:function(){t.pubsub.publish("SDK.RGSC_JS_SHOW_VIRTUAL_KEYBOARD")},RGSC_JS_VIRTUAL_KEYBOARD_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_VIRTUAL_KEYBOARD_RESULT",e)},RGSC_JS_PRESENCE_MESSAGE_RECEIVED:function(e){t.pubsub.publish("SDK.RGSC_JS_PRESENCE_MESSAGE_RECEIVED",e)},RGSC_JS_REFRESH_STEAM_TICKET_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_REFRESH_STEAM_TICKET_RESULT",e)},RGSC_JS_INSTALL_PRODUCT_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_INSTALL_PRODUCT_RESULT",e)},RGSC_JS_IME_EVENT:function(e){t.pubsub.publish("SDK.RGSC_JS_IME_EVENT",e)},RGSC_JS_GET_AVATAR_URL:function(e){t.pubsub.publish("SDK.RGSC_JS_GET_AVATAR_URL",e)},RGSC_JS_GET_AVATAR_LAYOUT_URL:function(e){t.pubsub.publish("SDK.RGSC_JS_GET_AVATAR_LAYOUT_URL",e)},RGSC_JS_WINDOW_STATE_CHANGED:function(e){t.pubsub.publish("SDK.RGSC_JS_WINDOW_STATE_CHANGED",e)},RGSC_JS_SHUTDOWN:function(e){t.pubsub.publish("SDK.RGSC_JS_SHUTDOWN",e)},RGSC_JS_REQUEST_URL:function(e){t.pubsub.publish("SDK.RGSC_JS_REQUEST_URL",e)},RGSC_JS_HANDLE_CONTROLLER_INPUT:function(e){t.pubsub.publish("SDK.RGSC_JS_HANDLE_CONTROLLER_INPUT",e)},RGSC_JS_STEAM_INFO_CHANGED:function(e){t.pubsub.publish("SDK.RGSC_JS_STEAM_INFO_CHANGED",e)},RGSC_JS_COMMERCE_MANIFEST_REQUEST_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_COMMERCE_MANIFEST_REQUEST_RESULT",e)},RGSC_JS_ACTIVATION_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_ACTIVATION_RESULT",e)},RGSC_JS_LICENSE_EXPIRATION_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_LICENSE_EXPIRATION_RESULT",e)},RGSC_JS_LICENSE_RECOVERY_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_LICENSE_RECOVERY_RESULT",e)},RGSC_JS_REDEMPTION_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_REDEMPTION_RESULT",e)},RGSC_JS_VOUCHER_CONTENT_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_VOUCHER_CONTENT_RESULT",e)},RGSC_JS_VOUCHER_CONSUME_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_VOUCHER_CONSUME_RESULT",e)},RGSC_JS_NOTIFICATION:function(e){t.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",e)},RGSC_JS_REQUEST_AVATAR_URLS:function(e){t.pubsub.publish("SDK.RGSC_JS_REQUEST_AVATAR_URLS",e)},RGSC_JS_REFRESH_EPIC_ACCESS_TOKEN_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_REFRESH_EPIC_ACCESS_TOKEN_RESULT",e)},RGSC_JS_EPIC_INFO_CHANGED:function(e){t.pubsub.publish("SDK.RGSC_JS_EPIC_INFO_CHANGED",e)},RGSC_JS_REQUEST_SC_AUTH_TOKEN_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_REQUEST_SC_AUTH_TOKEN_RESULT",e)},init:function(){window.RGSC_JS_READY_TO_ACCEPT_COMMANDS=i.RGSC_JS_READY_TO_ACCEPT_COMMANDS,window.RGSC_JS_SIGN_IN=i.RGSC_JS_SIGN_IN,window.RGSC_JS_FINISH_SIGN_IN=i.RGSC_JS_FINISH_SIGN_IN,window.RGSC_JS_FINISH_SIGN_OUT=i.RGSC_JS_FINISH_SIGN_OUT,window.RGSC_JS_SIGN_OUT=i.RGSC_JS_SIGN_OUT,window.RGSC_JS_REQUEST_UI_STATE=i.RGSC_JS_REQUEST_UI_STATE,window.RGSC_JS_UI_STATE_RESPONSE=i.RGSC_JS_UI_STATE_RESPONSE,window.RGSC_JS_SET_CAPSLOCK_STATE=i.RGSC_JS_SET_CAPSLOCK_STATE,window.RGSC_JS_FINISH_MODIFY_PROFILE=i.RGSC_JS_FINISH_MODIFY_PROFILE,window.RGSC_JS_RECEIVE_MESSAGE=i.RGSC_JS_RECEIVE_MESSAGE,window.RGSC_JS_CHECKOUT_URL_REQUEST_RESULT=i.RGSC_JS_CHECKOUT_URL_REQUEST_RESULT,window.RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE=i.RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE,window.RGSC_JS_SET_INPUT_METHOD=i.RGSC_JS_SET_INPUT_METHOD,window.RGSC_JS_SHOW_VIRTUAL_KEYBOARD=i.RGSC_JS_SHOW_VIRTUAL_KEYBOARD,window.RGSC_JS_PRESENCE_MESSAGE_RECEIVED=i.RGSC_JS_PRESENCE_MESSAGE_RECEIVED,window.RGSC_JS_VIRTUAL_KEYBOARD_RESULT=i.RGSC_JS_VIRTUAL_KEYBOARD_RESULT,window.RGSC_JS_REFRESH_STEAM_TICKET_RESULT=i.RGSC_JS_REFRESH_STEAM_TICKET_RESULT,window.RGSC_JS_INSTALL_PRODUCT_RESULT=i.RGSC_JS_INSTALL_PRODUCT_RESULT,window.RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED=i.RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED,window.RGSC_JS_IME_EVENT=i.RGSC_JS_IME_EVENT,window.RGSC_JS_GET_AVATAR_URL=i.RGSC_JS_GET_AVATAR_URL,window.RGSC_JS_GET_AVATAR_LAYOUT_URL=i.RGSC_JS_GET_AVATAR_LAYOUT_URL,window.RGSC_JS_WINDOW_STATE_CHANGED=i.RGSC_JS_WINDOW_STATE_CHANGED,window.RGSC_JS_SHUTDOWN=i.RGSC_JS_SHUTDOWN,window.RGSC_JS_REQUEST_URL=i.RGSC_JS_REQUEST_URL,window.RGSC_JS_HANDLE_CONTROLLER_INPUT=i.RGSC_JS_HANDLE_CONTROLLER_INPUT,window.RGSC_JS_STEAM_INFO_CHANGED=i.RGSC_JS_STEAM_INFO_CHANGED,window.RGSC_JS_COMMERCE_MANIFEST_REQUEST_RESULT=i.RGSC_JS_COMMERCE_MANIFEST_REQUEST_RESULT,window.RGSC_JS_ACTIVATION_RESULT=i.RGSC_JS_ACTIVATION_RESULT,window.RGSC_JS_LICENSE_EXPIRATION_RESULT=i.RGSC_JS_LICENSE_EXPIRATION_RESULT,window.RGSC_JS_LICENSE_RECOVERY_RESULT=i.RGSC_JS_LICENSE_RECOVERY_RESULT,window.RGSC_JS_REDEMPTION_RESULT=i.RGSC_JS_REDEMPTION_RESULT,window.RGSC_JS_VOUCHER_CONTENT_RESULT=i.RGSC_JS_VOUCHER_CONTENT_RESULT,window.RGSC_JS_VOUCHER_CONSUME_RESULT=i.RGSC_JS_VOUCHER_CONSUME_RESULT,window.RGSC_JS_NOTIFICATION=i.RGSC_JS_NOTIFICATION,window.RGSC_JS_REQUEST_AVATAR_URLS=i.RGSC_JS_REQUEST_AVATAR_URLS,window.RGSC_JS_REFRESH_EPIC_ACCESS_TOKEN_RESULT=i.RGSC_JS_REFRESH_EPIC_ACCESS_TOKEN_RESULT,window.RGSC_JS_EPIC_INFO_CHANGED=i.RGSC_JS_EPIC_INFO_CHANGED,window.RGSC_JS_REQUEST_SC_AUTH_TOKEN_RESULT=i.RGSC_JS_REQUEST_SC_AUTH_TOKEN_RESULT,null!=globals.awaitingJsLoad&&globals.awaitingJsLoad&&(globals.awaitingJsLoad=!1,i.RGSC_JS_READY_TO_ACCEPT_COMMANDS()),window.RGSC_JS_PING=i.RGSC_JS_PING}};return i.init(),i}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(1),a={};return a.showPrivacyChangeTick=function(e){e.parent().find(".privacyChangeAlert").addClass("scicon-tick").fadeIn()},a.processUpdateSetting=function(e,n,a){e.then((function(e){!function(e,n,i){var a;if(n&&"default"!==n)a="true";else{if(void 0===e)return;a=t(e).find("Status").text()}"true"===a&&(i.parent().children("a").removeClass("selected"),i.addClass("selected"));t("#checkName").fadeOut()}(e,n,a)})).catch((function(e){i.WriteDebugLog("settingsDomUtils.processUpdateSetting","Error",e)})).then((function(){!function(e){e.removeData("updating");var t=e.parent().find(".privacyChangeAlert");t.fadeOut("slow",(function(){t.removeClass("confirm"),e=null}))}(a)}))},a.getSettingsValue=function(e){switch(e.toLowerCase()){case"sc":return t("#togglePrivacyProfile a.selected input").val();case"profile_location":return t("#togglePrivacyCountry a.selected input").val();case"gameplay_visibility":return t("#togglePrivacyStats a.selected input").val();case"presencevisibility":return t("#togglePresenceVisibility a.selected input").val();case"radiocloudsave":return t("#toggleCloudSave a.selected input").val();case"radiohidenotifications":return t("#toggleHideNotifications a.selected input").val();case"radioautosignin":return t("#toggleAutoSignIn a.selected input").val();default:return t("#"+e+" a.selected input").val()}},a}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i,a;i=[n(0),n(16),n(4),n(6),n(8),n(1),n(7),n(15),n(10),n(72),n(73),n(12),n(11),n(65),n(18),n(75),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c,u,d,f,p,h,g,m,v,b,C,S,y,E,w,k,_){var T={};return T.ProfileView=t.View.extend({el:"#friendProfilePanel ul.nav",events:{"click a":"navigate"},navigate:function(t){t.preventDefault(),this.model.set("Active",e(t.currentTarget).data("nav"))},render:function(){var e=null!=globals.account&&this.model.get("RockstarId")==globals.account.RockstarId,t=this.model.get("MutualFriendCount"),n="";null!=t&&t>0&&(n=o.getTextCached("Mutual","Social").format(t)),this.model.set({IsMe:e,MutualText:n},{silent:!0});var i=r.renderCompiledTemplate(E,this.model.toJSON());switch(this.$el.html(i),this.profileFriendsView.$el.hide(),this.profileCrewsView.$el.hide(),this.profileAccountsView.$el.hide(),this.model.get("Active")){case"friends":this.profileFriendsView.$el.show();break;case"crews":this.profileCrewsView.$el.show();break;case"accounts":this.profileAccountsView.$el.show()}return this.postRender(),this},renderAll:function(){return void 0!==this.hiddenProfileView&&this.hiddenProfileView.close(),this.render(),this.profileCardView.render(),this.profileGamesView.render(),this.profileCrewsView.render(),this.profileAccountsView.render(),this.postRender(),this},postRender:function(){"en-US"!=globals.titlelang&&(e("#friendProfilePanel [rel*=localize]:not(.localized)").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}).addClass("localized"),e("#friendProfilePanel").addClass("friendProfilePanel")),e("#headerLoginUser").removeClass("disabled"),e("#userCrews").data("antiscroll").refresh(),e("#userAccounts").data("antiscroll").refresh(),e("#userFriends").data("antiscroll").refresh(),this.$("img.avatar").on("error",i.avatarImage404)},onClose:function(){void 0!==this.hiddenProfileView&&this.hiddenProfileView.close(),this.profileCardView.close(),this.profileFriendsView.close(),this.profileCrewsView.close(),this.profileAccountsView.close()},reinitialize:function(e){var t=e.profileData;if(t.RockstarAccount.ProfileHidden)this.hiddenProfileView?this.hiddenProfileView.model.clear().set(t.RockstarAccount):(this.hiddenProfileView=new T.HiddenProfileView({model:new c.ProfileCard(t.RockstarAccount)}),this.hiddenProfileView.render());else{this.profileCardView?this.profileCardView.model.clear().set(t.RockstarAccount):this.profileCardView=new T.ProfileCardView({model:new c.ProfileCard(t.RockstarAccount)});var n=t.RockstarAccount.GamesOwned;if(void 0!==n&&(1===n.length&&n.push({Name:"default"}),n.length>1)){var i=n[0];n[0]=n[1],n[1]=i}this.profileGamesView?this.profileGamesView.collection.reset(n):this.profileGamesView=new T.ProfileGamesView({collection:new c.GameCollection(n)}),this.profileFriendsView?(this.profileFriendsView.collection.reset(t.Friends),this.profileFriendsView.model.clear().set(t.RockstarAccount)):this.profileFriendsView=new T.ProfileFriendsView({collection:new c.FriendCollection(t.Friends),model:new c.ProfileCard(t.RockstarAccount),el:"#userFriends .box .antiscroll-inner",activePanel:"friendProfilePanel"});var r=this;a.GetAuthHeaderAsync().then((function(){r.profileCrewsView?r.profileCrewsView.collection.reset(t.Crews):r.profileCrewsView=new T.ProfileCrewsView({collection:new c.CrewCollection(t.Crews)}),r.profileAccountsView?r.profileAccountsView.collection.reset(t.LinkedAccounts):r.profileAccountsView=new T.ProfileAccountsView({collection:new c.AccountCollection(t.LinkedAccounts)}),r.model?r.model.set({Active:"crews",MutualFriendCount:t.RockstarAccount.MutualFriendCount,RockstarId:t.RockstarAccount.RockstarId}):(r.model=new c.ProfileNav({Active:"crews",MutualFriendCount:t.RockstarAccount.MutualFriendCount,RockstarId:t.RockstarAccount.RockstarId}),r.model.on("change",r.render)),r.renderAll()}))}},initialize:function(e){n.bindAll(this,"render","renderAll","onClose","navigate","postRender"),this.reinitialize(e)}}),T.HiddenProfileView=t.View.extend({el:"#profileHidden",events:{"click .playerActions":"togglePlayerActions"},render:function(){void 0!==this.userActionsView&&(this.userActionsView.close(),this.userActionsView=void 0),e("#user").hide();var t=h.getAvatarUrl(this.model.get("AvatarUrl"),this.model.get("DisplayName"),128);if(this.model.set("AvatarUrl",t),null!=this.model.get("DisplayName")&&""!=this.model.get("DisplayName")){var n=o.getTextCached("ProfileNotAvailableDesc","Social");n=n.replace("[Nickname]",this.model.get("DisplayName")),this.model.set({Message:n,ProfileFound:!0},{silent:!0})}else this.model.set({ProfileFound:!1},{silent:!0});var a=globals.messagingServiceEnabled;this.model.set({ShowMessage:a,ShowActions:i.isMultiPlayerSupported()},{silent:!0});var s=r.renderCompiledTemplate(w,this.model.toJSON());this.$el.html(s),this.$el.find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.addClass("localized"),this.$el.show(),l.removeLoading("friendProfilePanel"),this.$(".avatar").on("error",i.avatar404)},togglePlayerActions:function(){if(i.isMultiPlayerSupported())if(this.$el.find(".buttons").is(":hidden"))if(void 0===this.userActionsView){var e=new Backbone.Model(n.pick(this.model.toJSON(),"AllowBlock","Relationship","RockstarId","ShowMessage","ViewerRelationship","DisplayName","AvatarUrl","IsOnline","AllowReport"));e.set({hideAfterClick:!0},{silent:!0}),this.userActionsView=new T.UserActionsView({model:e,el:"#profileHidden .buttons"}),this.userActionsView.render()}else this.userActionsView.showButtons();else this.userActionsView.hideButtons()},close:function(){e("#user").show(),this.$el.hide(),void 0!==this.userActionsView&&this.userActionsView.close()},initialize:function(){n.bindAll(this,"render","togglePlayerActions"),this.model.on("change",this.render)}}),T.ProfileCardView=t.View.extend({el:"#cardInfoVitals",events:{"click .playerActions":"togglePlayerActions"},render:function(){void 0!==this.userActionsView&&(this.userActionsView.close(),this.userActionsView=void 0);var e=h.getAvatarUrl(this.model.get("AvatarUrl"),this.model.get("DisplayName"));this.model.set("AvatarUrl",e);var t=i.localizedDate(this.model.get("CreatedDate"),"LL");this.model.set({CreatedDateStr:t},{silent:!0});var n=null!=globals.account&&this.model.get("RockstarId")==globals.account.RockstarId;this.model.set({IsMe:n},{silent:!0});var a=globals.messagingServiceEnabled;this.model.set({ShowMessage:a},{silent:!0}),this.setOnlineStatus();var s=o.getTextCached(this.model.get("Relationship")+"_relDesc","Social");this.model.set({RelationshipDesc:s},{silent:!0}),this.model.set({ShowActions:i.isMultiPlayerSupported()},{silent:!0});var c=r.renderCompiledTemplate(v,this.model.toJSON());return this.$el.html(c),l.removeLoading("friendProfilePanel"),this.$el.find("[rel*=localize]:not(.localized)").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.attr("data-id",this.model.get("RockstarId")),this.$(".avatar").on("error",i.avatar404),this},togglePlayerActions:function(){if(i.isMultiPlayerSupported())if(this.$el.find(".buttons").is(":hidden"))if(void 0===this.userActionsView){var e=new Backbone.Model(n.pick(this.model.toJSON(),"AllowBlock","Relationship","RockstarId","ShowMessage","ViewerRelationship","DisplayName","AvatarUrl","IsOnline","AllowReport"));e.set({checkMultiplayer:!this.model.get("IsMe"),hideAfterClick:!0},{silent:!0}),this.userActionsView=new T.UserActionsView({model:e,el:"#cardInfoVitals .buttons"}),this.userActionsView.render()}else this.userActionsView.showButtons();else this.userActionsView.hideButtons()},setOnlineStatus:function(){var e=this.model.get("IsOnline"),t=r.getOnlineTitle(e,this.model.get("OnlineGames")),n=e?t.game:null,i=e?t.platform:null,a=o.getTextCached("PlayingGameOn","Social","Playing {0} on {1}"),s=e?a.format(n,i):o.getTextCached("Offline","Social"),l=e?"SCOnline":"SCOffline";this.model.set({PlayingGame:s,StatusClass:l},{silent:!0})},onClose:function(){void 0!==this.userActionsView&&this.userActionsView.onClose(),i.pubsub.off("profile:RenderGameJoinInviteButtons")},initialize:function(){n.bindAll(this,"render","togglePlayerActions","onClose","setOnlineStatus"),this.model.on("change",this.render)}}),T.ProfileGamesView=t.View.extend({el:"#gamesPanel",events:{},render:function(){var e=r.renderCompiledTemplate(y,{games:this.collection.toJSON(),cdnUrl:globals.baseUrl});return this.$el.html(e),this.$("#gamesFlip").fadeIn(),this},initialize:function(){n.bindAll(this,"render"),this.collection.on("reset",this.render)}}),T.ProfileFriendView=t.View.extend({events:{"click .optionProfile":"viewProfile"},render:function(){var e=h.getAvatarUrl(this.model.get("AvatarUrl"),this.model.get("DisplayName"));this.model.set("AvatarUrl",e),this.model.get("Relationship")||this.model.set("Relationship","Friend");var t="crewMember"===this.model.get("cardType")?_:C,n=r.renderCompiledTemplate(t,this.model.toJSON());return this.$el.html(n),this.$el.addClass("profileButtonWrapper"),this.$(".avatarImg").on("error",i.avatar404),this},renderButtons:function(){if(!(void 0!==globals.account&&this.model.get("RockstarId")===globals.account.RockstarId)&&i.isMultiPlayerSupported()){var e=new Backbone.Model(n.pick(this.model.toJSON(),"AllowBlock","Relationship","RockstarId","ShowMessage","ViewerRelationship","DisplayName","AvatarUrl","activePanel"));e.set({hideAfterClick:!1},{silent:!0}),this.userActionsView=new T.UserActionsView({model:e,el:this.$el.find("#profileButton_"+this.model.get("RockstarId")+" .playerOptions")}),this.userActionsView.render()}},viewProfile:function(e){e.preventDefault(),i.pubsub.trigger("datafnfriends:friendProfileView",this.model.get("RockstarId"))},onClose:function(){this.model.off(),void 0!==this.userActionsView&&this.userActionsView.close()},initialize:function(){n.bindAll(this,"render","viewProfile","onClose","renderButtons"),this.model.parse(this.model)}}),T.ProfileFriendsView=t.View.extend({events:{},add:function(e){e.set({activePanel:this.collection.activePanel},{silent:!0});var t=new T.ProfileFriendView({tagName:"div",model:e});this._friendViews.push(t),this._rendered&&(this.$el.append(t.render().el),t.renderButtons())},reset:function(){this.closeAll(),this._rendered=!1,this._friendViews=[],this.collection.each(this.add),this.render(),l.resetScrollbar("#userFriends")},closeAll:function(){n.each(this._friendViews,(function(e){e.close()}))},render:function(){this._rendered=!0,this.$el.empty();var e=this;if(n.each(this._friendViews,(function(t){e.$el.append(t.render().el),t.renderButtons()})),0===this.collection.length){var t=r.renderCompiledTemplate(S,this.model.toJSON());this.$el.html(t)}return this.$el.show(),this},initialize:function(e){n.bindAll(this,"render","add","closeAll","reset"),n.extend(this.collection,{activePanel:e.activePanel}),this._friendViews=[],this.collection.on("reset",this.reset),this.collection.on("add",this.add),this.reset()}}),T.ProfileCrewView=t.View.extend({events:{},render:function(){var e=r.renderCompiledTemplate(g,this.model.toJSON());return this.$el.html(e),this.$(".crewCard img").on("error",i.crewImage404),this},initialize:function(){n.bindAll(this,"render"),this.model.on("change",this.render)}}),T.ProfileCrewsView=t.View.extend({el:"#userCrews .box .antiscroll-inner",events:{},add:function(e){var t=new T.ProfileCrewView({tagName:"div",model:e});this._crewViews.push(t),this._rendered&&this.$el.prepend(t.render().el)},reset:function(){this.closeAll(),this._rendered=!1,this._crewViews=[],this.collection.each(this.add),this.render(),l.resetScrollbar("#userCrews")},closeAll:function(){n.each(this._crewViews,(function(e){e.close()}))},render:function(){this._rendered=!0,this.$el.empty();var t=this;if(n.each(this._crewViews,(function(e){t.$el.append(e.render().el)})),0===this.collection.length){var i=r.renderCompiledTemplate(b);this.$el.html(i)}return"en-US"!=globals.titlelang&&e("#userCrews [rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this},initialize:function(){n.bindAll(this,"render","add","closeAll","reset"),this.collection.on("reset",this.reset),this.reset()}}),T.ProfileAccountsView=t.View.extend({el:"#userAccounts .box .antiscroll-inner",events:{},render:function(){var t=r.renderCompiledTemplate(m,this.collection.toJSON());return this.$el.html(t),"en-US"!=globals.titlelang&&e("#userAccounts [rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),l.resetScrollbar("#userAccounts"),this},initialize:function(){n.bindAll(this,"render"),this.collection.on("reset",this.render)}}),T.UserActionsView=t.View.extend({events:{"click .message":"sendMessage","click .acceptInvite":"acceptFriendInvite","click .declineInvite":"declineFriendInvite","click .unfriend":"removeFriend","click .cancelInvite":"cancelInvite","click .addFriend":"addFriend","click .unblock":"unblock","click .block":"blockPlayerConfirm","click .sendJoinGame a":"sendJoinGame","click .sendGameInvite a":"sendGameInvite","click .report a":"reportProfile"},render:function(){var e=null!=globals.account&&this.model.get("RockstarId")==globals.account.RockstarId;if(this.checkMultiplayerPresence()){var t=[this.model.get("RockstarId")];s.requestMultiplayerPresenceInfo(t)}var n=this.model.get("ViewerRelationship");n||(n=this.model.get("Relationship"));var i=!1,a=!1,o=!1,l=!1,c=!1,u=!1,d=!0,f=!1,p="";if(e)d=!1;else{this.$el.parents(".profileButton").length&&(p="tooltip"),1!==n&&"None"!=n||(i=!0),32!==n&&"Friend"!=n||(a=!0),8!==n&&"InvitedByMe"!=n||(o=!0),16!==n&&"InvitedByThem"!=n||(c=!0,u=!0),2!==n&&"BlockedByMe"!=n||(l=!0,d=!1),globals.messagingServiceEnabled||(d=!1),2!==n&&"BlockedByMe"!==n&&(f=!0);var h=this.model.get("AllowReport")}this.model.set({ShowAddFriend:i,ShowRemoveFriend:a,ShowMessage:d,ShowCancelnvite:o,ShowUnBlock:l,ShowAcceptInvite:c,ShowDeclineInvite:u,ShowBlock:f,AnchorClass:p,ShowReport:h},{silent:!0});var g=r.renderCompiledTemplate(k,this.model.toJSON());return this.$el.html(g),"en-US"!=globals.titlelang&&this.$("[rel*=localize]:not(.localized)").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.show(),this},showButtons:function(){this.$el.show()},hideButtons:function(){this.model.get("hideAfterClick")&&this.$el.hide()},updateFriendRelationship:function(e){switch(i.WriteDebugLog("UserActionsView.updateFriendRelationship","data.Relationship",e.Relationship),e.Relationship){case 0:this.model.set({ViewerRelationship:"None",Relationship:"None"});break;case 4:this.model.set({ViewerRelationship:"InvitedByMe",Relationship:"InvitedByMe"});break;case 6:this.model.set({ViewerRelationship:"Friend",Relationship:"Friend"});break;case 2:this.model.set({ViewerRelationship:"BlockedByMe",Relationship:"BlockedByMe"})}},acceptFriendInvite:function(e){e.preventDefault(),this.hideButtons(),i.pubsub.trigger("datafnfriends:SendFriendAccept",this.model.get("RockstarId"))},declineFriendInvite:function(e){e&&e.preventDefault(),this.hideButtons();var t=o.getTextCached("DeclineInviteFrom","Social");return d.ShowConfirmModal(t,this.model.get("DisplayName"),"datafnfriends:SendFriendDeclineInvite",this.model.get("RockstarId")),!1},addFriend:function(t){t.preventDefault(),this.hideButtons();var n=e(t.currentTarget);return n.hasClass("disabled")||(n.addClass("disabled"),i.pubsub.trigger("datafnfriends:SendFriendRequest",this.model.get("RockstarId"))),!1},cancelInvite:function(e){e.preventDefault(),this.hideButtons(),i.pubsub.trigger("datafnfriends:SendInviteCancel",this.model.get("RockstarId"))},removeFriend:function(e){e.preventDefault(),this.hideButtons();var t=o.getTextCached("RemoveFriendName","Social");d.ShowConfirmModal(t,this.model.get("DisplayName"),"datafnfriends:SendFriendRemove",this.model.get("RockstarId"))},sendMessage:function(t){t.preventDefault(),this.hideButtons();var n=e(".panel.active").attr("id");"BlockedByMe"==this.model.get("ViewerRelationship")||2==this.model.get("ViewerRelationship")?i.pubsub.trigger("datafnfriends:RedirectToBlockList",this.model.get("DisplayName")):i.pubsub.trigger("msg.openNewMessage",this.model.get("RockstarId"),this.model.get("AvatarUrl"),this.model.get("DisplayName"),n)},unblock:function(e){e&&e.preventDefault(),i.WriteDebugLog("unblock","Nickname",this.model.get("DisplayName")),this.hideButtons();var t=o.getTextCached("UnblockPlayer","Social");return d.ShowConfirmModal(t,this.model.get("DisplayName"),"datafnfriends:SendFriendUnblock",this.model.get("RockstarId")),!1},blockPlayerConfirm:function(e){e.preventDefault(),this.hideButtons();var t=o.getTextCached("BlockUserText","Social"),n=o.getTextCached("BlockUserTitle","Social");d.ShowConfirmModal(t,null,"userActions:BlockPlayerConfirmAgain_"+this.model.get("RockstarId"),n,"Block","DontBlock",n,null)},blockPlayerConfirmAgain:function(e){var t=o.getTextCached("BlockUserConfirmText","Social");d.ShowConfirmModal(t,null,"userActions:BlockPlayer_"+this.model.get("RockstarId"),null,"Yes","No",e,null)},blockPlayer:function(){(new c.BlockPlayerModel).block(this.model.get("RockstarId"),this.blockPlayerSuccess,d.ShowErrorModal)},blockPlayerSuccess:function(){var e,t=o.getTextCached("BlockSuccess","Social");if(t=t.replace("[Nickname]",this.model.get("DisplayName")),d.ShowConfirmModal(t,null,null,null,"Ok",null,null,null),void 0!==(e="friendProfilePanel"===this.model.get("activePanel")?"friendProfile":i.ActiveFriendsMenuId())){var n=this.model.get("RockstarId");switch(e){case"findPlayerLink":case"crewMembersLink":case"friendProfile":i.pubsub.trigger("gameFnFriends:UpdateFriendStatus_"+n,{RockstarId:n,Relationship:2});break;case"myFriendsLink":case"friendInvitesLink":this.removePlayerCard(e);default:i.pubsub.trigger("gameFnFriends:UpdateFriendStatus_"+n,{RockstarId:n,Relationship:2})}}},reportProfile:function(e){e.preventDefault();var t=this.model.get("DisplayName");p.reportProfile(t)},removePlayerCard:function(t){var n,i,a,o;this.$el.parents(".profileButtonWrapper").remove(),"myFriendsLink"===t?(n="#myFriendsLink",i="friendFn.showNoFriends",a=e("#friendsList"),o=!0):(n="#friendInvitesLink",i="friendFn.showNoFriendInvites",a=e("#friendInvitesList"),o=!1),0===l.UpdateSocialSideMenuCount("subtract",n,o)&&r.pubsub.publish(i,a)},sendGameInvite:function(e){e.preventDefault(),this.hideButtons(),i.pubsub.trigger("datafnfriends:SendGameInvite",this.model.get("RockstarId"))},sendJoinGame:function(e){e.preventDefault(),this.hideButtons(),i.pubsub.trigger("datafnfriends:SendJoinGame",this.model.get("RockstarId"))},acceptFriend:function(e){e.preventDefault(),this.hideButtons(),i.pubsub.trigger("datafnfriends:SendFriendAccept",this.model.get("RockstarId"))},checkMultiplayerPresence:function(){return this.model.get("IsOnline")&&this.model.get("checkMultiplayer")},setGameButtonVisibility:function(e){var t=e.Players[0],n=t.CanSendGameInvite,i=t.CanJoinGame;(n||i)&&this.renderGameButtons(n,i)},renderGameButtons:function(e,t){var n='<li class="sendGameInvite"><a href="#"><span>'+o.getTextCached("InviteToGame","Social")+"</span></a></li>",i='<li class="sendJoinGame"><a href="#"><span>'+o.getTextCached("JoinGame","Social")+"</span></a></li>",a="";e&&(a=n),t&&(a+=i),this.$el.append(a)},onClose:function(){i.pubsub.off("userActions:BlockPlayerConfirmAgain_"+this.model.get("RockstarId")),i.pubsub.off("userActions:BlockPlayer_"+this.model.get("RockstarId")),i.pubsub.off("gameFnFriends:UpdateFriendStatus_"+this.model.get("RockstarId")),i.pubsub.off("profile:SetGameButtonVisibility_"+this.model.get("RockstarId")),this.model.off(),this.$el.hide()},initialize:function(){n.bindAll(this,"render","acceptFriendInvite","declineFriendInvite","addFriend","cancelInvite","removeFriend","sendMessage","unblock","blockPlayerConfirm","blockPlayerConfirmAgain","blockPlayer","blockPlayerSuccess","removePlayerCard","updateFriendRelationship","onClose","showButtons","hideButtons","checkMultiplayerPresence","setGameButtonVisibility","renderGameButtons"),this.model.on("change",this.render),i.pubsub.on("userActions:BlockPlayerConfirmAgain_"+this.model.get("RockstarId"),this.blockPlayerConfirmAgain),i.pubsub.on("userActions:BlockPlayer_"+this.model.get("RockstarId"),this.blockPlayer),i.pubsub.on("gameFnFriends:UpdateFriendStatus_"+this.model.get("RockstarId"),this.updateFriendRelationship),i.pubsub.on("profile:SetGameButtonVisibility_"+this.model.get("RockstarId"),this.setGameButtonVisibility)}}),T}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i,a,r=n(3),o=r(n(70)),s=r(n(71));i=[n(0),n(16),n(4),n(194),n(54),n(6),n(1),n(7),n(8),n(15),n(10),n(22),n(12),n(36),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(43),n(19)],void 0===(a=function(e,t,n,i,a,r,l,c,u,d,f,p,h,g,m,v,b,C,S,y,E,w,k,_,T,I,A){var R={},P=[];void 0===window.globals&&(window.globals={});var x,L,N,D=window.globals,M=6,O={};return n.extend(O,Backbone.Events),R.showCommerce=function(t){if(r.WriteDebugLog("showCommerce","url",t),f.isOnline()&&p.isDobMissing())p.showDOBPrompt();else{f.hideHeaderMenu();var n=e("#storePanel");n.show().find("#storeFrame").unbind("load").load((function(){var t=e(this).attr("src");r.WriteDebugLog("showCommerce","frmSrc.length, loaded url",t.length+","+t),e(this).hasClass("loaded")?(e(this).removeClass("loaded"),f.removeLoading("storePanel"),e("#scuiPanelInstruction").removeAttr("style class").addClass("store2").fadeIn("slow")):t.length>0&&(e(this).addClass("loaded"),setTimeout((function(){f.removeLoading("storePanel")}),1e4))}));var i=n.position();null==t||null==t||!n.hasClass("active")||!n.find("div.loadingMask").is(":visible")||i.top<0?(f.setUpLoadingPanel("#storePanel",(function(){e("#storeFrame").removeClass("loaded").attr("src",t)})),e("#scuiPanelInstruction").addClass("store").delay(1e3).fadeIn("slow")):e("#storeFrame").attr("src",t)}},R.showCommerceV2=function(t){if(!D.isLauncher)if(r.WriteDebugLog("showCommerceV2","url",t),f.isSignedIn())if(f.isOnline()&&p.isDobMissing())p.showDOBPrompt();else{var n=e("#storeButton");f.setSelected(n),f.clearActivePanel((function(){f.setUpLoadingPanel("#storev2Panel");var e=n.data("productId"),t=n.data("category");null==window.amd.store.StoreView?window.amd.store.StoreView=new R.StoreView({productId:e,category:t}):window.amd.store.StoreView.reInitialize({productId:e,category:t})}))}else p.navigatePendingSignIn(R.showCommerceV2)},R.clearAutoSearch=function(){e("#storeButton").removeData()},R.setAutoSearch=function(t,n){e("#storeButton").data(t,n)},R.setAutoSearchProduct=function(e){R.setAutoSearch("productId",e)},R.setAutoSearchCategory=function(e){R.setAutoSearch("category",e)},R.StoreView=t.View.extend({el:"#storev2Panel .contentWrapper #storeCatalog",events:{"click #redeemSerialKey":"redeemVoucher","keypress #redeemSerialKey":"redeemVoucherKeypress","click #searchSubmit":"search","change #category":"search"},render:function(){if(this.renderContainer(),this.renderOptions(),this.model.get("isMaintenanceMode"))this.renderMaintenanceView();else{if(this.model.get("underAge"))return this.renderUnderAgeError(),this;if(!this.model.get("storeAvailable"))return void 0===this.model.get("storeAvailable")?(this.reInitialize(),this):(this.renderStoreUnavailable(),this);this.renderCategories(),this.filter()}if(this.$el.parent().find(".loadingMask").hide(),this.$el.show(),f.setupTextInputGameNotifications(this.$("input:text, input:password, textarea")),this.model.get("isMaintenanceMode"))return this;var e=this,t=n.debounce((function(){e.addProductImpressions(!1)}),500);return this.$("#products .antiscroll-inner").scroll(t),this},renderContainer:function(){var e=l.renderCompiledTemplate(y);this.$el.html(e)},renderOptions:function(){var e=l.renderCompiledTemplate(E);this.$("#storeHeader").find(".clearfix").append(e),"en-US"!==D.titlelang&&this.$("#storeHeader").find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"})},renderUnderAgeError:function(){e("#storeButton").hide(),this.$(".options").remove(),this.$(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide();var t=l.renderCompiledTemplate(S);this.$("#products").find(".box .antiscroll-inner").html(t),"en-US"!==D.titlelang&&this.$("#products").find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),this.$el.parent().find(".loadingMask").hide(),this.$el.show()},renderCategories:function(){var e=this.$("select#category");if(null!=this.model.get("categories")){var t="";this.model.get("categories").each((function(e){t+="<option value='"+r.toLower(e.get("Id"))+"' rel=\"localize["+e.get("Id")+']">'+e.get("Name")+"</option>"})),e.prepend(t),e.find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),e.dropkick()}},renderStoreUnavailable:function(){var e=this.model.get("errorCode")||r.errorCode("7000"),t=c.getErrorWithCode(e,"");f.showGenericFatalError(e,t.Message,t.SupportText,t.CodeDescription),this.onClose()},renderMaintenanceView:function(){var e=l.renderCompiledTemplate(A);this.$("#products").find(".antiscroll-inner").append(e);var t="";D.cmm&&D.cmm[D.titlelang]&&(t=a.parseMaintenanceSupportText(D.cmm[D.titlelang]));var n=r.errorCode("1002.24"),i=c.getErrorWithCode(n,""),o=c.getError("FeatureDisabled"),s=i.Message;t&&t.length&&(o=" ",s=" ");var u={errorCode:n,message:s,codeDesc:i.CodeDescription,title:c.getError("Maintenance"),subtitle:o,supportText:t};f.initErrorText(this.$el,u)},removeProducts:function(){n.each(window.amd.store.ProductViews,(function(e){e.close()})),null!=window.amd.store.EmptyProductView&&window.amd.store.EmptyProductView.close(),window.amd.store.ProductViews=[],window.amd.store.EmptyProductView=void 0},renderProducts:function(r){if(this.removeProducts(),r.length<M&&(M=r.length),0===r.length){var o=new t.Model({singleProductView:this.model.get("singleProductView")}),s=new R.ProductView({model:o,id:"no_products"});return s.renderEmpty(),window.amd.store.EmptyProductView=s,void this.$("#products").find(".antiscroll-inner").append(s.$el)}this.model.get("productCount")>M&&e("#storeFilter").show();var u=this,d=r.where({Consumable:!1}),f=d&&d.length>0;f?c.getTextAsync(a.durableContainerProduct.gta5.NameKey,"Store").then((function(){var e=void 0!==n.findWhere(d,{Purchased:!0}),t=void 0!==n.findWhere(d,{Installed:!0}),o=u.generatePriceString(d),s=new i.Product({Consumable:!1,Purchased:e,Installed:t,PriceString:o,HasPriceString:l.stringHasContent(o),Durables:new i.ProductCollection(d),Id:a.durableContainerProduct.gta5.Id,CategoryMemberships:a.durableContainerProduct.gta5.CategoryMemberships,Name:c.getTextCached(a.durableContainerProduct.gta5.NameKey,"Store"),Desc:c.getTextCached(a.durableContainerProduct.gta5.DescKey,"Store"),ImagePaths:a.durableContainerProduct.gta5.ImagePaths},{parse:!0}),p=new R.ProductView({model:s,id:"product_"+s.id});window.amd.store.ProductViews.push(p),p.render(),u.$("#products").find(".dlc-container").html(p.$el);var h=r.where({Consumable:!0});n.each(h,(function(e){e.set({IsDurableMode:!0},{silent:!0});var t=new R.ProductView({model:e,id:"product_"+e.id});window.amd.store.ProductViews.push(t),t.render(),u.$("#products").find(".cards").append(t.$el)})),u.applyLocalization(),u.addProductImpressions(f),g.productListRendered()})):(r.each((function(e){e.set({IsDurableMode:!1},{silent:!0});var t=new R.ProductView({model:e,id:"product_"+e.id});window.amd.store.ProductViews.push(t),t.render(),u.$("#products").find(".antiscroll-inner").append(t.$el)})),this.$("#products").find(".antiscroll-wrap").antiscroll(),this.applyLocalization(),this.addProductImpressions(f),g.productListRendered())},applyLocalization:function(){"en-US"!==D.titlelang&&this.$("#products").find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"})},generatePriceString:function(e){var t,i=n.min(e,(function(e){return e.get("Price")})),a=n.max(e,(function(e){return e.get("Price")}));return(t=i.get("PriceString")===a.get("PriceString")?i.get("PriceString"):i.get("PriceString")+" - "+a.get("PriceString")).length>24&&(t=void 0),t},addProductImpressions:function(e){var t=this,n=e?t.$("#products .products-split .cards"):t.$("#products .antiscroll-inner"),i=n.find("div.product"),r=t.$("#searchInput").val().length>0,o=[];if(this.model.get("products").each((function(e){var a=e.get("Id"),s=n.find("div[data-id='"+a+"']"),l=P.indexOf(a),c=l>=0;if(s.length&&s.find(".purchase_button a").visible(!1,!0,"vertical",t.$("#products .antiscroll-inner"))){if(!c){var u=i.index(s)+1,d=r?"search":t.model.get("category"),f={id:a,name:e.get("Name"),category:e.get("CategoryMemberships").toString(),brand:D.titleName,list:d,position:u};o.push(f),P.push(a)}}else c&&P.splice(l,1)})),e){var s=r?"search":t.model.get("category"),l={id:a.durableContainerProduct.gta5.Id,name:c.getTextCached(a.durableContainerProduct.gta5.NameKey,"Store"),category:a.durableContainerProduct.gta5.CategoryMemberships.toString(),brand:D.titleName,list:s,position:7};o.push(l)}g.addImpressions(o,!1)},redeemVoucher:function(e){e&&e.preventDefault();var t={State:"COMMERCE",SubState:"REDEMPTIONCODE",Visible:!0,Online:f.isOnline(),Data:{Message:41,Referrer:"store"}};r.pubsub.trigger("gamefunctions:showActivation",t,"COMMERCE","REDEMPTIONCODE")},redeemVoucherKeypress:function(e){13==e.which&&this.redeemVoucher()},search:function(e){if(e.preventDefault(),!this.reloadManifest()){var t=this.$("#searchInput").val(),n=this.$("#category").val();this.model.set({category:n,product:t},{silent:!0});var i=this.model.searchProducts(n,t);this.searchResultsModel.reset(i),this.renderProducts(this.searchResultsModel)}},filter:function(){var e=this.model.get("category"),t=this.$("select#category"),n="top_default";if(null!=e&&""!==e){var i=this.model.get("categories").toJSON();this.model.findCategory(i,e)&&(n=r.toLower(e))}var a=this.model.get("product");this.$("#searchInput").val(a),t.val(n),t.dropkick("setValue",n)},hideStoreIframe:function(){var e=this;r.pubsub.off("headerLoginUser:click:disabled",this.hideStoreIframe),this.$("#storeV2Iframe iframe").removeClass("loaded loading"),this.$("#storeV2Iframe").fadeOut((function(){f.initHeaderMenu(!0),r.removeLoading("storev2Panel"),a.removeStoreMessageHandler(e.tryProcessStoreEvents),e.$("#store").fadeIn(),e.reloadManifest()||e.filter()}))},reloadManifest:function(){return this.model.get("reloadManifest")?(this.model.set({storeAvailable:void 0,reloadManifest:!1}),r.WriteDebugLog("reloadManifest","model value","true"),!0):(r.WriteDebugLog("reloadManifest","model value","false"),!1)},tryProcessStoreEvents:function(e){try{this.processStoreEvents(e)}catch(e){r.WriteDebugLog("processStoreEvents","caught exception",e.toString(),r.logType.error,r.logController.store)}},getProducts:function(){var e=this.model.get("purchaseProductName");return[{id:this.model.get("purchaseProductId"),name:e,price:this.model.get("purchaseProductPrice"),category:this.model.get("purchaseProductCategory"),quantity:1,brand:D.titleName}]},processStoreEvents:function(e){var t=D.storeOrigin,n=a.supportedEvents;if(e.origin===t){var i=a.parseEventData(e);if(i){var o,s=a.extractEventCommand(i);if(s)switch(r.WriteDebugLog("processStoreEvents","data",JSON.stringify(i),r.logType.debug,r.logController.store),this.clearErrors(),s){case n.complete:r.WriteDebugLog("processStoreEvents","Complete"),this.durablesNeedManifestReload(),this.hideStoreIframe();break;case n.backtostore:r.WriteDebugLog("processStoreEvents","Back To Store"),this.hideStoreIframe();break;case n.openlink:var l=i.url;if("string"==typeof l&&l.length){r.WriteDebugLog("processStoreEvents","Launch URL from Digital River",l);var u=c.getTextCached("LinkConfirmCompact","HomeSignin");h.ShowConfirmModal(u,"","sdk.launchExternalBrowserForUrl",l)}else r.WriteDebugLog("processStoreEvents","openlink: URL string from Digital River is undefined","",r.logType.error,r.logController.store),this.showError(r.errorCode("7000.73"));break;case n.error:r.WriteDebugLog("processStoreEvents","Error returned from Digital River",e.data,r.logType.error,r.logController.store),this.showError(r.errorCode("7000.66")),this.hideStoreIframe();break;case n.pageview:switch(i.page){case a.supportedPages.checkout:o=this.getProducts(),g.checkout(o);break;case a.supportedPages.confirmpurchase:var d=i.type;void 0===d?r.WriteDebugLog("processStoreEvents","Payment Type from Digital River is undefined","",r.logType.error,r.logController.store):(r.WriteDebugLog("processStoreEvents","Confirm purchase",d),o=this.getProducts(),g.confirmPurchase(o,d));break;case a.supportedPages.proceedtopayment:g.proceedToPayment();break;case a.supportedPages.complete:var p=a.checkProductData(i);if(p.missingData)r.WriteDebugLog("processStoreEvents","Purchase Complete missing data",p.missingDataList.toString(),r.logType.error,r.logController.store);else{r.WriteDebugLog("processStoreEvents","Checkout completion"),o=this.getProducts();var m={id:i.transactionid,revenue:i.revenue};g.checkoutCompletion(o,m,a.formatCurrencyCode(i.currency)),this.durablesNeedManifestReload()}break;default:r.WriteDebugLog("processStoreEvents","Invalid pageview data",i.page,r.logType.error,r.logController.store)}break;case n.focuschange:var v=i.hasfocus;if(void 0===v)r.WriteDebugLog("processStoreEvents","hasfocus state from Digital River is undefined","",r.logType.error,r.logController.store);else{var b={hasFocus:v};f.setupTextEntry(b)}break;default:r.WriteDebugLog("processStoreEvents","Invalid command",s,r.logType.error,r.logController.store)}}}else r.WriteDebugLog("processStoreEvents","Unsupported origin",e.origin)},durablesNeedManifestReload:function(e){var t=this.model.has("purchaseProductConsumable")&&!this.model.get("purchaseProductConsumable");e=e||t,r.WriteDebugLog("durablesNeedManifestReload","isReloadManifest",e),e&&this.model.set({reloadManifest:!0},{silent:!0})},clearErrors:function(){this.$(".errors .errorText, .errorCode").html("")},showError:function(e){var t=c.getErrorWithCode(e);h.ShowErrorModal({errorCode:e,message:t})},updateGlobalAccount:function(){this.userAccountModel=new i.UserAccount;var e=this,t={env:D.rosEnvironment,title:D.titleName,version:D.RosTitleVersion};u.GetAuthHeaderAsync().then((function(n){e.userAccountModel.fetch({type:"POST",headers:n,contentType:"application/json; charset=utf-8",data:t,success:this.updateGlobalAccountSuccess,fatalError:h.ShowErrorModal})}))},updateGlobalAccountSuccess:function(){var e=this.userAccountModel.get("Error");if(null!=e)r.WriteDebugLog("updateGlobalAccount","error",e,r.logType.error,r.logcontroller.profile);else{if(null==D.account)return void r.WriteDebugLog("updateGlobalAccount","error","globals.account is undefined",r.logType.error,r.logController.profile);D.account.Age=this.userAccountModel.get("Age"),D.account.Minor=this.userAccountModel.get("Minor"),D.account.Country=this.userAccountModel.get("Country"),D.account.CountryCode=this.userAccountModel.get("Country")}},receiveCheckoutUrl:function(t){clearTimeout(x),r.WriteDebugLog("purchase","data.Url",t.Url),this.showStoreIframe(t,e(this.model.get("purchaseElem")))},showStoreIframe:function(e){var t=this,n=e.Url;this.$("#store").fadeOut((function(){f.initHeaderMenu(!1),r.pubsub.on("headerLoginUser:click:disabled",t.hideStoreIframe);var e=t.$("#storeV2Iframe"),i=e.find("iframe");i.on("load",(function(){i.removeClass("loading").addClass("loaded"),void 0!==L&&(clearTimeout(L),a.addStoreMessageHandler(t.tryProcessStoreEvents),e.fadeIn(),r.removeLoading("storev2Panel"),t.resetProductImpressions())})),i.attr("src",n),i.removeClass("loaded").addClass("loading"),L=setTimeout(t.iframeError,D.ajaxTimeout)}))},iframeError:function(){e("#storeV2Iframe iframe").removeClass("loaded loading"),r.WriteDebugLog("iframeError","7000.91","",r.logType.error,r.logController.store),this.showError(r.errorCode("7000.91")),this.hideStoreIframe(),L=void 0},setPurchasedProductDetails:function(e){this.model.set({purchaseProductId:e.Id,purchaseProductName:e.Name,purchaseProductPrice:e.Price,purchaseProductCategory:e.CategoryMemberships.toString(),purchaseProductConsumable:e.Consumable},{silent:!0})},onClose:function(){u.CallGameMethod("RGSC_DESTROY_COMMERCE_DATA",null,"RGSC_DESTROY_COMMERCE_DATA_DEMO"),window.amd.store.StoreView=void 0,this.stopListening(),this.resetProductImpressions(),r.pubsub.off("gamefunctions:checkoutUrl",this.receiveCheckoutUrl),r.pubsub.off("store:SetPurchasedProductDetails",this.setPurchasedProductDetails),r.pubsub.off("headerLoginUser:click:disabled",this.hideStoreIframe)},resetProductImpressions:function(){P=[]},reset:function(e){this.$el.html(""),f.setUpLoadingPanel("#storev2Panel");var t=this;if(this.model.isMaintenanceMode())this.render();else{this.checkAge((function(){t.model.unset("underAge",{silent:!0}),t.model.loadCatalogAsync(e).done((function(){t.resetProductImpressions()}))}),(function(){t.model.set({underAge:!0})}),(function(){t.showError(r.errorCode("7000.65")),r.pubsub.trigger("setupEnv:showHomepage")}))}},checkAge:function(e,t,n){var i={ofAgeCallbkFn:e,underAgeCallbkFn:t,errorCallbkFn:n};a.checkStoreAgeAppropriate(i)},reInitialize:function(e){u.CallGameMethod("RGSC_DESTROY_COMMERCE_DATA",null,"RGSC_DESTROY_COMMERCE_DATA_DEMO"),this.model.initCommerceSystem(),this.reset(e)},initialize:function(e){n.bindAll(this,"render","reInitialize","renderProducts","renderCategories","onClose","search","filter","renderUnderAgeError","checkAge","updateGlobalAccount","updateGlobalAccountSuccess","renderContainer","renderOptions","reset","processStoreEvents","tryProcessStoreEvents","receiveCheckoutUrl","addProductImpressions","setPurchasedProductDetails","showStoreIframe","iframeError","hideStoreIframe","renderMaintenanceView","renderStoreUnavailable","generatePriceString","applyLocalization","reloadManifest","durablesNeedManifestReload"),this.model=new i.Catalog({titlelang:D.titlelang}),this.listenTo(this.model,"change",this.render),this.listenTo(O,"durablesNeedManifestReload",this.durablesNeedManifestReload),this.listenTo(O,"reloadManifest",this.reloadManifest),this.searchResultsModel=new i.ProductCollection,r.pubsub.on("gamefunctions:checkoutUrl",this.receiveCheckoutUrl),r.pubsub.on("store:SetPurchasedProductDetails",this.setPurchasedProductDetails),this.reset(e)}}),R.ProductView=t.View.extend({events:{"click .product":"showInfo"},render:function(){var e=this.model.get("IsDurableMode")?this.model.get("ImagePathSml"):this.model.get("ImagePathLrg");e=e||this.model.get("ImagePath");var t=a.getImageUrlData(D.titleName,e);this.model.set({StoreImageBaseUrl:t.storeImageBaseUrl,ImagePath:t.imagePath},{silent:!0});var n=this.hasDurables?v:m,i=this.model.toJSON();i.cdnUrl=D.baseUrl;var r=l.renderCompiledTemplate(n,i);(this.$el.html(r),this.model.get("ShowInstallButton"))&&new R.InstallButtonView({model:this.model,el:this.$el.find(".install_button")}).render();return this.$("img").on("error",this.image404),this},showInfo:function(t){var n;t&&t.preventDefault(),O.trigger("reloadManifest"),n=this.hasDurables?new R.ProductDurableInfoView({model:this.model}):new R.ProductInfoView({model:this.model}),window.amd.store.ProductInfoView=n;try{var i=e("#searchInput").val().length>0?"search":e("#category").val(),a=this.model.get("Name"),o={id:this.model.get("Id"),name:a,price:this.model.get("Price"),category:this.model.get("CategoryMemberships"),quantity:1,brand:D.titleName};g.productInfo(o,i)}catch(t){r.WriteDebugLog("Store","showInfo GA exception",t.toString(),r.logType.error,r.logController.store)}n.render()},image404:function(){var t=D.baseUrl+"images/store/fallback.jpg";t!==this.src&&(this.src=t),e(this).off("error")},renderEmpty:function(){var t;return t=this.model.get("singleProductView")?l.renderCompiledTemplate(C):l.renderCompiledTemplate(b),this.$el.html(t),"en-US"!==D.titlelang&&this.$el.find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),e("#storeFilter").show(),this},onClose:function(){},initialize:function(){n.bindAll(this,"render","onClose","renderEmpty"),this.hasDurables=void 0!==this.model.get("Durables")}}),R.ProductInfoView=t.View.extend({events:{"click .purchase":"purchase","click .close":"onClose"},el:"#product_info_wrapper",render:function(){var e=this.model.toJSON(),t=l.renderCompiledTemplate(w,e);(this.$el.append(t),this.model.get("ShowPurchaseButton"))&&new R.PurchaseButtonView({model:this.model,el:this.$el.find(".purchase_button")}).render();this.model.get("ShowInstallButton")&&new R.InstallButtonView({model:this.model,el:this.$el.find(".install_button")}).render();"en-US"!==D.titlelang&&this.$el.find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),this.$("img").on("error",this.image404),this.$el.fadeIn(),this.$(".antiscroll-wrap").antiscroll()},image404:function(){var t=D.baseUrl+"images/store/fallback.jpg";t!==this.src&&(this.src=t),e(this).off("error")},onClose:function(){this.$el.fadeOut(),this.$el.html(""),this.stopListening(),window.amd.store.ProductInfoView=void 0},initialize:function(){n.bindAll(this,"render","onClose")}}),R.ProductDurableInfoView=t.View.extend({events:{"click .close":"onClose"},el:"#product_info_wrapper",render:function(e){var t=this.model.toJSON(),n=this.model.get("SelectedModel"),i=n&&n.get("Id");void 0===i&&((n=this.model.get("Durables").at(0)).set({Selected:!0},{silent:!0}),this.model.set({SelectedModel:n},{silent:!0}),i=n.get("Id"));var a=[];window.amd.store.ProductDurableInfoItemViews=[],this.model.get("Durables").each((function(e){e.get("Id")!==i&&e.set({Selected:!1},{silent:!0});var t=new R.ProductDurableInfoItemView({model:e,id:"product_"+e.id});window.amd.store.ProductDurableInfoItemViews.push(t),t.render(),a.push(t.$el)})),n?(t.PriceString=n.get("PriceString"),t.Desc=n.get("Desc"),t.ShowPurchaseButton=n.get("ShowPurchaseButton"),t.ShowInstallButton=n.get("ShowInstallButton")):t.ShowPurchaseButton=!1;var r=l.renderCompiledTemplate(k,t);(this.$el.append(r),t.ShowPurchaseButton)&&new R.PurchaseButtonView({model:n,el:this.$el.find(".purchase_button")}).render();t.ShowInstallButton&&new R.InstallButtonView({model:this.model,el:this.$el.find(".install_button")}).render();this.$el.find(".product-list").append(a),"en-US"!==D.titlelang&&this.$el.find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),e||this.addDurableProductImpressions(),this.$("img").on("error",this.image404),this.$el.fadeIn(),this.$(".antiscroll-wrap").antiscroll()},addDurableProductImpressions:function(){var t=e("#searchInput").val().length>0,n=[];this.model.get("Durables").each((function(e,i){if(e.get("ShowPurchaseButton")){var a=t?"search":e.get("category"),r={id:e.get("Id"),name:e.get("Name"),category:e.get("CategoryMemberships").toString(),brand:D.titleName,list:a,position:i+1};n.push(r)}})),g.addImpressions(n,!0)},image404:function(){var t=D.baseUrl+"images/store/fallback.jpg";t!==this.src&&(this.src=t),e(this).off("error")},renderSelectedItem:function(e){this.model.set({SelectedModel:e},{silent:!0}),this.$el.html(""),this.render(!0)},onClose:function(){this.$el.fadeOut(),this.$el.html(""),this.stopListening(),window.amd.store.ProductInfoView=void 0},initialize:function(){n.bindAll(this,"render","onClose","renderSelectedItem","addDurableProductImpressions"),this.listenTo(this.model.get("Durables"),"change",this.renderSelectedItem)}}),R.ProductDurableInfoItemView=t.View.extend({events:{click:"onProductSelected"},tagName:"li",className:"clearfix",render:function(){var t=e(this.el),n=l.renderCompiledTemplate(_,this.model.toJSON());"en-US"!==D.titlelang&&t.find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),t.html(n)},onProductSelected:function(){this.model.set({Selected:!0}),this.productClickedAnalytics()},productClickedAnalytics:function(){if(this.model.get("ShowPurchaseButton"))try{var t=e("#searchInput").val().length>0?"search":e("#category").val(),n=this.model.get("Name"),i={id:this.model.get("Id"),name:n,price:this.model.get("Price"),category:this.model.get("CategoryMemberships"),quantity:1,brand:D.titleName};g.productInfo(i,t)}catch(e){r.WriteDebugLog("Store","productClickedAnalytics GA exception",e.toString(),r.logType.error,r.logController.store)}},initialize:function(){n.bindAll(this,"render","productClickedAnalytics")}}),R.PurchaseButtonView=t.View.extend({events:{"click .purchaseBtn":"purchase"},render:function(){var t=e(this.el),n=l.renderCompiledTemplate(T,{Id:this.model.get("Id")});"en-US"!==D.titlelang&&t.find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),t.html(n)},purchase:function(e){e.preventDefault(),f.closeModalsAndHideMenu();var t,n={Id:this.model.get("Id"),Name:this.model.get("Name"),Price:this.model.get("Price"),CategoryMemberships:this.model.get("CategoryMemberships"),Consumable:this.model.get("Consumable")};r.pubsub.trigger("store:SetPurchasedProductDetails",n),f.setUpLoadingPanel("#storev2Panel");var i=this;t=l.isSteam()?i.startSteamPurchase:i.requestCheckoutUrl;var a=function(){i.model.setupPurchaseFlowTelemetry(),t()};if(void 0!==D.account&&void 0!==D.account.CountryCode&&"DE"===D.account.CountryCode.toUpperCase())return r.WriteDebugLog("purchase","globals.account.CountryCode",D.account.CountryCode),void this.checkAgeForPurchase(a);a()},checkAgeForPurchase:function(e){var t=this;this.checkAge(e,(function(){t.renderUnderAgeError(),t.updateGlobalAccount()}),(function(){t.showError(r.errorCode("7000.65")),t.model.unset("disablePurchase",{silent:!0})}))},checkAge:function(e,t,n){var i={ofAgeCallbkFn:e,underAgeCallbkFn:t,errorCallbkFn:n};a.checkStoreAgeAppropriate(i)},startSteamPurchase:(N=(0,s.default)(o.default.mark((function e(){var t,n,i,a,s,c,d,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=function(e){r.WriteDebugLog("cancelPollingSteamPurchase","reason",e),a&&(clearInterval(a),a=null),s&&(clearTimeout(s),s=null)},d=function(){if(r.WriteDebugLog("pollSteamPurchaseStatus","",""),f.isActivePanel("#storev2Panel")){var e=u.didSteamPurchaseFail();return r.WriteDebugLog("pollSteamPurchaseStatus","is purchase failed",JSON.stringify(e)),e?(p("failed"),void t.startSteamPurchaseError()):void 0}p("navigation")},t=this,n=this.model.get("Id"),i={ProductId:n,Language:l.getStoreLanguage(D.titlelang)},r.WriteDebugLog("startSteamPurchase","productId",n),e.prev=6,e.next=9,u.CallGameMethodAsync("RGSC_START_STEAM_PURCHASE",i,"RGSC_START_STEAM_PURCHASE_DEMO");case 9:c=e.sent,r.WriteDebugLog("startSteamPurchase","isRequested stringified",JSON.stringify(c)),c&&(void 0!==c.Result&&c.Result||(r.WriteDebugLog("startSteamPurchase","RGSC_START_STEAM_PURCHASE_ASYNC","false",r.logType.error,r.logController.store),t.startSteamPurchaseError())),t.model.get("Consumable")||O.trigger("durablesNeedManifestReload",!0),a=setInterval(d,500),s=setTimeout((function(){p("timeout")}),35e3),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),r.WriteDebugLog("startSteamPurchase","exception",e.t0,r.logType.error,r.logController.store),t.startSteamPurchaseError();case 21:case"end":return e.stop()}}),e,this,[[6,17]])}))),function(){return N.apply(this,arguments)}),startSteamPurchaseError:function(){if(f.isActivePanel("#storev2Panel")){var e=r.errorCode("7000.71"),t=c.getErrorWithCode(e),n=c.getErrorWithCode(e,"RGSC_START_STEAM_PURCHASE");f.showGenericFatalError(e,n.Message,"",t.CodeDescription)}},requestCheckoutUrl:function(){var e=this,t=this.model.get("Id"),n={ProductId:t,Country:null!=D.account?D.account.CountryCode:"",Language:l.getStoreLanguage(D.titlelang)};r.WriteDebugLog("requestCheckoutUrl","productId",t);var i=u.CallGameMethodAsync("RGSC_REQUEST_CHECKOUT_URL",n,"RGSC_REQUEST_CHECKOUT_URL_DEMO");i.then((function(t){if(t&&t.Result){var n=setTimeout(e.requestCheckoutUrlError,D.ajaxTimeout);x=n}else r.WriteDebugLog("store-views.requestCheckoutUrl","isRequested",JSON.stringify(t),r.logType.error,r.logController.store),e.requestCheckoutUrlError()})),i.catch((function(){e.requestCheckoutUrlError()}))},requestCheckoutUrlError:function(){if(f.isActivePanel("#storev2Panel")){r.WriteDebugLog("requestCheckoutUrlError");var e=r.errorCode("7000.63"),t=c.getErrorWithCode(e),n=c.getErrorWithCode(e,"RGSC_REQUEST_CHECKOUT_URL");f.showGenericFatalError(e,n.Message,"",t.CodeDescription)}},resetProductImpressions:function(){P=[]},onClose:function(){this.stopListening()},initialize:function(){n.bindAll(this,"render","purchase","checkAgeForPurchase","checkAge","startSteamPurchase","startSteamPurchaseError","requestCheckoutUrl","requestCheckoutUrlError","resetProductImpressions","onClose")}}),R.InstallButtonView=t.View.extend({events:{"click .installBtn":"install"},render:function(){var t=e(this.el),n=l.renderCompiledTemplate(I,{Id:this.model.get("Id")});"en-US"!==D.titlelang&&t.find("[rel*=localize]").localize("Store",{language:D.titlelang,pathPrefix:D.baseAssetUrl+"xml/shared"}),t.html(n)},install:function(e){e&&e.preventDefault();var t={productId:this.model.get("Id")};u.CallGameMethod("RGSC_INSTALL_PRODUCT",t,"RGSC_INSTALL_PRODUCT_DEMO","RGSC_JS_INSTALL_PRODUCT_RESULT")},onClose:function(){this.stopListening()},initialize:function(){n.bindAll(this,"render","install","onClose")}}),R}.apply(t,i))||(e.exports=a)},,,,,function(e,t,n){"use strict";var i,a=n(3)(n(5));void 0===(i=function(e){var t=n(4),i=n(1);function r(e){if(!e.services)return!0;var n=!1;return globals.scsServiceEnabled||(n=!0),t.isArray(e.services)&&t.each(e.services,(function(e){n=n||!globals[e+"ServiceEnabled"]})),!n||(e.silentFail||i.pubsub.publish("xhrUtils.showServiceAlert"),!1)}function o(e){if(!e.disableSlowMsg&&!function(e){return i.stringHasContent(e.url)&&e.url.length>9&&("/desktop"===e.url.substr(-8)||"/launcher"===e.url.substr(-9))}(e)){var t=e.slowMsgTimeout||globals.slowAjaxMsgTimeout;e.slowTimeoutHandle=setTimeout((function(){i.pubsub.publish("notificationFn.slowService",e.requestDescription,e.url)}),t)}}function s(e){e.slowTimeoutHandle&&clearInterval(e.slowTimeoutHandle)}function l(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.status+": "+e.statusText);throw t.response=e,t}function c(e){return function(e){if(!e)return Promise.resolve();return e.headers&&e.headers.has("Content-Type")&&e.headers.get("Content-Type").indexOf("application/json")>-1?e.json():e.text()}(e).then((function(t){return e.data=i.processResponseData(t),e}))}var u=["method","body","headers","credentials"];var d=void 0;function f(e){return d&&window.clearTimeout(d),e}return{checkServicesEnabled:r,clearSlowTimeoutMsg:s,fetch:function(e,n,p){if("object"===(0,a.default)(n)&&void 0===p?n=(p=n).url:p.url=n,!r(p))return Promise.reject("services disabled");o(p),p.fetch=!0;var h=p.noUrlTransform?n:i.getApiUrl(n);h+=function(e){var t="";if("GET"!==e.method)return t;var n=e.body||e.data;if(!n)return t;var i=Object.keys(n);return i&&0!==i.length?(t="?",i.forEach((function(e){t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e])+"&"})),t):t}(p);var g=function(e){var n=e.body||e.data,i={body:"object"===(0,a.default)(n)?JSON.stringify(n):n,method:e.method||e.type,headers:t.extend({Accept:e.dataType||"application/json","Content-Type":e.contentType||"application/json; charset=utf-8","X-Requested-With":e.requestedWith||"XMLHttpRequest"},e.headers)};return"HEAD"===i.method&&(delete i.headers.Accept,delete i.headers["Content-Type"]),"GET"===i.method&&delete i.body,t.defaults(t.pick(i,u),{method:"POST",credentials:"same-origin"})}(p);return h+=function(e){return!1!==e.cache||"GET"!==e.method&&"HEAD"!==e.method?"":"_="+(new Date).getTime()}(g),new Promise((function(t,n){return function(e,t){var n=e.timeout||globals.ajaxTimeout;d=window.setTimeout((function(){t("timeout")}),n)}(p,n),e(h,g).then(t).catch(n)})).then(c).then(l).then(f).then((function(e){return s(p),e})).catch((function(e){return function(e,t){if(f(),s(t),i.WriteDebugLog("Ajax Error","url; exception",t.url+"; "+JSON.stringify(e)),t.silentFail)throw e;var n;switch(e&&e.response&&e.response.status){case 429:n=i.errorCode("8000");break;default:n="timeout"===e?i.errorCode("1001"):i.extractErrorFromResponse(e)}if(function(e){i.WriteDebugLog("Ajax Error","errorCode",JSON.stringify(e),i.logType.error,i.logController[i.getTitleName()])}(n),"timeout"===e&&(null==t.noRetryModal||!t.noRetryModal))return t.noRetryModal=!0,void i.pubsub.publish("xhr.showTimeOutRetry",t);"4000.51"!==n&&"4000.89"!==n||i.pubsub.publish("authenticationFailed.ticket",{errorCode:n});throw e}(e,p)}))},setupSlowAjaxMsg:o}}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i,a;i=[n(0),n(4),n(1),n(8),n(15),n(7),n(12),n(153),n(154),n(155)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c){var u={initializeReportData:function(){u.reportingData={area:[{title:r.getTextCached("ReportAreaMemberName","Social"),id:"3"},{title:r.getTextCached("ReportAreaAvatar","Social"),id:"5"}],reason:[{shortName:"hate",longName:r.getTextCached("ReportReasonHate","Social"),nextAction:"submitReport",submitReport:"true"},{shortName:"harass",longName:r.getTextCached("ReportReasonHarass","Social"),nextAction:"moreInfo",submitReport:"true",displayOptions:"true",moreInfo:[{optionText:r.getTextCached("ReportMoreInfoHarassingMeOption","Social"),displayInput:"true",labelText:r.getTextCached("ReportMoreInfoHarrasingMeLabel","Social")},{optionText:r.getTextCached("ReportMoreInfoHarassingFriendOption","Social"),displayInput:"true",labelText:r.getTextCached("ReportMoreInfoHarassingFriendLabel","Social")}]},{shortName:"explicit",longName:r.getTextCached("ReportReasonExplicit","Social"),nextAction:"submitReport",submitReport:"true"},{shortName:"spam",longName:r.getTextCached("ReportReasonSpam","Social"),nextAction:"submitReport",submitReport:"true"},{shortName:"impersonate",longName:r.getTextCached("ReportReasonImpersonate","Social"),nextAction:"moreInfo",displayOptions:"true",submitReport:"true",moreInfo:[{optionText:r.getTextCached("ReportMoreInfoImpersonatingMeOption","Social"),displayInput:"true",labelText:r.getTextCached("ReportMoreInfoImpersonatingMeLabel","Social")},{optionText:r.getTextCached("ReportMoreInfoImpersonatingOtherOption","Social"),displayInput:"true",labelText:r.getTextCached("ReportMoreInfoImpersonatingOtherLabel","Social")}]},{shortName:"privacy",longName:r.getTextCached("ReportReasonPrivacy","Social"),nextAction:"moreInfo",displayOptions:"false",submitReport:"true",moreInfo:[{optionText:"",displayInput:"true",labelText:r.getTextCached("ReportMoreInfoPrivacyLabe","Social")}]},{shortName:"ipr",longName:r.getTextCached("ReportReasonIpr","Social"),nextAction:"moreInfo",submitReport:"false",moreInfo:[{optionText:"",displayInput:"false",labelText:""}]}]}},reportProfile:function(e){this.initializeReportData();var t={nickname:e};this.initializeReportProfile(t)},initializeReportProfile:function(t){var i=this.reportingData.area,a=this.reportingData.reason,r=e.extend({},{area:i},{reason:a},t);e("#reportModal").html(n.renderCompiledTemplate(s,r)),e("#reportModal").find("[rel*=localize]:not(.localized)").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),e("#reportModal").show(),e("body").data("reportProfile",r.nickname),e("body").data("page",r.page),this.InitialiseReportEvents()},InitialiseReportEvents:function(){e(document).off("click","#profile-report-choose").on("click","#profile-report-choose",u.reportProfileChooseArea).off("click",".profile-report-confirm").on("click",".profile-report-confirm",u.reportProfileChooseReason).off("click","#profile-report-submitMoreInfo").on("click","#profile-report-submitMoreInfo",u.reportProfileSubmitMoreInfo).off("click",".profile-report-showMoreInfoText").on("click",".profile-report-showMoreInfoText",u.reportProfileShowMoreInfoText).off("click",".profile-report-hideMoreInfoText").on("click",".profile-report-hideMoreInfoText",u.reportProfileHideMoreInfoText).off("click","#profile-report-cancel").on("click","#profile-report-cancel",u.closeModal)},reportProfileChooseArea:function(t){t.preventDefault();var n=e("body").data("reportProfile");u.reportChooseArea(t,n)},reportProfileChooseReason:function(e){e.preventDefault(),u.reportChooseReason(e,"profile","/home/reportprofile","")},reportProfileSubmitMoreInfo:function(e){e.preventDefault(),u.reportSubmitMoreInfo(e,"profile","/home/reportprofile","")},reportProfileShowMoreInfoText:function(){u.reportShowMoreInfoText()},reportProfileHideMoreInfoText:function(){u.reportHideMoreInfoText()},reportChooseArea:function(t){var i=e(t.currentTarget).parents("#reportModal").find("input:checked").val(),a=e("body").data("reportProfile"),r=this.reportingData.reason,o=e.extend({},{reason:r});i&&(e("#profile-report-reason").remove(),e("#reportModal").html(n.renderCompiledTemplate(l,{area:i,section:"profile",nickname:a,reportingData:o})),e("#reportModal").find("[rel*=localize]:not(.localized)").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}))},reportChooseReason:function(i,a,r,o,s){var l=e("#areaSelected").val(),u=e("input[name=reportReason]:checked","#formSpamReport").val();if(null!=u){s||(s=this.reportingData.reason);var d=t.filter(s,(function(e){return e.shortName===u})),f="",p="";switch(d.length>0&&(f=d[0].nextAction,p=e("body").data("reportProfile")),f){case"moreInfo":e("#profile-report-moreinfo").remove(),e("#reportModal").html(n.renderCompiledTemplate(c,{data:o,section:a,url:r,nickname:p,reportingData:d[0]})),e("#reportModal").find("[rel*=localize]:not(.localized)").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),e("#areaSelected").val(l),e("#reasonSelected").val(u);break;case"submitReport":this.submitProfileReport(a,r,l,d,"")}return d[0].longName}},reportSubmitMoreInfo:function(n,i,a,o,s){s||(s=u.reportingData.reason);var l=e("#areaSelected").val(),c=e("#reasonSelected").val(),d=e("input[name=moreInfo]:checked","#formSpamReport"),f=d.val(),p=d.closest("li").next("div").find(".moreInfoText"),h=t.filter(s,(function(e){return e.shortName===c}));p.length||(p=e(".moreInfoText")),"ipr"!=c?null==f?f=p.val():f+=" ("+p.val()+")":f="none",f?this.submitProfileReport(i,a,l,h,f):e("#error").text(r.getTextCached("ReportProvideDetails","Social"))},reportShowMoreInfoText:function(){e(".moreInfo").removeClass("hide")},reportHideMoreInfoText:function(){e(".moreInfoText").each((function(){e(this).val("")})),e(".moreInfo").addClass("hide")},submitProfileReport:function(t,n,i,a,r){if(null!=a&&a.length){var o=e("body").data("reportProfile"),s={area:i,reason:a[0].longName,name:o,moreInfo:r,reportReasonShort:a[0].shortName};u.submitReport(s)}else u.closeModalError(e("#reportModal"))},submitReport:function(t){return a.reportProfile(t,o.ShowErrorModal).then((function(t){if(t&&1==t.Status)if(t.RedirectToIprForm){u.closeModal(e("#reportModal"));var i="{0}reporting/ipinfringementform?reportType={1}&contentId={2}&contentOwner={3}".format(n.getScBaseUrl(),t.ReportType,t.ContentId,t.ContentOwnerId),a=r.getTextCached("ReportContent","Social"),s=r.getTextCached("LinkConfirm","HomeSignin").replace("[linkText]",'"'+a+'"');o.ShowConfirmModal(s,"","dataFn.launchExternalBrowserWithScAuth",{url:i})}else u.closeModalSuccess(e("#reportModal"));else u.closeModalError(e("#reportModal"))}))},closeModal:function(){e("#reportModal").html(""),e("#reportModal").hide()},closeModalSuccess:function(e){e.find(".modal-body").html(r.getTextCached("ReportSuccess","Social")),e.find(".modal-footer").html(""),setTimeout((function(){e.hide()}),1e3)},closeModalError:function(e){e.find(".modal-body").html(r.getError("ReportError")),e.find(".modal-footer").html(""),setTimeout((function(){e.hide()}),1500)}};return u}.apply(t,i))||(e.exports=a)},,,,,,,function(e,t,n){"use strict";var i,a;i=[n(0),n(4),n(16),n(6),n(7),n(8)],void 0===(a=function(e,t,n,i,a,r){var o={};return o.ProfileCard=n.Model.extend(),o.ProfileNav=n.Model.extend(),o.Friend=n.Model.extend({parse:function(e){var t=e.get("IsOnline"),n=e.get("ViewerMutualFriendCount"),i=a.getTextCached("MutualFriends","Social").format(n),r=t?a.getTextCached("PlayingGameOn","Social","Playing {0} on {1}").format(e.get("FriendlyGame"),e.get("FriendlyPlatform")):"";return e.set({MutualFriendText:i,OnlineStatus:t?"online":"offline",InviteMsg:e.get("InviteMsg"),PlayingGame:r}),e}}),o.FriendCollection=n.Collection.extend({model:o.Friend}),o.Crew=n.Model.extend(),o.CrewCollection=n.Collection.extend({model:o.Crew}),o.Game=n.Model.extend(),o.GameCollection=n.Collection.extend({model:o.Game}),o.Account=n.Model.extend(),o.AccountCollection=n.Collection.extend({model:o.Account}),o.BlockPlayerModel=n.Model.extend({url:i.getApiUrl("/api/friend/blockplayer"),block:function(e,t,n){var i=this;r.GetAuthHeaderAsync().then((function(a){i.save({blockeeRockstarId:e},{headers:a,success:t,fatalError:n,noRetryModal:!0})}))}}),o}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(16),i=n(6),a=(n(1),n(4)),r=n(31),o=n(18),s=n(8);n(74);var l={};return l.PrimaryCrewModel=t.Model.extend({url:i.getApiUrl("api/crew/primarycrew")}),l.Crew=t.Model.extend(),l.CrewCollection=t.CachedCollection.extend({model:l.Crew,url:i.getApiUrl("/api/crew/getcrews"),initialize:function(e,t){a.has(t,"cacheKey")&&(this.cacheKey=t.cacheKey),a.has(t,"cacheObject")&&(this.cacheObject=t.cacheObject)},parse:function(e){return null!=e&&null!=e.Crews?(r.setSocialCountTotals(e.Crews.length,-1),e.Crews):e}}),l.CrewMember=t.Model.extend({parse:function(e){return a.each(e.CrewMembers,(function(e){var t=o.getAvatarUrl(e.AvatarUrl,e.Nickname);e.AvatarUrl=t,e.DateJoinedLocalized=i.localizedDate(e.DateJoined,"LL")})),e}}),l.CrewMemberCollection=t.CachedCollection.extend({initialize:function(e,t){this.game=t.game,a.has(t,"cacheKey")&&(this.cacheKey=t.cacheKey),a.has(t,"cacheObject")&&(this.cacheObject=t.cacheObject)},model:l.CrewMember,url:function(){return i.getApiUrl("/api/"+this.game+"/primarycrewmembers")}}),l.CrewMemberSearch=t.Model.extend({url:i.getApiUrl("/api/crew/searchmembers"),parse:function(e){return a.each(e.CrewMembers,(function(e){var t=o.getAvatarUrl(e.AvatarUrl,e.Nickname);e.AvatarUrl=t})),e}}),l.CrewInvite=t.Model.extend(),l.CrewInviteCollection=t.Collection.extend({model:l.CrewInvite,url:i.getApiUrl("/api/crew/crewinvites"),getInvites:function(e){return this.at(e).get("CrewInvites")}}),l.Invites=t.Collection.extend(),l.CrewRequest=t.Model.extend(),l.CrewRequestCollection=t.Collection.extend({model:l.CrewRequest,url:i.getApiUrl("/api/crew/crewrequests"),getRequests:function(e){return this.at(e).get("CrewRequests")}}),l.Requests=t.Collection.extend(),l.CrewsWithManagePermissionCollection=t.Collection.extend({model:l.Crew,url:i.getApiUrl("/api/crew/crewswithmanagepermission"),parse:function(e){return e.Crews}}),l.UpdateCrewModel=t.Model.extend({url:i.getApiUrl("/api/crew/updatecrew"),leave:function(e,t,n){var i=this;s.GetAuthHeaderAsync().then((function(a){i.save({crewId:e,opName:"leave"},{headers:a,success:t,fatalError:n,noRetryModal:!0})}))},makeActive:function(e,t,n){var i=this;s.GetAuthHeaderAsync().then((function(a){i.save({crewId:e,opName:"active"},{headers:a,success:t,fatalError:n,noRetryModal:!0})}))},acceptInvite:function(e,t,n,i){var a=this;s.GetAuthHeaderAsync().then((function(r){a.save({crewId:e,inviteId:t,opName:"join"},{headers:r,success:n,fatalError:i,noRetryModal:!0})}))},declineInvite:function(e,t,n,i){var a=this;s.GetAuthHeaderAsync().then((function(r){a.save({crewId:e,inviteId:t,opName:"del"},{headers:r,success:n,fatalError:i,noRetryModal:!0})}))},joinCrew:function(e,t,n){var i=this;s.GetAuthHeaderAsync().then((function(a){i.save({crewId:e,opName:"join"},{headers:a,success:t,fatalError:n,noRetryModal:!0})}))},requestInvite:function(e,t,n){var i=this;s.GetAuthHeaderAsync().then((function(a){i.save({crewId:e,opName:"requestInvite"},{headers:a,success:t,fatalError:n,noRetryModal:!0})}))},sendInvite:function(e,t,n,i){var a=this;s.GetAuthHeaderAsync().then((function(r){a.save({targetRockstarId:e,crewId:t,opName:"sendInvite"},{headers:r,success:n,fatalError:i,noRetryModal:!0})}))},deleteRequest:function(e,t,n,i){var a=this;s.GetAuthHeaderAsync().then((function(r){a.save({crewId:e,requestId:t,opName:"deleteRequest"},{headers:r,success:n,fatalError:i,noRetryModal:!0})}))}}),l.SearchCrewsCollection=t.Collection.extend({model:l.Crew,url:i.getApiUrl("/api/crew/searchcrews"),initialize:function(){this.pageNumber=0,this.isLoading=!1},parse:function(e){return e&&0!=e.Status&&null!=e.Crews?(this.FetchFail=!1,this.Total=e.Total,this.HasMore=e.HasMore,this.HasMaxCrewMemberships=e.HasMaxCrewMemberships,this.pageNumber=e.PageIndex+1,this.isLoading=!1,e.Crews):null}}),l}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i,a;i=[n(0),n(16),n(4)],void 0===(a=function(e,t,n){return t.Cache=function(){this.store={}},e.extend(t.Cache.prototype,t.Events,{set:function(e,t){this.trigger("set",e,t),this.store[e]=t},has:function(e){var t=!!this.store[e];return this.trigger("has",e,t),t},get:function(e){var t=this.store[e];return this.trigger("get",e,t),t},remove:function(e){var t=this.store[e];return this.trigger("remove",e,t),delete this.store[e],t},clear:function(){this.trigger("clear"),this.store={}}}),t.CachedCollection=t.Collection.extend({fetch:function(i){if(void 0===(i=i?n.clone(i):{}).parse&&(i.parse=!0),this.cacheKey&&this.cacheObject){var a=this.cacheObject,r=this.cacheKey;if(a.has(r)){var o=a.get(r),s=i.success,l=this;return i.success=function(e){var t=i.reset?"reset":"set";l[t](e,i),s&&s.call(i.context,l,e,i),l.trigger("sync",l,e,i)},i.success&&i.success.call(this,o,i),e.Deferred().resolve()}s=i.success;return i.success=function(e,t,n){a.set(r,t),s&&s(e,t,n)},t.Collection.prototype.fetch.call(this,i)}return t.Collection.prototype.fetch.call(this,i)}}),t.CachedModel=t.Model.extend({fetch:function(n){if(this.cacheKey&&this.cacheObject){n=n||{};var i=this.cacheObject,a=this.cacheKey,r=n.success;if(i.has(a)){var o=i.get(a);return this.set(this.parse(o,n),n),r&&r(this,o,n),e.Deferred().resolve()}return n.success=function(e,t,n){i.set(a,t),r&&r(e,t,n)},t.Model.prototype.fetch.call(this,n)}return t.Model.prototype.fetch.call(this,n)}}),t}.apply(t,i))||(e.exports=a)},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a class="leaveTrigger" data-id="'+e.escapeExpression(e.lambda(null!=t?r(t,"CrewId"):t,t))+'" href="#" rel="localize[LeaveCrew]">\n                    Leave Crew\n                </a>\n'},3:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a class="makeActive" data-id="'+e.escapeExpression(e.lambda(null!=t?r(t,"CrewId"):t,t))+'" href="#" rel="localize[MakeActiveCrew]">\n                    Make Active Crew\n                </a>\n'},5:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a class="join" data-id="'+e.escapeExpression(e.lambda(null!=t?r(t,"CrewId"):t,t))+'" href="#" rel="localize[Join]">\n                    Join\n                </a>\n'},7:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a class="join disabled" href="#" rel="localize[Join]" title="'+e.escapeExpression(e.lambda(null!=t?r(t,"MaxCrewsMsg"):t,t))+'">\n                    Join\n                </a>\n'},9:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a class="requestInvite" data-id="'+e.escapeExpression(e.lambda(null!=t?r(t,"CrewId"):t,t))+'" href="#" rel="localize[CrewRequestInvite]">\n                    Request Invite\n                </a>\n'},11:function(e,t,n,i,a){return'                <span class="requestPending" rel="localize[CrewRequestPending]">\n                    Request Pending\n                </span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,a,r){var o,s,l=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="crewCard featureCard lightCard">\n        <div class="'+c(l(null!=t?d(t,"CrewType"):t,t))+' crewType">\n\n            <img class="avatar" src="'+c((s=n(45),s&&(s.__esModule?s.default:s)).call(u,null!=t?d(t,"CrewId"):t,64,{name:"emblemUrl",hash:{},data:r,loc:{start:{line:4,column:37},end:{line:4,column:60}}}))+'" />\n\n            <h5>'+c(l(null!=t?d(t,"CrewName"):t,t))+"</h5>\n\n"+(null!=(o=e.invokePartial(n(41),t,{name:"common/templates/crew/crew_tag",data:r,indent:"            ",helpers:i,partials:a,decorators:e.decorators}))?o:"")+'\n            <p><span class="memberCount">'+c(l(null!=t?d(t,"MemberCount"):t,t))+'</span> <span rel="localize[Members]">members</span></p>\n        </div>\n\n        <div class="actions">\n            <div class="actions clearfix">\n'+(null!=(o=d(i,"if").call(u,null!=t?d(t,"CanLeave"):t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:15,column:16},end:{line:19,column:23}}}))?o:"")+(null!=(o=d(i,"if").call(u,null!=t?d(t,"CanMakeActive"):t,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:20,column:16},end:{line:24,column:23}}}))?o:"")+(null!=(o=d(i,"if").call(u,null!=t?d(t,"CanJoin"):t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:25,column:16},end:{line:29,column:23}}}))?o:"")+(null!=(o=d(i,"if").call(u,null!=t?d(t,"CanJoinDisabled"):t,{name:"if",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:30,column:16},end:{line:34,column:23}}}))?o:"")+(null!=(o=d(i,"if").call(u,null!=t?d(t,"CanRequestInvite"):t,{name:"if",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r,loc:{start:{line:35,column:16},end:{line:39,column:23}}}))?o:"")+(null!=(o=d(i,"if").call(u,null!=t?d(t,"IsJoinRequestPending"):t,{name:"if",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r,loc:{start:{line:40,column:16},end:{line:44,column:23}}}))?o:"")+"            </div>\n        </div>\n</div>"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var i;void 0===(i=function(){var e,t,n,i="undefined"!=typeof window&&window.document,a=!i,r=i?document:null,o=[];function s(){var e=o;a&&e.length&&(o=[],function(e){var t;for(t=0;t<e.length;t+=1)e[t](r)}(e))}function l(){a||(a=!0,n&&clearInterval(n),s())}if(i){if(document.addEventListener)document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1);else if(window.attachEvent){window.attachEvent("onload",l),t=document.createElement("div");try{e=null===window.frameElement}catch(e){}t.doScroll&&e&&window.external&&(n=setInterval((function(){try{t.doScroll(),l()}catch(e){}}),30))}"complete"===document.readyState&&l()}function c(e){return a?e(r):o.push(e),c}return c.version="2.0.1",c.load=function(e,t,n,i){i.isBuild?n(null):c(n)},c}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(4),a=n(6),r=n(1),o=n(28),s=n(22),l=n(10),c=n(7),u=n(173),d={};function f(e){var t=c.getErrorWithCode(e);l.showGenericFatalError(e,t.Message,t.SupportText)}return d.BindSteamAccount=function(e,n,i){r.WriteDebugLog("BindSteamAccount","steamAppId",e);var a=JSON.stringify(i);if(function(e,t,n,i){if(null==e||isNaN(e)||e<=0)return r.WriteDebugLog("BindSteamAccount","Undefined","steamAppId",r.logType.error,r.logController[r.getTitleName()]),f("5000.76"),!1;if(null==t||!t.length)return r.WriteDebugLog("BindSteamAccount","Undefined","steamAuthTicket",r.logType.error,r.logController[r.getTitleName()]),f("5000.77"),!1;if(null==i||null==i.ticket||!i.ticket.length)return r.WriteDebugLog("BindSteamAccount","Failed - Undefined values, signedInJson:",n,r.logType.error,r.logController[r.getTitleName()]),f("5000.51"),!1;return!0}(e,n,a,i))return u.bindSteamAccount(e,n,i.ticket).then((function(e){var n=e.data;if(!n||!n.Status)throw e;!function(e,n){t("#activation").removeClass("pending");var i=o.getLoginAccount();i&&i.Email&&s.setAutoSignInValues(e.AutoSignIn);r.pubsub.publish("signin.preSignInToGame",e)}(i)}))},d.SteamLinkPrompt=function(e){a.pubsub.trigger("steam:showActivationSteamLink",e)},d.getSteamNetworkAsync=function(e,t){r.WriteDebugLog("getSteamNetwork","rockstarId, ticket",e+","+t);var n={};return u.getSteamNetworkAsync(e,t).then((function(e){return r.WriteDebugLog("getSteamNetwork","success"),n=d.getSteamSuccess(e),r.WriteDebugLog("getSteamNetwork","jsonResult","string"==typeof n?n:JSON.stringify(n)),n})).catch((function(e){throw r.WriteDebugLog("getSteamNetwork","fatalError","",r.logType.error,r.logController[r.getTitleName()]),"fail"}))},d.getSteamSuccess=function(e){var t=e.data;if(!t)return r.WriteDebugLog("getSteamNetwork","No data in response","",r.logType.error,r.logController[r.getTitleName()]),{};var n=t.OnlineServiceAccounts;return r.WriteDebugLog("getSteamSuccess","networkAccounts.length",n.length),n.length<=0?{}:i.find(n,(function(e){return"steam"===e.OnlineService}))||{}},d}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i,a;i=[n(0),n(1),n(10),n(23),n(50),n(11),n(13),n(7),n(6),n(12),n(174)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c,u){var d={};function f(){var t;l.stopSpinner(e(".verificationInput span.waitMessage")).hide(),e("#mfaSubmitBtn").show(),e("#verification").attr("disabled",!1),e("#rememberDevice").attr("disabled",!1),(t=e("#mfaSignIn").find(".formSignIn.verify")).find("#verification").val("").attr("disabled",!1).removeClass("error"),t.find("#rememberDevice").attr("checked",!1).attr("disabled",!1).parents().eq(3).show(),e("#mfaSignIn .errorText").remove()}function p(){var t=!!e("#autoSignInProfile").is(":checked");t&&e("#rememberDevice").prop("checked",!0),e("#rememberMeProfile").is(":checked")?e("#rememberDevice").click((function(e){if(!e.currentTarget.checked&&t){var n=s.getTextCached("MfaRememberDeviceText","HomeSignIn"),i=s.getTextCached("MfaRememberDeviceTitle","HomeSignIn");c.ShowConfirmModal(n,"","",null,"Ok","",i,"")}})):e("#rememberDevice").parent().hide(),e("#mfaSignIn").find(".formSignIn.verify").show()}function h(){var n=JSON.parse(t.readCookie("scMfaSelectedDevice")),i=n?n.DeviceAddress:"",a="SMS"===(n?n.DeviceType:"")?s.getTextCached("MfaInstruction1","HomeSignin","").format(i):s.getTextCached("MfaInstruction2","HomeSignin","");e("#mfaSelectedDeviceMsg").text(a)}function g(){var t=e("#resendCodeContainer"),n=s.getError("MfaResetError","");t.html('<span id="mfaRecoveryText" class="errorText">'+n+"</span>")}function m(e,t){i.requestMfaCodeToDevice(e,t).then(v).catch(v)}function v(){var t;h(),(t=e("#mfaSignIn")).find("#mfaAlternativeContainer").hide(),p(),t.find("#resendCodeContainer").show(),e("#mfaSignIn .errorText").remove(),t.find("#verification").val("")}return d.showMfaCodeForm=function(){var c;c=e("#mfaSignIn"),n.showPanel(c),f(),h(),function(){var c=JSON.parse(t.readCookie("scMfaDevices")),d=JSON.parse(t.readCookie("scMfaSelectedDevice")),f=a.isShowDeviceList(c),p=a.isShowResendButton(c,d),h=e("#resendCodeContainer"),v=a.isAccountRecoveryAllowed();if(f)h.html('<p><a href="#" id="mfaSelectDevice">'+s.getTextCached("MfaUseAnotherDevice","HomeSignin","Use another device to sign in")+"</a></p>"),e("#mfaSelectDevice").click((function(n){n.preventDefault(),function(n){var i='{ "devices":'+JSON.stringify(n)+"}",a=t.renderCompiledTemplate(u,JSON.parse(i));e("#mfaAlternativeContainer").html(a).find("[rel*=localize]").localize("HomeSignin",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}).show(),e("#mfaSignIn").find(".formSignIn.verify").hide(),e("#resendCodeContainer").hide(),e("#mfaAlternativeContainer").show(),e(".useDevice").click((function(t){t.preventDefault();var n=e(t.currentTarget);m(e("#mfaEmail").text(),n.attr("data-id"))}))}(c)}));else if(p)h.html('<p><span class="btn btnPurple btnRounded btnSmall" id="mfaResendCode" data-id="'+d.Id+'" data-type="'+d.DeviceType+'" data-address="'+d.DeviceAddress+'">'+s.getTextCached("MfaResendCode","HomeSignin","Resend Code")+"</span></p><p>"+s.getTextCached("MfaSupportLink","HomeSignin","")+"</p>"),e("#mfaResendCode").click((function(e){e.preventDefault(),m()}));else{var b=v?"MfaAccountRecoveryLink":"MfaSupportLink";h.html('<p id="mfaRecoveryText">'+s.getTextCached(b,"HomeSignin","")+"</p>")}e(".mfaSupportLink").click((function(a){a&&a.preventDefault(),r.trackEvent(o.category.mfa,o.action.mfa_support_click),v&&(e("#mfaRecoveryText").remove(),i.requestMfaResetByEmail(e("#mfaEmail").text()).then((function(i){var a,r;(r=i.data)&&r.Status?e("#resendCodeContainer").html('<span id="mfaRecoveryText">'+s.getTextCached("RequestMfaResetSuccess","HomeSignin","")+"</span>"):r&&r.Error&&"Expired.MFACookie"===r.Error.Code?(a=s.getErrorWithCode("4000.115").Message,e("div.panel.active").removeClass("active"),n.requestUiState(!0),e("#signInEmailProfile").val(""),e("#signInPasswordProfile").val(""),n.clearActivePanel((function(){n.setUpLoadingPanel("#selectProfile",(function(){l.pubsub.trigger("signin.showSignin",t.isOnline(),!0),function(t){var n=e("div.signIn");n.find(".errorText").remove(),n.find(".SignInError").after('<span class="errorText">'+t+"</span>")}(a)}))}))):g()})).catch((function(){return g()})))}))}(),c.find("[rel*=localize]").localize("HomeSignin",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}).show(),function(e){var n=e.find("#rememberDevice").closest("fieldset");t.isSteam()?n.hide():n.show()}(c),p()},d.showMfaSigninError=function(t){f(),e("#mfaSignIn").find(".verificationInput").after('<span class="errorText">'+t+"</span>"),e("#verification").addClass("error").focus()},d.getMfaLoginData=function(){var t=e(".formSignIn.verify").find("#verification").val(),n=a.validateMfaCode(t);return n.isValid?a.getMfaLoginData(t,e("#rememberDevice").is(":checked")):(d.showMfaSigninError(s.getError(n.errorMsg)),!1)},d.setMfaLoadingState=function(){l.initSpinner(e(".verificationInput span.waitMessage")).fadeIn(),e("#mfaSubmitBtn").hide(),e("#verification").attr("disabled",!0),e("#rememberDevice").attr("disabled",!0)},d}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i=n(8),a=n(28),r=n(11),o=n(13),s=n(40),l={modifyProfile:function(e){return i.CallGameMethodAsync("RGSC_MODIFY_PROFILE",e,"RGSC_MODIFY_PROFILE_DEMO").then((function(){t.pubsub.publish("settings.modifyProfileComplete")}))},updateAutoSignIn:function(e){var t={AutosignIn:e};return e&&(t.SaveEmail=!0),l.modifyProfile(t).then((function(e){return a.clearCachedProfileList(),e}))},updateSaveEmail:function(e){r.trackEvent(o.category.settings,o.action.settings_profile_edit_save_email);var t={SaveEmail:e};return e||(t.AutosignIn=!1),l.modifyProfile(t).then((function(e){return a.clearCachedProfileList(),e}))},updateGlobalAccountAge:function(e,t){var n;(n=a.isLoginAccountAvailable()?a.getLoginAccount():globals.account)&&null!=e&&(n.Age=e,n.Minor=t)},updateGlobalAccountCountry:function(e){var t;(t=a.isLoginAccountAvailable()?a.getLoginAccount():globals.account)&&"string"==typeof e&&e.length>0&&(t.CountryCode=e,t.Country=e)},updateSetting:function(e,n,a,r,o,c,u){l.updateSettingAnalytics(e,n,a);var d="enabled"===n;switch(o){case"cloud":return u=u||t.getTitleName(),i.updateCloudSavesEnabledSetting(d,u);case"autoSignin":return l.updateAutoSignIn(d);case"hideNotifications":return s.setItem("hideNotifications",d),Promise.resolve();default:return c()}},updateSettingAnalytics:function(e,t,n){var i;switch(e.toLowerCase()){case"sc":i=o.action.settings_privacy_change_profile_visibility;break;case"profile_location":i=o.action.settings_privacy_change_country_visibility;break;case"gameplay_visibility":i=o.action.settings_privacy_change_stats_visibility;break;case"presencevisibility":i=o.action.settings_game_change_presence_visibility;break;case"radiocloudsave":i=o.action.settings_game_change_cloud_save_enabled;break;case"radiohidenotifications":i=o.action.settings_profile_edit_hide_notifications;break;case"radioautosignin":i=o.action.settings_profile_edit_auto_sign_in;break;default:i=o.action.settings_privacy_change_platform_visibility}var a={setting:e,oldValue:n,newValue:t};r.trackEvent(o.category.settings,i,a)}};return l}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(4),o=n(18),s=n(10),l=n(22),c=n(20),u=n(7),d=n(12),f=n(14),p=n(11),h=n(13);n(48),n(39),n(19);var g={};function m(e,n){if(!e.Status||"0"===e.Status)return!1;var i=t(n?".sendReply":".sendMessage");t(".newMessageEntry").val(""),t(".characterCount").text("250"),i.addClass("disabled"),t("#newMessageName").val(""),t("#friendsSearch #newMessageName").attr("data-rockstarId",""),n?p.trackEvent(h.category.message,h.action.message_reply):p.trackEvent(h.category.message,h.action.message_send);var a=t("#cancelMessage");return a.hasClass("backFriendLink")?(a.removeClass("backFriendLink"),t("#cancelMessage, #newMessageInput").hide(),s.setUpLoadingPanel("#"+a.data("returnPanel"),(function(){s.removeLoading(a.data("returnPanel"))}))):n?(t("#messageThread").data("PageIndex",0),C()):(t("#menuMessages").click(),t("#cancelMessage, #newMessageInput").hide(),t("#newMessage").show()),!0}function v(e,n){var i=t(n?".sendReply":".sendMessage");e||i.removeClass("disabled"),t("#cancelMessage").removeClass("disabled")}function b(e,n,r,o){a.WriteDebugLog("ProcessMessageThread","Id, Url, Nick",e+","+n+","+r),t(".load_messages").removeClass("active");var l=t("#messageThread");t("div").find("[data-nickname='"+l.data("data-nickname")+"']").addClass("active"),t("#MessageThreadHeader .profilenickname").text(r),t("#MessageThreadHeader .reply, #MessageThreadHeader .backFriendLink").attr({"data-id":e,"data-avatar":n,"data-nickname":r});var m=t("#messagesPanel");t("#newMessageInput").is(":visible")||m.attr("class","panel active messageThread"),t("#messagesPanel div.content").removeAttr("style"),a.WriteDebugLog("GetMessageThread","data",t(o).find("Message").text());var v=r,b=n,S=t("#imgEditSelectedAvatar").attr("src");t("#messagesPanel .help-block").text("");var y=m.find("#messageThreadList"),E="",w=[],k=u.getTextCached("Confirm","Social");y.find("#loadMoreMessages").remove(),t(o).find("Message").each((function(){var n;try{n=t.trim(i.jhtmlEncode(decodeURIComponent(t(this).find("Text").text())))}catch(e){n=t.trim(i.jhtmlEncode(t(this).find("Text").text()))}0==n.length&&(n="&nbsp;");var a=t(this).find("CreatedOn").text(),r=f.utc(a).local().fromNow(),o=f.utc(a).local().format("LLL"),s="",l=t(this).find("AuthorId").text(),c=t(this).find("ID").text(),u="TRUE"==t(this).find("Read").text().toUpperCase();u||(s="new"),l==e?(E+='<div id="messageId'+c+'" class="message msgFrom '+s+'">',u||(E+='<a class="ribbon">NEW</a>',w.push(c)),E+='<img width="64" height="64" class="avatarImg" alt="'+v+'" src="'+b+'"><div class="messageContent"><div class="messageBody">'+n+'</div><span class="timestamp" title="'+o+'">'+r+'</span><a class="icon-cross icon-30pct delete" title="'+k+'">'+k+'</a></div><span class="arrow"></span></div>'):(E+='<div id="messageId'+c+'" class="message msgTo '+s+'">',u||(E+='<a class="ribbon">NEW</a>'),E+='<img width="64" height="64" class="avatarImg" alt="'+v+'" src="'+S+'"><div class="messageContent"><div class="messageBody">'+n+'</div><span class="timestamp" title="'+o+'">'+r+'</span><a class="icon-cross icon-30pct delete" title="'+k+'">'+k+'</a></div><span class="arrow"></span></div>')})),y.append(E),y.find(".avatarImg").on("error",i.avatar404),E=null;var _="<div id='loadMoreMessages' class='btn btnGrey'>"+u.getTextCached("LoadOlderMessages","Social","Load older messages")+"</div>";(void 0===t("#messageThread").data("total")||y.find(".message").length<t("#messageThread").data("total"))&&y.append(_),y.find("#loadMoreMessages").click((function(){if(void 0===t("#messageThread").data("total")||y.find(".message").length<t("#messageThread").data("total")){var e=parseInt(t("#messageThread").data("PageIndex"),10);t("#messageThread").data("PageIndex",++e),C()}})),t("#replyMessageInput #replyToNickname").html(v),t("#replyMessageInput #replyToNickname").attr("data-rockstarId",e),t("#replyMessageInput textarea").val(""),t("#replyMessageInput span.characterCount").text("0"),t("#replyMessageInput").show(),t("#newReplyEntry").show(),a.inGamePadMode()||t("#newReplyEntry").focus(),w.length>0&&function(e,n){c.MarkMessagesReadJS(e.join(",")).then((function(e){e&&t(e).find("Status")&&("true"!==t(e).find("Status").text()?a.WriteDebugLog("MarkMessagesReadJS","Status error",t(e).find("Error").attr("ErrorMessage")):g.getMessageCount(n))})).catch((function(e){a.WriteDebugLog("MarkMessagesReadJS","ERROR",e.error),a.WriteDebugLog("MarkMessagesReadJS","ERROR status",e.status),a.WriteDebugLog("MarkMessagesReadJS","ERROR responseText",e.request.responseText,a.logType.error,a.logController.messaging)}))}(w,globals.account.RockstarId),w=null,k=null,y.find("a.delete").unbind("click").bind("click",(function(){return function e(n){var i=t("#"+n+" .messageContent"),a=i.html();Promise.all([u.getTextAsync("DeleteConfirm","Social","Are you sure you want to delete this message?"),u.getTextAsync("ConfirmButtonText","Social"),u.getTextAsync("Cancel","HomeSignin")]).then((function(r){var o=r[0],s=r[1],l=r[2];i.addClass("deleteConfirm"),i.html("<span>"+o+'</span><a class="btn btnRed btnRounded confirm">'+s+'</a><a class="btn btnGrey btnRounded cancel">'+l+"</a>"),i.find("a.cancel").unbind("click").bind("click",(function(){i.html(a),i.removeClass("deleteConfirm"),i.find("a.delete").unbind("click").bind("click",(function(){return e(n),!1}))})),i.find("a.confirm").unbind("click").bind("click",(function(){c.deleteMessage(n,d.ShowErrorModal).then((function(e){"true"===t(e).find("Status").text()&&(p.trackEvent(h.category.message,h.action.message_delete),t("#"+n).fadeOut((function(){t(this).remove(),t("#messageThread").data("antiscroll").refresh(),""===t("#messageThreadList").html()&&u.getTextAsync("NoMessages","Social").then((function(e){t("#messageThreadList").append('<div class="emptyContainer"><p>'+e+"</p></div>")})).catch().then((function(){t("#replyMessageInput").hide();var e=t("#messagesList .box .antiscroll-inner"),n=t("#replyToNickname").attr("data-rockstarid");e.find("[data-id='"+n+"']").remove();var i=e.children(":first");if(i.length){var a=t("#messageThread");a.data("data-id",i.attr("data-id")),a.data("data-avatar",i.attr("data-avatar")),a.data("data-nickname",i.attr("data-nickname")),a.data("PageIndex",0),C()}}))}))),t("#checkName").fadeOut()})).catch().then((function(){n=null})),i.removeClass("deleteConfirm"),u.getTextAsync("DeletingMessage","Social","Please wait...deleting message").then((function(e){i.html(e)}))}))}))}(t(this).parents(".message").attr("id")),!1})),s.resetScrollbar("#messageThread"),t("#newMessage").show(),globals.MessagesLoading=!1}function C(){var e=t("#messageThread"),n=e.data("data-id"),i=e.data("data-avatar"),a=e.data("data-nickname"),r=e.data("PageIndex");void 0===r&&(r=0,e.data("PageIndex",r)),0===r&&t("#messageThreadList").empty(),s.setUpLoadingPanel("#messagesPanel"),c.GetMessageThread(n,i,a,r).then((function(e){if("true"===t(e).find("Status").text()){var r=parseInt(t(e).find("Messages").attr("Total"),10);t("#messageThread").data("total",r),b(n,i,a,e)}t("#checkName").fadeOut()})).catch().then((function(){s.removeLoading("messagesPanel")}))}g.init=function(){var e=t("#newReplyEntry"),n=t(".newMessageEntry");e.keyup((function(e){var n=t(e.currentTarget);if(n.visible())if(i.trimValueIfExceedMaxLength(n),13!=e.which){var r=a.countCharacters(t(this).val());E(r)}else t(".sendReply").click()})),e.focusout((function(){var e=a.countCharacters(t(this).val());E(e)})),n.keyup((function(e){var n=t(e.currentTarget);if(n.visible())if(i.trimValueIfExceedMaxLength(n),13!=e.which){var r=a.countCharacters(t(this).val());t("#messagesContainer").find(".characterCountWrapper span.characterCount").text(r),s.EnableSendMessageButton(r)}else t(".sendMessage").click()})),n.focusout((function(){var e=a.countCharacters(t(this).val());t("#messagesContainer").find(".characterCountWrapper span.characterCount").text(e),s.EnableSendMessageButton(e)})),t("#messagesPanel #cancelMessage").click((function(e){e&&e.preventDefault();var n=t(this);if(!globals.isLauncher&&!n.hasClass("disabled")){var i=t("#newMessageName");i.val(""),i.attr("data-rockstarId","");var a=t("#newMessageInput");if(a.find("textarea").val(""),a.find("span.characterCount").text("0"),t("#messagesPanel .help-block").text(""),t(".sendMessage").addClass("disabled"),t("#newMessageInput, #cancelMessage").hide(),n.hasClass("backFriendLink"))return n.removeClass("backFriendLink"),void s.showPanel(t("#"+n.data("returnPanel")));t("#messagesList, #messageThread, #newMessage").show()}})),t("#newMessageToPlayer").find(".back").click((function(e){if(e&&e.preventDefault(),!globals.isLauncher){var n=t(this),i=n.attr("data-id"),a=n.attr("data-avatar"),r=n.attr("data-nickname");c.GetMessageThread(i,a,r).then((function(e){if("true"===t(e).find("Status").text()){var n=parseInt(t(e).find("Messages").attr("Total"),10);t("#messageThread").data("total",n),b(i,a,r,e)}t("#checkName").fadeOut()})).catch().then((function(){s.removeLoading("messagesPanel")}))}})),t("#MessageThreadHeader").find("a.reply").click((function(e){if(e&&e.preventDefault(),!globals.isLauncher){var n=t(this);g.openNewMessage(n.attr("data-id"),n.attr("data-avatar"),n.attr("data-nickname"))}})),t("#newMessageName").keydown((function(e){return 13!=e.keyCode&&32!=e.keyCode})),t(".sendReply").keyup((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})).click((function(e){e&&e.preventDefault();var n=t(this);if(!n.hasClass("disabled")){var i=t("#replyMessageInput"),a=encodeURIComponent(t("#replyMessageInput .newMessageEntry").val().trim());if(0!=a.length){i.find(" .input .help-block").text("");var r=t("#replyToNickname").attr("data-rockstarId");if(null!=r){n.addClass("disabled");c.SendMessage(r,a,!0).then((function(e){return m(e,!0)})).catch((function(){return!1})).then((function(e){return v(e,!0)}))}}else i.find(" .input .help-block").text(u.getError("MessageMissing"))}})),t(".sendMessage").keyup((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})).click((function(e){e&&e.preventDefault();var n=t(this);if(!n.hasClass("disabled")){var i=t("#friendsSearch").find("#newMessageName"),a=i.attr("data-rockstarId");if(a!==globals.account.RockstarId){var r,o=encodeURIComponent(t("#newMessageInput .newMessageEntry").val().trim()),s=t("#newMessageInput .input .help-block");0==o.length?(s.text(u.getError("MessageMissing")),r=!0):s.text("");var l=i.val(),f=t("#friendsSearch .help-block");if(""==l||null==a||""==a?(f.text(u.getError("NicknameMissing")),r=!0):f.text(""),!r){n.addClass("disabled"),t("#cancelMessage").addClass("disabled");c.SendMessage(a,o,!1).then((function(e){return m(e,!1)})).catch((function(){return!1})).then((function(e){return v(e,!1)}))}}else{var p=u.getTextCached("MessageBlocked3","Social"),h=u.getTextCached("SendMessageTitle","Social");d.ShowConfirmModal(p,"","",null,"Ok",null,h)}}}))},g.getMessageCount=function(e){return c.getMessageCount(e).then((function(e){if("true"===t(e).find("Status").text()){var n=t(e).find("Unread").text();a.WriteDebugLog("getMessageCount","unreadMessageCount",n),"0"!==n?u.getTextAsync("New","Social").then((function(e){var i=n+" "+e;t("#menuMessages span.count").html(i)})):t("#menuMessages span.count").html("")}t("#checkName").fadeOut()}))},g.showMessagesPage=function(){t("#headerLoginOptionsDrop").is(":visible")&&t("#headerLoginOptionsButton").click();var e=t("#messagesPanel"),n=e.hasClass("active");s.setSelected(t("#menuMessages")),s.isSignedIn()?(t("#messageThreadList").empty(),t("#replyMessageInput, #newMessageInput, #cancelMessage").hide(),t("#messagesList .box .antiscroll-inner").empty(),t("#messagesList").removeData(),t("#messageThread").removeData(),t("#cancelMessage").removeClass("backFriendLink"),t("#newMessageName").removeData().val(""),t("#newMessage").show(),g.messagesListQuery(),"en-US"!=globals.titlelang&&(e.hasClass("localized")||(e.find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),e.addClass("localized"))),e.find("div.antiscroll-wrap").antiscroll()):l.navigatePendingSignIn("#menuMessages"),n||p.trackPage("/Messages")},g.messagesListQuery=function(){var e=t("#messagesPanel");s.closeModalsAndHideMenu(),e.find("div.content").removeAttr("style"),t("#messagesHeader").show(),s.setUpLoadingPanel("#messagesPanel",(function(){e.attr("class","panel active messages");var n=t("#messagesList").data("PageIndex");void 0===n&&(n=0,t("#messagesList").data("PageIndex",n));var r=globals.account.RockstarId;c.getMessages(r,n,d.ShowErrorModal).then((function(e){e&&t(e).find("Status")&&"true"===t(e).find("Status").text()&&(t("#messagesList").data("total",t(e).find("UserList").attr("TotalUserCount")),function(e){var n="",r=0,l=0,c=t("#messagesList .box .antiscroll-inner"),d=c.find("div").length;t(e).find("MessageUser").each((function(e){var i=t(this),s=i.find("RockstarId").text(),c=i.find("ScNickname").text(),u=i.find("Messages").attr("LastReceivedOn"),p=f.utc(u).local().fromNow(),h=a.getLastStringSegment(i.find("AvatarUrl").text(),"/",2);h=o.getAvatarUrl(h,c);var g=i.find("RockstarId").text(),m=parseInt(i.find("Messages").attr("Total"),10),v=parseInt(i.find("Messages").attr("Unread"),10);r+=m,l+=v;var b=void 0;if(v>0&&(b="new"),0===e&&0===d){var C=t("#messageThread");C.data("data-id",g),C.data("data-avatar",h),C.data("data-nickname",c)}n+='<div tabindex="0" id="user'+s+'" class="message load_messages profileButton '+b+'" data-nickname="'+c+'" data-avatar="'+h+'" data-id="'+g+'">',b&&(n+='<span class="ribbon">NEW</span>'),n+='<img width="32" height="32" class="avatarImg" alt="'+g+'" src="'+h+'"><div class="text"><h5 class="profilenickname">'+c+'</h5></div><div class="footer"><span class="received">'+p+"</span></div></div>"})),""===n?u.getTextAsync("NoMessages","Social").then((function(e){c.empty().append('<div class="emptyContainer"><p>'+e+"</p></div>")})):(c.find("#loadMore").remove(),c.append(n));r>0&&0==t("#messagesList").data("PageIndex")&&C();t("#messageCount").html(r),t("#unreadMessageCount").html(l),0==l&&(l="");t("#messagesLink").find("span.count").html(l),c.find(".avatarImg").on("error",i.avatar404),e=null,n=null,r=null,l=null,s.removeLoading("messagesPanel"),t("#messagesList").data("antiscroll").refresh(),u.getTextAsync("LoadOlderThreads","Social","Load older threads").then((function(e){var n="<div tabindex='0' id='loadMore'>"+e+"</div>";null!=t("#messagesList").data("total")&&t("#messagesList .message").length<t("#messagesList").data("total")-1&&t("#messagesList .box .antiscroll-inner").append(n)})).catch().then((function(){c.find("#loadMore").unbind("click").bind("click",(function(){if(void 0===t("#messagesList").data("total")||t("#messagesList .box .antiscroll-inner .message").length<t("#messagesList").data("total")){var e=parseInt(t("#messagesList").data("PageIndex"),10);t("#messagesList").data("PageIndex",++e),g.messagesListQuery()}})),c.find("#loadMore").unbind("keyup").bind("keyup",(function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})),c.find(".load_messages").unbind("click").bind("click",(function(e){if(e.preventDefault(),t(this).is(".active"))return!1;t("#replyMessageInput").hide(),t("#messageThreadList").empty();var n=t("#messageThread");n.data("data-id",t(this).attr("data-id")),n.data("data-avatar",t(this).attr("data-avatar")),n.data("data-nickname",t(this).attr("data-nickname")),n.data("PageIndex",0),C()})),c.find(".load_messages").unbind("keyup").bind("keyup",(function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()}))}))}(e)),t("#checkName").fadeOut()})).catch((function(e){a.WriteDebugLog("messagesListQuery","error",e)})).then((function(){t("#messagesPanel").find("div.content").removeAttr("style")}))}))},g.openNewMessage=function(e,n,o,l){if(a.WriteDebugLog("openNewMessage","returnPanel-xxx",l),!globals.messagingServiceEnabled)return t("#homeButton").click(),void i.pubsub.trigger("setupEnv:showServiceAlert");var d=null!=l&&""!=l,f=t("#messagesPanel"),p=f.find("#cancelMessage"),h=f.find("#newMessageName"),g=f.find("#newMessageEntry");d&&(p.addClass("backFriendLink").data("returnPanel",l),h.val(o).attr("data-rockstarId",e)),f.hasClass("active")||s.setUpLoadingPanel("#messagesPanel",(function(){d?g.focus():h.focus()})),g.val(""),f.find("#newMessageInput span.characterCount").text("0"),f.find(".sendMessage").addClass("disabled"),f.find(".help-block").text(""),f.find("div.content").removeAttr("style"),s.setSelectedSide("#messagesLink"),a.WriteDebugLog("openNewMessage","#newMessageInput style",t("#newMessageInput").attr("style")),f.find("#newMessageInput h5").html(u.getTextCached("SendMessageTitle","Social","Send a new message")),t("#cancelMessage, #newMessageInput").show(),t("#newMessage").hide(),f.attr("class","panel active messageFriendSearch"),"en-US"!=globals.titlelang&&(f.hasClass("localized")||(f.find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),f.addClass("localized"))),h.hasClass("ui-autocomplete-input")||h.autocomplete({source:function(e,n){c.accountSearch(e,n,t("#newMessageName").val(),y).then((function(e){S(e,n)})).catch((function(e){a.WriteDebugLog("msg.openNewMessage accountSearch","unhandled exception",JSON.stringify(e),a.logType.error,a.logController.messaging)}))},appendTo:".ui-widget",minLength:3,messages:{noResults:"",results:function(){}},select:function(e,n){e.preventDefault();var a=t("#newMessageName");if(n&&n.item&&"BlockedByMe"===n.item.relationship)a.attr("data-rockstarId",""),a.val(""),i.pubsub.trigger("datafnfriends:RedirectToBlockList",n.item.label);else{a.val(n&&n.item&&n.item.label),a.attr("data-rockstarId",n&&n.item&&n.item.id);var r=0+encodeURIComponent(t("#newMessageEntry").val()).length;s.EnableSendMessageButton(r)}},change:function(){var e=t("#newMessageName");if(void 0===e.data("rockstarId")){var n=t("#newMessageName").siblings(".ui-widget");if(n.children("li").length>0){var i=n.find("li:contains("+e.val()+")");if(!i.length)return;var a=i.data("ui-autocomplete-item");e.val(a.value),e.attr("data-rockstarId",a.id)}}}}),h._renderItem=function(e,n){if(!r.include(self.idArr,n.id))return t("<li></li>").data("ui-autocomplete-item",n).append("<a>"+n.name+"</a>").appendTo(e)},s.removeLoading("messagesPanel")},g.disableMessagingFeatures=function(){t("#menuMessages").parent("li").hide()};var S=function(e,n){t("#msgFriendSearchForm .help-block").html(""),n(t.map(e.Accounts,(function(e){return{label:e.Nickname,value:e.Nickname,id:e.RockstarId,relationship:e.Relationship}})))},y=function(e){if(e.errorCode===a.errorCode("5005")){var n=t("#msgFriendSearchForm"),i=u.getError("NickInvalid");return n.find(".help-block").html(i),void n.find(".ui-autocomplete").hide()}d.ShowErrorModal(e)},E=function(e){e>0?t(".sendReply").removeClass("disabled"):t(".sendReply").addClass("disabled")};return i.pubsub.on("msg.openNewMessage",g.openNewMessage),i.pubsub.on("virtualKeyboard:keyboardResult",(function(e){null!=e&&"newMessageName"===e.attr("id")&&""!==e.val()&&e.hasClass("ui-autocomplete-input")&&e.autocomplete("search")})),g}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(10),o=n(15),s=n(56),l=n(35),c=n(80),u=n(40),d=n(18),f=n(7),p=n(8),h=n(11),g=n(13),m={};function v(e,n){(a.WriteDllLog("RGSC_JS_NOTIFICATION","jsonNotifications",n),n=t.parseJSON(n||"null"))?(t("#headerWrapper").length>0?a.isScuiVisible()?r.isHeaderMenuVisible()?t("#notificationPanel").css("top",t("#header").height()):a.WriteDebugLog("handleNotification","header","enabled/hidden or off-screen"):r.hideUI():a.WriteDebugLog("handleNotification","header","not in HTML"),n.Count>0?t.each(n.Notifications,(function(e,n){switch(n.Type.toUpperCase()){case"NETWORK":h.trackEvent(g.category.notifications,g.action.notification_Network),r.setOffline(!n.Online);break;case"ACHIEVEMENTS":case"GAMEINVITES":case"MESSAGERECEIVED":case"FRIENDSTATUS":case"FRIENDREQUESTRECEIVED":case"FRIENDREQUESTACCEPTED":case"INFORMATION":case"INFORMATIONNOCLICK":case"DOWNLOADSTATUS":case"WELCOME":case"SIGNEDIN":case"DUPLICATESIGNEDOUT":case"FRIENDREQUESTS":case"FRIENDSONLINE":case"ROS.CLAN.INVITE":case"JOINREQUEST":case"ROS.CLAN.MEMBER.PROMOTED":case"CONNECTIONLOST":!function(e){if(!e||e.Count<=0||!e.Data)return;a.WriteDebugLog("showNotification","type",e.Type),f.getTextAsync("MessageReceived","Notifications").then((function(){var n=function(e){var n={notifyImage:"",eventClass:"",clickClass:"",notificationTitle:"",updateCounts:!1,notificationType:"",activePanelName:t("div.active.panel").attr("id")};void 0!==e.Type&&(n.notificationType=e.Type.toUpperCase());switch(n.notificationType){case"ACHIEVEMENTS":h.trackEvent(g.category.notifications,g.action.notification_Achievements),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/achievement.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyAchievements",n.notificationTitle=f.getTextCached("Accomplishment","Notifications");break;case"FRIENDREQUESTRECEIVED":h.trackEvent(g.category.notifications,g.action.notification_FriendRequestReceived),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/friendrequest.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyFriendRequests",n.notificationTitle=f.getTextCached("FriendRequest","Notifications"),"friendsPanel"==n.activePanelName&&t("div.active.panel.friendInvites").length?t("#friendInvitesLink").removeClass("on").click():n.updateCounts=!0;break;case"FRIENDREQUESTACCEPTED":h.trackEvent(g.category.notifications,g.action.notification_FriendRequestAccepted),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/friendrequest.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyFriendRequests",n.notificationTitle=f.getTextCached("FriendRequestAccepted","Notifications"),"friendsPanel"==n.activePanelName&&t("div.active.panel.myFriends").length&&t("#myFriendsLink").removeClass("on").click();break;case"FRIENDSTATUS":n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/friendsonline.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyFriends",n.notificationTitle=f.getTextCached("FriendOnline","Notifications");break;case"MESSAGERECEIVED":h.trackEvent(g.category.notifications,g.action.notification_MessageReceived),globals.account&&c.getMessageCount(globals.account.RockstarId),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/message.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyMessages",n.notificationTitle=f.getTextCached("MessageReceived","Notifications");var i=t("#newMessageInput").is(":visible"),a=""!=t("#newReplyEntry").val().trim();"messagesPanel"!=n.activePanelName||globals.MessagesLoading||i||a||(globals.MessagesLoading=!0,t("#menuMessages").click());break;case"GAMEINVITES":h.trackEvent(g.category.notifications,g.action.notification_GameInvites),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/invite.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyGameInvites",n.notificationTitle=f.getTextCached("MultiplayerInvite","Notifications"),"friendsPanel"==n.activePanelName&&t("div.active.panel.gameInvites").length?t("#gameInvitesLink").removeClass("on").click():n.updateCounts=!0;break;case"INFORMATION":h.trackEvent(g.category.notifications,g.action.notification_Information),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/information.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyInfo",n.notificationTitle=f.getTextCached("Information","Notifications");break;case"INFORMATIONNOCLICK":h.trackEvent(g.category.notifications,g.action.notification_Information),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/information.png' alt='' width='48' height='48'/>",n.notificationTitle=f.getTextCached("Information","Notifications");break;case"DOWNLOADSTATUS":h.trackEvent(g.category.notifications,g.action.notification_DownloadStatus),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/information.png' alt='' width='48' height='48'/>",n.notificationTitle=f.getTextCached("DownloadStatus","Notifications");break;case"WELCOME":n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/information.png' alt='' width='48' height='48'/>",n.notificationTitle=f.getTextCached("Information","Notifications");break;case"SIGNEDIN":n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/friendsonline.png' alt='' width='48' height='48'/>",n.notificationTitle=f.getTextCached("Information","Notifications");break;case"DUPLICATESIGNEDOUT":h.trackEvent(g.category.notifications,g.action.notification_DuplicateSignedOut),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/information.png' alt='' width='48' height='48'/>",n.notificationTitle=f.getTextCached("Information","Notifications");break;case"FRIENDREQUESTS":h.trackEvent(g.category.notifications,g.action.notification_FriendRequests),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/friendrequests.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyFriendRequests",n.notificationTitle=f.getTextCached("FriendRequest","Notifications");break;case"FRIENDSONLINE":h.trackEvent(g.category.notifications,g.action.notification_FriendsOnline),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/friendsonline.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyFriends",n.notificationTitle=f.getTextCached("FriendOnline","Notifications");break;case"ROS.CLAN.INVITE":h.trackEvent(g.category.notifications,g.action.notification_RosClanInvite),o.ClearProxyCache(),r.UpdateSocialSideMenuCount("add","#crewInvitesLink",!1),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/crewinvite.png' alt='' width='48' height='48'/>",n.clickClass=" clickable",n.eventClass=" notifyClanInvite",n.notificationTitle=f.getTextCached("CrewInviteNotification","Notifications");break;case"JOINREQUEST":h.trackEvent(g.category.notifications,g.action.notification_JoinRequest),n.clickClass=" clickable",n.eventClass=" notifyClanRequest";break;case"ROS.CLAN.MEMBER.PROMOTED":h.trackEvent(g.category.notifications,g.action.notification_RosClanMemberPromoted),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/crewinvite.png' alt='' width='48' height='48'/>";break;case"CONNECTIONLOST":h.trackEvent(g.category.notifications,g.action.notification_ConnectionLost),n.notifyImage="<img class='avatar' src='"+globals.baseUrl+"images/notifications/information.png' alt='' width='48' height='48'/>",n.notificationTitle=f.getTextCached("Information","Notifications")}return n}(e);n.updateCounts&&p.CallGameMethod("RGSC_REQUEST_PLAYER_LIST_COUNTS",'{ "RequestId": 5 }',"RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE_DEMO");var s=[],m=!1;t.each(e.Data,(function(e,o){var l=function(e,n,o){var s="",l="",c=0;switch(o.notificationType){case"ACHIEVEMENTS":try{o.notifyImage="<img class='avatar' src='"+r.GetAchievementImage(n.Id)+"' alt='' width='48' height='48'/>"}catch(e){a.WriteDebugLog("addNotificationToDom","ACHIEVEMENTS","Unable to get achievement image")}s=n.Description,l=null!=n.Name?"<span class='name'>"+n.Name+"</span><br />":"";break;case"DOWNLOADSTATUS":s=f.getTextCached("i"+n.Message,"Notifications"),l=null!=n.Name?"<span class='name'>"+n.Name+"</span><br />":"";break;case"FRIENDREQUESTRECEIVED":null==n.Nickname||null==n.Nickname||""==n.Nickname?s=f.getTextCached("FriendRequestReceivedGeneric","Notifications"):(l="<span class='name'>"+n.Nickname+"</span><br />",s=f.getTextCached("FriendRequestReceived","Notifications"));break;case"FRIENDREQUESTACCEPTED":l=null!=n.Nickname?"<span class='name'>"+n.Nickname+"</span><br />":"",s=f.getTextCached("FriendRequestAccepted","Notifications");break;case"FRIENDSTATUS":if(l=null!=n.Nickname?"<span class='name'>"+n.Nickname+"</span><br />":"",n.AvatarUrl&&""!=n.AvatarUrl){var h=d.getAvatarUrl(n.AvatarUrl,n.Nickname);o.notifyImage="<img class='avatar' src='"+h+"' alt='' width='48' height='48'/>"}if(n.IsOnline?s=f.getTextCached("FriendOnlineStatus","Notifications"):(s=f.getTextCached("FriendOfflineStatus","Notifications"),o.notificationTitle=f.getTextCached("FriendOffline","Notifications")),"friendsPanel"==o.activePanelName&&t("div.active.panel.myFriends").length){var g="offline";n.IsOnline&&(g="online"),t("#friendsList").find(".profileButton[data-id='"+n.RockstarId+"']").removeClass("online offline").addClass(g)}if(n.RockstarId){var m,v;n.IsOnline?(m="SCOnline",v=f.getTextCached("Online","Social"),n.IsPlayingSameTitle&&(c=n.RockstarId)):(m="SCOffline",v=f.getTextCached("Offline","Social"));var b=t("#landingFriendsList"),C=b.children("li"),S=b.find('[data-id="'+n.RockstarId+'"]');S.find("i.status").removeClass("SCOnline SCOffline").addClass(m),S.find(".subText span").text(v),C.sort((function(e,n){var i=t(e),a=t(n),r=i.find(".status").hasClass("SCOnline"),o=a.find(".status").hasClass("SCOnline");if(r&&!o)return-1;if(o&&!r)return 1;var s=i.find(".profilenickname").text(),l=a.find(".profilenickname").text();return s.localeCompare(l)})),C.detach().appendTo(b),i.pubsub.trigger("datafnfriends:ClearFriendsCache",n.RockstarId)}break;case"GAMEINVITES":s=f.getTextCached("MultiplayerInviteReceived","Notifications"),l=null!=n.Nickname?"<span class='name'>"+n.Nickname+"</span><br />":"";break;case"WELCOME":var y="i"+n.Message;if(t.isNumeric(n.NumControllers))if(parseInt(n.NumControllers,10)>0){var E=a.gamePadLocalizationSuffix(n.ControllerTypes)||"GamePad";y+=E}s="dev"===globals.rosEnvironment?"[DEV] "+f.getTextCached(y,"Notifications"):f.getTextCached(y,"Notifications");break;case"MESSAGERECEIVED":s=f.getTextCached("PrivateMessageReceived","Notifications"),l=null!=n.Nickname?"<span class='name'>"+n.Nickname+"</span><br />":"";break;case"ROS.CLAN.INVITE":l=null!=n.cn?"<span class='name'>"+n.cn+"</span><br />":"",s=f.getTextCached("CrewInvite","Notifications");break;case"JOINREQUEST":l=null!=n.cn?"<span class='name'>"+n.cn+"</span><br />":"",s=f.getTextCached("CrewRequest","Notifications");break;case"ROS.CLAN.MEMBER.PROMOTED":l=null!=n.cn?"<span class='name'>"+n.cn+"</span><br />":"",s=f.getTextCached("CrewMemberPromoted","Notifications");break;case"CONNECTIONLOST":s=f.getTextCached("ConnectionLost","Notifications");break;default:s=null!=n.Description?n.Description:"",l=null!=n.Name?"<span class='name'>"+n.Name+"</span><br />":null!=n.Nickname?"<span class='name'>"+n.Nickname+"</span><br />":""}a.isScuiVisible()||r.hideUI();var w=!1;if(!function(e){if("true"==u.getItem("hideNotifications")&&-1==t.inArray(e,["NETWORK","GAMEINVITES","INFORMATION","DOWNLOADSTATUS","DUPLICATESIGNEDOUT","CONNECTIONLOST"]))return a.WriteDebugLog("ShowNotification","false"),!0;return!1}(o.notificationType)){w=!0;var k=Math.random().toString().substring(2,10),_=(null!=n.Id?n.Id:"")+"_"+o.notificationType.replace(/\./g,"-")+e+k;a.WriteDebugLog("ShowNotification","notifyId","id='notify"+_+"'");var T="<div class='"+o.notificationType+" notify"+_+" notification"+o.clickClass+o.eventClass+"'>"+o.notifyImage+"<i></i><span class='title"+o.clickClass+"'>"+o.notificationTitle+"</span><br />"+l+"<span class='"+o.clickClass+"'>"+s+"</span></div>";t("#notificationPanel").append(T).find("div.notify"+_).fadeIn("slow").delay(3500*(e+1)).fadeOut("slow",(function(){t(this).remove(),0==t("#notificationPanel div.notification").length&&p.CallGameMethod("RGSC_SET_NOTIFICATION_VISIBLE",'{ "visible": false }',null)}))}return{showNotification:w,updatedFriendId:c}}(e,o,n);l.showNotification&&(m=!0),l.updatedFriendId>0&&s.push(l.updatedFriendId)})),s.length&&a.isScuiVisible()&&l.getHomePageFriends(s,!0),m&&p.CallGameMethod("RGSC_SET_NOTIFICATION_VISIBLE",'{ "visible": true }',null)}))}(n)}})):a.WriteDebugLog("handleNotification","Count","0")):a.WriteDebugLog("handleNotification","notifications","null")}function b(e,t){v(0,'{ "Count" : 1, "Notifications" : ['+('{ "Type" : "INFORMATION", "Count" : 1, "Data" : [ { "Description" : "'+t+'" } ] }')+"] }")}function C(e,t,n){a.isScuiVisible()&&b(0,f.getTextCached("SlowServiceMessage","Notifications")+f.getRequestDescription(t,n))}function S(e,t,n,i){i.push(t),e.on("click","div."+t,(function(e){e.preventDefault(),m[n](this)}))}return m.triggerLastNotificationClick=function(){var e=t("#notificationPanel"),n=e.data("boundClasses");if(!n||0==e.children().length)return!1;var i=!1;return t(e.children().get().reverse()).each((function(){var e=t(this);return t(n).each((function(){return!e.hasClass(this)||(e.click(),i=!0,!1)})),!i})),i},m.openAchievements=function(e){h.trackEvent(g.category.notifications,g.action.notification_Achievements_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "Achievements" }',!0)},m.openInformation=function(e){h.trackEvent(g.category.notifications,g.action.notification_Information_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "Main" }',!0)},m.openFriends=function(e){h.trackEvent(g.category.notifications,g.action.notification_Friends_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "Friends" }',!0)},m.openFriendRequests=function(e){h.trackEvent(g.category.notifications,g.action.notification_FriendRequest_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "Friends", "SubState": "Request" }',!0)},m.openGameInvites=function(e){h.trackEvent(g.category.notifications,g.action.notification_GameInvites_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "GameInvites" }',!0)},m.openMessages=function(e){h.trackEvent(g.category.notifications,g.action.notification_MessageReceived_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "Messages" }',!0)},m.openCrewInvites=function(e){h.trackEvent(g.category.notifications,g.action.notification_RosClanInvite_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "CrewInvites" }',!0)},m.openCrewRequests=function(e){h.trackEvent(g.category.notifications,g.action.notification_JoinRequest_Click),t(e).remove(),s.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+a.isOnline()+', "State": "CrewRequests" }',!0)},m.init=function(){a.pubsub.subscribe("SDK.RGSC_JS_NOTIFICATION",v),a.pubsub.subscribe("notificationFn.infoMessage",b),a.pubsub.subscribe("notificationFn.slowService",C);var e=t("#notificationPanel"),n=e.data("boundClasses")||[];S(e,"notifyAchievements","openAchievements",n),S(e,"notifyInfo","openInformation",n),e.data("boundClasses",n)},m.init(),a.pubsub.subscribe("baseUtils.processTitleIdInfo",(function(){if(i.isMultiPlayerSupported()){var e=t("#notificationPanel"),n=e.data("boundClasses")||[];S(e,"notifyFriendRequests","openFriendRequests",n),S(e,"notifyFriends","openFriends",n),S(e,"notifyMessages","openMessages",n),S(e,"notifyGameInvites","openGameInvites",n),S(e,"notifyClanInvite","openCrewInvites",n),S(e,"notifyClanRequest","openCrewRequests",n),e.data("boundClasses",n)}})),m}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a,r=n(3)(n(5));void 0===(a=function(e){var t={},i=n(0),a=n(6),o=n(1),s=n(55),l=n(10),c=n(8),u=n(208);n(19),t.init=function(){i("#launcherStyle").on("click",".buttons a",f).on("keyup",".buttons a"),i("#launcherControls").on("click",".minimise",c.minimizeUi).on("click",".close",c.quitGame)},t.initLauncher=function(){l.quickShowLauncherUi(),d()};var d=function(){i("body").addClass("launcher"),i("#launcherStyle").addClass(o.getTitleName())},f=function(e){e&&e.preventDefault(),o.WriteDebugLog("launcherButtonClicked");var t=i(e.currentTarget).attr("data"),n=Number(t);isNaN(n)&&(n=t),c.launcherUiEvent(n)},p=function(e){var t=i("#launcherStyle").find(".dialogue");y("dialogue"),t.find("p").html(s.processLauncherText(e)),t.fadeIn()},h=function(e){for(var t="",n=e.length-1;n>-1;n--){var a="btnPurple",r=void 0;0==n&&(a="btnGrey",r="btnCancel"),t+=s.getButtonHtml(a,e[n],n,r)}var o=i("#launcherStyle").find(".buttons");o.html(t),o.is(":visible")||o.fadeIn()},g=function(e){i("#launcherStyle").find(".headerText").html(s.processLauncherText(e))},m=function(e){var t,n=i("#launcherStyle");y("loading"),"object"===(0,r.default)(e)&&"string"==typeof e.text?(t=e.text,e.toggleMode&&C(!0,!0)):t=e,n.find(".loading p").html(s.processLauncherText(t));var o=(new Date).getTime()+864e5;a.initSpinner(n.find(".loadingSpinner"),{endTime:o}).fadeIn(),n.find(".loading").fadeIn()},v=function(e){i("#launcherStyle").find(".ver").html(s.processLauncherText(e)).fadeIn()},b=function(e){var t=i("#launcherStyle").find(".progressBar");y("progressBar"),t.find("p").html(s.processLauncherText(e)),t.fadeIn()},C=function(e,t){var n=(e=null==e||e)?"downloader":"",a=i("#launcherStyle").css("background"),r=function(){globals.launcherClass=n,e?i("body").addClass("downloader"):i("body").removeClass("downloader"),i("launcherStyle").fadeTo({background:a},"slow"),i("#launcherStyleContent").fadeIn("slow")};t?r():i.when(i("#launcherStyleContent").fadeOut("slow"),i("launcherStyle").fadeTo({background:"#fff"},"slow")).then(r)},S=function(e){var t=i("#launcherStyle").find(".progressBarTotal").find("span");i("body").hasClass("downloader")||C(!0,!0),t.width(100*e+"%")},y=function(e){var t=i("#launcherStyle");if(a.stopSpinner(t.find(".loadingSpinner")),"dialogue"!==e){var n=t.find(".dialogue");n.find("p").text(""),n.hide()}if("progressBar"!==e){var r=t.find(".progressBar");r.find("p").text(""),r.find(".progressBarTotal span").width("0%"),r.hide()}if("loading"!==e){var o=t.find(".loading");o.find("p").text(""),o.hide()}"cloudSave"!==e&&(t.css("top","63px"),i("#cloudSave").css("top","-450px").css("display","none"))};return o.pubsub.subscribe("launcher.launcherCommand",(function(e,t){if(globals.receiveMsgEnabled){var n=t.command,i=t.parameter;switch(l.showLauncherUi(),o.WriteDebugLog("launcherCommand",n,JSON.stringify(i)),n){case"SetText":p(i);break;case"SetButtons":h(i);break;case"SetHeaderText":g(i);break;case"SetSpinnerText":m(i);break;case"SetProgressText":b(i);break;case"SetVersionText":v(i);break;case"SetProgress":S(i);break;case"GetCloudSaveState":u.checkCloudSaveEnabled();break;case"RequestLocalBackupResolution":y("cloudSave"),u.requestLocalBackupResolution(i);break;case"RequestCloudConflictResolution":y("cloudSave"),u.requestCloudConflictResolution(i);break;case"ShowDebugLog":window.debugLog&&window.RGSC_JS_SHOW_DEBUG_LOG&&window.RGSC_JS_SHOW_DEBUG_LOG()}}else o.WriteDebugLog("launcherCommand","aborted","false")})),t}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(4),i=n(8),a=n(1),r={cache:{}};return r.activateCodeSdk=function(e,t,n){var a={Message:24,ContentId:t,ActivationCode:n,Action:e};i.CallGameMethod("RGSC_ACTIVATION_CODE_RESPONSE",a,"RGSC_ACTIVATION_CODE_RESPONSE_DEMO")},r.redeemCodeSdk=function(e,t){var n={Message:36,redemptionCode:t,Action:e};i.CallGameMethod("RGSC_REDEMPTION_CODE_RESPONSE",n,"RGSC_REDEMPTION_CODE_RESPONSE_DEMO")},r.showVoucherContents=function(e,t){var n={voucherCode:e,language:t},r=i.CallGameMethod("RGSC_REQUEST_VOUCHER_CONTENTS",n,"RGSC_REQUEST_VOUCHER_CONTENTS_DEMO");return null!=r&&null!=r.Result&&r.Result?{success:!0,code:n.voucherCode}:{success:!1,code:a.errorCode("7001.67")}},r.consumeVoucher=function(e){var t={voucherCode:e},n=i.CallGameMethod("RGSC_REQUEST_VOUCHER_CONSUMPTION",t,"RGSC_REQUEST_VOUCHER_CONSUMPTION_DEMO");return null!=n&&null!=n.Result&&n.Result?{success:!0}:{success:!1,code:a.errorCode("7001.69")}},r.getOfferCodes=function(e){return Array.isArray(e)&&0!==e.length?e.map((function(e){return e.OfferCode})).join(", ").replace(/,\s*$/,""):""},r.chunk=function(e,t){for(var n=[],i=0,a=e.length;i<a;i+=t)n.push(e.substr(i,t));return n},r.maxVoucherCodeLength=function(e,t){return"number"==typeof r.cache.maxVoucherCodeLength||(r.cache.maxVoucherCodeLength=e*t+(e-1)),r.cache.maxVoucherCodeLength},r.formatVoucherCode=function(e,t,n){var i=a.areChunkedVoucherCodesEnabled(),o=/[^0-9A-Za-z]/g;i||(o=/[^0-9A-Za-z\-]/g);var s=e.replace(o,"");if(e=s,i){var l=a.chunkCodeLength(),c=r.maxVoucherCodeLength(a.numChunks(),l);e=r.chunk(s.replace(/\s+/g,""),l).join("-").substr(0,c)}return{text:e=e.substr(0,50).toUpperCase(),caretLocation:n}},r.getEntitlementsNotGranted=function(e){var n=e.Offers,i=e.EntitlementsGranted,o=[];if(null==n||!n.length)return"";for(var s=0,l=n.length;s<l;s++)for(var c=n[s].Entitlements,u=0,d=c.length;u<d;u++){var f=c[u];if(a.WriteDebugLog("getEntitlementsNotGrantedString","friendlyName",f.FriendlyName),r.isEntitlementVisible(f))t.filter(i,(function(e){return e.EntitlementCode===f.EntitlementCode})).length||o.push(f)}return o},r.isEntitlementVisible=function(e){return void 0!==e&&(a.stringHasContent(e.FriendlyName)&&(void 0===e.Visible||e.Visible))},r.getVoucherResultError=function(e,t){var n,i;return void 0===e||void 0===e.ErrorStringId?(n=t,i="ErrorWithCodeAndDesc"):isNaN(e.ErrorStringId)?(n=e.ErrorStringId,i="Activation"):(n="i"+e.ErrorStringId,i="Activation"),0===n.length&&(n="ErrorActivate",i="Error"),{errorMsg:n,errorMsgContext:i}},r.handleVoucherContentResult=function(e){var t,n;if(void 0!==e&&(t=e.EntitlementsGranted),void 0!==e&&e.Result&&void 0!==t){var i=function(e){var t="";if(null===e.Offers||!e.Offers.length)return t;if(e.Offers.length>1){for(var n=0,i=e.Offers.length;n<i;n++)a.stringHasContent(e.Offers[n].FriendlyName)&&(t+=e.Offers[n].FriendlyName+"<br>");if(t.length>2)return t.substr(0,t.length-4)}else if(a.stringHasContent(e.Offers[0].FriendlyName))return e.Offers[0].FriendlyName;return t}(e);n={isSuccess:!0,offers:e.Offers,entitlementsGranted:t,entitlementsNotGranted:r.getEntitlementsNotGranted(e),friendlyName:i}}else{if(void 0===e){var o={iss:a.isSteam(),l:a.getTitleLang()};a.WriteDebugLog("RGSC_JS_VOUCHER_CONTENT_RESULT","Error: ",JSON.stringify(o)+globals.debugLog,a.logType.error,a.logController[a.getTitleName()]),globals.debugLog=""}var s=a.errorCode("7001.68");n={isSuccess:!1,error:r.getVoucherResultError(e,s)}}return a.pubsub.publish("launcher.voucherContents",n),n},r.isVoucherConsumeSuccess=function(e){if(null==e||!e.Result){var t=a.errorCode("7001.70"),n=r.getVoucherResultError(e,t);return a.pubsub.publish("launcher.voucherConsumeResult",{isSuccess:!1,jsonResult:e,error:n}),!1}return!0},r}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(){var e={LoadHomeScreen:function(){}};return e}.apply(t,[]))||(e.exports=i)},function(e,t,n){"use strict";var i,a;i=[n(0),n(30),n(6),n(1),n(7),n(8),n(37),n(10),n(15),n(12),n(35)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c,u){var d={};return d.statIds="156950352,-2103486802,1500719206,1570571613,528536644,741286365,982169050,222726850,1347617716,-1857458609,997965532,779599105,1133504003,-2103486802,-1932771401,-2103486802",d.LoadHomeScreen=function(){i.isOnline()?d.GetCommunityStatsJS():d.GetCommunityStatsJSLocal(),i.isOnline()&&i.isSignedIn()&&!i.isLocal()&&e("#homefeedPanel").find(".contentWrapper").fadeOut("slow"),u.LoadHomeScreen()},d.GetCommunityStatsJS=function(){var e={env:globals.rosEnvironment,title:globals.titleName,version:globals.RosTitleVersion,platformId:globals.platformId,rosTitleName:globals.titleName,statIds:d.statIds};i.WriteDebugLog("GetCommunityStatsJS","options",JSON.stringify(e)),t.ajax({type:"POST",url:n.getApiUrl("/api/"+globals.titleName+"/getcommunitystats"),services:["stats"],data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",silentFail:!0,disableSlowMsg:!0,requestDescription:"GetCommunityStats",success:function(e){void 0!==e&&null!=e&&null!=e.d&&e.Status?d.ProcessCommunityStats(e):d.GetCommunityStatsJSLocal()},error:function(e,t,a){i.WriteDebugLog("GetCommunityStatsJS","ERROR",a),i.WriteDebugLog("GetCommunityStatsJS","ERROR status",t),i.WriteDebugLog("GetCommunityStatsJS","ERROR responseText",e.responseText,n.logType.error,n.logController[globals.titleName]),d.GetCommunityStatsJSLocal()}})},d.GetCommunityStatsJSLocal=function(){i.WriteDebugLog("GetCommunityStatsJSLocal","",""),t.ajax({type:"GET",url:globals.baseAssetUrl+"xml/"+globals.titleName+"/CommunityStats.json",dataType:"json",success:function(e){d.ProcessCommunityStats(e)},error:function(t,a,r){i.WriteDebugLog("GetCommunityStatsJSLocal","ERROR",r,n.logType.error,n.logController[globals.titleName]);try{e(this).stopPropagation()}catch(e){}}})},d.ProcessCommunityStats=function(t){if(void 0!==t&&null!=t&&"undefined"!=t.d&&(i.WriteDebugLog("ProcessCommunityStats","data.d",t.d),"ERROR"!=t.d.substring(0,5).toUpperCase())){var a=t.d.split(","),r=e("#homefeedPanel"),o=parseInt(a[0],10)+parseInt(a[1],10);r.find("#trendStatDWKills").html(n.addCommas(o)),r.find("#trendStatBulletsFired").html(d.formatTrendStat(n.addCommas(parseInt(a[2],10)+parseInt(a[3],10)))),r.find("#trendStatPillsPopped").html(d.formatTrendStat(n.addCommas(parseInt(a[4],10)+parseInt(a[5],10)))),r.find("#trendStatShootDodgeKills").html(d.formatTrendStat(n.addCommas(parseInt(a[6],10)+parseInt(a[7],10))));for(var s=0,l=8;l<a.length;l++)s+=parseInt(a[l],10);r.find("#trendStat2HKills").html(n.addCommas(s)),r.find("#globalStats").find("div.skull").removeClass("left right middle"),o>1.2*s?r.find("#globalStats").find("div.skull").addClass("left"):1.2*o<s?r.find("#globalStats").find("div.skull").addClass("right"):r.find("#globalStats").find("div.skull").addClass("middle"),void 0===a[a.length-1]&&null==a[a.length-1]||r.find("#statsDate").html(n.localizedDate(a[a.length-1],"LLL"))}},d.formatTrendStat=function(e){var t=e.split(",");if(t.length>1){for(var n="<span>"+t[0]+"</span>",i=1;i<t.length;i++)n+=","+t[i];return n}return e},d}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(35),i=n(87),a=n(7),r=n(0),o={LoadHomeScreen:function(){a.getTextAsync("Yes","Social").then((function(){t.LoadHomeScreen(),globals.advertsEnabled&&i.load()}))},displayGameLogo:function(){r("#launcherLogo").length||r("#launcherStyleContent").prepend(r("<img>",{id:"launcherLogo",src:globals.baseUrl+"images/gta5/gtav_logo.png",alt:"Grand Theft Auto V"}))}};return o}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i,a;i=[n(0),n(30),n(1),n(6),n(7),n(8),n(37),n(10),n(12),n(59),n(11),n(13),n(54),n(229)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c,u,d,f,p){var h={},g=0;function m(e){switch(e){case b.FIND_CREW:case b.GO_TO_URL:case b.NONE:return!1;case b.STORE_WITH_SEARCH:case b.STORE_WITH_CATEGORY:default:return!0}}function v(e){switch(e){case b.STORE_WITH_SEARCH:return"clickEvent storeWithSearch";case b.STORE_WITH_CATEGORY:return"clickEvent storeWithCategory";case b.FIND_CREW:return"clickEvent goToFindCrew";case b.GO_TO_URL:return"clickEvent goToUrl";case b.NONE:return"clickEvent none";default:return"clickEvent storeDefault"}}h.load=function(){globals.adsLoaded?C():r.getCredsAsync().then((function(e){e.Ticket&&r.GetAuthHeaderAsync(e.Ticket).then((function(e){var i=n.getApiUrl("api/"+globals.titleName+"/GetAdverts");t.ajax({type:"POST",headers:e,url:i,dataType:"json",silentFail:!0}).done((function(e,t){"success"===t&&(h.renderAdverts(e),globals.adsLoaded=!0)}))}))}))},h.renderAdverts=function(t){var r=t.totalAdCount,h=t.adverts;if(0!==r&&null!=h&&h.length){var g=e("#featuredPromotion"),y="";(function(){var t=new e.Deferred;if(i.isStoreV2Enabled()){var n={ofAgeCallbkFn:function(){t.resolve(!0)},underAgeCallbkFn:function(){t.resolve(!1)},errorCallbkFn:function(){t.reject()}};f.checkStoreAgeAppropriate(n)}return t.promise()})().then((function(t){for(var i=0;i<h.length;i++){var f,E=h[i],w=E.languages[globals.titlelang];void 0===w&&(w=E.languages["en-US"]),f=void 0!==w.actionData&&null!==w.actionData&&""!==w.actionData?w.actionData:E.actionData;var k="";E.clickAction===b.GO_TO_URL&&(k=void 0!==w.linkText&&null!==w.linkText&&""!==w.linkText?w.linkText:f);var _=v(E.clickAction),T={ImageUrl:E.imageUrl,Title:w.title,Body:w.body,ClickClass:_,ActionData:f,LinkText:k};!t&&m(E.clickAction)||(y+=n.renderCompiledTemplate(p,T))}var I;g.find("ul").html(y),y.length&&(!function(t){t.find("img").on("error",(function(){!function(t){t.parents("li").remove();var n=e("#featuredPromotion").find("li");n.length?1===n.length?(n.show(),S()):(n.first().show(),S(),C()):(e("#featuredPromotion").hide(),S())}(e(this))}))}(g),(I=g).off("click","a.storeWithSearch").on("click","a.storeWithSearch",(function(){u.trackEvent(d.category.advert,d.action.advert_storeWithSearch);var t=e("#storeButton");t.removeData(),t.data("productId",e(this).data("action")),c.showCommerceV2()})),I.off("click","a.storeWithCategory").on("click","a.storeWithCategory",(function(){u.trackEvent(d.category.advert,d.action.advert_storeWithCategory);var t=e("#storeButton");t.removeData(),t.data("category",e(this).data("action")),c.showCommerceV2()})),I.off("click","a.storeDefault").on("click","a.storeDefault",(function(){u.trackEvent(d.category.advert,d.action.advert_storeDefault),c.showCommerceV2()})),I.off("click","a.goToFindCrew").on("click","a.goToFindCrew",(function(){u.trackEvent(d.category.advert,d.action.advert_findCrew),o.showCrewSearch(e(this).data("action"))})),I.off("click","a.goToUrl").on("click","a.goToUrl",(function(){u.trackEvent(d.category.advert,d.action.advert_goToUrl);var t=e(this).data("action"),n=e(this).data("title");if(s.isUrlWhitelisted(t)){var i=a.getTextCached("LinkConfirm","HomeSignin").replace("[linkText]",n);l.ShowConfirmModal(i,"","sdk.launchExternalBrowserForUrl",t)}})),g.find("li:gt(0)").hide(),r>0&&h.length>1&&C(),e("#featuredPromotion").fadeIn(1e3))}))}};var b={STORE_WITH_SEARCH:0,STORE_WITH_CATEGORY:1,FIND_CREW:2,GO_TO_URL:3,NONE:4};function C(){if(0===g){var t=e("#featuredPromotion");g=setInterval((function(){if(t.find("li").length&&1!==t.find("li").length&&s.isActivePanel("#homefeedPanel")){var e=t.find("li:visible"),n=e.next();0===n.length&&(n=t.find("li:eq(0)")),e.fadeOut(1e3),n.fadeIn(1e3)}else S()}),1e4)}}function S(){clearInterval(g),g=0}return i.pubsub.on("signout:completed",(function(){globals.adsLoaded=!1,e("#featuredPromotion").hide()})),h}.apply(t,i))||(e.exports=a)},,function(e,t,n){"use strict";n.p=globals.webpackPublicPath},function(e,t,n){"use strict";var i,a;i=[n(91)],void 0===(a=function(){}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i,a;i=[n(0),n(14),n(24),n(56),n(159),n(35),n(15),n(20),n(27),n(52),n(39),n(46),n(48),n(37),n(10),n(210),n(212),n(213),n(214),n(216),n(221),n(223),n(81),n(224),n(225)],void 0===(a=function(){}.apply(t,i))||(e.exports=a)},,,,,,,,,,,,function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(4);return function(e,n){if(!e)return{};var i=function(e){return String(e||"").replace(/-/g,"_")},a=function(e){return Array.isArray(e)||(e=[e]),e.length=e.length,e};if("string"==typeof e&&(e=function(e){var t;try{var n=new DOMParser;n.async=!1}catch(e){throw new Error("XML Parser could not be instantiated")}try{t=n.parseFromString(e,"text/xml")}catch(e){throw new Error("Error parsing XML string")}return t}(e)),e.nodeType){if(3==e.nodeType||4==e.nodeType)return e.nodeValue;var r=9==e.nodeType?e.documentElement:e,o=function e(r,o){if(!r)return null;var s="",l=null,c=null;r.nodeType,i(r.localName||r.nodeName),r.text||r.nodeValue,r.childNodes&&r.childNodes.length>0&&t.each(r.childNodes,(function(t){var n=t.nodeType,r=i(t.localName||t.nodeName),o=t.text||t.nodeValue||"";if(8!=n)if(3!=n&&4!=n&&r)(l=l||{})[r]?(l[r].length||(l[r]=a(l[r])),l[r]=a(l[r]),l[r][l[r].length]=e(t,!0),l[r].length=l[r].length):l[r]=e(t);else{if(o.match(/^\s+$/))return;s+=o.replace(/^\s+/,"").replace(/\s+$/,"")}})),r.attributes&&r.attributes.length>0&&(c={},l=l||{},t.each(r.attributes,(function(e){var t=i(e.name),n=e.value;c[t]=n,l[t]?(l[cnn]=a(l[cnn]),l[t][l[t].length]=n,l[t].length=l[t].length):l[t]=n}))),l&&(l=t.extend(""!=s?new String(s):{},l||{}),(s=l.text?[l.text||""].concat([s]):s)&&(l.text=s),s="");var u=l||s;return n&&(s&&(u={}),(s=u.text||s||"")&&(u.text=s),o||(u=a(u))),u}(r,!0);return e=null,r=null,o}}}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(e){var t,i,a=n(3)(n(5));i={init:function(e){return this.each((function(){var n,i=t(this),a=i.data("spinner");e=t.extend({},{speed:25,width:32,height:32},e),a||(i.data("spinner",{options:e}),a=i.data("spinner")),i.height(a.options.height),i.width(a.options.width),a.options.image?(i.css("background-image","url("+a.options.image+")"),i.css("background-position","0px 0px"),i.css("background-repeat","no-repeat")):a.options.image=i.css("background-image"),a.options.frames||((n=new Image).src=a.options.image,n.onload=function(){a.options.frames=n.width/a.options.width}),a.options.endTime||(a.options.endTime=(new Date).getTime()+6e4),a.options.frame=1,a.options.animation=setInterval((function(){!function(e,t){"undefined"!=typeof log&&(new Date).getTime()%10==0&&log("redraw: this should only be happening when the spinner is visible");var n,i=e.data("spinner");if(i){if(!e.is(":visible"))return void e.spinner("stop");i.options.frame>=i.options.frames&&(i.options.frame=1),n="-"+i.options.frame*i.options.width+"px 0px",e.css("background-position",n),i.options.frame++}else clearInterval(t)}(i,a.options.animation),(new Date).getTime()>a.options.endTime&&clearInterval(a.options.animation)}),a.options.speed)}))},stop:function(){return this.each((function(){var e=t(this),n=e.data("spinner");n&&(clearInterval(n.options.animation),e.removeData("spinner"))}))},attachToMouse:function(){return this.each((function(){var e=t(this);t("body").mousemove((function(t){e.is(":hidden")&&e.show(),e.css({top:t.pageY-25+"px",left:t.pageX+10+"px"})}))}))}},(t=e).fn.spinner=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(0,a.default)(e)&&e?(t.error("Method "+e+" does not exist on jQuery.spinner"),null):i.init.apply(this,arguments)}}).call(this,n(0))},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts.chinese={default:["~            = {bksp}","{tab}           [ ] \\","          ' {enter}","{shift}           {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:[" 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~            = {bksp}","{tab}           [ ] \\","          ' {enter}","{shift}           {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":[" 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.chinese={display:{a:":Accept (Shift-Enter)",accept:":Accept (Shift-Enter)",alt:"Alt:Alternate Graphemes",b:":Backspace",bksp:"Bksp:Backspace",c:":Cancel (Esc)",cancel:":Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:""}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r,o=n(3)(n(5));a=[n(0)],void 0===(r="function"==typeof(i=function(e){
/*!
   * Copyright (c) 2010 C. F., Wong (<a href="http://cloudgen.w0ng.hk">Cloudgen Examplet Store</a>)
   * Licensed under the MIT License:
   * http://www.opensource.org/licenses/mit-license.php
   * Highly modified from the original jquery.caret.1.02.js
  */
var t="length";e.fn.caret=function(e,n){if(void 0===this[0]||this.is(":hidden")||"hidden"===this.css("visibility"))return this;var i,a,r,s,l,c,u,d,f,p=document.selection,h=this[0],g=h.scrollTop,m=!1,v=!0;try{m=void 0!==h.selectionStart}catch(e){v=!1}return"object"===(0,o.default)(e)&&e.start&&e.end?(a=e.start,s=e.end):"number"==typeof e&&"number"==typeof n&&(a=e,s=n),v&&void 0!==a?(m?(h.selectionStart=a,h.selectionEnd=s):((l=h.createTextRange()).collapse(!0),l.moveStart("character",a),l.moveEnd("character",s-a),l.select()),(this.is(":visible")||"hidden"!==this.css("visibility"))&&(this.is(":focus")||this.focus()),h.scrollTop=g,this):(m?(i=h.selectionStart,r=h.selectionEnd):p?"TEXTAREA"===h.tagName?(f=this.val(),(u=(c=p.createRange()).duplicate()).moveToElementText(h),u.setEndPoint("EndToEnd",c),i=u.text.replace(/\r/g,"\n")[t],r=i+c.text.replace(/\r/g,"\n")[t]):(f=this.val().replace(/\r/g,"\n"),(c=p.createRange().duplicate()).moveEnd("character",f[t]),i=""===c.text?f[t]:f.lastIndexOf(c.text),(c=p.createRange().duplicate()).moveStart("character",-f[t]),r=c.text[t]):(i=0,r=(h.value||"").length),d=(h.value||"").substring(i,r),{start:i,end:r,text:d,replace:function(e){return h.value.substring(0,i)+e+h.value.substring(r,h.value[t])}})}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["french-azerty-1"]={default:[" &  \" ' ( -  _   ) = {bksp}","{tab} a z e r t y u i o p ^ $","q s d f g h j k l m   * {enter}","{shift} < w x c v b n , ; : ! {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["{sp:1} 1 2 3 4 5 6 7 8 9 0  + {bksp}","{tab} A Z E R T Y U I O P  ","Q S D F G H J K L M %  {enter}","{shift} > W X C V B N ? . /  {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:[" & ~ # { [ | ` \\ ^ @ ] } {bksp}","{tab} a z  r t y u i o p ^ ","q s d f g h j k l m   * {enter}","{shift} < w x c v b n , ; : ! {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["{sp:1} 1 ~ # { [ | ` \\ ^ @ ] } {bksp}","{tab} A Z  R T Y U I O P  ","Q S D F G H J K L M %  {enter}","{shift} > W X C V B N ? . /  {shift}","{accept} {alt} {space} {alt} {cancel}"]},e.keyboard.layouts["french-azerty-2"]={default:[" &  \" ' ( -  _   ) = {b}","{t} a z e r t y u i o p ^ $","q s d f g h j k l m   * {e}","{s} < w x c v b n , ; : ! {s}","{a} {alt} {space} {alt} {c}"],shift:["{sp:1} 1 2 3 4 5 6 7 8 9 0  + {b}","{t} A Z E R T Y U I O P  ","Q S D F G H J K L M %  {e}","{s} > W X C V B N ? . /  {s}","{accept} {alt} {space} {alt} {c}"],alt:[" & ~ # { [ | ` \\ ^ @ ] } {b}","{t} a z  r t y u i o p ^ ","q s d f g h j k l m   * {e}","{s} < w x c v b n , ; : ! {s}","{a} {alt} {space} {alt} {c}"],"alt-shift":["{sp:1} 1 ~ # { [ | ` \\ ^ @ ] } {b}","{t} A Z  R T Y U I O P  ","Q S D F G H J K L M %  {e}","{s} > W X C V B N ? . /  {s}","{a} {alt} {space} {alt} {c}"]},e.keyboard.layouts["french-bepo-V1.0rc2"]={default:['$ "   ( ) @ + - / * = % {b}',"{t} b  p o   v d l j z w","a u i e , c t s r n m  {enter}","{s}   y x . k ' q g h f {s}","{a} {alt} {space} {alt} {c}"],shift:["# 1 2 3 4 5 6 7 8 9 0  ` {b}","{t} B  P O  ! V D L J Z W","A U I E ; C T S R N M  {enter}","{s}   Y X : K ? Q G H F {s}","{a} {alt} {space} {alt} {c}"],alt:["  < > [ ] ^       {b}","{t} |  &  `    /   ","         ~   {enter}","{s} / \\ { }  ~      {s}","{a} {alt} {space} {alt} {c}"],"alt-shift":["      {empty}       {b}","{t}     `  {empty}  {empty}   ","         {empty}  , {enter}","{s} {empty} {empty}    {empty}   {empty}   {s}","{a} {alt} {space} {alt} {c}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.french={display:{a:":Valider (Shift-Enter)",accept:"Valider:Valider (Shift-Enter)",alt:"AltGr:Charactre alternatif",b:":Suppr arrire",bksp:"Suppr:Suppr arrire",c:":Annuler",cancel:"Annuler:Annuler (chap)",clear:"C:Effacer",combo:":Bacsuler les touches combo",dec:".:Decimal",e:":Entre",enter:"Entre:Entre",lock:" Verr Mag:Verouillage majuscule",s:":Majuscule",shift:"Maj:Majuscule",sign:":Change de signe",space:"&nbsp;:Espace",t:":Tabulation",tab:" Tab:Tabulation"},wheelMessage:"Utiliser la molette de la souris pour voir les autres lettres"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["german-qwertz-1"]={default:[" 1 2 3 4 5 6 7 8 9 0   {bksp}","{tab} q w e r t z u i o p  +","a s d f g h j k l   # {enter}","{shift} < y x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:[' ! "  $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Z U I O P  *","A S D F G H J K L   ' {enter}","{shift} > Y X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:[" 1   4 5 6 { [ ] } \\  {bksp}","{tab} @ w  r t z u i o p  ","a s d f g h j k l   # {enter}","{shift} | y x c v b n  , . - {shift}","{accept} {alt} {space} {alt} {cancel}"]},e.keyboard.layouts["german-qwertz-2"]={default:[" 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t z u i o p  ","a s d f g h j k l   $ {enter}","{shift} < y x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:[' + " *  % & / ( ) = ?  {bksp}',"{tab} Q W E R T Z U I O P  !","A S D F G H J K L    {enter}","{shift} > Y X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:[" | @ # 4 5    9 0   {bksp}","{tab} q w  r t z u i o p [ ]","a s d f g h j k l  { } {enter}","{shift} \\ y x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.german={display:{a:":Accept (Shift-Enter)",accept:"Best.:Accept (Shift-Enter)",alt:"Alt Gr:Alternate Graphemes",b:":Backspace",bksp:"Rck:Backspace",c:":Cancel (Esc)",cancel:"Abbr.:Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:"Use mousewheel to see other keys"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["japanese-kana"]={default:["          {bksp}","          {tab}","          {enter}","       !   {shift}","       ?   {alt}","{accept} {space} {cancel}"],shift:["1 2 3 4 5 6 7 8 9 0 {bksp}","         ~ {tab}","    $    ( ) {enter}","  {empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {shift}","{empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {alt}","{accept} {space} {cancel}"],alt:["1 2 3 4 5 6 7 8 9 0 {bksp}","q w e r t y u i o p {tab}","a s d f g h j k l ;  {enter}","z x c v b n m , . / {shift}","` - = [ ] \\ ' {empty} {empty} {empty} {alt}","{accept} {space} {cancel}"],"alt-shift":["! @ # $ % ^ & * ( ) {bksp}","Q W E R T Y U I O P {tab}","A S D F G H J K L :  {enter}","Z X C V B N M < > ? {shift}",'~ _ + { } | " {empty} {empty} {empty} {alt}',"{accept} {space} {cancel}"]},e.keyboard.layouts["japanese-qwerty"]={default:["1 2 3 4 5 6 7 8 9 0 - ^  {bksp}","{tab} q w e r t y u i o p @ [","a s d f g h j k l ; : ] {enter}","{shift} z x c v b n m , . / \\ {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["! \" # $ % & ' ( )  = ~ | {bksp}","{tab} Q W E R T Y U I O P ` {","A S D F G H J K L + * } {enter}","{shift} Z X C V B N M < > ? _ {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["             {bksp}","{tab}            ","            {enter}","{shift}            {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["             {bksp}","{tab}            ","            {enter}","{shift}            {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.japanese={display:{a:":Accept (Shift-Enter)",accept:"OK:Accept (Shift-Enter)",alt:"Alt:Roma-ji | Hiragana/Kana",b:":Backspace",bksp:"Bksp:Backspace",c:":Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Katakana |Hiragana",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:""}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["polish-qwerty"]={default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] ","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w  r t y  i  p [ ] ",'  d f g h j k  : " {enter}',"{shift}    v b  m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.polish={display:{a:":Akceptuj (Shift-Enter)",accept:"Akc.:Akceptuj (Shift-Enter)",alt:"Alt:Polskie znaki",b:":Cofnij",bksp:"Bksp:Cofnij",c:":Anuluj (Esc)",cancel:"Anul.:Anuluj (Esc)",clear:"C:Czy",combo:":Klawisze kombo",dec:".:Dziesitny",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Shift",sign:":Zmie znak",space:"&nbsp;:Spacja",t:":Tab",tab:" Tab:Tab"},wheelMessage:"Uyj rolki aby zobaczy pozozstae klawisze"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["portuguese-qwerty"]={default:["\\ 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p + ","a s d f g h j k l   ~ {enter}","{shift} < z x c v b n m , . - {shift}","{cancel} {space} {alt} {accept}"],shift:['| ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P * `","A S D F G H J K L   ^ {enter}","{shift} > Z X C V B N M ; : _ {shift}","{cancel} {space} {alt} {accept}"],alt:["\\ 1 @    6 { [ ] } '  {bksp}","{tab} q w  r t y u i o p  ","a s d f g h j k l   ~ {enter}","{shift} < z x c v b n m , . - {shift}","{cancel} {space} {alt} {accept}"],"alt-shift":['| ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y U I O P  `","A S D F G H J K L   ^ {enter}","{shift} > Z X C V B N M ; : _ {shift}","{cancel} {space} {alt} {accept}"]},e.extend(!0,e.keyboard.defaultOptions.combos,{"":{a:"",A:"",e:"",E:"",i:"",I:"",o:"",O:"",u:"",U:"",y:"",Y:""}}),e.keyboard.defaultOptions.combos["'"]={},e.keyboard.comboRegex=/([`\'~\^\"ao\u00b4])([a-z])/gim,void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.portuguese={display:{a:":Aceite (Shift-Enter)",accept:"Aceit:Concluir (Shift-Enter)",alt:"AltGr:Carateres Adicionais/CTRL+ALT",b:":Retroceder",bksp:"Bksp:Retroceder",c:":Cancelar/Escape (Esc)",cancel:"Anule:Cancelar/Escape(Esc)",clear:"C:Limpar",combo:":Acentuao Automtica",dec:".:Decimal",e:":Introduzir/Mudar de Linha",enter:"Enter:Introduzir/Mudar de Linha",lock:" Lock:CapsLock/Maisculas",s:":Shift/Maisculas",shift:"Shift:Maisculas-Minsculas",sign:":Mudar Sinal",space:"&nbsp;:Espao",t:":Tab/Tabela/Avanar",tab:" Tab:Tabela/Avanar"},wheelMessage:"Use a roda do rato/navegador para ver mais teclas"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["russian-qwerty"]={default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:[" 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab}             \\","           {enter}","{shift}          . {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":[' ! "  ;  : ? * ( ) _ + {bksp}',"{tab}             /","           {enter}","{shift}          , {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.russian={display:{a:":Accept (Shift-Enter)",accept:":Accept (Shift-Enter)",alt:"AltGr:Alternate Graphemes",b:":Backspace",bksp:"Bksp:Backspace",c:":Cancel (Esc)",cancel:":Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:"Use mousewheel to see other keys"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["spanish-qwerty"]={default:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","a s d f g h j k l  { } {enter}","{shift} < z x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","A S D F G H J K L  [ ] {enter}","{shift} > Z X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:[" 1 2 3 4 5 6 7 8 9 0 \\  {bksp}","{tab} @ w e r t y u i o p  ","a s d f g h j k l    {enter}","{shift} < z x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","A S D F G H J K L  [ ] {enter}","{shift} > Z X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"]},e.keyboard.layouts["spanish-qwerty-sp"]={default:[" 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","a s d f g h j k l    {enter}","{shift} < z x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:[' ! "  $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P ^ *","A S D F G H J K L    {enter}","{shift} > Z X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["\\ | @ # 4 5  7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p [ ]","a s d f g h j k l  { } {enter}","{shift} | z x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":[' ! "  $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P [ ]","A S D F G H J K L  { } {enter}","{shift} > Z X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.spanish={display:{a:":Accept (Shift-Enter)",accept:"Acep.:Accept (Shift-Enter)",alt:"Alt:Alternate Graphemes",b:":Backspace",bksp:"Borrar:Backspace",c:":Cancel (Esc)",cancel:"Cancel.:Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:"Utilice la rueda del mouse para ver otras teclas"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["standard-italian"]={default:["\\ 1 2 3 4 5 6 7 8 9 0    {bksp}","{tab} q w e r t y u i o p  +","a s d f g h j k l   {enter}","{shift} z x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:['| ! "  $ % & / ( ) = ?   {bksp}',"{tab} Q W E R T Y U I O P  *","A S D F G H J K L   {enter}","{shift} Z X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["\\ 1 2 3 4  6 7 8 9 0    {bksp}","{tab} q w  r t y u i o p [ ]","a s d f g h j k l @ # {enter}","{shift} z x c v b n m , . - {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":['| ! "  $ % & / ( ) = ?   {bksp}',"{tab} Q W E R T Y U I O P { }","A S D F G H J K L   {enter}","{shift} Z X C V B N M ; : _ {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.italian={display:{a:":Accept (Shift-Enter)",accept:"Conferma:Accept (Shift-Enter)",alt:"Alt:Alternate Graphemes",b:":Backspace",bksp:"Bksp:Backspace",c:":Cancel (Esc)",cancel:"Annulla:Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Invio:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Maiusc:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:"Usa la rotella del mouse per vedere altri tasti"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["standard-2-beolsik"]={default:["~ 1 2 3 4 5 6 7 8 9 0 - = \\ {bksp}","{tab}           [ ]","         ; ' {enter}","{shift}        , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:[" ! @ # $ % ^ & * ( ) _ + | {bksp}","{tab}           { }",'         : " {enter}',"{shift}        < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.korean={display:{a:":Accept (Shift-Enter)",accept:":Accept (Shift-Enter)",alt:"Alt:Alternate Graphemes",b:":Backspace",bksp:"Bksp:Backspace",c:":Cancel (Esc)",cancel:":Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:"     "}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(17)],void 0===(r="function"==typeof(i=function(e){e.keyboard.layouts["mexican-qwerty"]={default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} x x x r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},void 0===e.keyboard.language&&(e.keyboard.language={}),e.keyboard.language.mexican={display:{a:":Accept (Shift-Enter)",accept:"Acep.:Accept (Shift-Enter)",alt:"Alt:Alternate Graphemes",b:":Backspace",bksp:"Retr:BKsp",c:":Cancel (Esc)",cancel:"Anular:Cancel (Esc)",clear:"C:Clear",combo:":Toggle Combo Keys",dec:".:Decimal",e:":Enter",enter:"Enter:Enter",lock:" Lock:Caps Lock",s:":Shift",shift:"Shift:Shift",sign:":Change Sign",space:"&nbsp;:Space",t:":Tab",tab:" Tab:Tab"},wheelMessage:"Utilice la rueda del mouse para ver otras teclas"}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a,r;n(3)(n(5));a=[n(0),n(39),n(17)],void 0===(r="function"==typeof(i=function(e){
/*!
   * @license
   * jQuery UI Virtual Keyboard Autocomplete v1.5 for Keyboard v1.18+ only (3/1/2014)
   *
   * By Rob Garrison (aka Mottie & Fudgey)
   * Modified: R* - Added AMD wrapper, extra validation
   * Licensed under the MIT License
   */
e.fn.addAutocomplete=function(){return this.each((function(){var t,n=e(this).data("keyboard");n&&(n.autocomplete_new_version=((t=e.ui.version.split("."))[0]=parseInt(t[0],10),t[0]>1||1===t[0]&&parseInt(t[1],10)>=9),n.autocomplete_init=function(e,t,i){n.options.alwaysOpen&&n.isVisible()&&n.autocomplete_setup(),n.$el.bind("visible.keyboard",(function(){n.autocomplete_setup()})).bind("change.keyboard",(function(){n.hasAutocomplete&&n.isVisible()&&n.$el.val(n.$preview.val()).trigger("keydown.autocomplete")})).bind("hidden.keyboard",(function(e){n.hasAutocomplete&&n.$el.autocomplete("close")})).bind("autocompleteopen",(function(e,t){n.hasAutocomplete&&n.$autocomplete.menu.element.position({of:n.$keyboard,my:"right top",at:"left top",collision:"flip"})})).bind("autocompleteselect",(function(e,t){var i=t&&t.item&&t.item.value;n.hasAutocomplete&&"string"==typeof i&&""!==i&&(n.$preview.val(i).focus(),n.lastCaret={start:i.length,end:i.length})}))},n.autocomplete_setup=function(){n.$autocomplete=n.$el.data("autocomplete")||n.$el.data("uiAutocomplete"),n.hasAutocomplete=void 0!==n.$autocomplete&&!n.$autocomplete.options.disabled,n.hasAutocomplete&&(n.$preview.bind("keydown",(function(e){return n.autocomplete_input(e)})),n.$allKeys.bind("mouseup mousedown mouseleave touchstart touchend touchcancel",(function(e){n.autocomplete_input(e)})))},n.autocomplete_input=function(t){var i,a=e.ui.keyCode;switch(t.keyCode){case a.PAGE_UP:n.$autocomplete._move("previousPage",t),t.preventDefault();break;case a.PAGE_DOWN:n.$autocomplete._move("nextPage",t),t.preventDefault();break;case a.UP:n.$autocomplete._move("previous",t),t.preventDefault();break;case a.DOWN:n.$autocomplete._move("next",t),t.preventDefault();break;case a.ENTER:case a.NUMPAD_ENTER:""!==(i=n.$autocomplete.menu.element.find("#ui-active-menuitem,.ui-state-focus").text()||"")&&n.$preview.val(i),n.autocomplete_new_version&&n.$autocomplete.menu.select(t);break;default:clearTimeout(n.$autocomplete.searching),n.$autocomplete.searching=setTimeout((function(){n.$autocomplete.term!==n.$autocomplete.element.val()&&(n.$autocomplete.selectedItem=null,n.$autocomplete.search(null,t))}),n.$autocomplete.options.delay)}},n.origEscClose=n.escClose,n.escClose=function(t){n.hasAutocomplete&&("ui-active-menuitem"===t.target.id||e(t.target).closest("ul").hasClass("ui-autocomplete"))||n.origEscClose(t)},n.autocomplete_init())}))}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a;i=[n(16)],void 0===(a=function(e){var t={};return t.ModalModel=e.Model.extend({defaults:{NameWrapper:'<span class="name">{name}</span>',Btn1Text:"ConfirmButtonText",Btn2Text:"Cancel"}}),t}.apply(t,i))||(e.exports=a)},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <p class="title">'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"Title")||(null!=t?o(t,"Title"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"Title",hash:{},data:a,loc:{start:{line:4,column:23},end:{line:4,column:32}}}):r)+"</p>\r\n"},3:function(e,t,n,i,a){var r,o,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <p data-ui-name="submessage">\r\n      '+(null!=(r="function"==typeof(o=null!=(o=s(n,"SubMessage")||(null!=t?s(t,"SubMessage"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"SubMessage",hash:{},data:a,loc:{start:{line:11,column:6},end:{line:11,column:22}}}):o)?r:"")+"\r\n      </p>\r\n"},5:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="options">\r\n'+(null!=(r=s(n,"if").call(o,null!=t?s(t,"btn2Text"):t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a,loc:{start:{line:16,column:10},end:{line:18,column:17}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"btn1Text"):t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a,loc:{start:{line:19,column:10},end:{line:21,column:17}}}))?r:"")+"      </span>\r\n"},6:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <a class="btn btnGrey btnRounded btnSmall no cancel" href="#">'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"btn2Text")||(null!=t?o(t,"btn2Text"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"btn2Text",hash:{},data:a,loc:{start:{line:17,column:72},end:{line:17,column:84}}}):r)+"</a>\r\n"},8:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <a class="btn btnRed btnRounded btnSmall yes confirm" data-type="'+l("function"==typeof(r=null!=(r=c(n,"ModalType")||(null!=t?c(t,"ModalType"):t))?r:s)?r.call(o,{name:"ModalType",hash:{},data:a,loc:{start:{line:20,column:75},end:{line:20,column:88}}}):r)+'" href="#">'+l("function"==typeof(r=null!=(r=c(n,"btn1Text")||(null!=t?c(t,"btn1Text"):t))?r:s)?r.call(o,{name:"btn1Text",hash:{},data:a,loc:{start:{line:20,column:99},end:{line:20,column:111}}}):r)+"</a>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="statusbar bold" style="bottom: 0px;">\r\n  <div class="clearfix">\r\n'+(null!=(r=l(n,"if").call(s,null!=t?l(t,"Title"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:3,column:6},end:{line:5,column:13}}}))?r:"")+'      <p data-ui-name="message">\r\n      '+(null!=(r="function"==typeof(o=null!=(o=l(n,"Message")||(null!=t?l(t,"Message"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"Message",hash:{},data:a,loc:{start:{line:7,column:6},end:{line:7,column:19}}}):o)?r:"")+"\r\n      </p>\r\n"+(null!=(r=l(n,"if").call(s,null!=t?l(t,"SubMessage"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))?r:"")+(null!=(r=l(n,"if").call(s,null!=t?l(t,"ShowButtons"):t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:6},end:{line:23,column:13}}}))?r:"")+"  </div>\r\n</div>"},useData:!0})},,,,,,,,,,,,,,,,function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                            <li class="clearfix">\r\n                                <label>\r\n                                    <input type="radio" value="'+l("function"==typeof(r=null!=(r=c(n,"id")||(null!=t?c(t,"id"):t))?r:s)?r.call(o,{name:"id",hash:{},data:a,loc:{start:{line:15,column:63},end:{line:15,column:69}}}):r)+'" name="reportArea" />\r\n                                    <span>'+l("function"==typeof(r=null!=(r=c(n,"title")||(null!=t?c(t,"title"):t))?r:s)?r.call(o,{name:"title",hash:{},data:a,loc:{start:{line:16,column:42},end:{line:16,column:51}}}):r)+"</span>\r\n                                </label>\r\n                            </li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="statusbar reporting" id="profile-report-area">\r\n    <div class="modal-header">\r\n        <h3 rel="localize[ReportContent]">Report Content</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <form class="form-stacked" id="formReportArea">\r\n            <fieldset>\r\n                <span class="clearfix">\r\n                    <label rel="localize[ReportLabel]">I am reporting this user\'s...</label>\r\n                    <span class="input">\r\n                        <ul class="inputs-list">\r\n'+(null!=(r=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"area"):t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:12,column:28},end:{line:19,column:37}}}))?r:"")+'                        </ul>\r\n                    </span>\r\n                </span>\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <span id="profile-report-choose" class="btn btnPurple btnRounded profile-report-choose" rel="localize[Select]">Select</span>\r\n        <span id="profile-report-cancel" class="btn btnLightGrey btnRounded" rel="localize[Cancel]">Cancel</span>\r\n    </div>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,i,a,r){var o,s,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                            <li class="clearfix"><label><input type="radio" value="'+c(l(null!=t?u(t,"shortName"):t,t))+'" name="reportReason" '+(null!=(o=(s=n(9),s&&(s.__esModule?s.default:s)).call(null!=t?t:e.nullContext||{},null!=t?u(t,"nextAction"):t,"block",{name:"ifequals",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:19,column:123},end:{line:19,column:200}}}))?o:"")+" /><span>"+c(l(null!=t?u(t,"longName"):t,t))+"</span></label></li>\r\n"},2:function(e,t,n,i,a){return' class="profile-report-confirm" '},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=e.lambda,s=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="profile-report-reason" class="statusbar reporting">\r\n    <div class="modal-header">\r\n        <h3 rel="localize[ReportContent]">Report content</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p rel="localize[ReportSelectReasonText]">\r\n            Please select the category that most closely reflects your concern.\r\n            We will review the content and determine whether it violates our <a href="http://www.rockstargames.com/legal/#4" target="_blank">Code of Conduct</a>\r\n            or is not appropriate for all our members.\r\n            Abusing the reporting feature is also a violation of the <a href="http://www.rockstargames.com/legal/#4" target="_blank">Code of Conduct</a>, so please do not do it.\r\n        </p>\r\n        <form class="form-stacked" id="formSpamReport">\r\n            <fieldset>\r\n                <span class="clearfix">\r\n                    <label id="optionsSpam" rel="localize[ReportThisContent]">This content ...</label>\r\n                    <span class="input">\r\n                        <ul class="inputs-list">\r\n'+(null!=(r=l(n,"each").call(null!=t?t:e.nullContext||{},null!=(r=null!=t?l(t,"reportingData"):t)?l(r,"reason"):r,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:18,column:28},end:{line:20,column:37}}}))?r:"")+'                        </ul>\r\n                    </span>\r\n                </span>\r\n                <input type="hidden" name="area" id="areaSelected" value="'+s(o(null!=t?l(t,"area"):t,t))+'" />\r\n                <input type="hidden" name="feedId" id="feedId" value="'+s(o(null!=t?l(t,"id"):t,t))+'" />\r\n                <input type="hidden" name="nickname" id="nickname" value="'+s(o(null!=t?l(t,"nickname"):t,t))+'" />\r\n            </fieldset>\r\n        </form>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <span id="profile-report-confirm" data-ajaxid="'+s(o(null!=t?l(t,"id"):t,t))+'" class="btn btnPurple btnRounded profile-report-confirm" rel="localize[SubmitReport]">Submit Report</span>\r\n        <span id="profile-report-cancel" class="btn btnLightGrey btnRounded" rel="localize[Cancel]">Cancel</span>\r\n    </div>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);function a(e){return e&&(e.__esModule?e.default:e)}e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'                    <p rel="localize[ReportUseIPForm]">\r\n                        To report unauthorized use of intellectual property, please continue to our IP infringement form.\r\n                    </p>\r\n\r\n'},3:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\r\n                    "+(null!=(s=a(n(9)).call(l,null!=(s=null!=t?c(t,"reportingData"):t)?c(s,"displayOptions"):s,"true",{name:"ifequals",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:20},end:{line:18,column:172}}}))?s:"")+'\r\n\r\n                    <span class="input">\r\n                        <ul class="inputs-list">\r\n'+(null!=(s=a(n(9)).call(l,null!=(s=null!=t?c(t,"reportingData"):t)?c(s,"shortName"):s,"privacy",{name:"ifequals",hash:{},fn:e.program(6,o,0),inverse:e.program(8,o,0),data:o,loc:{start:{line:22,column:28},end:{line:51,column:41}}}))?s:"")+"                        </ul>\r\n                    </span>\r\n                </span>\r\n"},4:function(e,t,n,i,a){return'<label id="optionsSpam" rel="localize[ReportSelectOption]">Please select an option</label>'},6:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                            <span class="moreInfo">\r\n                                <label for="moreInfoText">'+e.escapeExpression(e.lambda(null!=(r=null!=t?o(t,"reportingData"):t)?o(r,"labelText"):r,t))+'</label>\r\n                                <span rel="localize[ReportPrivacy]">How is this content violating your privacy?</span>\r\n                                <textarea name="moreInfoText" class="moreInfoText" value="" maxlength="500"></textarea>\r\n                            </span>\r\n'},8:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=c(i,"each").call(l,null!=(s=null!=t?c(t,"reportingData"):t)?c(s,"moreInfo"):s,{name:"each",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:29,column:28},end:{line:45,column:37}}}))?s:"")+"\r\n"+(null!=(s=a(n(9)).call(l,null!=(s=null!=t?c(t,"reportingData"):t)?c(s,"shortName"):s,"harass",{name:"ifequals",hash:{},fn:e.program(17,o,0),inverse:e.noop,data:o,loc:{start:{line:47,column:28},end:{line:49,column:41}}}))?s:"")+"\r\n"},9:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=c(i,"if").call(l,null!=t?c(t,"optionText"):t,{name:"if",hash:{},fn:e.program(10,o,0),inverse:e.noop,data:o,loc:{start:{line:30,column:28},end:{line:37,column:35}}}))?s:"")+"\r\n"+(null!=(s=a(n(9)).call(l,null!=t?c(t,"displayInput"):t,"true",{name:"ifequals",hash:{},fn:e.program(15,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:28},end:{line:44,column:41}}}))?s:"")},10:function(e,t,i,r,o){var s,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                            <li class="clearfix">\r\n                                <label>\r\n                                    <input type="radio" value="'+c(l(null!=t?u(t,"optionText"):t,t))+'" name="moreInfo" '+(null!=(s=a(n(9)).call(null!=t?t:e.nullContext||{},null!=t?u(t,"displayInput"):t,"true",{name:"ifequals",hash:{},fn:e.program(11,o,0),inverse:e.program(13,o,0),data:o,loc:{start:{line:33,column:95},end:{line:33,column:231}}}))?s:"")+" />\r\n                                    <span>"+c(l(null!=t?u(t,"optionText"):t,t))+"</span>\r\n                                </label>\r\n                            </li>\r\n"},11:function(e,t,n,i,a){return' class="profile-report-showMoreInfoText" '},13:function(e,t,n,i,a){return' class="profile-report-hideMoreInfoText" '},15:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                            <span class="moreInfo hide">\r\n                                <label for="moreInfoText">'+e.escapeExpression(e.lambda(null!=t?r(t,"labelText"):t,t))+'</label>\r\n                                <input type="text" name="moreInfoText" class="moreInfoText" value="" maxlength="500" />\r\n                            </span>\r\n'},17:function(e,t,n,i,a){return'                            <p rel="localize[ReportDanger]">Are you, or your friend, in physical danger? If yes, report to local authority.</p>\r\n'},19:function(e,t,n,i,a){return'        <span id="profile-report-submitMoreInfo" class="btn btnPurple btnRounded" rel="localize[Continue]">Continue</span>\r\n        <span id="profile-report-cancel" class="btn btnLightGrey btnRounded" rel="localize[Cancel]">Cancel</span>\r\n'},21:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span id="profile-report-submitMoreInfo" data-ajaxid="'+e.escapeExpression(e.lambda(null!=t?r(t,"id"):t,t))+'" class="btn btnPurple btnRounded" rel="localize[SubmitReport]">Submit Report</span>\r\n        <span id="profile-report-cancel" class="btn btnLightGrey btnRounded" rel="localize[Cancel]">Cancel</span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,r,o){var s,l=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="profile-report-moreinfo" class="statusbar reporting">\r\n    <div class="modal-header">\r\n        <h3 rel="localize[ReportContent]">Report content</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <h4>'+c(l(null!=(s=null!=t?d(t,"reportingData"):t)?d(s,"longName"):s,t))+'</h4>\r\n        <form class="form-stacked" id="formSpamReport">\r\n            <fieldset>\r\n                <span class="clearfix">\r\n\r\n'+(null!=(s=a(n(9)).call(u,null!=(s=null!=t?d(t,"reportingData"):t)?d(s,"shortName"):s,"ipr",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:11,column:20},end:{line:55,column:29}}}))?s:"")+'\r\n                <input type="hidden" name="area" id="areaSelected" value="" />\r\n                <input type="hidden" name="reason" id="reasonSelected" value="" />\r\n                <input type="hidden" name="nickname" id="nickname" value="'+c(l(null!=t?d(t,"nickname"):t,t))+'" />\r\n                <input type="hidden" name="url" id="url" value="'+c(l(null!=t?d(t,"url"):t,t))+'" />\r\n            </fieldset>\r\n            <span class="help-inline" id="error"></span>\r\n        </form>\r\n    </div>\r\n    <div class="modal-footer">\r\n'+(null!=(s=a(n(9)).call(u,null!=(s=null!=t?d(t,"reportingData"):t)?d(s,"shortName"):s,"ipr",{name:"ifequals",hash:{},fn:e.program(19,o,0),inverse:e.program(21,o,0),data:o,loc:{start:{line:66,column:8},end:{line:72,column:21}}}))?s:"")+"    </div>\r\n</div>"},useData:!0})},,function(e,t,n){var i=n(2);function a(e){return e&&(e.__esModule?e.default:e)}e.exports=(i.default||i).template({1:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lambda,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="first'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"none",{name:"ifequals",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:24},end:{line:2,column:77}}}))?s:"")+'" data-ui-name="noOption">\r\n    <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="None">\r\n    <span rel="localize[No]">No</span>\r\n</a>\r\n<a href="#" class="last'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"everyone",{name:"ifequals",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:23},end:{line:6,column:80}}}))?s:"")+'" data-ui-name="yesOption">\r\n    <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="Everyone">\r\n    <span rel="localize[Yes]">Yes</span>\r\n</a>\r\n'},2:function(e,t,n,i,a){return" selected"},4:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lambda,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="first'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"none",{name:"ifequals",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:11,column:24},end:{line:11,column:77}}}))?s:"")+'" data-ui-name="meOption">\r\n    <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="None">\r\n    <span rel="localize[MeOnly]">Me Only</span>\r\n</a>\r\n\r\n<a href="#" class="'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"friends",{name:"ifequals",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:19},end:{line:16,column:74}}}))?s:"")+(null!=(s=a(n(9)).call(l,null!=t?d(t,"minor"):t,!0,{name:"ifequals",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:16,column:74},end:{line:16,column:116}}}))?s:"")+'" data-ui-name="friendsOption">\r\n    <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="Friends">\r\n    <span rel="localize[FriendsOnly]">Friends</span>\r\n</a>\r\n\r\n'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"minor"):t,!1,{name:"ifequals",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:21,column:0},end:{line:31,column:13}}}))?s:"")},5:function(e,t,n,i,a){return"selected"},7:function(e,t,n,i,a){return" last"},9:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lambda,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"friendsandcrews",{name:"ifequals",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:19},end:{line:22,column:82}}}))?s:"")+'" data-ui-name="crewsOption">\r\n    <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="FriendsAndCrews">\r\n    <span rel="localize[FriendsandCrew]">Friends & Crews</span>\r\n</a>\r\n\r\n<a href="#" class="last'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"everyone",{name:"ifequals",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:23},end:{line:27,column:80}}}))?s:"")+'" data-ui-name="everyoneOption">\r\n    <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="Everyone">\r\n    <span rel="localize[Everyone]">Everyone</span>\r\n</a>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(n(9)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"settingName"):t,"profile_location",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:1,column:0},end:{line:32,column:13}}}))?s:"")+'<span class="privacyChangeAlert"></span>'},useData:!0})},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i={},a=t.getPasswordRequirements();return i.hasStringValue=function(e){return"string"==typeof e&&e.length>0},i.email=function(e){if(!i.hasStringValue(e))return!1;return e=e.trim(),/^[A-Za-z0-9_\-\+]+([.'][A-Za-z0-9_\-\+]+)*@[A-Za-z0-9]+([-.][A-Za-z0-9]+)*\.[A-Za-z]{2,}$/.test(e)},i.emailNoPlus=function(e){if(!i.hasStringValue(e))return!1;return e=e.trim(),/^(([^\+<>()\[\]\\.,;:\s@"]+(\.[^\+<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},i.nicknameLength=function(e){return!!i.hasStringValue(e)&&(e.length>=6&&e.length<=16)},i.nicknameForSearch=function(e){return!!i.hasStringValue(e)&&/^([a-zA-Z0-9_\.\-]{3,16})$/.test(e)},i.nickname=function(e){return!!i.hasStringValue(e)&&/^([a-zA-Z0-9_\-]{6,16})$/.test(e)},i.equals=function(e,t){return e===t},i.passwordForSignin=function(e){return!!i.hasStringValue(e)&&(e.length>0&&e.length<=a.maxSignin)},i.password=function(e,t){if(!i.hasStringValue(e))return!1;return(t||/^(?=.*\d)(?=.*[A-Z])(?=.*[a-z])^(.+)$/).test(e)},i.getPasswordError=function(e,t){if("string"==typeof e){var n=t?a.minSignin:a.min,i=t?a.maxSignin:a.max;e=e.replace(/\[min\]/gi,n).replace(/\[max\]/gi,i)}return e},i.isDate=function(e,t,n){var i=new Date(e+"/"+t+"/"+n);return i.getFullYear()===Number(n)&&i.getDate()===Number(t)&&i.getMonth()+1===Number(e)},i.dob=function(e,t,n,a){var r;return""===e||""===t||""===n?r="emptyInput":i.isDate(e,t,n)?a&&i.calculateAge(e,t,n)<13&&(r="tooYoung"):r="invalidDate",{status:void 0===r,reason:r}},i.calculateAge=function(e,t,n){var i=new Date,a=i.getFullYear(),r=i.getMonth(),o=i.getDate(),s=a-n;return r<e-1&&s--,e-1===r&&o<t&&s--,s},i}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i={RGSC_JS_PLAYER_LIST_RESPONSE:function(e){t.pubsub.publish("SDK.RGSC_JS_PLAYER_LIST_RESPONSE",e)},RGSC_JS_PLAYER_LIST_MINI_RESPONSE:function(e){t.pubsub.publish("SDK.RGSC_JS_PLAYER_LIST_MINI_RESPONSE",e)},RGSC_JS_FRIEND_SEND_INVITE_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_FRIEND_SEND_INVITE_RESULT",e)},RGSC_JS_FRIEND_DECLINE_INVITE_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_FRIEND_DECLINE_INVITE_RESULT",e)},RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT",e)},RGSC_JS_GAME_INVITE_SEND_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_GAME_INVITE_SEND_RESULT",e)},RGSC_JS_JOIN_VIA_PRESENCE_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_JOIN_VIA_PRESENCE_RESULT",e)},RGSC_JS_FRIEND_DELETE_FRIEND_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_FRIEND_DELETE_FRIEND_RESULT",e)},RGSC_JS_FRIEND_CANCEL_INVITE_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_FRIEND_CANCEL_INVITE_RESULT",e)},RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT",e)},RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT:function(e){t.pubsub.publish("SDK.RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT",e)},RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE:function(e){t.pubsub.publish("SDK.RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE",e)},RGSC_JS_PLAYER_INFO_RESPONSE:function(e){t.pubsub.publish("SDK.RGSC_JS_PLAYER_INFO_RESPONSE",e)}};return window.RGSC_JS_PLAYER_LIST_RESPONSE=i.RGSC_JS_PLAYER_LIST_RESPONSE,window.RGSC_JS_PLAYER_LIST_MINI_RESPONSE=i.RGSC_JS_PLAYER_LIST_MINI_RESPONSE,window.RGSC_JS_FRIEND_SEND_INVITE_RESULT=i.RGSC_JS_FRIEND_SEND_INVITE_RESULT,window.RGSC_JS_FRIEND_DECLINE_INVITE_RESULT=i.RGSC_JS_FRIEND_DECLINE_INVITE_RESULT,window.RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT=i.RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT,window.RGSC_JS_GAME_INVITE_SEND_RESULT=i.RGSC_JS_GAME_INVITE_SEND_RESULT,window.RGSC_JS_JOIN_VIA_PRESENCE_RESULT=i.RGSC_JS_JOIN_VIA_PRESENCE_RESULT,window.RGSC_JS_FRIEND_DELETE_FRIEND_RESULT=i.RGSC_JS_FRIEND_DELETE_FRIEND_RESULT,window.RGSC_JS_FRIEND_CANCEL_INVITE_RESULT=i.RGSC_JS_FRIEND_CANCEL_INVITE_RESULT,window.RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT=i.RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT,window.RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT=i.RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT,window.RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE=i.RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE,window.RGSC_JS_PLAYER_INFO_RESPONSE=i.RGSC_JS_PLAYER_INFO_RESPONSE,i}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="profileButton">\r\n'+(null!=(r=u(n,"if").call(s,null!=t?u(t,"AvatarUrl"):t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:3,column:1},end:{line:5,column:8}}}))?r:"")+'\t<div class="text">\r\n\t\t<h4 class="servicename">'+c("function"==typeof(o=null!=(o=u(n,"OnlineServiceDisplayName")||(null!=t?u(t,"OnlineServiceDisplayName"):t))?o:l)?o.call(s,{name:"OnlineServiceDisplayName",hash:{},data:a,loc:{start:{line:7,column:26},end:{line:7,column:54}}}):o)+"</h4>\r\n\t\t<h5>"+c("function"==typeof(o=null!=(o=u(n,"UserName")||(null!=t?u(t,"UserName"):t))?o:l)?o.call(s,{name:"UserName",hash:{},data:a,loc:{start:{line:8,column:6},end:{line:8,column:18}}}):o)+'</h5>\r\n\t\t<span class="icon '+c("function"==typeof(o=null!=(o=u(n,"OnlineServiceName")||(null!=t?u(t,"OnlineServiceName"):t))?o:l)?o.call(s,{name:"OnlineServiceName",hash:{},data:a,loc:{start:{line:9,column:20},end:{line:9,column:41}}}):o)+'">'+c("function"==typeof(o=null!=(o=u(n,"OnlineServiceName")||(null!=t?u(t,"OnlineServiceName"):t))?o:l)?o.call(s,{name:"OnlineServiceName",hash:{},data:a,loc:{start:{line:9,column:43},end:{line:9,column:64}}}):o)+"</span>\r\n\t</div>\r\n</div>\r\n"},2:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t<img width="64" height="64" class="avatarImg" src="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AvatarUrl")||(null!=t?o(t,"AvatarUrl"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AvatarUrl",hash:{},data:a,loc:{start:{line:4,column:52},end:{line:4,column:65}}}):r)+'">\r\n'},4:function(e,t,n,i,a){return'<span class="noaccounts" rel="localize[NoLinkedAccounts]">This user is not displaying any linked accounts</span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(r=s(n,"each").call(o,t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:12,column:9}}}))?r:"")+(null!=(r=s(n,"unless").call(o,t,{name:"unless",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a,loc:{start:{line:13,column:0},end:{line:15,column:11}}}))?r:"")},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ShowActions"):t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:13,column:4},end:{line:23,column:11}}}))?r:""},2:function(e,t,n,i,a){return'    <ul class="user-actions clearfix">\r\n        <li class="playerActions">\r\n            <span class="icon"></span>\r\n            <span class="icon"></span>\r\n            <span class="icon"></span>\r\n            <span rel="localize[PlayerActions]">Player Actions</span>\r\n        </li>\r\n    </ul>\r\n    <div><ul class="buttons clearfix"/></div>\r\n'},4:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="crewTag private">\r\n            <span>'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"PrimaryClanTag")||(null!=t?o(t,"PrimaryClanTag"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"PrimaryClanTag",hash:{},data:a,loc:{start:{line:33,column:18},end:{line:33,column:36}}}):r)+"</span>\r\n        </div>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="clearfix">\r\n    <img class="avatar" src="'+u(typeof(o=null!=(o=d(n,"AvatarUrl")||(null!=t?d(t,"AvatarUrl"):t))?o:l)===c?o.call(s,{name:"AvatarUrl",hash:{},data:a,loc:{start:{line:2,column:29},end:{line:2,column:42}}}):o)+'" alt=""/>\r\n    <div class="relationship">'+u(typeof(o=null!=(o=d(n,"RelationshipDesc")||(null!=t?d(t,"RelationshipDesc"):t))?o:l)===c?o.call(s,{name:"RelationshipDesc",hash:{},data:a,loc:{start:{line:3,column:30},end:{line:3,column:50}}}):o)+'</div>\r\n    <div class="user-data">\r\n        <h3>'+u(typeof(o=null!=(o=d(n,"DisplayName")||(null!=t?d(t,"DisplayName"):t))?o:l)===c?o.call(s,{name:"DisplayName",hash:{},data:a,loc:{start:{line:5,column:12},end:{line:5,column:27}}}):o)+'</h3>\r\n        <span class="subText">\r\n            <i class="status '+u(typeof(o=null!=(o=d(n,"StatusClass")||(null!=t?d(t,"StatusClass"):t))?o:l)===c?o.call(s,{name:"StatusClass",hash:{},data:a,loc:{start:{line:7,column:29},end:{line:7,column:44}}}):o)+'"></i>\r\n            <span>'+u(typeof(o=null!=(o=d(n,"PlayingGame")||(null!=t?d(t,"PlayingGame"):t))?o:l)===c?o.call(s,{name:"PlayingGame",hash:{},data:a,loc:{start:{line:8,column:18},end:{line:8,column:33}}}):o)+"</span>\r\n        </span>\r\n    </div>\r\n\r\n"+(null!=(r=d(n,"unless").call(s,null!=t?d(t,"IsMe"):t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:12,column:4},end:{line:24,column:15}}}))?r:"")+'\r\n    <div id="cardInfoFooter" class="clearfix">\r\n        <div class="member-since clearfix">\r\n            <span class="Country '+u(typeof(o=null!=(o=d(n,"CountryCode")||(null!=t?d(t,"CountryCode"):t))?o:l)===c?o.call(s,{name:"CountryCode",hash:{},data:a,loc:{start:{line:28,column:33},end:{line:28,column:48}}}):o)+'"></span>\r\n            <span class="member-date"><b><span rel="localize[MemberSince]">Member since:</span></b> '+u(typeof(o=null!=(o=d(n,"CreatedDateStr")||(null!=t?d(t,"CreatedDateStr"):t))?o:l)===c?o.call(s,{name:"CreatedDateStr",hash:{},data:a,loc:{start:{line:29,column:100},end:{line:29,column:118}}}):o)+"</span>\r\n        </div>\r\n"+(null!=(r=d(n,"if").call(s,null!=t?d(t,"PrimaryClanTag"):t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a,loc:{start:{line:31,column:8},end:{line:40,column:15}}}))?r:"")+"    </div>\r\n</div>"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<span class="noaccounts" rel="localize[NoCrews]">This user is not a member of any crew yet</span>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="status tooltip">\r\n            <span>'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"PlayingGame")||(null!=t?o(t,"PlayingGame"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"PlayingGame",hash:{},data:a,loc:{start:{line:8,column:18},end:{line:8,column:33}}}):r)+"</span>\r\n        </span>\r\n"},3:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="infoWrap optionProfile tooltip">\r\n'+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ViewerMutualFriendCount"):t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:12},end:{line:16,column:19}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"InviteShortMsg"):t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a,loc:{start:{line:17,column:12},end:{line:20,column:19}}}))?r:"")+"        </span>\r\n"},4:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"MutualFriendText")||(null!=t?o(t,"MutualFriendText"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"MutualFriendText",hash:{},data:a,loc:{start:{line:15,column:12},end:{line:15,column:32}}}):r)+"\r\n"},6:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+l("function"==typeof(r=null!=(r=c(n,"InviteShortMsg")||(null!=t?c(t,"InviteShortMsg"):t))?r:s)?r.call(o,{name:"InviteShortMsg",hash:{},data:a,loc:{start:{line:18,column:12},end:{line:18,column:30}}}):r)+'\r\n            <a href="#"><span>'+l("function"==typeof(r=null!=(r=c(n,"InviteMsg")||(null!=t?c(t,"InviteMsg"):t))?r:s)?r.call(o,{name:"InviteMsg",hash:{},data:a,loc:{start:{line:19,column:30},end:{line:19,column:43}}}):r)+"</span></a>\r\n"},8:function(e,t,n,i,a){return'    <div>\r\n      <ul class="playerOptions"/>\r\n    </div>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="profileButton_'+u(typeof(o=null!=(o=d(n,"RockstarId")||(null!=t?d(t,"RockstarId"):t))?o:l)===c?o.call(s,{name:"RockstarId",hash:{},data:a,loc:{start:{line:1,column:23},end:{line:1,column:37}}}):o)+'" class="profileButton gold '+u(typeof(o=null!=(o=d(n,"OnlineStatus")||(null!=t?d(t,"OnlineStatus"):t))?o:l)===c?o.call(s,{name:"OnlineStatus",hash:{},data:a,loc:{start:{line:1,column:65},end:{line:1,column:81}}}):o)+'" data-id="'+u(typeof(o=null!=(o=d(n,"RockstarId")||(null!=t?d(t,"RockstarId"):t))?o:l)===c?o.call(s,{name:"RockstarId",hash:{},data:a,loc:{start:{line:1,column:92},end:{line:1,column:106}}}):o)+'">\r\n    <a class="optionProfile" href="#"><img width="64" height="64" class="avatarImg" src="'+u(typeof(o=null!=(o=d(n,"AvatarUrl")||(null!=t?d(t,"AvatarUrl"):t))?o:l)===c?o.call(s,{name:"AvatarUrl",hash:{},data:a,loc:{start:{line:2,column:89},end:{line:2,column:102}}}):o)+'" /></a>\r\n    <div class="text">\r\n        <h5 class="profilenickname"><a class="optionProfile" href="#">'+u(typeof(o=null!=(o=d(n,"DisplayName")||(null!=t?d(t,"DisplayName"):t))?o:l)===c?o.call(s,{name:"DisplayName",hash:{},data:a,loc:{start:{line:4,column:70},end:{line:4,column:85}}}):o)+"</a></h5>\r\n\r\n"+(null!=(r=d(n,"if").call(s,null!=t?d(t,"IsOnline"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:6,column:8},end:{line:10,column:15}}}))?r:"")+"\r\n"+(null!=(r=d(n,"unless").call(s,null!=t?d(t,"IsMe"):t,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:12,column:8},end:{line:22,column:19}}}))?r:"")+"    </div>\r\n\r\n"+(null!=(r=d(n,"unless").call(s,null!=t?d(t,"IsMe"):t,{name:"unless",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a,loc:{start:{line:25,column:4},end:{line:29,column:15}}}))?r:"")+"</div>"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<span rel="localize[FriendsHidden]" class="noaccounts">This user is not showing friend information</span>'},useData:!0})},function(e,t,n){var i=n(2);function a(e){return e&&(e.__esModule?e.default:e)}e.exports=(i.default||i).template({1:function(e,t,i,r,o,s,l){var c,u=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="gamesFlipWrapper">\r\n      <ul id="gamesFlip">\r\n'+(null!=(c=a(n(33)).call(u,null!=(c=null!=t?d(t,"games"):t)?d(c,"length"):c,2,{name:"ifless",hash:{},fn:e.program(2,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:4,column:8},end:{line:6,column:19}}}))?c:"")+(null!=(c=d(i,"each").call(u,null!=t?d(t,"games"):t,{name:"each",hash:{},fn:e.program(4,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:7,column:8},end:{line:9,column:17}}}))?c:"")+(null!=(c=a(n(33)).call(u,null!=(c=null!=t?d(t,"games"):t)?d(c,"length"):c,3,{name:"ifless",hash:{},fn:e.program(6,o,0,s,l),inverse:e.noop,data:o,loc:{start:{line:10,column:8},end:{line:12,column:19}}}))?c:"")+'      </ul>\r\n      <div id="gamesFlipMask"></div>\r\n  </div>\r\n'},2:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <li class="g0"><img src="'+e.escapeExpression(e.lambda(null!=t?r(t,"cdnUrl"):t,t))+'images/common/games-coverflow/default.png" alt="Rockstar" /></li>\r\n'},4:function(e,t,n,i,a,r,o){var s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <li class="g'+l(s(a&&c(a,"index"),t))+'"><img src="'+l(s(null!=o[1]?c(o[1],"cdnUrl"):o[1],t))+"images/common/games-coverflow/"+l(s(null!=t?c(t,"Name"):t,t))+'.png" alt="'+l(s(null!=t?c(t,"Name"):t,t))+'" /></li>\r\n'},6:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <li class="g2"><img src="'+e.escapeExpression(e.lambda(null!=t?r(t,"cdnUrl"):t,t))+'images/common/games-coverflow/default.png" alt="Rockstar" /></li>\r\n'},8:function(e,t,n,i,a){return'  <div class="content" rel="localize[NoGamesPlayed]">\r\n      No games played yet!\r\n  </div>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a,r,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(n,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"games"):t,{name:"if",hash:{},fn:e.program(1,a,0,r,o),inverse:e.program(8,a,0,r,o),data:a,loc:{start:{line:1,column:0},end:{line:20,column:7}}}))?s:""},useData:!0,useDepths:!0})},function(e,t,n){var i=n(2);function a(e){return e&&(e.__esModule?e.default:e)}e.exports=(i.default||i).template({1:function(e,t,n,i,a){return' class="active"'},3:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"MutualFriendCount"):t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:153},end:{line:2,column:215}}}))?r:""},4:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" <span>("+e.escapeExpression(e.lambda(null!=t?r(t,"MutualText"):t,t))+")</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li"+(null!=(s=a(n(9)).call(l,null!=t?c(t,"Active"):t,"crews",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:3},end:{line:1,column:59}}}))?s:"")+'><a href="#" data-nav="crews"><span rel="localize[Crews]">crews</span></a></li>\r\n<li'+(null!=(s=a(n(9)).call(l,null!=t?c(t,"Active"):t,"friends",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:3},end:{line:2,column:61}}}))?s:"")+'><a href="#" data-nav="friends"><span rel="localize[Friends]">friends</span>'+(null!=(s=c(i,"unless").call(l,null!=t?c(t,"IsMe"):t,{name:"unless",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:137},end:{line:2,column:226}}}))?s:"")+"</a></li> \r\n<li"+(null!=(s=a(n(9)).call(l,null!=t?c(t,"Active"):t,"accounts",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:3},end:{line:3,column:62}}}))?s:"")+'><a href="#" data-nav="accounts"><span rel="localize[Accounts]">accounts</span></a></li>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  \t\t            <p class="desc">'+e.escapeExpression("function"==typeof(o=null!=(o=l(n,"Message")||(null!=t?l(t,"Message"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"Message",hash:{},data:a,loc:{start:{line:9,column:32},end:{line:9,column:43}}}):o)+"</p>\r\n"+(null!=(r=l(n,"if").call(s,null!=t?l(t,"ShowActions"):t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:10,column:20},end:{line:25,column:27}}}))?r:"")},2:function(e,t,n,i,a){return'                    <div id="cardInfoVitalsHidden">\r\n\t\t                <div class="user-actions-wrapper">\r\n\t\t                    <div class="playerActions">\r\n\t\t\t                    <a href="#">\r\n                                    <span class="icon"></span>\r\n                                    <span class="icon"></span>\r\n                                    <span class="icon"></span>\r\n                                    <span rel="localize[PlayerActions]">Player Actions</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div><ul class="buttons clearfix"/></div>\r\n                    </div>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="inner">\r\n\t<div class="wrapper">\r\n\t\t<div class="content-wrapper">\r\n\t\t\t<div class="content-inner clearfix">\r\n                <img width="128" height="128" class="avatar" src="'+e.escapeExpression("function"==typeof(o=null!=(o=l(n,"AvatarUrl")||(null!=t?l(t,"AvatarUrl"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"AvatarUrl",hash:{},data:a,loc:{start:{line:5,column:66},end:{line:5,column:79}}}):o)+'" alt=""/>\r\n\t\t\t    <div class="content-column">\r\n\t\t\t        <h1 rel="localize[ProfileNotAvailable]">Profile is not available</h1>\r\n'+(null!=(r=l(n,"if").call(s,null!=t?l(t,"ProfileFound"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:8,column:20},end:{line:26,column:27}}}))?r:"")+"\t\t\t    </div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="friend add addFriend">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:3,column:27},end:{line:3,column:42}}}):r)+'"><span rel="localize[Add]">Add</span></a>\r\n    </li>\r\n'},3:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="friend remove unfriend">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:8,column:27},end:{line:8,column:42}}}):r)+'"><span rel="localize[Unfriend]">Unfriend</span></a>\r\n    </li>\r\n'},5:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="friend add acceptInvite">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:13,column:27},end:{line:13,column:42}}}):r)+'"><span rel="localize[Accept]">Accept</span></a>\r\n    </li>\r\n'},7:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="friend remove declineInvite">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:18,column:27},end:{line:18,column:42}}}):r)+'"><span rel="localize[Decline]">Decline</span></a>\r\n    </li>\r\n'},9:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="friend remove cancelInvite">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:23,column:27},end:{line:23,column:42}}}):r)+'"><span rel="localize[CancelRequest]">Cancel Pending Friend Request</span></a>\r\n    </li>\r\n'},11:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="message">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:28,column:27},end:{line:28,column:42}}}):r)+'"><span rel="localize[MessageOption]">Message</span></a>\r\n    </li>\r\n'},13:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="report">\r\n    <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:33,column:23},end:{line:33,column:38}}}):r)+'"><span rel="localize[Report]">Report</span></a>\r\n</li>\r\n'},15:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="block">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:38,column:27},end:{line:38,column:42}}}):r)+'"><span rel="localize[Block]">Block</span></a>\r\n    </li>\r\n'},17:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="unblock">\r\n        <a href="#" class="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"AnchorClass")||(null!=t?o(t,"AnchorClass"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"AnchorClass",hash:{},data:a,loc:{start:{line:43,column:27},end:{line:43,column:42}}}):r)+'"><span rel="localize[Unblock]">Unblock</span></a>\r\n    </li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowAddFriend"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowRemoveFriend"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:6,column:0},end:{line:10,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowAcceptInvite"):t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:11,column:0},end:{line:15,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowDeclineInvite"):t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a,loc:{start:{line:16,column:0},end:{line:20,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowCancelnvite"):t,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.noop,data:a,loc:{start:{line:21,column:0},end:{line:25,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowMessage"):t,{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.noop,data:a,loc:{start:{line:26,column:0},end:{line:30,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowReport"):t,{name:"if",hash:{},fn:e.program(13,a,0),inverse:e.noop,data:a,loc:{start:{line:31,column:0},end:{line:35,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowBlock"):t,{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a,loc:{start:{line:36,column:0},end:{line:40,column:7}}}))?r:"")+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowUnBlock"):t,{name:"if",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a,loc:{start:{line:41,column:0},end:{line:45,column:7}}}))?r:"")},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <span class='subText'>\r\n            <i class=\"onlineStatus SCOnline\" />\r\n            "+e.escapeExpression(e.lambda(null!=t?r(t,"PlayingGame"):t,t))+"\r\n        </span>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,a,r){var o,s,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="profileButton crewMember" data-id="'+c(l(null!=t?u(t,"RockstarId"):t,t))+'">\r\n    <img width="64" height="64" class="avatarImg" data-id="'+c(l(null!=t?u(t,"RockstarId"):t,t))+'" alt="" src="'+c(l(null!=t?u(t,"AvatarUrl"):t,t))+'" />\r\n    <div class="text">\r\n        <h5>\r\n            <a href="#" class="profilenickname" data-id="'+c(l(null!=t?u(t,"RockstarId"):t,t))+'">'+c(l(null!=t?u(t,"Nickname"):t,t))+"</a>\r\n        </h5>\r\n\r\n"+(null!=(o=(s=n(9),s&&(s.__esModule?s.default:s)).call(null!=t?t:e.nullContext||{},null!=t?u(t,"IsOnline"):t,!0,{name:"ifequals",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:8,column:8},end:{line:13,column:21}}}))?o:"")+'\r\n        <span class="infoWrap rank" rel="localize['+c(l(null!=t?u(t,"Rank"):t,t))+']">'+c(l(null!=t?u(t,"Rank"):t,t))+'</span>\r\n\r\n        <span class="infoWrap dateJoined"><span rel="localize[Joined]">Joined</span>: '+c(l(null!=t?u(t,"DateJoinedLocalized"):t,t))+"</span>\r\n    </div>\r\n</div>\ufeff"},useData:!0})},function(e,t,n){(function(t,i){var a=n(0);t&&function(e){e.extend({xml2json:function(t,n){if(!t)return{};var i=function(e){return String(e||"").replace(/-/g,"_")};var a=function(t){return e.isArray(t)||(t=[t]),t.length=t.length,t};if("string"==typeof t&&(t=e.text2xml(t)),t.nodeType){if(3==t.nodeType||4==t.nodeType)return t.nodeValue;var r=9==t.nodeType?t.documentElement:t,o=function t(r,o){if(!r)return null;var s="",l=null,c=null;r.nodeType,i(r.localName||r.nodeName),r.text||r.nodeValue,r.childNodes&&r.childNodes.length>0&&e.each(r.childNodes,(function(e,n){var r=n.nodeType,o=i(n.localName||n.nodeName),c=n.text||n.nodeValue||"";if(8!=r)if(3!=r&&4!=r&&o)(l=l||{})[o]?(l[o].length||(l[o]=a(l[o])),l[o]=a(l[o]),l[o][l[o].length]=t(n,!0),l[o].length=l[o].length):l[o]=t(n);else{if(c.match(/^\s+$/))return;s+=c.replace(/^\s+/,"").replace(/\s+$/,"")}})),r.attributes&&r.attributes.length>0&&(c={},l=l||{},e.each(r.attributes,(function(e,t){var n=i(t.name),r=t.value;c[n]=r,l[n]?(l[cnn]=a(l[cnn]),l[n][l[n].length]=r,l[n].length=l[n].length):l[n]=r}))),l&&(l=e.extend(""!=s?new String(s):{},l||{}),(s=l.text?[l.text||""].concat([s]):s)&&(l.text=s),s="");var u=l||s;return n&&(s&&(u={}),(s=u.text||s||"")&&(u.text=s),o||(u=a(u))),u}(r,!0);return t=null,r=null,o}},text2xml:function(t){return e.parseXML(t)}})}(i),e.exports=a}).call(this,n(0),n(0))},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return"online"},3:function(e,t,n,i,a){return" SCOnline "},5:function(e,t,n,i,a){return" SCOffline "},7:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <div class='actions clearfix'>\r\n                <a href='#' data-id=\""+l("function"==typeof(r=null!=(r=c(n,"RockstarId")||(null!=t?c(t,"RockstarId"):t))?r:s)?r.call(o,{name:"RockstarId",hash:{},data:a,loc:{start:{line:16,column:37},end:{line:16,column:51}}}):r)+"\" data-services=\"accounts,friends\" class='btn btnPurple btnSmall optionGameInvite' rel='localize[InviteToGame]' style=\"display:none\">Invite to game</a>\r\n                <a href='#' data-id=\""+l("function"==typeof(r=null!=(r=c(n,"RockstarId")||(null!=t?c(t,"RockstarId"):t))?r:s)?r.call(o,{name:"RockstarId",hash:{},data:a,loc:{start:{line:17,column:37},end:{line:17,column:51}}}):r)+'" data-services="accounts,friends" class=\'btn btnPurple btnSmall optionJoingame\' rel=\'localize[JoinGame]\' style="display:none">Join game</a>\r\n            </div>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="profileButton gold '+(null!=(r=d(n,"if").call(s,null!=t?d(t,"IsOnline"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:30},end:{line:1,column:59}}}))?r:"")+'">\r\n    <a data-id="'+u(typeof(o=null!=(o=d(n,"RockstarId")||(null!=t?d(t,"RockstarId"):t))?o:l)===c?o.call(s,{name:"RockstarId",hash:{},data:a,loc:{start:{line:2,column:16},end:{line:2,column:30}}}):o)+'" data-services="accounts,friends" class="doNotRemove">\r\n        <img id="imgProfile'+u(typeof(o=null!=(o=d(n,"RockstarId")||(null!=t?d(t,"RockstarId"):t))?o:l)===c?o.call(s,{name:"RockstarId",hash:{},data:a,loc:{start:{line:3,column:27},end:{line:3,column:41}}}):o)+'" width="32" height="32" class="avatarImg" alt="'+u(typeof(o=null!=(o=d(n,"DisplayName")||(null!=t?d(t,"DisplayName"):t))?o:l)===c?o.call(s,{name:"DisplayName",hash:{},data:a,loc:{start:{line:3,column:89},end:{line:3,column:104}}}):o)+'" src="'+u(typeof(o=null!=(o=d(n,"AvatarUrl")||(null!=t?d(t,"AvatarUrl"):t))?o:l)===c?o.call(s,{name:"AvatarUrl",hash:{},data:a,loc:{start:{line:3,column:111},end:{line:3,column:124}}}):o)+'" />\r\n    </a>\r\n    <span class="text info">\r\n        <a data-id="'+u(typeof(o=null!=(o=d(n,"RockstarId")||(null!=t?d(t,"RockstarId"):t))?o:l)===c?o.call(s,{name:"RockstarId",hash:{},data:a,loc:{start:{line:6,column:20},end:{line:6,column:34}}}):o)+'" data-services="accounts,friends" class="doNotRemove">\r\n            <h5 class="profilenickname optionProfile">'+u(typeof(o=null!=(o=d(n,"DisplayName")||(null!=t?d(t,"DisplayName"):t))?o:l)===c?o.call(s,{name:"DisplayName",hash:{},data:a,loc:{start:{line:7,column:54},end:{line:7,column:69}}}):o)+'</h5>\r\n        </a>\r\n        \r\n        <div class="subText">\r\n            <i class="status '+(null!=(r=d(n,"if").call(s,null!=t?d(t,"IsOnline"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a,loc:{start:{line:11,column:29},end:{line:11,column:81}}}))?r:"")+'"></i>\r\n            <span>'+u(typeof(o=null!=(o=d(n,"PlayingGame")||(null!=t?d(t,"PlayingGame"):t))?o:l)===c?o.call(s,{name:"PlayingGame",hash:{},data:a,loc:{start:{line:12,column:18},end:{line:12,column:33}}}):o)+"</span>\r\n            \r\n"+(null!=(r=d(n,"if").call(s,null!=t?d(t,"IsOnline"):t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:12},end:{line:19,column:19}}}))?r:"")+"            \r\n        </div>\r\n    </span>    \r\n</li>"},useData:!0})},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(7),o=n(64);return{init:function(){t.ajaxSetup({timeout:globals.ajaxTimeout});var e=t(document);e.ajaxSend((function(e,t,n){o.checkServicesEnabled(n)?o.setupSlowAjaxMsg(n):t.abort()})),e.ajaxComplete((function(e,t,n){o.clearSlowTimeoutMsg(n)})),e.ajaxSuccess((function(e,n,i){null!=t("body").data("AjaxRetry")&&t("body").removeData("AjaxRetry")})),e.ajaxError((function(e,n,s,l){if(!a.isAjaxRequestAborted(n.statusText)&&(a.WriteDebugLog("Ajax Error","url; exception",s.url+"; "+l),o.clearSlowTimeoutMsg(s),!s.silentFail)){var c,u,d,f;u="url",d=s.url;var p=t("div.active:first span.waitMessage");if(a.pubsub.publish("utils.stopSpinner",p),p.hide(),0==n.status?(f="jqxhr.status == 0",a.WriteDebugLog("Ajax Error","Reason",f)):404==n.status?(f="404",a.WriteDebugLog("Ajax Error","Reason",f+" Requested URL not found.")):429==n.status?(f="429",a.WriteDebugLog("Ajax Error","Reason",f+" Too Many Requests."),c=a.errorCode("8000")):500==n.status&&(f="500",a.WriteDebugLog("Ajax Error","Reason",f+" Internal Server Error.")),"parsererror"==l)return f="parser error",void a.WriteDebugLog("Ajax Error","Reason","Parsing JSON request failed.");if("timeout"==l)f="timeout",a.WriteDebugLog("Ajax Error","Reason","Request timed out."),c=a.errorCode("1001");else{var h=n.responseText;try{var g=i.tryConvertRespToJson(h,s);null!=g?c=a.extractErrorFromResponse(g):(u+="; resp",a.stringHasContent(h)&&(h.length>50&&(h=h.substr(0,47)+"..."),d+="; "+h))}catch(e){a.WriteDebugLog("Ajax Error","Unknown",e&&e.message)}}if(a.stringHasContent(f)&&(u+="; reason",d+="; "+f),a.stringHasContent(c)&&(u+="; errorCode",d+="; "+c),a.stringHasContent(l)&&(u+="; exception",d+="; "+l),a.WriteDebugLog("Ajax Error",u,d,a.logType.error,a.logController[a.getTitleName()]),c==a.errorCode("3003")&&(null==t("body").data("AjaxRetry")||t("body").data("AjaxRetry")!=s.url))return t("body").data("AjaxRetry",s.url),void i.pubsub.trigger("setupEnv:timeOutRetryClick",s);if(c===a.errorCode("4000.51")||c===a.errorCode("4000.89")){var m=r.getErrorWithCode(c);return a.WriteDebugLog("Ajax Error: auth",c,m),void a.pubsub.publish("signin.signOut",{errorMsg:m.Message,excludeScs:!0})}var v=r.getErrorWithCode(c,s.requestDescription);if(a.WriteDebugLog("Ajax Error",c,v.Message),"timeout"!=l||null!=s.noRetryModal&&s.noRetryModal){var b={errorCode:c,message:v.Message,supportText:v.SupportText,codeDesc:v.CodeDescription,errorFunction:s.fatalError,contentEl:s.contentEl,responseText:n.responseText};a.pubsub.publish("xhr.showFatalError",b)}else s.noRetryModal=!0,a.pubsub.publish("xhr.showTimeOutRetry",s);t("#buttonCancelMessage").hide()}}))}}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i=n(23),a={bindSteamAccount:function(e,n,a){var r={env:globals.rosEnvironment,title:t.getTitleName(),version:globals.RosTitleVersion,playerTicket:a,steamAppId:e,steamAuthTicket:n};return i.getAccountLinkingAuthHeaderAsync(a).then((function(e){return i.fetch("/api/"+t.getLoginTitleName()+"/bindsteamaccount",{services:!0,body:r,headers:e,timeout:3*globals.ajaxTimeout,slowMsgTimeout:2*globals.slowAjaxMsgTimeout,requestDescription:"BindSteamAccount"})}))},getSteamNetworkAsync:function(e,n){var a={env:globals.rosEnvironment,title:t.getTitleName(),version:globals.RosTitleVersion,rockstarId:e};return i.getAccountLinkingAuthHeaderAsync(n).then((function(e){return i.fetch("/api/profile/getsteam",{services:["accounts"],body:a,headers:e,requestDescription:"UserNetworks"})}))}};return a}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,i,a,r){var o,s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=(s=n(9),s&&(s.__esModule?s.default:s)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"DeviceType"):t,"GoogleAuthenticator",{name:"ifequals",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:8},end:{line:6,column:21}}}))?o:""},2:function(e,t,n,i,a){var r=e.lambda,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <li><a class="useDevice authenticator" data-id="'+o(r(null!=t?s(t,"Id"):t,t))+'" data-type="'+o(r(null!=t?s(t,"DeviceType"):t,t))+'" data-address="'+o(r(null!=t?s(t,"DeviceAddress"):t,t))+'" href="#"><i class="scicon-padlock"></i> <span rel="localize[MfaUseAuthApp]">Use your Authenticator App</span><i class="scicon-arrowright"></i></a></li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p rel="localize[MfaChooseDevice]">Please choose one of the following methods to retrieve your Verification code:</p>\r\n<ul>\r\n'+(null!=(r=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"devices"):t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:3,column:4},end:{line:7,column:13}}}))?r:"")+'</ul>\r\n<p rel="localize[MfaSupportLink]">Or, if you are having difficulty signing in <a class="RGSCLoadExt mfaSupportLink" href="https://support.rockstargames.com">view our support page</a>.</p>\r\n\r\n<div class="errors"><span class="errorText"></span></div>\r\n'},useData:!0})},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(22),o=n(28),s=n(176),l=n(10),c=n(15),u=n(23),d=n(49),f=n(42),p=n(24),h=n(27),g=n(11),m=n(13),v=n(36),b=n(44),C=n(7),S=(n(12),n(4));n(43),n(19);var y={cache:{}};function E(e){null!=e&&e||t("div.troubleSigningUp").find("span.errorText, span.error").remove(),t("#buttonSignUpPasswordReset").removeClass("disabled"),i.stopSpinner(t(".resetSpinnerSignUp")).hide(),i.stopSpinner(t("div.buttonSignInWrapper").find("span")).hide()}function w(e,n){if(e&&n){if(!p.DOBValidation())return;!function(){i.ShowInvisibleMask(t("#submitAccount"),C.getError("Loading")),a.WriteDebugLog("UpdateDOB","","");var e=t("#signUpCountry").val(),n=i.formatDob(t("#yearOfBirth").val(),t("#monthOfBirth").val(),t("#dayOfBirth").val());if(a.isLegacyServiceLayer())return void f.updateProfile(e,n);c.UpdateDOBAndCountry(n,e).catch((function(e){a.WriteDebugLog("settingsFn.updateDobAndCountry","ajax error handled by fatalError",e)})).then(f.updateDobSuccess).then((function(){i.HideInvisibleMask()})).catch((function(e){a.WriteDebugLog("settingsFn.updateDobAndCountry","unhandled exception",e,a.logType.error,a.logController.profile)}))}()}else if(n){if(!p.DOBValidation())return;!function(){i.ShowInvisibleMask(t("#submitAccount"),C.getError("Loading"));var e=i.formatDob(t("#yearOfBirth").val(),t("#monthOfBirth").val(),t("#dayOfBirth").val());if(a.isLegacyServiceLayer())return void f.updateProfile(void 0,e);a.WriteDebugLog("UpdateDOB","","");var n='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"dob":"'+e+'"}';a.WriteDebugLog("UpdateDOB","options",n),c.updateDob(e).catch((function(e){a.WriteDebugLog("settingsFn.updateDob","ajax error handled by fatalError",e)})).then(f.updateDobSuccess).then((function(){i.HideInvisibleMask()})).catch((function(e){a.WriteDebugLog("settingsFn.updateDob","unhandled exception",e,a.logType.error,a.logController.profile)}))}()}else e&&f.updateCountry(t("#signUpCountry").val())}function k(e){if(e&&e.preventDefault(),!t("#submitAccount").hasClass("disabled")){var n=r.isCountryMissing(),i=r.isDobMissing();n||i?w(n,i):p.CreateAccountValidation()&&(U("signUpPassword"),t("#dob").hide(),_(),T())}}function _(){r.setSignUpStepText(2),t("#dob, #introTextContainer, #privacyTextContainer, #termsTextContainer, #eulaTextContainer").hide(),x(),P()}function T(){r.isSignupCaptchaEnabled()?(t("#signUpReCaptchaContainer").show(),h.isVisible(h.getSignupContainerId())||(h.init(h.getSignupContainerId()),t("#"+h.getSignupContainerId()).show()),g.trackPage("/CreateAccountReCaptcha")):D()}function I(){R(!0,!1,!1)}function A(e){R(!1,!0,e)}function R(e,n,i){var a;_(),r.isSignupCaptchaEnabled()?T():t("#signUpReCaptchaContainer").show(),(e||n)&&((a=t("#signUpReCaptchaContainer .troubleSigningUp")).show(),a.find(".resetPasswordForm").show(),a.find(".errors").hide(),E()),t("#signUpReCaptchaContainer .infoText").hide(),t("#signUpReCaptchaInputForm .errors").text(C.getError("InvalidCreateAccountError")).show(),e&&(t("#updateDetails").show().find(".nickname").show(),t("#signUpNicknameUpdate").val(t("#signUpNickname").val())),n&&function(e){t("#updateDetails").show().find(".email").show();var n=t("#signUpEmail").val();t("#signUpEmailUpdate").val(n),e&&t("#signUpEmailRetrievePassword").val(n)}(i)}function P(){t(".nickvalid").remove(),t(".emailvalid").remove(),t(".active .resetSuccessMsg").hide()}function x(){var e;t("#updateDetails").hide().find("p").hide(),t("#signUpNicknameUpdate").val(""),t("#signUpEmailUpdate").val(""),t("#signUpReCaptchaInputForm .errors").hide(),t("#signUpReCaptchaContainer .infoText").show(),(e=t("#signUpReCaptchaContainer .troubleSigningUp")).hide(),e.find(".resetPasswordForm").hide(),e.find(".errors").hide(),E()}function L(e,n){var i=a.extractErrorFromResponse(e);a.WriteDebugLog("onErrorCreateAccount","ERROR",i,a.logType.error,a.logController.profile);var r=s.createAccountErrorViewModel(e,n);if(r.is3003)d.signInOnline();else{if(r.isAgeOutOfRange)return p.handleUnderAgeError(),void t("#onlinePolicies").fadeOut((function(){t("#termsTextContainer").hide(),t("#"+h.getSignupContainerId()).hide(),t("#dob").fadeIn()}));a.WriteDebugLog("onErrorCreateAccount","Error",r.errorCode+"."+(r.errorCodeEx||"")+": "+(r.errorMessage||""),a.logType.error,a.logController.profile);var o=C.getErrorWithCode(r.errorCode);l.showGenericFatalError(r.errorCode,o.Message,o.SupportText,o.CodeDescription),l.CreateAccountSuccessSetup(!1),l.removeLoading("signupPanelsWrapper")}}function N(){return!t("#updateDetails").visible()||!(t("#signUpNicknameUpdate").visible()&&!p.NicknameValidation("signUpNicknameUpdate"))&&!(t("#signUpEmailUpdate").visible()&&!p.EmailValidation("signUpEmailUpdate"))}function D(){if(P(),N()){var e=t("#signUpEmailUpdate").val()||t("#signUpEmail").val(),n=t("#signUpNicknameUpdate").val()||t("#signUpNickname").val();t("#signUpEmail, #signUpEmailConfirm").val(e),t("#signUpNickname").val(n),b.storeAuthValue();var i={email:e,nickname:n,captchaData:h.getCaptchaData(h.getSignupContainerId())};c.validateAccountDetails(i).then(M).catch(O)}}function M(e){var n,i=e.data;t("#lblCreateAccountError").html(""),!i.Status||"0"===i.Status||i.Error&&i.Error.length?O(e):(b.storeAuthValue(i.AuthToken),g.trackPage("/ValidateAccountDetails"),x(),t("#signUpReCaptchaContainer").hide(),t("#buttonPrivacy, #buttonTerms").removeClass("complete"),t("#legalAgree").hide(),n=u.getPolicyDocuments(["pp","tos","eula"],a.getTitleLang()).then((function(e){e&&e.data?(y.cache.policies=e.data,S.map(e.data,G)):F()})).catch((function(){F()})),t("#termsTextContainer, #privacyTextContainer, #eulaTextContainer").removeAttr("style"),t("#onlinePolicies").find(".buttonPara a").hide(),t("#onlinePolicies").fadeIn(),t("#introTextContainer").show(),l.setUpLoading("#introTextContainer"),n.then((function(){l.removeLoading("introTextContainer"),t("#onlinePolicies").find(".buttonPara a").hide(),l.resetScrollbar("#onlinePolicies"),t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(),t('#onlinePolicies .text a[href!="#"][class!="policyButtons"]:not(.btn)').addClass("RGSCLoadExt"),t("#buttonPrivacy").show(),setTimeout((function(){t("#buttonPrivacy").focus()}),10),g.trackPage("/OnlinePolicies")})).catch((function(){a.WriteDebugLog("getPoliciesPromise","caught error")})))}function O(e){var n=s.validateAccountDetailsErrorViewModel(e);if(n.isCaptchaError)return R(t("#signUpNicknameUpdate").visible(),t("#signUpEmailUpdate").visible()),h.reload(h.getSignupContainerId()),void h.showError(h.getSignupContainerId(),n.errorCode);if(h.reload(h.getSignupContainerId()),n.invalidAge)return p.handleUnderAgeError(),void t("#onlinePolicies").fadeOut((function(){t("#termsTextContainer").hide(),t("#"+h.getSignupContainerId()).hide(),t("#dob").fadeIn()}));if(n.existsEmail&&n.existsNickname)return R(!0,!0,!0),p.NicknameExists("signUpNicknameUpdate",n.exists,n.nicknames,!0),void p.EmailExists("signUpEmailUpdate",n.exists);if(n.existsNickname)return I(),void p.NicknameExists("signUpNicknameUpdate",n.exists,n.nicknames,!0);if(n.existsEmail)return A(!0),void p.EmailExists("signUpEmailUpdate",!0);if(n.invalidNickname||n.profaneNickname)return I(),void p.showError("nick",t("#signUpNicknameUpdate"),C.getError(i.errorCodeLocKey(n.errorCode)));if(n.invalidEmail)return A(!1),void p.showError("email",t("#signUpEmailUpdate"),C.getError(i.errorCodeLocKey(n.errorCode)));a.WriteDebugLog("validateAccountDetailsError","Error",n.errorCode+"."+(n.errorCodeEx||"")+": "+(n.errorMessage||""),a.logType.error,a.logController.profile);var r=C.getErrorWithCode(n.errorCode);l.showGenericFatalError(n.errorCode,r.Message,r.SupportText,r.CodeDescription),l.CreateAccountSuccessSetup(!1),l.removeLoading("loginPanelsWrapper")}function U(e){a.WriteDebugLog("checkPassword");var n=t("#"+e),i=t("#"+e+"Conf").val()!==n.val(),r=t("div.active span.pwvalid").length||t("div.active span.pwerror").length;i||r||(n.parents().children("span.pwvalid").remove(),p.PasswordValidation("signUpPassword")&&c.checkPasswordAsync(n.val()).then((function(n){p.PasswordInvalid(e,"false"===t(n).find("Status").text())})).catch((function(){a.WriteDebugLog("checkPassword","ajax failed")})))}function G(e){if(e&&a.stringHasContent(e.Text)){var n=function(e){var n,i;switch(e&&e.Name||""){case"tos":n=t("#termsServiceText"),i=t("#termsTextContainer");break;case"pp":n=t("#privacyPolicyText"),i=t("#privacyTextContainer");break;case"eula":default:n=t("#eulaText"),i=t("#eulaTextContainer")}return{$policyText:n,$container:i}}(e);n.$container.hide(),r.renderPolicy(e,n.$policyText)||F()}else F()}function F(){l.removeLoading("introTextContainer"),t("#onlinePolicies").hide(),r.onGetPolicyError()}return y.init=function(){function e(e){t("#signUpReCaptchaContainer").fadeOut(e)}t("#joinClub").keyup((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})).click((function(){return t(this).hasClass("disabled")||(t("#recaptcha_challenge_field").val(""),t("#submitAccount").addClass("disabled"),l.setSelected(this),r.clearSignUpForms(),f.getCountriesAsync().catch(t.noop),l.clearActivePanel((function(){t("#onlinePolicies, #signUpConfirm").hide(),t("#"+h.getSignupContainerId()).hide(),t("#dob, #AccountDetailsForm, #registrationBack, #signUpSteps").show(),t("#dob p.intro").text(""),t("#lnkCreateOfflineProfile").toggle(globals.localProfileCreation),t("#signupPanels").css({left:"0"}),i.loadDateDropdowns(),l.setUpLoadingPanel("#signupPanelsWrapper",(function(){r.signupDropkick(),r.signupClickOnEnter(),l.removeLoading("signupPanelsWrapper"),t("#signUpNickname").focus()}))})),g.trackPage("/CreateAccountStart")),!1})),t("#signupAutoSignIn").on("click",(function(){t(this).is(":checked")&&t("#signupRememberMe").prop("checked",!0)})),t("#signupRememberMe").on("click",(function(){t(this).is(":checked")||t("#signupAutoSignIn").prop("checked",!1)})),t("a.previousPanel").keyup((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})).click((function(){if("block"==t("#dob").css("display"))return t("#dob").fadeOut((function(){i.pubsub.trigger("signin.showSignin")})),!1;if("block"===t("#signUpReCaptchaContainer").css("display"))return e((function(){r.setSignUpStepText(1),t("#dob").fadeIn(),t("#onlinePolicies").fadeOut()})),!1;if("block"===t("#introTextContainer").css("display"))return t("#introTextContainer").fadeOut((function(){r.setSignUpStepText(1),t("#dob").fadeIn(),t("#onlinePolicies").fadeOut()})),!1;if("block"===t("#termsTextContainer").css("display"))return t("#termsDisagree, #termsAgree").hide(),t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(),t("#termsTextContainer").fadeOut((function(){r.setSignUpStepText(3),t("#introTextContainer").fadeIn((function(){t("#buttonPrivacy").show().focus()}))})),!1;if("block"===t("#privacyTextContainer").css("display"))return t("#privacyDisagree, #privacyAgree").hide(),t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(),t("#privacyTextContainer").fadeOut((function(){r.setSignUpStepText(3),t("#introTextContainer").fadeIn((function(){t("#buttonPrivacy").show().focus()}))})),!1;if("block"===t("#eulaTextContainer").css("display"))return t("#eulaDisagree, #eulaAgree").hide(),t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(),t("#eulaTextContainer").fadeOut((function(){r.setSignUpStepText(3),t("#introTextContainer").fadeIn((function(){t("#buttonPrivacy").show().focus()}))})),!1;var n=t(this).closest("div.signupPanel");return n.hasClass("DOBUpdate")||t(this).parents("div.panel").fadeOut((function(){n.hide(),n=null})),!1})),t("a.needAccountLink, .orCreateAccount a").click((function(e){return e&&e.preventDefault(),globals.localProfileCreation&&l.isOffline()?t("#joinClubOffline").click():l.isOnline()&&(i.loadDateDropdowns(),"en-US"!=globals.titlelang&&(t("#dob").hasClass("localized")||(t("[rel*=localize]").localize("Register",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),i.isGameSupported()&&t("#signUpConfirm [rel*=localize]").localize("General",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/"+globals.titleName}),t("#dob").addClass("localized"))),t("#dob").fadeIn(),t("#signupPanelsWrapper").hasClass("active")||t("#joinClub").click()),!1})),t("#signupMailingListContainer").on("click","span",(function(){var e=t(this).siblings("input");e.prop("checked")?e.prop("checked",!1):e.prop("checked",!0),e.focus()})),t("#monthOfBirth, #yearOfBirth").change((function(){var e=i.getDaysForMonth(t("#monthOfBirth").val(),t("#yearOfBirth").val()),n=t("#dayOfBirth"),a=n.find("option"),r=a.length-e;if(r>0)a.slice(e).remove(),n.dropkick("refresh");else if(r<0)for(var o=a.length;o<=e;o++)0==n.find("option[value="+o+"]").length&&(t("<option>").val(o).text(o).appendTo("#dayOfBirth"),n.dropkick("refresh"))})),t("#yearOfBirth").change((function(e){var n=t(e.currentTarget);n.hasClass("ignoreChange")?n.removeClass("ignoreChange"):p.DOBValidation(!1)})),t("#submitAccount").keyup((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&k()})),t("#formAccountDetails").on("submit",k),t("#submitAccount").on("click",k),t("#signupCaptchaSubmit").on("click",(function(e){e&&e.preventDefault(),t(this).hasClass("disabled")||D()})),t("#signUpReCaptchaInputForm").submit((function(e){e&&e.preventDefault(),t("#signupCaptchaSubmit").click()})),t("#buttonSignUpPasswordReset").click((function(n){n&&n.preventDefault(),e((function(){t("#headerLoginButton").click(),setTimeout((function(){d.showPageResetPassword(!1)}),1e3)}))})),t("#onlinePolicies .buttonPara a").keyup((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})),t("#buttonPrivacy").click((function(e){e&&e.preventDefault();var n=t("#onlinePoliciesContainer");n.find(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").show(),t("#onlinePolicies").find(".buttonPara a").hide(),n.find("#introTextContainer").fadeOut((function(){r.setSignUpStepText(3),t("#privacyTextContainer").fadeIn((function(){l.resetScrollbar("#onlinePolicies"),t("#onlinePolicies").find(".buttonPara .privacyButton").show(),t("#privacyAgree").focus()})).focus()})),n.find(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").css("height","15px"),g.trackPage("/PrivacyPolicy")})),t("#privacyAgree").click((function(e){e&&e.preventDefault();var n=t("#onlinePoliciesContainer");n.find(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(),t("#onlinePolicies").find(".buttonPara a").hide(),n.find("#privacyTextContainer").fadeOut((function(){n.find(".antiscroll-inner").animate({scrollTop:0},"fast"),r.setSignUpStepText(4),t("#termsTextContainer").fadeIn((function(){t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").show().css("height","15px"),t("#onlinePolicies .buttonPara .termsButton").show(),t("#termsAgree").focus()})).focus()})),g.trackPage("/TermsAndConditions")})),t("#privacyDisagree").click((function(e){e&&e.preventDefault(),t("#introTextContainer, #onlinePolicies, #privacyTextContainer, #termsTextContainer, #eulaTextContainer").hide(),l.resetScrollbar("#onlinePolicies"),i.pubsub.trigger("signin.showSignin")})),t("#termsAgree").click((function(e){e&&e.preventDefault();var n=t("#onlinePoliciesContainer");n.find(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(),t("#onlinePolicies").find(".buttonPara a").hide(),n.find("#termsTextContainer").fadeOut((function(){n.find(".antiscroll-inner").animate({scrollTop:0},"fast"),r.setSignUpStepText(5),t("#eulaTextContainer").fadeIn((function(){t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").show().css("height","15px"),t("#onlinePolicies .buttonPara .eulaButton").show(),t("#eulaAgree").focus()})).focus()})),g.trackPage("/EULA")})),t("#termsDisagree").click((function(){return t("#introTextContainer, #onlinePolicies, #privacyTextContainer, #termsTextContainer, #eulaTextContainer").hide(),l.resetScrollbar("#onlinePolicies"),i.pubsub.trigger("signin.showSignin"),!1})),t("#eulaAgree").click((function(){return y.createAccount(),!1})),t("#eulaDisagree").click((function(){return t("#introTextContainer, #onlinePolicies, #privacyTextContainer, #termsTextContainer, #eulaTextContainer").hide(),l.resetScrollbar("#onlinePolicies"),i.pubsub.trigger("signin.showSignin"),!1})),t("#signUpNickname").off("focusout.validation").on("focusout.validation",(function(){p.NicknameValidation("signUpNickname")})),t("#signUpEmail").off("focusout.validation").on("focusout.validation",(function(){var e=t(this);e.val(e.val().trim()),p.EmailValidation("signUpEmail"),p.ConfirmEmail(t("#signUpEmailConfirm"))})),t("#signUpEmailConfirm").off("focusout.validation").on("focusout.validation",(function(){var e=t(this);e.val(e.val().trim()),p.ConfirmEmail(t("#signUpEmailConfirm"))})),t("#signUpPassword").off("keydown").on("keydown",(function(){p.clearPasswordConfirmationInput()})),t("#signUpPassword").off("focusout.validation").on("focusout.validation",(function(){p.ConfirmPassword(t("#signUpPasswordConf"))})),t("#signUpPasswordConf").off("focusout.validation").on("focusout.validation",(function(){U("signUpPassword"),p.ConfirmPassword(t("#signUpPasswordConf"))})),t("#createAccount").click((function(e){e&&e.preventDefault(),t(this).hasClass("disabled")||y.createAccount()})),t("#signUpConfirmButton").keyup((function(e){var n=t(e.currentTarget);13==e.which&&n.visible()&&t(this).click()})).click((function(){return l.clearActivePanel((function(){t("#signUpConfirm").hide(),i.pubsub.trigger("setupEnv:showHomepage")})),!1}))},y.createAccount=function(){g.trackEvent(m.category.profile,m.action.profile_create_account_scui_submit);var e=t("#createAccount, #termsAgree");i.ShowInvisibleMask(e,C.getError("Loading")),o.clearLoginAccount(),g.clearCustomDimensionData();var n={dob:i.formatDob(t("#yearOfBirth").val(),t("#monthOfBirth").val(),t("#dayOfBirth").val()),email:t("#signUpEmail").val(),password:t("#signUpPassword").val(),nickname:t("#signUpNickname").val(),mailinglist:t("#signupMailingListContainer").find("input:checked").length>0,countryCode:t("#signUpCountry").length?t("#signUpCountry").val():"",policies:S.map(y.cache.policies,(function(e){return{name:e.Name,version:e.Version}}))};n.authValue=n.nickname+"|"+n.email;var r={Email:n.email,Password:n.password};c.createAccount(n).then((function(e){!function(e,n){t("#lblCreateAccountError").html("");var r=e.data;if(!1===r.Status||"0"===r.Status)L(e,n);else{a.isAcountCreated(!0),g.setCustomDimensionOrMetric(m.dimensions.creationPath,v.getCreationPath(globals.titleName)),g.trackEvent(m.category.profile,m.action.profile_create_account_scui_success),g.trackPage("/CreateAccountSuccess"),l.CreateAccountSuccessSetup(!0),o.clearCachedProfileList();var s=i.formatDob(t("#yearOfBirth").val(),t("#monthOfBirth").val(),t("#dayOfBirth").val()),c=!!t("#signupAutoSignIn").is(":checked"),u=!!t("#signupRememberMe").is(":checked"),f={Email:t("#signUpEmail").val(),Password:t("#signUpPassword").val(),Nickname:t("#signUpNickname").val(),DOB:s,SaveEmail:u,SavePassword:!1,AutoSignIn:c};o.setAutoSigninData(f),a.WriteDebugLog("OnSuccessCreateAccount","jsonString",JSON.stringify(f)),d.onSuccessSignIn(e)}a.clearCreateAccount3003()}(e,r)})).catch((function(e){L(e,r)})).then((function(){i.HideInvisibleMask(),r=null}))},y}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i,a=n(3)(n(5));void 0===(i=function(e){var t=n(1),i=n(28),r=n(27),o={validateAccountDetailsErrorViewModel:function(e){var n={},i=e&&e.response||e,o=i&&i.data,s=o&&o.Error;if(n.isCaptchaError=r.isCaptchaError(o),n.isCaptchaError)return n.errorCode=s.Code,n;if("timeout"===i)n.timeout=!0,n.errorCode=t.errorCode("1001.2");else if(i&&200===i.status){if(s&&(n.errorCode=s.Code,n.errorMessage=s.ErrorMessage),null!=n.errorCode&&n.errorCode===t.errorCode("5003.4"))return n.invalidAge=!0,n;if(null!=n.errorCode&&"AlreadyExists.NickAndEmail"===n.errorCode)return n.exists=!o.Status,n.existsEmail=n.exists,n.existsNickname=n.exists,n.nicknames=o.NickNames,n;if(null!=n.errorCode&&"AlreadyExists.Nickname"===n.errorCode)return n.exists=!o.Status,n.existsEmail=!1,n.existsNickname=n.exists,n.nicknames=o.NickNames,n;if(null!=n.errorCode&&"AlreadyExists.Email"===n.errorCode)return n.exists=!o.Status,n.existsEmail=n.exists,n.existsNickname=!1,n}if(void 0===n.errorCode){if("object"===(0,a.default)(o)&&(n.errorCode=t.errorCodeFromErrorObj(o)),n.errorCode===t.errorCode("5001.27"))return n.invalidNickname=!0,n;if(n.errorCode===t.errorCode("5004.27"))return n.profaneNickname=!0,n;if(n.errorCode===t.errorCode("5001.11"))return n.invalidEmail=!0,n;void 0===n.errorCode&&(n.errorCode=t.errorCode("1000.1"))}return n},createAccountErrorViewModel:function(e,n){var r={},o=e&&e.response||e,s=o&&o.data,l=s&&s.Error;if(!t.getCreateAccount3003()&&s&&s.Message&&s.Message.indexOf(t.errorCode("3003"))>-1){t.setCreateAccount3003();var c={Email:n.Email,Password:n.Password};return i.setAutoSigninData(c),r.is3003=!0,r}if("timeout"===o)r.timeout=!0,r.errorCode=t.errorCode("1001.2");else if(o&&200===o.status)if(l&&(r.errorCode=l.Code,r.errorMessage=l.ErrorMessage),null!=r.errorCode&&"NotAllowed.Privilege"===r.errorCode)r.errorCode=t.errorCode("4001.38");else{if(null!=r.errorCode&&r.errorCode===t.errorCode("5003.4"))return r.isAgeOutOfRange=!0,r;"NotAllowed.SteamAccountLink"===r.errorCode?(r.errorCode=t.errorCode("4001.49"),r.errorCodeEx="",r.isSteam=!0):"NotAllowed.RockstarAccountLink"===r.errorCode&&(r.errorCode=t.errorCode("4001.81"),r.errorCodeEx="",r.isSteam=!0)}else o&&t.stringHasContent(o.message)&&o.message.indexOf("synchronizer")>-1&&(r.errorCode=o.message);if(void 0===r.errorCode){"object"===(0,a.default)(s)&&(r.errorCode=t.errorCodeFromErrorObj(s)),void 0===r.errorCode&&(r.errorCode=t.errorCode("1000.1"));var u=t.splitErrorCode(r.errorCode);t.errorCodeIs(u.code,"NotAllowed")&&(t.errorCodeExIs(u.codeEx,"SteamAccountLink")||t.errorCodeExIs(u.codeEx,"RockstarAccountLink"))&&(r.isSteam=!0)}return r}};return o}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i=n(2);function a(e){return e&&(e.__esModule?e.default:e)}e.exports=(i.default||i).template({1:function(e,t,n,i,a){return" selected"},3:function(e,t,n,i,a){return" last"},5:function(e,t,i,r,o){var s,l=null!=t?t:e.nullContext||{},c=e.lambda,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a href="#" class="'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"friendsandcrews",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:27},end:{line:19,column:91}}}))?s:"")+'" data-ui-name="crewsOption">\r\n            <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="FriendsAndCrews">\r\n            <span rel="localize[FriendsandCrew]">Friends & Crews</span>\r\n        </a>\r\n\r\n        <a href="#" class="last'+(null!=(s=a(n(9)).call(l,null!=t?d(t,"visibility"):t,"everyone",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:24,column:31},end:{line:24,column:88}}}))?s:"")+'" data-ui-name="everyoneOption">\r\n            <input type="radio" name="'+u(c(null!=t?d(t,"settingName"):t,t))+'" value="Everyone">\r\n            <span rel="localize[Everyone]">Everyone</span>\r\n        </a>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,r,o){var s,l=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="clearfix">\r\n\r\n    <span class="accountIcon '+c(l(null!=t?d(t,"icon"):t,t))+'"></span>\r\n\r\n    <label class="mainLabel" for="'+c(l(null!=t?d(t,"settingId"):t,t))+'">'+(null!=(s=l(null!=t?d(t,"label"):t,t))?s:"")+'</label>\r\n\r\n    <span id="'+c(l(null!=t?d(t,"settingName"):t,t))+'" class="toggleOptions '+c(l(null!=t?d(t,"settingId"):t,t))+'" data-accountid="'+c(l(null!=t?d(t,"accountId"):t,t))+'">\r\n        <a href="#" class="first'+(null!=(s=a(n(9)).call(u,null!=t?d(t,"visibility"):t,"none",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:32},end:{line:8,column:85}}}))?s:"")+'" data-ui-name="meOption">\r\n            <input type="radio" name="'+c(l(null!=t?d(t,"settingName"):t,t))+'" value="None">\r\n            <span rel="localize[MeOnly]">Me Only</span>\r\n        </a>\r\n\r\n        <a href="#" class="'+(null!=(s=a(n(9)).call(u,null!=t?d(t,"visibility"):t,"friends",{name:"ifequals",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:27},end:{line:13,column:83}}}))?s:"")+" "+(null!=(s=a(n(9)).call(u,null!=t?d(t,"minor"):t,!0,{name:"ifequals",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:13,column:84},end:{line:13,column:126}}}))?s:"")+'" data-ui-name="friendsOption">\r\n            <input type="radio" name="'+c(l(null!=t?d(t,"settingName"):t,t))+'" value="Friends">\r\n            <span rel="localize[FriendsOnly]">Friends</span>\r\n        </a>\r\n\r\n'+(null!=(s=a(n(9)).call(u,null!=t?d(t,"minor"):t,!1,{name:"ifequals",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:8},end:{line:28,column:21}}}))?s:"")+"    </span>\r\n</p>"},useData:!0})},function(e,t,n){"use strict";var i,a,r,o=n(3)(n(5));a=[n(0)],void 0===(r="function"==typeof(i=function(e){var t={init:function(t){return this.each((function(){var r=e(this),o=r.data("basicSlider");t=e.extend({},{index:1},t),o?o.options.index=1:r.data("basicSlider",{options:t}),function(e){if(null!=e){var t=e.find("li").length;t<2?function(e){e.parent().hasClass("basicSliderListContainer")&&(e.parent().parent().find("span.arrow").remove(),e.unwrap().unwrap(),e.find("li").removeClass("active panel"),e.css({left:0,width:e.data("basicSlider").options.originalWidth}),e.removeData("basicSlider"))}(e):(e.data("basicSlider").options.init||function(e){e.wrap('<div class="basicSliderContainer"></div>'),e.wrap('<div class="basicSliderListContainer" style="overflow:hidden;"></div>'),e.parent().after('<span class="arrow back"><a href="#"><span></span></a></span><span class="arrow forward"><a href="#" class=""><span></span></a></span>'),e.find("li").addClass("panel"),function(e){var t=e.parent().parent();t.on("click",".arrow.back",n),t.on("click",".arrow.forward",i)}(e)}(e),function(e,t){var n=e.data("basicSlider"),i=n.options.originalWidth?n.options.originalWidth:e.width(),r=n.options.itemWidth?n.options.itemWidth:e.width()+29,o=r*t,s=r*t;e.css({width:o}),e.parent().css({width:r}),e.parent().parent().css({width:r}),e.find("li").css({width:r,display:"inline",float:"left"}),a(e,0,n.options.index),n.options.originalWidth=i,n.options.itemWidth=r,n.options.totalWidth=o,n.options.visibleWidth=s,n.options.numItems=t,n.options.left=0,n.options.init=!0}(e,t))}}(r)}))}};function n(t){t.preventDefault();var n=e(t.delegateTarget).find("ul"),i=n.data("basicSlider");i.options.left=i.options.left+i.options.itemWidth,i.options.index--,i.options.index<1&&(i.options.left=-1*i.options.visibleWidth+i.options.itemWidth,i.options.index=i.options.numItems),a(n,i.options.left,i.options.index)}function i(t){t.preventDefault();var n=e(t.delegateTarget).find("ul"),i=n.data("basicSlider");i.options.left=i.options.left-i.options.itemWidth,i.options.index++,i.options.index>i.options.numItems&&(i.options.left=0,i.options.index=1),a(n,i.options.left,i.options.index)}function a(e,t,n){e.find("li").removeClass("active"),e.find("li:eq("+(n-1)+")").addClass("active"),e.css({left:t})}e.fn.basicSlider=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(0,o.default)(n)&&n?(e.error("Method "+n+" does not exist on jQuery.basicSlider"),null):t.init.apply(this,arguments)}})?i.apply(t,a):i)||(e.exports=r)},function(e,t,n){"use strict";var i,a;i=[n(0),n(16),n(4),n(73),n(6),n(1),n(7),n(15),n(10),n(20),n(12),n(11),n(13),n(8),n(58),n(180),n(31),n(18),n(181),n(75),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(41),n(190),n(191),n(192),n(193),n(43)],void 0===(a=function(e,t,n,i,a,r,o,s,l,c,u,d,f,p,h,g,m,v,b,C,S,y,E,w,k,_,T,I,A,R,P,x,L){var N,D={closeCrewViews:function(){null!=window.amd.crews.MyCrewsView&&window.amd.crews.MyCrewsView.onClose(),null!=window.amd.crews.CrewMembersView&&window.amd.crews.CrewMembersView.onClose(),null!=window.amd.crews.CrewInvitesView&&window.amd.crews.CrewInvitesView.onClose(),null!=window.amd.crews.FindCrewView&&window.amd.crews.FindCrewView.onClose(),null!=window.amd.crews.CrewRequestsView&&window.amd.crews.CrewRequestsView.onClose(),null!=window.amd.crews.CrewInvitesHeaderView&&window.amd.crews.CrewInvitesHeaderView.onClose()}};D.MyPrimaryCrewTagView=t.View.extend({el:"#crewCardTag",render:function(){var e="";if(this.model.get("CrewTag")){this.model.set({IsMember:!0});var t=this.model.toJSON();e=r.renderCompiledTemplate(A,t)}return this.$el.html(e),this.$el.fadeIn(),this},fetchPrimaryCrew:function(e){if(null!=e)this.model=e,this.render();else{var t=this;p.GetAuthHeaderAsync().then((function(e){t.model.fetch({headers:e})}))}},onClose:function(){this.stopListening(),a.pubsub.off("crews:UpdatePrimaryCrewTag")},initialize:function(){n.bindAll(this,"render","fetchPrimaryCrew"),this.model=new i.PrimaryCrewModel,this.listenTo(this.model,"change",this.render),a.pubsub.on("crews:UpdatePrimaryCrewTag",this.fetchPrimaryCrew),this.fetchPrimaryCrew()}}),D.CrewListView=t.View.extend({render:function(){var e=this;return this.collection.each((function(t){var n=new D.CrewView({model:t});if(e.CrewViews.push(n),"search"==t.get("Template"))e.$el.append(n.render().el);else{var i=!t.get("IsPrimary");t.set({CanMakeActive:i,CanLeave:!0,IsMember:!0}),t.get("IsPrimary")?(a.pubsub.trigger("crews:UpdatePrimaryCrewTag",t),e.$el.find("#activeCrew").append(n.render().el)):e.$el.find("#myCrewList").append(n.render().el)}e.$(".crewCard img").on("error",a.crewImage404),e.$(".crewLarge img").on("error",a.crewImage404)})),this},onClose:function(){if(null!=this.CrewViews&&this.CrewViews.length>0)for(var e=0;e<this.CrewViews.length;e++)this.CrewViews[e].onClose()},initialize:function(){n.bindAll(this,"render","onClose"),this.CrewViews=[],this.render()}}),D.MyCrewsView=D.CrewListView.extend({el:"#crewsList",events:{"click #noCrew.emptySocial .btn":"goToFindCrew"},render:function(){if(!l.TabIsActive(e("#friendsPanel .sideMenu #myCrewsLink")))return this;var t=this.collection.toJSON(),n=r.renderCompiledTemplate(b,t);return this.$el.html(n),0==this.collection.length?(n=r.renderCompiledTemplate(k),this.$el.html(n),e("#crewCardTag").html("")):N=new D.CrewListView({el:this.el,collection:this.collection}),e(".loadingMask").hide(),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.fadeIn(),e("#friendsContainer").data("antiscroll").refresh(),this},goToFindCrew:function(){e("#findCrewLink").click()},onFatalError:function(t){t.title="ALERT",u.ShowErrorModal(t),e(".loadingMask").hide()},onClose:function(){if(this.stopListening(),null!=N&&N.CrewViews.length>0)for(var e=0;e<N.CrewViews.length;e++)N.CrewViews[e].onClose()},initialize:function(){n.bindAll(this,"render","onClose"),null!=N&&N.onClose(),l.setUpLoadingPanel("#friendsPanel"),this.collection=new i.CrewCollection({},{cacheKey:"get_crews_"+globals.account.RockstarId,cacheObject:g.crews}),this.listenTo(this.collection,"sync",this.render);var e=this;p.GetAuthHeaderAsync().then((function(t){e.collection.fetch({headers:t,requestDescription:"MyCrews",fatalError:e.onFatalError})}))}}),D.CrewView=t.View.extend({events:{"click .leaveTrigger":"leaveCrew","click .makeActive":"makeActive","click .join":"joinCrew","click .requestInvite":"requestInvite"},render:function(){var e,t=o.getError("MaxNoCrewsExceeded");this.model.set({MaxCrewsMsg:t});var n=this.model.toJSON();return e=this.model.get("IsPrimary")?r.renderCompiledTemplate(S,n):r.renderCompiledTemplate(C,n),this.$el.html(e),this},showConfirmationDialog:function(e,t,n){window.amd.modals.ConfirmModalView=new u.ConfirmModalView({Message:e,Name:this.model.get("CrewName"),pubsubKey:t,FocusBtn:"cancel",cancelPubsubKey:n})},leaveCrew:function(t){if(t.preventDefault(),!e(t.currentTarget).hasClass("disabled")){this.disableButtons(),a.WriteDebugLog("leaveCrew","Id",this.model.get("CrewId"));var n=this.model.get("IsPrimary")&&a.doesCrewLeaveKillSession()?o.getTextCached("LeavePrimaryCrewName","Social"):o.getTextCached("LeaveCrewName","Social");this.showConfirmationDialog(n,"crew.leave."+this.model.get("CrewId"),"crew.enableButtons."+this.model.get("CrewId"))}},leaveCrewConfirm:function(){l.setUpLoadingPanel("#friendsPanel"),this.updateCrewModel.leave(this.model.get("CrewId"),this.leaveCrewSuccess,this.errorFn)},leaveCrewSuccess:function(t){if(t&&(a.WriteDebugLog("leaveCrewSuccess","Status",t.get("Status")),M(),1==t.get("Status"))){if(e("#myCrewsLink").hasClass("on")){var n=e("#myCrewsLink");n.removeClass("on"),n.click()}m.updateCrewCount("subtract"),d.trackEvent(f.category.crew,f.action.crew_leave)}},makeActive:function(t){if(t.preventDefault(),!e(t.currentTarget).hasClass("disabled")){this.disableButtons(),a.WriteDebugLog("Crew.makeActive","Id",this.model.get("CrewId"));var n=a.doesCrewLeaveKillSession()?o.getTextCached("MakeActiveCrewName","Social"):o.getTextCached("MakeActiveCrewNameNoKick","Social");this.showConfirmationDialog(n,"crew.makeactive."+this.model.get("CrewId"),"crew.enableButtons."+this.model.get("CrewId"))}},makeActiveConfirm:function(){l.setUpLoadingPanel("#friendsPanel"),this.updateCrewModel.makeActive(this.model.get("CrewId"),this.makeActiveSuccess,this.errorFn)},makeActiveSuccess:function(t){if(t&&(a.WriteDebugLog("Crew.makeActiveSuccess","Status",t.get("Status")),M(),1==t.get("Status"))){if(e("#myCrewsLink").hasClass("on")){var n=e("#myCrewsLink");n.removeClass("on"),n.click()}d.trackEvent(f.category.crew,f.action.crew_make_active)}},joinCrew:function(t){t.preventDefault(),a.WriteDebugLog("joinCrew","Id",this.model.get("CrewId")),e(t.currentTarget).hasClass("disabled")||(this.disableButtons(),this.updateCrewModel.joinCrew(this.model.get("CrewId"),this.joinCrewSuccess,this.errorFn))},joinCrewSuccess:function(t){t&&(a.WriteDebugLog("joinCrewSuccess","Status",t.get("Status")),M(),1==t.get("Status")&&(m.updateCrewCount("add"),d.trackEvent(f.category.crew,f.action.crew_join,"JoinCrew"),e("#myCrewsLink").click()))},requestInvite:function(t){t.preventDefault(),e(t.currentTarget).hasClass("disabled")||(this.disableButtons(),a.WriteDebugLog("Crew.requestInvite","Id",this.model.get("CrewId")),this.updateCrewModel.requestInvite(this.model.get("CrewId"),this.requestInviteSuccess,this.errorFn))},requestInviteSuccess:function(e){if(e&&(a.WriteDebugLog("Crew.requestInviteSuccess","Status",e.get("Status")),1==e.get("Status"))){this.$(".crewCard .actions .requestInvite").remove();var t=o.getTextCached("CrewRequestPending","Social");this.$(".crewCard .actions.clearfix").append('<span class="requestPending">'+t+"</span>");var n=o.getTextCached("RequestSentToCrew","Social");n=n.replace("[CrewName]",this.model.get("CrewName")),d.trackEvent(f.category.crew,f.action.crew_request_invite);var i='{ "Type" : "INFORMATIONNOCLICK", "Count" : 1, "Data" : [ { "Description" : "'+n+'" } ] }';r.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",'{ "Count" : 1, "Notifications" : ['+i+"] }")}},disableButtons:function(){this.$(".actions a").addClass("disabled")},enableButtons:function(){this.$(".actions a").removeClass("disabled")},errorFn:function(e){this.enableButtons(),e.title="ALERT",u.ShowErrorModal(e)},onClose:function(){a.pubsub.off("crew.leave."+this.model.get("CrewId")),a.pubsub.off("crew.makeactive."+this.model.get("CrewId")),a.pubsub.off("crew.enableButtons."+this.model.get("CrewId"))},initialize:function(){n.bindAll(this,"render","onClose","joinCrewSuccess","requestInviteSuccess","makeActiveSuccess","leaveCrewConfirm","makeActiveConfirm","showConfirmationDialog","disableButtons","enableButtons","errorFn"),a.pubsub.on("crew.leave."+this.model.get("CrewId"),this.leaveCrewConfirm),a.pubsub.on("crew.makeactive."+this.model.get("CrewId"),this.makeActiveConfirm),a.pubsub.on("crew.enableButtons."+this.model.get("CrewId"),this.enableButtons),this.updateCrewModel=new i.UpdateCrewModel}}),D.CrewMembersView=t.View.extend({el:"#crewMembersList",events:{"click #crewMemberSearchLink":"search","keydown #crewMemberSearchText":"search","click .profileButton .avatarImg":"goToMemberProfile","click .profileButton .profilenickname":"goToMemberProfile","click #noCrew.emptySocial .btn":"goToFindCrew"},render:function(){if(!l.TabIsActive(e("#friendsPanel .sideMenu #crewMembersLink")))return this;this.$el.empty();var n,i=this.collection.at(0);if(0==this.collection.length||0==i.get("CrewMemberCount")||!i.get("Status"))return this.renderEmpty(i),this;var a={CrewName:i.get("CrewName"),CrewTag:i.get("CrewTag"),IsPrivate:i.get("IsPrivate"),IsFounderCrew:i.get("IsFounderCrew"),IsMember:!1,CrewColour:i.get("CrewColour"),MemberCount:i.get("CrewMemberCount")},o=new t.Collection(i.get("CrewMembers")),s=o.findWhere({Rank:"Leader"});return null!=s&&(a.LeaderAvatar=s.get("AvatarUrl"),a.LeaderRockstarId=s.get("RockstarId"),a.LeaderNickname=s.get("Nickname"),a.LeaderDateJoined=s.get("DateJoinedLocalized")),n=r.renderCompiledTemplate(y,a),this.$el.html(n),l.setupTextInputGameNotifications(this.$("input:text, input:password, textarea")),this.renderMembers(o),e(".loadingMask").hide(),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.fadeIn(),e("#friendsContainer").data("antiscroll").refresh(),this},renderEmpty:function(t){var n=this.getError(t.toJSON()),i=r.renderCompiledTemplate(_,n);this.$el.html(i),e(".loadingMask").hide(),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.fadeIn()},renderMembers:function(e){var t=this;this.MemberViews=[],e.each((function(e){t.$(".list").append('<div class="profileWrapper '+e.get("Nickname")+'"></div>'),e.set({DisplayName:e.get("Nickname"),activePanel:"friendsPanel",Relationship:c.GetRelationShipCode(e.get("Relationship")),cardType:"crewMember"},{silent:!0});var n=new h.ProfileFriendView({model:e,el:"div."+e.get("Nickname")});t.MemberViews.push(n),t.$(".list").append(n.render().el)}))},goToMemberProfile:function(t){t.preventDefault();var n=e(t.currentTarget).attr("data-id");null!=n&&c.friendProfileView(n)},getError:function(e){var t,n=e&&e.Error?r.splitErrorCode(e.Error.Code).codeEx:"";switch(n){case"NotACrewMember":t=o.getTextCached("NotACrewMember","Social");break;case"NoMatchingMembers":t=o.getError("NoMatchCrewMembers");break;default:t=o.getError("CrewGeneralServiceError")}return a.WriteDebugLog("CrewMembersView","err",n+" "+t),{errorCode:n,errorMsg:t}},renderSearchResults:function(){e(".profileButton.crewMember").parent().remove();var n,i=this.searchModel.toJSON();if(null!=i&&i.Status)if(i.CrewMembers&&i.CrewMembers.length){var s=this;this.MemberView=[],new t.Collection(i.CrewMembers).each((function(e){s.$(".list").append('<div class="profileWrapper '+e.get("Nickname")+'"></div>'),e.set({DateJoinedLocalized:a.localizedDate(e.get("DateJoined"),"LL"),DisplayName:e.get("Nickname"),activePanel:"friendsPanel",Relationship:c.GetRelationShipCode(e.get("Relationship")),cardType:"crewMember"},{silent:!0});var t=new h.ProfileFriendView({model:e,el:"div."+e.get("Nickname")});s.MemberViews.push(t),s.$el.append(t.render().el)}))}else{var l=o.getError("NoMatchCrewMembers");n=r.renderCompiledTemplate(_,{errorMsg:l}),this.$el.append(n)}else{var u=this.getError(i);n=r.renderCompiledTemplate(_,u),this.$el.append(n)}return e(".loadingMask").hide(),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.fadeIn(),this},search:function(t){var n=t.currentTarget;if("crewMemberSearchText"!=e(n).attr("id")||13==t.which){t.preventDefault(),e(".errorText").remove();var i=this.$("#crewMemberSearchText").val();if(i.length>0&&i.length<3){var a=o.getError("SearchMin3Chars");this.$("#crewMemberSearchForm").append('<span class="errorText">'+a+"</span>")}else{if(l.setUpLoadingPanel("#friendsPanel"),""==i){var r=e("#crewMembersLink");return r.removeClass("on"),void r.click()}var s=this.collection.at(0).get("CrewId"),c='{ "env":"'+globals.rosEnvironment+'","title":"'+globals.titleName+'","version":'+globals.RosTitleVersion+',"searchNickname":"'+i+'","pageIndex":"0","crewId":"'+s+'" }',d=this;p.GetAuthHeaderAsync().then((function(e){d.searchModel.fetch({type:"POST",headers:e,contentType:"application/json; charset=utf-8",data:c,success:d.searchSuccess,requestDescription:"SearchCrewMembers",fatalError:u.ShowErrorModal})}))}}},searchSuccess:function(){this.renderSearchResults(),d.trackEvent(f.category.crew,f.action.crew_members_search)},goToFindCrew:function(){e("#findCrewLink").click()},onFatalError:function(t){t.title="ALERT",u.ShowErrorModal(t),e(".loadingMask").hide()},onClose:function(){this.stopListening(),n.each(this.MemberViews,(function(e){e.close()}))},initialize:function(){n.bindAll(this,"render","renderEmpty","searchSuccess","onClose"),l.setUpLoadingPanel("#friendsPanel"),this.searchModel=new i.CrewMemberSearch;var e=this;e.collection=new i.CrewMemberCollection([],{game:globals.titleName,cacheKey:"active_crew_members_"+globals.titleName,cacheObject:g.crews}),e.listenTo(e.collection,"sync",e.render),p.getCredsAsync().then((function(t){void 0!==t&&t.Ticket&&p.GetAuthHeaderAsync(t.Ticket).then((function(n){e.collection.fetch({data:{PlayerTicket:t.Ticket},type:"POST",headers:n,requestDescription:"CrewMembers",fatalError:e.onFatalError})}))}))}}),D.CrewInvitesHeaderView=t.View.extend({el:"#crewInvitesHeader",events:{"click #crewInvitesSwitch .invites":"showInvites","click #crewInvitesSwitch .requests":"showRequests"},render:function(){if(!l.TabIsActive(e("#friendsPanel .sideMenu #crewInvitesLink")))return this;if(this.$el.empty(),0==this.collection.length)return this.showInvites(),this;var t=r.renderCompiledTemplate(P);return this.$el.append(t),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.fadeIn(),"requests"===this.model.get("tab")?this.showRequests():this.showInvites(),this},showInvites:function(){e("#crewRequestsList").empty().hide(),this.$("#crewInvitesSwitch .invites").hasClass("active")||(this.$("#crewInvitesSwitch .invites").addClass("active"),this.$("#crewInvitesSwitch .requests").removeClass("active"),this.$("#manageCrews").hide(),null==window.amd.crews.CrewInvitesView?window.amd.crews.CrewInvitesView=new D.CrewInvitesView:(window.amd.crews.CrewInvitesView.onClose(),window.amd.crews.CrewInvitesView.initialize()))},showRequests:function(){e("#crewInvitesList").empty().hide(),this.$("#crewInvitesSwitch .requests").hasClass("active")||(this.$("#crewInvitesSwitch .requests").addClass("active"),this.$("#crewInvitesSwitch .invites").removeClass("active"),this.$("#manageCrews").show(),null==window.amd.crews.CrewRequestsView?window.amd.crews.CrewRequestsView=new D.CrewRequestsView({CrewsIManageCollection:this.collection}):(window.amd.crews.CrewRequestsView.onClose(),window.amd.crews.CrewRequestsView.initialize({CrewsIManageCollection:this.collection})))},onFatalError:function(t){t.title="ALERT",u.ShowErrorModal(t),e(".loadingMask").hide()},onClose:function(){this.stopListening()},initialize:function(e){n.bindAll(this,"render","onClose","showInvites","showRequests"),this.model=new Backbone.Model,this.model.set({tab:e.tab}),l.setUpLoadingPanel("#friendsPanel"),this.collection=new i.CrewsWithManagePermissionCollection,this.listenTo(this.collection,"sync",this.render);var t=this;p.GetAuthHeaderAsync().then((function(e){t.collection.fetch({headers:e,requestDescription:"GetCrewsWithManagePermission",fatalError:t.onFatalError})}))}}),D.CrewInvitesView=t.View.extend({el:"#crewInvitesList",events:{crewInvitesScroll:"getNextPage","click #noCrewInvites.emptySocial .btn":"goToFindCrew"},render:function(){if(void 0!==this.invitesCollection){var t=this.invitesCollection.length;e("#crewInvitesLink span.count").html(0==t?"":t)}if(!l.TabIsActive(e("#friendsPanel .sideMenu #crewInvitesLink")))return this;var n;if(0==this.model.get("PageIndex")&&this.$el.empty(),null==this.invitesCollection||0==this.invitesCollection.length)n=r.renderCompiledTemplate(w),this.$el.append(n);else{var i=this;this.InviteViews=[],this.invitesCollection.each((function(e){var t=new D.InviteView({model:e});i.InviteViews.push(t),i.$el.append(t.render().el),i.$(".crewCard img").on("error",a.crewImage404)}))}return l.removeLoading("friendsPanel"),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.fadeIn(),e("#friendsContainer").data("antiscroll").refresh(),this},goToFindCrew:function(){e("#findCrewLink").click()},getNextPage:function(){var e=this.model.get("PageIndex")+1;e<this.crewInviteCollection.at(0).get("PageCount")&&this.model.set({PageIndex:e})},fetchInvites:function(){var e=this,t=e.model.get("PageIndex");p.GetAuthHeaderAsync().then((function(n){e.crewInviteCollection.fetch({remove:!1,type:"POST",contentType:"application/json; charset=utf-8",headers:n,data:'{ "pageIndex": '+t+" }",requestDescription:"GetCrewInvites",fatalError:u.ShowErrorModal,success:function(){var n=e.crewInviteCollection.getInvites(t);e.invitesCollection.reset(n),e.render()}})}))},onClose:function(){if(this.stopListening(),null!=this.InviteViews&&this.InviteViews.length>0)for(var e=0;e<this.InviteViews.length;e++)this.InviteViews[e].onClose()},initialize:function(){n.bindAll(this,"render","onClose","getNextPage","fetchInvites"),l.setUpLoadingPanel("#friendsPanel"),this.crewInviteCollection=new i.CrewInviteCollection,this.invitesCollection=new i.Invites,this.model=new Backbone.Model;var e=this;this.model.on("change",(function(){e.model.hasChanged("PageIndex")&&e.fetchInvites()})),this.model.set({PageIndex:0})}}),D.InviteView=t.View.extend({events:{"click .optionAcceptCrew":"acceptInvite","click .optionDeclineCrew":"declineInvite"},render:function(){var e,t=o.getError("MaxNoCrewsExceeded"),n=v.getAvatarUrl(this.model.get("AvatarUrl"),this.model.get("Nickname"));return this.model.set({AvatarUrl:n,MaxCrewsMsg:t,IsMember:!1}),e=r.renderCompiledTemplate(E,this.model.toJSON()),this.$el.html(e),this},acceptInvite:function(t){t.preventDefault(),e(t.currentTarget).hasClass("disabled")||(this.disableButtons(),a.WriteDebugLog("Crew.acceptInvite","name",this.model.get("CrewName")),this.updateCrewModel.acceptInvite(this.model.get("CrewId"),this.model.get("InviteId"),this.acceptInviteSuccess,this.errorFn))},acceptInviteSuccess:function(t){if(t){if(a.WriteDebugLog("Crew.acceptInviteSuccess","Status",t.get("Status")),1!=t.get("Status"))return;this.$(".options").hide(),d.trackEvent(f.category.crew,f.action.crew_join,"AcceptInvite"),l.UpdateSocialSideMenuCount("subtract","#crewInvitesLink",!1),m.updateCrewCount("add"),M(),e("#myCrewsLink").click()}},declineInvite:function(t){if(t.preventDefault(),!e(t.currentTarget).hasClass("disabled")){this.disableButtons(),a.WriteDebugLog("Crew.declineInvite","Name",this.model.get("CrewName"));var n=o.getTextCached("DeclineInviteCrewName","Social");this.showConfirmationDialog(n,"crew.declineInvite."+this.model.get("InviteId"),"crew.enableButtons."+this.model.get("InviteId"))}},declineInviteConfirm:function(){this.updateCrewModel.declineInvite(this.model.get("CrewId"),this.model.get("InviteId"),this.declineInviteSuccess,this.errorFn)},declineInviteSuccess:function(e){if(e){if(a.WriteDebugLog("Crew.declineInviteSuccess","Status",e.get("Status")),1!=e.get("Status"))return;this.$(".options").hide(),l.UpdateSocialSideMenuCount("subtract","#crewInvitesLink",!1),d.trackEvent(f.category.crew,f.action.crew_invite_decline);var t=o.getTextCached("DeclineCrewInvite","Social");t=t.replace("[CrewName]",this.model.get("CrewName")),r.pubsub.publish("notificationFn.infoMessage",t)}},showConfirmationDialog:function(e,t,n,i){window.amd.modals.ConfirmModalView=new u.ConfirmModalView({Message:e,Name:this.model.get("CrewName"),pubsubKey:t,FocusBtn:"cancel",cancelPubsubKey:n,cancelPubsubParams:i})},disableButtons:function(){this.$el.find(".options a").addClass("disabled")},enableButtons:function(){this.model.get("CanJoin")?this.$el.find(".options a").removeClass("disabled"):this.$el.find(".optionDeclineCrew").removeClass("disabled")},errorFn:function(e){this.enableButtons(),u.ShowErrorModal(e)},onClose:function(){this.stopListening(),a.pubsub.off("crew.declineInvite."+this.model.get("InviteId")),a.pubsub.off("crew.enableButtons."+this.model.get("InviteId"))},initialize:function(){n.bindAll(this,"render","onClose","declineInviteConfirm","declineInviteSuccess","showConfirmationDialog","acceptInviteSuccess","disableButtons","enableButtons","errorFn"),this.updateCrewModel=new i.UpdateCrewModel,a.pubsub.on("crew.declineInvite."+this.model.get("InviteId"),this.declineInviteConfirm),a.pubsub.on("crew.enableButtons."+this.model.get("InviteId"),this.enableButtons)}}),D.CrewRequestsView=t.View.extend({el:"#crewRequestsList",events:{crewRequestsScroll:"getNextPage","click .crewsIManage li a":"selectCrew","click .profileButton .avatarImg":"goToMemberProfile","click .profileButton .profilenickname":"goToMemberProfile"},render:function(){return l.TabIsActive(e("#friendsPanel .sideMenu #crewInvitesLink"))?(this.$el.empty(),this.model.get("CrewsIManage").length>0&&this.showCrews(),this):this},showCrews:function(){if(!e(".crewsIManage").length){var t,n=this.model.get("CrewsIManage").toJSON();t=r.renderCompiledTemplate(L,{CrewsIManage:n,ShowTitle:this.model.get("CrewsIManage").length>1}),this.$el.append(t),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$(".crewsIManage noRemove").fadeIn(),e("#friendsContainer").data("antiscroll").refresh(),l.removeLoading("friendsPanel"),this.$(".crewsIManage img").on("error",a.crewImage404)}},showRequests:function(){var t;if(0==this.requestsCollection.length)t=r.renderCompiledTemplate(x),this.$el.append(t);else{var n=this;this.RequestViews=[],this.requestsCollection.each((function(e){var t=new D.RequestView({model:e});n.RequestViews.push(t),n.$el.append(t.render().el)}))}this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),this.$el.fadeIn(),e("#friendsContainer").data("antiscroll").refresh(),this.setSelectedCrew(),l.removeLoading("friendsPanel")},selectCrew:function(t){t.preventDefault();var n=e(t.currentTarget);if(!n.hasClass("active")){var i=n.attr("data-crewId");this.model.set({CrewId:i,PageIndex:0})}},setSelectedCrew:function(){e(".crewsIManage a").removeClass("active"),e(".crewsIManage a[data-crewId='"+this.model.get("CrewId")+"']").addClass("active")},fetchRequests:function(e){null==e&&(e=!0);var t=this,n=this.model.get("CrewId"),i=this.model.get("PageIndex");p.GetAuthHeaderAsync().then((function(a){t.crewRequestCollection.fetch({remove:e,type:"POST",contentType:"application/json; charset=utf-8",headers:a,data:'{ "pageIndex": '+i+', "crewId": '+n+" }",requestDescription:"GetPendingRequests",fatalError:u.ShowErrorModal,success:function(){var e=t.crewRequestCollection.getRequests(i);t.requestsCollection.reset(e),t.showRequests()}})}))},getNextPage:function(){var e=this.model.get("PageIndex")+1;e<this.crewRequestCollection.at(0).get("PageCount")&&(this.model.set({PageIndex:e}),this.fetchRequests(!1))},goToMemberProfile:function(t){t.preventDefault();var n=e(t.currentTarget).attr("data-id");null!=n&&c.friendProfileView(n)},onClose:function(){this.stopListening()},initialize:function(e){n.bindAll(this,"render","onClose","getNextPage","fetchRequests","showRequests"),l.setUpLoadingPanel("#friendsPanel");var t=e.CrewsIManageCollection.at(0).get("CrewId");this.crewRequestCollection=new i.CrewRequestCollection,this.requestsCollection=new i.Requests,this.model=new Backbone.Model;var a=this;this.model.on("change",(function(){a.model.hasChanged("CrewId")&&(a.$("*").not(".noRemove").remove(),a.fetchRequests())})),this.model.set({CrewsIManage:e.CrewsIManageCollection,CrewId:t,PageIndex:0}),this.render()}}),D.RequestView=t.View.extend({events:{"click .optionInvite":"sendInvite","click .optionDelete":"deleteRequest"},render:function(){var e,t=v.getAvatarUrl(this.model.get("AvatarUrl"),this.model.get("Nickname"));return this.model.set({AvatarUrl:t,IsMember:!1}),e=r.renderCompiledTemplate(R,this.model.toJSON()).trim(),this.$el.html(e),this},sendInvite:function(t){t.preventDefault(),a.WriteDebugLog("Crew.sendInvite","Nick",this.model.get("Nickname")),e(t.currentTarget).hasClass("disabled")||(this.disableButtons(),this.updateCrewModel.sendInvite(this.model.get("RockstarId"),this.model.get("CrewId"),this.sendInviteSuccess,this.errorFn))},sendInviteSuccess:function(e){if(e){if(a.WriteDebugLog("Crew.sendInviteSuccess","Status",e.get("Status")),1!=e.get("Status"))return;this.$(".options").hide();var t=o.getTextCached("CrewInviteSent","Social");t=t.replace("[Nickname]",this.model.get("Nickname")),d.trackEvent(f.category.crew,f.action.crew_invite_sent),r.pubsub.publish("notificationFn.infoMessage",t)}},deleteRequest:function(t){t.preventDefault(),a.WriteDebugLog("Crew.deleteRequest","Nick",this.model.get("Nickname")),e(t.currentTarget).hasClass("disabled")||(this.disableButtons(),this.updateCrewModel.deleteRequest(this.model.get("CrewId"),this.model.get("RequestId"),this.deleteRequestSuccess,this.errorFn))},deleteRequestSuccess:function(e){if(e){if(a.WriteDebugLog("Crew.deleteRequestSuccess","Status",e.get("Status")),1!=e.get("Status"))return;this.$(".options").hide();var t=o.getTextCached("CrewRequestDeleted","Social");t=t.replace("[Nickname]",this.model.get("Nickname")),d.trackEvent(f.category.crew,f.action.crew_delete_request),r.pubsub.publish("notificationFn.infoMessage",t)}},disableButtons:function(){this.$el.find(".options a").addClass("disabled")},enableButtons:function(){this.$el.find(".options a").removeClass("disabled")},errorFn:function(e){this.enableButtons(),u.ShowErrorModal(e)},onClose:function(){this.stopListening()},initialize:function(){n.bindAll(this,"render","onClose","sendInviteSuccess","deleteRequestSuccess","disableButtons","enableButtons","errorFn"),this.updateCrewModel=new i.UpdateCrewModel}}),D.FindCrewView=D.CrewListView.extend({el:"#findCrews",events:{"change #selectCrewType":"triggerSearch","keydown #searchCrewnames":"searchInputKeyPress","click #searchButton":"searchButtonClick"},crewTypes:{opencrews:"opencrews",rockstar:"rockstar",chatterboxes:"chatterboxes",thrillseekers:"thrillseekers",rebels:"rebels",soldiers:"soldiers",allstars:"allstars"},render:function(t){if(!l.TabIsActive(e("#friendsPanel .sideMenu #findCrewLink")))return this;this.$el.empty();var n=this.collection.toJSON(),i=r.renderCompiledTemplate(T,n[0]);return this.$el.html(i),l.setupTextInputGameNotifications(this.$("input:text, input:password, textarea")),this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),e("#selectCrewType").dropkick(),void 0!==t&&this.setSearchOptions(t),this.$el.fadeIn(),d.trackPage("/FindCrew"),this},setSearchOptions:function(e){if(void 0!==e.crewType&&""!==e.crewType){var t=n.find(this.crewTypes,(function(t){return t.toLowerCase()==e.crewType.toLowerCase()}));void 0!==t&&this.$("#selectCrewType").dropkick("setValue",t)}void 0!==e.searchString&&""!==e.searchString&&this.$("#searchCrewnames").val(e.searchString.substring(0,20))},searchInputKeyPress:function(e){13==e.which&&this.searchButtonClick(e)},searchButtonClick:function(e){e.preventDefault();var t=this.$("#searchCrewnames");t.length&&(!t.val().length||t.val().length>2)&&(this.triggerSearch(),d.trackEvent(f.category.crew,f.action.crew_search,t.val()))},resetSearchResults:function(){this.$(".foundCrews").hide(),l.setUpLoadingPanel("#friendsPanel")},triggerSearch:function(){this.resetSearchResults();var e=this.$("#selectCrewType").find("option:selected").data("category"),t=!1;if("friends"===e)t=!0,this.$("#searchCrewsInput").fadeOut();else{this.$("#searchCrewsInput").fadeIn();var n=this.$("#searchCrewnames").val(),i=e===this.crewTypes.rockstar?1:-1,a=e===this.crewTypes.opencrews||e===this.crewTypes.rockstar?1:-1;(e===this.crewTypes.opencrews||""===e&&""===n)&&(i=0)}this.collection.initialize(),e=e||"all";var r=JSON.stringify({env:globals.rosEnvironment,title:globals.titleName,version:globals.RosTitleVersion,searchTerm:n,crewType:e,openCrewFilter:a,systemCrewFilter:i,pageIndex:0,friendsCrews:t}),o=this;p.GetAuthHeaderAsync().then((function(e){o.collection.fetch({type:"POST",headers:e,contentType:"application/json; charset=utf-8",data:r,success:o.renderSearchResults,requestDescription:"SearchCrews",fatalError:u.ShowErrorModal})}))},renderSearchResults:function(){this.clearCrewList();var t=this.$(".foundCrewsInner");if(this.collection.Total>0)t.html(""),this.collection.each((function(e){e.set("Template","search")})),N=new D.CrewListView({el:t,collection:this.collection});else{var n=o.getError("NoMatches"),i=r.renderCompiledTemplate(I,{ErrorMsg:n});t.html(i),t.parent().fadeIn()}this.$("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),e(".loadingMask").hide(),this.$(".foundCrews").fadeIn(),e("#friendsContainer").data("antiscroll").refresh()},clearCrewList:function(){if(null!=N&&N.CrewViews.length>0)for(var e=0;e<N.CrewViews.length;e++)N.CrewViews[e].onClose()},onClose:function(){this.stopListening(),this.collection.unbind("reset",this.renderSearchResults),this.collection.unbind("error",this.fetchfail),this.$el.hide(),this.clearCrewList()},initialize:function(e){n.bindAll(this,"render","onClose","triggerSearch","renderSearchResults","searchInputKeyPress","searchButtonClick","resetSearchResults","clearCrewList","setSearchOptions"),null!=N&&this.clearCrewList(),l.setUpLoadingPanel("#friendsPanel"),this.collection=new i.SearchCrewsCollection,this.render(e),this.triggerSearch()}});var M=function(){g.crews.clear()};return a.pubsub.on("section:social:loaded",M),a.pubsub.on("signout:completed",M),D}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i,a;i=[n(0),n(16),n(6),n(74)],void 0===(a=function(e,t,n){var i={};return i.crews=new t.Cache,i}.apply(t,i))||(e.exports=a)},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div id="activeCrew"></div>\r\n<div id="myCrewList"></div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,a,r){var o,s,l=e.lambda,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="crewLarge lightCard">\n    <div class="clearfix">\n        <div class="crewLast" rel="localize[Active]">Active</div>\n        <div class="'+c(l(null!=t?u(t,"CrewType"):t,t))+' crewType">\n\n            <img class="avatar" src="'+c((s=n(45),s&&(s.__esModule?s.default:s)).call(null!=t?t:e.nullContext||{},null!=t?u(t,"CrewId"):t,128,{name:"emblemUrl",hash:{},data:r,loc:{start:{line:6,column:37},end:{line:6,column:61}}}))+'" />\n\n            <h3>'+c(l(null!=t?u(t,"CrewName"):t,t))+"</h3>\n\n"+(null!=(o=e.invokePartial(n(41),t,{name:"common/templates/crew/crew_tag",data:r,indent:"            ",helpers:i,partials:a,decorators:e.decorators}))?o:"")+'\n            <p><span class="memberCount">'+c(l(null!=t?u(t,"MemberCount"):t,t))+'</span> <span rel="localize[Members]">members</span></p>\n        </div>\n\n        <div class="right">\n            <div class="left">\n                <ul id="crewList" class="clearfix">\n                    <li>\n                        <h5>\n                            <span rel="localize[Division]">Division</span>\n                        </h5>\n                        <p class="division">'+c(l(null!=t?u(t,"Division"):t,t))+'</p>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="actions clearfix">\n                <a class="leaveTrigger" data-id="'+c(l(null!=t?u(t,"CrewId"):t,t))+'" href="#" rel="localize[LeaveCrew]">\n                    Leave Crew\n                </a>\n            </div>\n        </div>\n    </div>\n</div>'},usePartial:!0,useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r=e.lambda,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="crewHeader" class="clearfix">\n  <div class="profileButton" data-rel="">\n    <img width="64" height="64" class="avatarImg" data-id="'+o(r(null!=t?s(t,"LeaderRockstarId"):t,t))+'" alt="" src="'+o(r(null!=t?s(t,"LeaderAvatar"):t,t))+'" />\n      <div class="text">\n        <h5 class="profilenickname" data-id="'+o(r(null!=t?s(t,"LeaderRockstarId"):t,t))+'">'+o(r(null!=t?s(t,"LeaderNickname"):t,t))+'</h5>\n          <span class="infoWrap rank" rel="localize[Leader]">Leader</span>\n          <span class="infoWrap dateJoined">\n          <span rel="localize[Joined]">Joined</span>: '+o(r(null!=t?s(t,"LeaderDateJoined"):t,t))+"\n        </span>\n      </div>\n    </div>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,a,r){var o,s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="clearfix">\n  <h3>'+l(s(null!=t?c(t,"CrewName"):t,t))+"</h3>\n"+(null!=(o=e.invokePartial(n(41),t,{name:"common/templates/crew/crew_tag",data:r,indent:"  ",helpers:i,partials:a,decorators:e.decorators}))?o:"")+'  <h4 id="memberCount"><i></i> '+l(s(null!=t?c(t,"MemberCount"):t,t))+' <span rel="localize[Members]">members</span></h4>\n</div>\n\n'+(null!=(o=c(i,"if").call(null!=t?t:e.nullContext||{},null!=t?c(t,"LeaderNickname"):t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:7,column:0},end:{line:20,column:7}}}))?o:"")+'\n<form id="crewMemberSearchForm" class="clearfix">\n    <div class="input">\n        <div class="ui-widget" id="crewMemberSearchInput">\n            <input type="text" name="crewMemberSearchText" id="crewMemberSearchText" class="text" placeholder="Find Crew Members" rel="localize[FindCrewMembers]" />\n        </div>\t\t\t\t\t\n        <span class="help-block"></span>\n    </div>\n    <a id="crewMemberSearchLink" class="searchButton"><span>Search</span></a>\n    <p rel="localize[CrewList]">This page shows the most recently active crew members.</p>\n</form>\n\n<div class="list clearfix"></div>'},usePartial:!0,useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'            <a class="optionAcceptCrew btn btnPurple btnSmall"><span rel="localize[Accept]">Accept</span></a>\r\n'},3:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="tooltip-above">\r\n                <a class="optionAcceptCrew btn btnPurple btnSmall disabled" rel="localize[Accept]"><span rel="localize[Accept]">Accept</span></a>\r\n                <span class="tip">'+e.escapeExpression(e.lambda(null!=t?r(t,"MaxCrewsMsg"):t,t))+"</span>\r\n            </span>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,a,r){var o,s,l=null!=t?t:e.nullContext||{},c=e.escapeExpression,u=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="crewCard lightCard">\r\n    <div class="crewType clearfix">\r\n        <img class="avatar" width="64" height="64" src="'+c((s=n(45),s&&(s.__esModule?s.default:s)).call(l,null!=t?d(t,"CrewId"):t,64,{name:"emblemUrl",hash:{},data:r,loc:{start:{line:3,column:56},end:{line:3,column:79}}}))+'"/>\r\n        <div class="left">\r\n            <h5>'+c(u(null!=t?d(t,"CrewName"):t,t))+"</h5>\r\n\r\n"+(null!=(o=e.invokePartial(n(41),t,{name:"common/templates/crew/crew_tag",data:r,indent:"            ",helpers:i,partials:a,decorators:e.decorators}))?o:"")+"\r\n            <p>"+c(u(null!=t?d(t,"MemberCount"):t,t))+' <span rel="localize[Members]">members</span></p>\r\n        </div>\r\n    </div>\r\n    <div class="options">\r\n\r\n'+(null!=(o=d(i,"if").call(l,null!=t?d(t,"CanJoin"):t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r,loc:{start:{line:14,column:8},end:{line:21,column:15}}}))?o:"")+'\r\n        <a class="optionDeclineCrew btn btnGrey btnSmall"><span rel="localize[Decline]">Decline</span></a>\r\n    </div>\r\n</div>'},usePartial:!0,useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div id="noCrewInvites" class="emptySocial">\r\n    <p rel="localize[NoCrewInvites]">No pending crew invites</p>\r\n    <span></span>\r\n    <a class="btn btnPurple" href="#" rel="localize[JoinACrew]">Join a crew</a>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div id="noCrew" class="emptySocial">\r\n    <p rel="localize[NotACrewMember]">Not a member of any crew yet</p>\r\n    <span></span>\r\n    <a class="btn btnPurple" href="#" rel="localize[JoinACrew]">Join a crew</a>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="noCrew" class="emptySocial">\r\n    <p>'+e.escapeExpression(e.lambda(null!=t?r(t,"errorMsg"):t,t))+'</p>\r\n    <span></span>\r\n    <a class="btn btnPurple" href="#" rel="localize[JoinACrew]">Join a crew</a>\r\n</div>\r\n'},3:function(e,t,n,i,a){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h3 class="errorText">'+e.escapeExpression(e.lambda(null!=t?r(t,"errorMsg"):t,t))+"</h3>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,a,r){var o,s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=(s=n(9),s&&(s.__esModule?s.default:s)).call(null!=t?t:e.nullContext||{},null!=t?l(t,"errorCode"):t,"NotACrewMember",{name:"ifequals",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r,loc:{start:{line:1,column:0},end:{line:9,column:13}}}))?o:""},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<form id="searchCrewsForm" class="clearfix">\r\n    <input type="hidden" id="searchCrewtype" value="" />\r\n    <fieldset>\r\n        <legend>Search Crews Form</legend>\r\n        <div id="searchCrewsSelect">\r\n            <div class="input">\r\n                <select name="selectCrewType" id="selectCrewType">\r\n                    <option value="" rel="localize[CrewTypeAll]">All Types</option>\r\n                    <option data-category="opencrews" value="opencrews" rel="localize[CrewTypeOpen]">Open Crews</option>\r\n                    <option data-category="rockstar" value="rockstar" rel="localize[CrewTypeRockstar]">Rockstar Crews</option>\r\n                    <option data-category="chatterBoxes" value="chatterboxes" rel="localize[CrewTypeChatterBoxes]">Chatter Boxes</option>\r\n                    <option data-category="thrillSeekers" value="thrillseekers" rel="localize[CrewTypeThrillSeekers]">Thrill Seekers</option>\r\n                    <option data-category="rebels" value="rebels" rel="localize[CrewTypeRebels]">Rebels</option>\r\n                    <option data-category="soldiers" value="soldiers" rel="localize[CrewTypeSoldiers]">Soldiers</option>\r\n                    <option data-category="allStars" value="allstars" rel="localize[CrewTypeAllStars]">All Stars</option>\r\n                    <option data-category="friends" value="friends" rel="localize[CrewTypeMyFriends]">My Friends\' Crews</option>\r\n                </select>\r\n            </div>\r\n            <span class="help-block"></span>\r\n        </div>\r\n        <div id="searchCrewsInput">\r\n            <div class="input">\r\n                <input type="text" name="searchCrewnames" id="searchCrewnames" maxlength="20" placeholder="Search by name" rel="localize[SearchByName]" />\r\n                <a href="#" id="searchButton" class="searchButton">\r\n                    <span rel="localize[Search]">>Search</span>\r\n                </a>\r\n            </div>\r\n            <span class="help-block" rel="localize[SearchMin3Chars]">Search must contain a minimum of 3 characters</span>\r\n        </div>\r\n    </fieldset>\r\n</form>\r\n<div class="foundCrewsWrapper">\r\n    <div class="foundCrews">\r\n        <div class="foundCrewsInner clearfix"></div>\r\n    </div>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h3 class="errorText">'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"ErrorMsg")||(null!=t?o(t,"ErrorMsg"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"ErrorMsg",hash:{},data:a,loc:{start:{line:1,column:22},end:{line:1,column:34}}}):r)+"</h3>"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="profileButton crewRequest">\r\n    <img width="64" height="64" class="avatarImg" data-id="'+l("function"==typeof(r=null!=(r=c(n,"RockstarId")||(null!=t?c(t,"RockstarId"):t))?r:s)?r.call(o,{name:"RockstarId",hash:{},data:a,loc:{start:{line:2,column:59},end:{line:2,column:73}}}):r)+'" alt="" src="'+l("function"==typeof(r=null!=(r=c(n,"AvatarUrl")||(null!=t?c(t,"AvatarUrl"):t))?r:s)?r.call(o,{name:"AvatarUrl",hash:{},data:a,loc:{start:{line:2,column:87},end:{line:2,column:100}}}):r)+'" />\r\n    <div class="text">\r\n        <h5 class="profilenickname" data-id="'+l("function"==typeof(r=null!=(r=c(n,"RockstarId")||(null!=t?c(t,"RockstarId"):t))?r:s)?r.call(o,{name:"RockstarId",hash:{},data:a,loc:{start:{line:4,column:45},end:{line:4,column:59}}}):r)+'">'+l("function"==typeof(r=null!=(r=c(n,"Nickname")||(null!=t?c(t,"Nickname"):t))?r:s)?r.call(o,{name:"Nickname",hash:{},data:a,loc:{start:{line:4,column:61},end:{line:4,column:73}}}):r)+'</h5>\r\n    </div>\r\n    \r\n    <div class="options">\n        <a class="optionInvite btn btnPurple btnSmall"><span rel="localize[Invite]">Invite</span></a>\n        <a class="optionDelete btn btnGrey btnSmall"><span rel="localize[Delete]">Delete</span></a>\n    </div>\n</div>\ufeff'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<ul id="crewInvitesSwitch" class="clearfix noRemove">\r\n    <li class="invites noRemove">\r\n      <a href="#" class="noRemove" rel="localize[Invites]">Invites</a>\r\n    </li>\r\n    <li class="requests noRemove">\r\n      <a href="#" class="noRemove" rel="localize[Requests]">Requests</a>\r\n    </li>\r\n  </ul>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div id="noCrewInvites" class="emptySocial">\r\n    <p rel="localize[NoCrewRequests]">No pending requests</p>\r\n    <span></span>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'  <p class="noRemove" rel="localize[SelectACrew]">Select a crew</p>\r\n'},3:function(e,t,i,a,r){var o,s=e.lambda,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <li class="noRemove">\r\n          <a href="#" data-crewId="'+l(s(null!=t?c(t,"CrewId"):t,t))+'" class="noRemove">\r\n              <img class="avatar noRemove" src="'+l((o=n(45),o&&(o.__esModule?o.default:o)).call(null!=t?t:e.nullContext||{},null!=t?c(t,"CrewId"):t,64,{name:"emblemUrl",hash:{},data:r,loc:{start:{line:10,column:48},end:{line:10,column:71}}}))+'" title="'+l(s(null!=t?c(t,"CrewName"):t,t))+'"/>\r\n          </a>\r\n      </li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="manageCrews" class="noRemove">\r\n'+(null!=(r=s(n,"if").call(o,null!=t?s(t,"ShowTitle"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:0},end:{line:4,column:7}}}))?r:"")+'\r\n  <ul class="crewsIManage noRemove">\r\n'+(null!=(r=s(n,"each").call(o,null!=t?s(t,"CrewsIManage"):t,{name:"each",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:7,column:6},end:{line:13,column:15}}}))?r:"")+"  </ul>\r\n</div>"},useData:!0})},function(e,t,n){"use strict";(function(i){var a,r=n(3)(n(5));void 0===(a=function(e){var t=n(0),i=n(16),a=n(4),o=n(6),s=n(8),l=n(1),c=n(10),u=n(11),d=n(13),f=n(36),p={},h=window.globals;return p.Catalog=i.Model.extend({initialize:function(e){null!=e&&null!=e.titlelang||this.set("titlelang","en-US"),this.isMaintenanceMode()||this.initCommerceSystem()},isMaintenanceMode:function(){var e=this;return null!=this.storeStatusModel&&void 0!==this.storeStatusModel||(this.storeStatusModel=new p.StoreStatus,this.storeStatusModel.on("change",(function(){e.setMaintenanceMode()}))),this.storeStatusModel.fetch({cache:!1,silentFail:!0}),this.setMaintenanceModeSilently(),!!this.get("isMaintenanceMode")},setMaintenanceModeSilently:function(){this.setMaintenanceMode(!0)},setMaintenanceMode:function(e){e=e||!1;var t=l.isSteam(),n=!t&&void 0!==h.isCde&&!h.isCde,i=t&&void 0!==h.isCse&&!h.isCse;n||i?this.set({isMaintenanceMode:!0},{silent:e}):this.set({isMaintenanceMode:!1},{silent:e})},initCommerceSystem:function(){o.WriteDebugLog("store-models.initCommerceSystem","init store v2"),this.categories=new p.CategoryCollection,this.products=new p.ProductCollection,this.get("_isLoading")||(s.CallGameMethod("RGSC_INITIALISE_COMMERCE_DATA",null,"RGSC_INITIALISE_COMMERCE_DATA_DEMO"),s.CallGameMethod("RGSC_REQUEST_COMMERCE_DATA",{LanguageCode:l.getStoreLanguage(this.get("titlelang"))},"RGSC_REQUEST_COMMERCE_DATA_DEMO")),this.set({_isLoading:!0,_isDataValid:!1,_isError:!1},{silent:!0})},loadCatalogAsync:function(){var e=new t.Deferred;return e.resolve(),e.promise()},isCommerceDataValidAsync:function(e,n){var i=this,a=new t.Deferred;if(!c.isActivePanel("#storev2Panel"))return i.cancelPollingCommerce(n),a.reject(),a.promise();var r=s.CallGameMethodAsync("RGSC_IS_COMMERCE_DATA_VALID",null,"RGSC_IS_COMMERCE_DATA_VALID_DEMO");return r.then((function(t){void 0!==t&&void 0!==t.Result&&i.set({_isDataValid:t.Result},{silent:!0}),i.isCommerceDataValidSuccess(e,n)?a.resolve():a.reject()})),r.catch((function(){i.set({_isLoading:!1},{silent:!0}),a.reject()})),a.promise()},isCommerceDataValidSuccess:function(e,t){return this.get("_isDataValid")?(this.startCatalogLoad(e,t),!0):(this.checkCommerceErrorStateAsync(t),!1)},checkCommerceErrorStateAsync:function(e){var t=this,n=s.CallGameMethodAsync("RGSC_IS_COMMERCE_IN_ERROR_STATE",null,"RGSC_IS_COMMERCE_IN_ERROR_STATE_DEMO");n.then((function(n){t.commerceErrorSuccess(n,e)})),n.catch((function(){t.commerceErrorFailure()}))},commerceErrorSuccess:function(e,t){void 0!==e&&void 0!==e.Result&&(o.WriteDebugLog("commerceErrorSuccess","isErrorJson",JSON.stringify(e)),this.set({_isError:e.Result},{silent:!0}),this.get("_isError")&&(this.set({_isLoading:!1},{silent:!0}),this.cancelPollingCommerce(t,l.errorCode("7000.136"))))},commerceErrorFailure:function(){o.WriteDebugLog("commerceErrorFailure","promise failed","aborting"),this.set({_isLoading:!1},{silent:!0})},startCatalogLoad:function(e,t){o.WriteDebugLog("hasCommerceSystemResponded","_isDataValid; _isLoading; _isError",this.get("_isDataValid")+"; "+this.get("_isLoading")+"; "+this.get("_isError")),this.set({_isLoading:!1},{silent:!0}),this.cancelPollingCommerce(t),this.getCatalog(e)},cancelPollingCommerce:function(e,t){null!==e&&(clearInterval(e),e=null,(!this.get("_isDataValid")||this.get("_isError"))&&this.getError(t)&&this.set({_isLoading:!1},{silent:!0}))},getCatalog:function(e){if(o.WriteDebugLog("getCatalog","_isDataValid; _isLoading; _isError",this.get("_isDataValid")+"; "+this.get("_isLoading")+"; "+this.get("_isError")),!this.get("_isLoading")&&!this.get("_isError")&&this.get("_isDataValid")){var t=this;t.set({_isCatalogLoaded:!1},{silent:!0});var n=setInterval((function(){t.pollForCatalog(e,n)}),500);setTimeout((function(){t.cancelPollingCommerceCatalog(n)}),h.ajaxTimeout)}},pollForCatalog:function(e,t){o.WriteDebugLog("pollForCatalog","_isDataValid; _isLoading; _isError",this.get("_isDataValid")+"; "+this.get("_isLoading")+"; "+this.get("_isError"));var n=this;c.isActivePanel("#storev2Panel")?n.get("_isLoading")||n.get("_isError")||!n.get("_isDataValid")||(n.get("_isCatalogLoaded")?n.cancelPollingCommerceCatalog(t):s.CallGameMethodAsync("RGSC_GET_COMMERCE_CATALOG",null,"RGSC_GET_COMMERCE_CATALOG_DEMO").then((function(i){n.getCommerceCatalogSuccess(i,e,t)}))):n.cancelPollingCommerceCatalog(t)},getCommerceCatalogSuccess:function(e,t,n){return null==e||void 0===e?(this.set({_isLoading:!1,_isDataValid:!1,_isCatalogLoaded:!0,_isError:!0},{silent:!0}),void this.getError(l.errorCode("7000.136"))):("string"==typeof e&&(e=JSON.parse(e)),void 0===e.Count?(this.set({_isLoading:!1,_isDataValid:!1,_isCatalogLoaded:!0,_isError:!0},{silent:!0}),void this.getError(l.errorCode("7000.136"))):(this.set({_isLoading:!1,_isDataValid:!0,_isCatalogLoaded:!0,_isError:!1},{silent:!0}),this.cancelPollingCommerceCatalog(n),void 0!==t&&(e.Category=t.category,e.Product=t.productId),void this.getCatalogModel(e)))},cancelPollingCommerceCatalog:function(e){null!=e&&(o.WriteDebugLog("cancelPollingCommerceCatalog"),clearInterval(e),e=null,this.get("_isCatalogLoaded")||this.getError(l.errorCode("7000.137")))},getCatalogModel:function(e){e.StoreAvailable=!0,e.SingleProductView=this.isSingleProductView(e.Product),e=p.Catalog.prototype.parse.call(this,e),p.Catalog.prototype.set.call(this,e,{parse:!0})},isSingleProductView:function(e){return void 0!==e&&""!==e},getError:function(e){return!!c.isActivePanel("#storev2Panel")&&(this.set({storeAvailable:!1,errorCode:e},{silent:!0}),this.trigger("change"),!0)},searchProducts:function(e,t){var n;if(n="purchased"===o.toLower(e)?this.filterByPurchased():this.filterByCategory(e),null!=t&&t.length){var i=o.toLower(t);return n.filter((function(e){var t=o.toLower(e.get("Name").toString()),n=o.toLower(e.get("Desc").toString()),a=o.toLower(e.get("Id").toString());return t.indexOf(i)>=0||n.indexOf(i)>=0||a.indexOf(i)>=0}))}return n},filterProducts:function(e,t){var n,i;return null==(n="purchased"==o.toLower(e)?this.filterByPurchased():this.filterByCategory(e))||0==n.length?n:(""!=t&&(i=this.findProduct(n,t)),null!=i&&i.length>0?(i[0].productFound=!0,i):n)},filterByCategory:function(e){var t=void 0,n=o.toLower(e);if("top_default"===n){var i=this.get("products");null!=i&&(t=i.models)}else t=this.get("products").filter((function(e){return a.any(e.get("CategoryMemberships"),(function(e){return o.toLower(e)===n}))}));return t},filterByPurchased:function(){return this.get("products").filter((function(e){return e.get("Purchased")&&!e.get("Consumable")}))},findProduct:function(e,n){var i=o.toLower(n);return t.grep(e,(function(e){return o.toLower(e.get("Id"))===i}))},findCategory:function(e,t){var n=o.toLower(t);return a.find(e,(function(e){var t=o.toLower(e.Id)===n,i=o.toLower(e.Name)===n;return t||i}))},parse:function(e){return o.WriteDebugLog("Catalog.parse","response.StoreAvailable",e.StoreAvailable),o.WriteDebugLog("Catalog.parse","response.ProductCount",e.ProductCount),{products:new p.ProductCollection(e.Products,{parse:!0}),categories:new p.CategoryCollection(e.Categories,{parse:!0}),productCount:e.ProductCount,categoryCount:e.CategoryCount,storeAvailable:e.StoreAvailable,category:e.Category,product:e.Product,singleProductView:e.SingleProductView}}}),p.Category=i.Model.extend({idAttribute:"Id",parse:function(e){return!e||!e.Name||!e.Name.length||e.Name.length<=0?(e.Name="ALL",e):e}}),p.CategoryCollection=i.Collection.extend({model:p.Category}),p.Product=i.Model.extend({idAttribute:"Id",parse:function(e){var t=e.Consumable,n=e.Purchased,i=e.Installed,r=!1;!t&&n||(r=!0);var o=!1;return t||!n||i||(o=!0),null!=(e=a.extend(e,{ShowPurchaseButton:r,ShowInstallButton:o})).ImagePaths&&e.ImagePaths.length>0&&null!=e.ImagePaths[0]&&(e=a.extend(e,{ImagePath:e.ImagePaths[0],ImagePathLrg:e.ImagePaths[0]})).ImagePaths.length>1&&null!=e.ImagePaths[1]&&(e=a.extend(e,{ImagePathSml:e.ImagePaths[1]})),e},setupPurchaseFlowTelemetry:function(){var e=this;s.CallGameMethodAsync("RGSC_COMMERCE_GET_PURCHASE_FLOW_TELEMETRY",null,"RGSC_COMMERCE_GET_PURCHASE_FLOW_TELEMETRY_DEMO").then((function(t){"object"===(0,r.default)(t)&&(void 0!==t.l&&u.setCustomDimensionOrMetric(d.dimensions.pia1,t.l.toString()),void 0!==t.liid&&u.setCustomDimensionOrMetric(d.dimensions.pia2,t.liid.toString()),void 0!==t.lip&&u.setCustomDimensionOrMetric(d.dimensions.pia3,t.lip.toString()),void 0!==t.b&&u.setCustomDimensionOrMetric(d.dimensions.pia4,t.b.toString()),void 0!==t.d&&u.setCustomDimensionOrMetric(d.dimensions.pia5,t.d.toString()),void 0!==t.sid&&u.setCustomDimensionOrMetric(d.dimensions.pia6,t.sid.toString()));var n=e.get("Name"),i={id:e.get("Id"),name:n,price:e.get("Price"),category:e.get("CategoryMemberships"),quantity:1,brand:h.titleName};f.requestCheckout(i)}))}}),p.ProductCollection=i.Collection.extend({model:p.Product}),p.UserAccount=i.Model.extend({url:o.getApiUrl("/api/profile/getsignedinuseraccountinfo")}),p.StoreStatus=i.Model.extend({url:o.getApiUrl("/api/profile/storestatus?storename=scui"),initialize:function(){this.on("change",this.updateStoreStatus)},updateStoreStatus:function(){h.isCde=this.get("IsCommerceDefaultEnabled"),h.isCse=this.get("IsCommerceSteamEnabled"),h.cmm=this.get("CommerceMaintenanceMessages")}}),p}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="purchase_button"><a href="#" class="btn btnPurple btnLarge" data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"Id")||(null!=t?o(t,"Id"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"Id",hash:{},data:a,loc:{start:{line:11,column:88},end:{line:11,column:94}}}):r)+'" rel="localize[BuyButton]">Buy</a></span>\r\n'},3:function(e,t,n,i,a){return'      <span class="install_button"></span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="item clearfix product" data-id="'+u(typeof(o=null!=(o=d(n,"Id")||(null!=t?d(t,"Id"):t))?o:l)===c?o.call(s,{name:"Id",hash:{},data:a,loc:{start:{line:1,column:44},end:{line:1,column:50}}}):o)+'">\r\n  <a class="thumbWrapper" href="#">\r\n    <img class="thumb" src="'+u(typeof(o=null!=(o=d(n,"StoreImageBaseUrl")||(null!=t?d(t,"StoreImageBaseUrl"):t))?o:l)===c?o.call(s,{name:"StoreImageBaseUrl",hash:{},data:a,loc:{start:{line:3,column:28},end:{line:3,column:49}}}):o)+u(typeof(o=null!=(o=d(n,"ImagePath")||(null!=t?d(t,"ImagePath"):t))?o:l)===c?o.call(s,{name:"ImagePath",hash:{},data:a,loc:{start:{line:3,column:49},end:{line:3,column:62}}}):o)+'" alt=""/>\r\n    <img class="info" src="'+u(typeof(o=null!=(o=d(n,"baseUrl")||(null!=t?d(t,"baseUrl"):t))?o:l)===c?o.call(s,{name:"baseUrl",hash:{},data:a,loc:{start:{line:4,column:27},end:{line:4,column:38}}}):o)+'images/info.png" alt="info icon" />\r\n  </a>\r\n  <div class="storeItemText">\r\n\t\t<div class="storeItemTextSummary">\r\n\t\t\t<h4>'+u(typeof(o=null!=(o=d(n,"Name")||(null!=t?d(t,"Name"):t))?o:l)===c?o.call(s,{name:"Name",hash:{},data:a,loc:{start:{line:8,column:7},end:{line:8,column:15}}}):o)+"</h4>\r\n\t\t\t<h5>"+u(typeof(o=null!=(o=d(n,"PriceString")||(null!=t?d(t,"PriceString"):t))?o:l)===c?o.call(s,{name:"PriceString",hash:{},data:a,loc:{start:{line:9,column:7},end:{line:9,column:22}}}):o)+"&nbsp;</h5>\r\n"+(null!=(r=d(n,"if").call(s,null!=t?d(t,"ShowPurchaseButton"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:10,column:6},end:{line:12,column:13}}}))?r:"")+(null!=(r=d(n,"if").call(s,null!=t?d(t,"ShowInstallButton"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:13,column:6},end:{line:15,column:13}}}))?r:"")+'      <div class="errors"><span class="errorText"></span></div>\r\n    </div>\r\n\t</div>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <h5>"+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"PriceString")||(null!=t?o(t,"PriceString"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"PriceString",hash:{},data:a,loc:{start:{line:12,column:20},end:{line:12,column:35}}}):r)+"&nbsp;</h5>\r\n"},3:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <span class="purchase_button"><a href="#" class="btn btnPurple btnLarge" data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"Id")||(null!=t?o(t,"Id"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"Id",hash:{},data:a,loc:{start:{line:15,column:98},end:{line:15,column:104}}}):r)+'" rel="localize[BuyButton]">Buy</a></span>\r\n'},5:function(e,t,n,i,a){return'                <span class="install_button"></span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="item clearfix product dlc" data-id="'+u(typeof(o=null!=(o=d(n,"Id")||(null!=t?d(t,"Id"):t))?o:l)===c?o.call(s,{name:"Id",hash:{},data:a,loc:{start:{line:1,column:48},end:{line:1,column:54}}}):o)+'">\r\n    <a class="thumbWrapper" href="#">\r\n        <img class="thumb" src="'+u(typeof(o=null!=(o=d(n,"ImagePath")||(null!=t?d(t,"ImagePath"):t))?o:l)===c?o.call(s,{name:"ImagePath",hash:{},data:a,loc:{start:{line:3,column:32},end:{line:3,column:45}}}):o)+'" alt="" />\r\n        <img class="info" src="'+u(typeof(o=null!=(o=d(n,"baseUrl")||(null!=t?d(t,"baseUrl"):t))?o:l)===c?o.call(s,{name:"baseUrl",hash:{},data:a,loc:{start:{line:4,column:31},end:{line:4,column:42}}}):o)+'images/info.png" alt="info icon" />\r\n    </a>\r\n    <div class="storeItemText">\r\n        <div class="storeItemTextSummary">\r\n            <h4>'+u(typeof(o=null!=(o=d(n,"Name")||(null!=t?d(t,"Name"):t))?o:l)===c?o.call(s,{name:"Name",hash:{},data:a,loc:{start:{line:8,column:16},end:{line:8,column:24}}}):o)+"</h4>\r\n            <p>"+u(typeof(o=null!=(o=d(n,"Desc")||(null!=t?d(t,"Desc"):t))?o:l)===c?o.call(s,{name:"Desc",hash:{},data:a,loc:{start:{line:9,column:15},end:{line:9,column:23}}}):o)+'</p>\r\n            <div class="storeItemPriceSummary">\r\n'+(null!=(r=d(n,"if").call(s,null!=t?d(t,"HasPriceString"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:11,column:16},end:{line:13,column:23}}}))?r:"")+(null!=(r=d(n,"if").call(s,null!=t?d(t,"ShowPurchaseButton"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:16},end:{line:16,column:23}}}))?r:"")+(null!=(r=d(n,"if").call(s,null!=t?d(t,"ShowInstallButton"):t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:17,column:16},end:{line:19,column:23}}}))?r:"")+"            </div>\r\n        </div>\r\n    </div>\r\n</div>"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div class="item clearfix">\r\n\t<h4 rel="localize[NoProducts]">No products match your search criteria.</h4>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div class="item clearfix">\r\n\t<h4 rel="localize[ProductNotFound]">Product could not be found.</h4>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div class="errorText" style="margin-top: 20px;">\r\n    <span rel="localize[StoreUnderAge]">Your Social Club account does not meet the age requirements for accessing the Store.</span>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return' <div id="store">\r\n\t<div id="storeHeader">\r\n\t\t<div class="clearfix">\r\n\t\t\t<h3><span rel="localize[StoreTitle]">Store</span></h3>\r\n\t\t</div>\r\n\t</div>\r\n\r\n    <div id="products">\r\n\t    <div class="box-wrap antiscroll-wrap">\r\n            <div class="box">\r\n                <div class="antiscroll-inner"></div>\r\n            </div>\r\n         </div>\r\n\r\n         <div class="products-split">\r\n             <div class="box">\r\n                 <div class="cards"></div>\r\n                 <div class="dlc-container"></div>\r\n             </div>\r\n         </div>\r\n     </div>\r\n</div>\r\n\r\n<div id="storeV2Iframe">\r\n    <iframe></iframe>\r\n</div>\r\n\r\n<div id="storeV2Error"></div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div class="options">\r\n    <div id="storeFilter">\r\n        <form>\r\n\t\t      <div id="storeSearch" class="input">\r\n\t\t\t      <input id="searchInput" name="searchInput" type="text" class="text" placeholder="Search" rel="localize[SearchLabel]" maxLength="50" />\r\n\t\t\t      <input id="searchSubmit" name="searchSubmit" type="submit" value="Go" rel="localize[GoButton]"/>\r\n\t\t      </div>\r\n\t\t      <div id="storeCategory" class="input">\r\n\t\t\t      <label for="category" rel="localize[StoreCategory]">Category:</label>\r\n\t\t\t      <select id="category" name="category">\r\n                  </select>\r\n\t\t      </div>\r\n        </form>\r\n    </div>\r\n    <span id="redeemSerialKey" tabindex="20" class="btn btnPurple btnLarge" rel="localize[RedeemSerialKey]">Use Activation Code</span>\r\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'        <span class="purchase_button"></span>\r\n'},3:function(e,t,n,i,a){return'        <span class="install_button"></span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="product_info">\r\n    <div class="header">\r\n        <h4>'+u(typeof(o=null!=(o=d(n,"Name")||(null!=t?d(t,"Name"):t))?o:l)===c?o.call(s,{name:"Name",hash:{},data:a,loc:{start:{line:3,column:12},end:{line:3,column:20}}}):o)+'</h4>\r\n        <a class="close"></a>\r\n    </div>\r\n    <div class="thumb">\r\n        <img src="'+u(typeof(o=null!=(o=d(n,"StoreImageBaseUrl")||(null!=t?d(t,"StoreImageBaseUrl"):t))?o:l)===c?o.call(s,{name:"StoreImageBaseUrl",hash:{},data:a,loc:{start:{line:7,column:18},end:{line:7,column:39}}}):o)+u(typeof(o=null!=(o=d(n,"ImagePathLrg")||(null!=t?d(t,"ImagePathLrg"):t))?o:l)===c?o.call(s,{name:"ImagePathLrg",hash:{},data:a,loc:{start:{line:7,column:39},end:{line:7,column:55}}}):o)+'" alt=""/>\r\n    </div>\r\n    <div class="storeItemTextSummary clearfix">\r\n        <h5>'+u(typeof(o=null!=(o=d(n,"PriceString")||(null!=t?d(t,"PriceString"):t))?o:l)===c?o.call(s,{name:"PriceString",hash:{},data:a,loc:{start:{line:10,column:12},end:{line:10,column:27}}}):o)+"</h5>\r\n"+(null!=(r=d(n,"if").call(s,null!=t?d(t,"ShowPurchaseButton"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:11,column:8},end:{line:13,column:15}}}))?r:"")+(null!=(r=d(n,"if").call(s,null!=t?d(t,"ShowInstallButton"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:8},end:{line:16,column:15}}}))?r:"")+'    </div>\r\n    <div class="box-wrap antiscroll-wrap">\r\n        <div class="box">\r\n            <div class="antiscroll-inner">\r\n                <div class="storeItemTextDescription">\r\n                    <p>'+(null!=(r=typeof(o=null!=(o=d(n,"Desc")||(null!=t?d(t,"Desc"):t))?o:l)===c?o.call(s,{name:"Desc",hash:{},data:a,loc:{start:{line:22,column:23},end:{line:22,column:33}}}):o)?r:"")+"</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</div>       \r\n"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'        <span class="purchase_button"></span>\r\n'},3:function(e,t,n,i,a){return'        <span class="install_button"></span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="product_info">\r\n    <div class="header">\r\n        <h4>'+c("function"==typeof(o=null!=(o=u(n,"Name")||(null!=t?u(t,"Name"):t))?o:l)?o.call(s,{name:"Name",hash:{},data:a,loc:{start:{line:3,column:12},end:{line:3,column:20}}}):o)+'</h4>\r\n        <a class="close"></a>\r\n    </div>\r\n    <div class="thumb dlc">\r\n        <img src="'+c("function"==typeof(o=null!=(o=u(n,"ImagePath")||(null!=t?u(t,"ImagePath"):t))?o:l)?o.call(s,{name:"ImagePath",hash:{},data:a,loc:{start:{line:7,column:18},end:{line:7,column:31}}}):o)+'" alt=""/>\r\n    </div>\r\n    <div class="storeItemTextSummary clearfix">\r\n        <h5>'+c("function"==typeof(o=null!=(o=u(n,"PriceString")||(null!=t?u(t,"PriceString"):t))?o:l)?o.call(s,{name:"PriceString",hash:{},data:a,loc:{start:{line:10,column:12},end:{line:10,column:27}}}):o)+"</h5>\r\n"+(null!=(r=u(n,"if").call(s,null!=t?u(t,"ShowPurchaseButton"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:11,column:8},end:{line:13,column:15}}}))?r:"")+(null!=(r=u(n,"if").call(s,null!=t?u(t,"ShowInstallButton"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:8},end:{line:16,column:15}}}))?r:"")+'    </div>\r\n    <div class="box-wrap antiscroll-wrap">\r\n        <div class="box">\r\n            <div class="antiscroll-inner">\r\n                <div class="storeItemTextDescription">\r\n                    <ul class="product-list clearfix"></ul>\r\n                    <p>'+(null!=(r="function"==typeof(o=null!=(o=u(n,"Desc")||(null!=t?u(t,"Desc"):t))?o:l)?o.call(s,{name:"Desc",hash:{},data:a,loc:{start:{line:23,column:23},end:{line:23,column:33}}}):o)?r:"")+"</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</div>       \r\n"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <input type="radio" name="durable" value="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"Id")||(null!=t?o(t,"Id"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"Id",hash:{},data:a,loc:{start:{line:3,column:46},end:{line:3,column:52}}}):r)+'" checked="checked" />\r\n'},3:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <input type="radio" name="durable" value="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"Id")||(null!=t?o(t,"Id"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"Id",hash:{},data:a,loc:{start:{line:5,column:46},end:{line:5,column:52}}}):r)+'" />\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<label>\r\n"+(null!=(r=l(n,"if").call(s,null!=t?l(t,"Selected"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:2,column:4},end:{line:6,column:11}}}))?r:"")+"    "+e.escapeExpression("function"==typeof(o=null!=(o=l(n,"Name")||(null!=t?l(t,"Name"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"Name",hash:{},data:a,loc:{start:{line:7,column:4},end:{line:7,column:12}}}):o)+"\r\n</label>"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="btn btnPurple btnLarge purchaseBtn" data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"Id")||(null!=t?o(t,"Id"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"Id",hash:{},data:a,loc:{start:{line:1,column:64},end:{line:1,column:70}}}):r)+'" rel="localize[CheckOutButton]">Check out</a>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" class="btn btnPurple btnLarge installBtn" rel="localize[InstallButton]" data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=o(n,"Id")||(null!=t?o(t,"Id"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"Id",hash:{},data:a,loc:{start:{line:1,column:93},end:{line:1,column:99}}}):r)+'">Install</a>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){return'<div class="maintenance clearfix">\r\n    <h1 class="serverErrorTitle"></h1>\r\n    <div class="errorContainer box-wrap">\r\n\t    <div class="box">\r\n\t        <div class="text">\r\n\t            <h3 class="serverErrorSubTitle"></h3>\r\n\t            <p class="errorDescription"></p>\r\n\t            <p class="errorSubMessage"></p>\r\n\t            <p class="errorCodeDescription"></p>\r\n\t        </div>\r\n\t    </div>\r\n    </div>\r\n</div>'},useData:!0})},function(e,t,n){"use strict";(function(i){var a,r=n(3)(n(5));void 0===(a=function(e){var t,i={},a=n(0),o=n(4),s=n(1),l=n(8),c=n(7),u=n(11),d=n(209),f=n(14);function p(e){e&&e.preventDefault(),a("#cloudSave .choice>div").removeClass("active").addClass("inactive"),a("#cloudSave .buttonActions .confirm").removeClass("disabled"),a(e.currentTarget).removeClass("inactive").addClass("active"),i.setCloudSaveDecision(!0)}function h(e){e&&e.preventDefault(),i.showCloudDisabledConfirmModal()}function g(){a("#launcherStyle").css("top","-450px"),a("#cloudSave").css("top","63px").css("display","block")}function m(e,t){var n=a("#cloudSave .chooseMulti");a("#cloudSave div.chooseSave").addClass("hide"),a("#cloudSave .choice").addClass("hide"),n.find("table.optionDetails").find("tr").remove(),n.removeClass("hide"),t&&function(e,t){t.find(".optionSummary").addClass("hide"),t.find(".optionSummary.localBackup").removeClass("hide"),o.some(e,(function(e){return e.localbackup1}))||t.find("#radioAllLocalBackup1").attr("disabled",!0);o.some(e,(function(e){return e.localbackup2}))||t.find("#radioAllLocalBackup2").attr("disabled",!0)}(e,n);var r=function(e,t){return t?o.reduce(e,(function(e,n,a){var r=i.getDescData(n,!1,t,n.current),o=i.getDescData(n,!1,t,n.localbackup1),s=i.getDescData(n,!1,t,n.localbackup2),u=i.getRowTitle([r,o,s],n.fileName),d='<td><label><span><h3 class="delete"><i class="scicon-nav_notifications"></i> '+c.getTextCached("LocalBackupNoBackup","HomeSignin","no backup")+"</h3></label></td>";return e+'<tr class="saveSlot"><td colspan="3"><p>{0}</p><span style="right:66%" class="local">{1}</span><span style="right:33%" class="cloud">{2}</span><span style="right:0" class="cloud">{3}</span></td></tr>'.format(u,c.getTextCached("LocalBackupCurrent","HomeSignin","current"),c.getTextCached("LocalBackup1","HomeSignin","backup 1"),c.getTextCached("LocalBackup2","HomeSignin","backup 2"))+"<tr>"+(n.current?'<td><input type="radio" name="chk{0}" value="{1}" id="localcheck{0}" /><label class="current" for="localcheck{0}"><span class="localBackup">{2}</span><i class="scicon-localsave"></i></label></td>'.format(a,l.resolutionEnum.useCurrent,E(n,!1,t,n.current)):d)+(n.localbackup1?'<td><input type="radio" name="chk{0}" value="{1}" id="backup1check{0}" /><label class="localBackup1" for="backup1check{0}"><span class="localBackup">{2}</span><i class="scicon-localsave-restore"></i></label></td>'.format(a,l.resolutionEnum.useLocalBackup1,E(n,!1,t,n.localbackup1)):d)+(n.localbackup2?'<td><input type="radio" name="chk{0}" value="{1}" id="backup2check{0}" /><label class="localBackup2" for="backup2check{0}"><span class="localBackup">{2}</span><i class="scicon-localsave-restore"></i></label></td>'.format(a,l.resolutionEnum.useLocalBackup2,E(n,!1,t,n.localbackup2)):d)+"</tr>"}),""):o.reduce(e,(function(e,n,a){var r=i.getDescData(n,!1,t,n.current),o=i.getDescData(n,!0,t,n.current),s=i.getRowTitle([r,o],n.fileName);return e+'<tr class="saveSlot"><td colspan="2"><p>{0}</p><span class="local">{6}</span><span class="cloud">{7}</span></td></tr><tr><td><input type="radio" name="chk{1}" value="{2}" id="localcheck{1}" /><label for="localcheck{1}"><span>{3}</span><i class="scicon-localsave"></i></label></td><td><input type="radio" name="chk{1}" value="{4}" id="cloudcheck{1}" /><label for="cloudcheck{1}"><span>{5}</span><i class="scicon-cloud"></i></label></td></tr>'.format(s,a,l.resolutionEnum.useLocal,E(n,!1),l.resolutionEnum.useCloud,E(n,!0),c.getTextCached("Local","HomeSignin","local"),c.getTextCached("Cloud","HomeSignin","cloud"))}),"")}(e,t);n.find("table.optionDetails").append(r),a("#cloudSave.panel .optionDetailsWrapper").antiscroll(),a("#cloudSave").off("click","input[name=radioAll]").on("click","input[name=radioAll]",(function(t){var n=a(t.currentTarget),i=n.hasClass("active");if(a("#cloudSave input[name=radioAll]").removeClass("active").prop("checked",!1),i)return a("#cloudSave input[type=reset]").click(),void b(e,l.resolutionEnum.ignore);n.addClass("active").prop("checked",!0),b(e,t.currentTarget.value),a("#cloudSave input[name^=chk]").val([t.currentTarget.value])})),a("#cloudSave").off("click","input[name^=chk]").on("click","input[name^=chk]",(function(t){var n=t.currentTarget.name.substr("chk".length);v(t,e[n].fileName,t.currentTarget.value)})),S(e,t),u.trackPage("/CloudSave/Conflict/Multi/"+e.length)}function v(e,t,n){var i=a(e.currentTarget);i.hasClass("disabled")||(a("input[name=radioAll]").prop("checked",!1).removeClass("active"),i.hasClass("active")?C(t,l.resolutionEnum.ignore):C(t,n))}function b(e,t){t===l.resolutionEnum.ignore&&a("input[name=radioAll]").prop("checked",!1).removeClass("active"),o.forEach(e,(function(e){C(e.fileName,t)}))}function C(e,t){var n=o.findIndex(i.getSavedResolutions(),(function(t){return t.filename===e})),r=a("input[name=chk"+n+"]"),s=r.filter("[value="+t+"]");if(r.length)r.addClass("inactive").removeClass("active").prop("checked",!1),t==l.resolutionEnum.useLocal||t==l.resolutionEnum.useCloud||t==l.resolutionEnum.useCurrent||t==l.resolutionEnum.useLocalBackup1||t==l.resolutionEnum.useLocalBackup2?(s.addClass("active").removeClass("inactive").prop("checked",!0),s.parents("tr").removeClass("useLocal useCloud useCurrent useLocalBackup1 useLocalBackup2").addClass(t)):(s.prop("checked",!1),r.parents("tr").removeClass("useLocal useCloud useCurrent useLocalBackup1 useLocalBackup2"));else{var c=a("#cloudSave div.chooseSave>div");s=c.filter("."+t),c.removeClass("active").addClass("inactive"),t!=l.resolutionEnum.useLocal&&t!=l.resolutionEnum.useCloud&&t!=l.resolutionEnum.useCurrent&&t!=l.resolutionEnum.useLocalBackup1&&t!=l.resolutionEnum.useLocalBackup2||s.addClass("active").removeClass("inactive")}n>-1?i.updateSavedResolution(i.formatResolution(e,t),n):i.addSavedResolution(i.formatResolution(e,t))}function S(e,t){a("#cloudSave").off("click","a.confirm").on("click","a.confirm",(function(e){e&&e.preventDefault(),s.isOnline()?i.showConfirmModal(!1,t):s.pubsub.publish("cloudSave.confirmSelection")})).off("click","a.ignore").on("click","a.ignore",(function(n){n&&n.preventDefault(),t||(Array.isArray(e)?b(e,l.resolutionEnum.ignore):C(e.fileName,l.resolutionEnum.ignore),i.showConfirmModal(!0,t))}))}function y(e){e.wrap('<div class="box-wrap antiscroll-wrap"></div>').wrap('<div class="box"></div>').wrap('<div class="antiscroll-inner"></div>')}function E(e,t,n,a){var r=i.getDescData(e,t,n,a);if(r.isDeleted){var s=t?"CloudSaveDeletedCloud":"CloudSaveDeletedLocal",l='<h3 class="delete"><i class="scicon-nav_notifications"></i> {0}</h3>'.format(c.getTextCached("CloudSaveDeleted","HomeSignin","Deleted")),u="This item has been deleted from {0}. Selecting it will also delete the save file from {1}".format(t?"the Cloud":"your local machine",t?"your local machine":"the Cloud");return l+c.getTextCached(s,"HomeSignin",u)}var d=r.date;return void 0===r.metadata||r.metadata.length<=0?"{0}<br/>{1}".format(d,c.getTextCached("CloudSaveNoMetaData","HomeSignin","Unable to load file metadata")):"{0}<br/>{1}".format(d,o.reduce(r.metadata,(function(e,t){return"{0}<br/>{1}".format(e,t)})))}function w(e){if(void 0===e||void 0===e.metadata)return{};var t=o.sortBy(o.pairs(JSON.parse(decodeURI(e.metadata))),I);return{lastModified:e.lastModified,metadataRaw:t.map(_),metadata:t.map(k)}}function k(e){var t=_(e);return Array.isArray(e)&&e.length>1?function(e){if(!e||!e.key||!e.isVisible)return"";var t=void 0!==e.key&&e.key.toString?e.key.toString():e.key,n=void 0!==e.value&&e.value.toString?e.value.toString():e.value;return s.htmlEncode(t)+": "+s.htmlEncode(n)}(t):s.htmlEncode(t)}function _(e){if(!(Array.isArray(e)&&e.length>1))return e;switch(s.getTitleName()){case"gta5":return function(e){var t=e[0],n=e[1],i=t,a=n,r=!0;switch("string"==typeof t&&t.toLowerCase()){case"completionpct":t=c.getTextCached("CloudSaveMeta"+t,"General","Completion","gta5"),n=Number(n).toFixed(2)+"%";break;case"playercharacterindex":switch(t=c.getTextCached("CloudSaveMeta"+t,"General","Character","gta5"),n){case 0:n="Michael";break;case 1:n="Franklin";break;case 2:n="Trevor"}break;case"autosave":n=1===n||!0===n?c.getTextCached("Yes","Social","Yes"):c.getTextCached("No","Social","No"),r=!1;break;case"slot":r=!1;break;case"posixtime":return"";default:t=c.getTextCached("CloudSaveMeta"+t,"General",t,"gta5")}t.length||(t=e[0]);return T(t,n,r,i,a)}(e);default:return T(e[0],e[1],!0)}}function T(e,t,n,i,a){return{key:e,value:t,isVisible:n,rawKey:void 0!==i?i:e,rawValue:void 0!==a?a:t}}function I(e,t,n){switch(s.getTitleName()){case"gta5":return function(e,t,n){if(!o.isArray(e))return t;return e[0]}(e,t);default:return t}}function A(e){var t=void 0,n=void 0;return void 0!==e&&void 0!==e.metadataRaw&&((n=o.find(e.metadataRaw,(function(e){return"Autosave"===e.rawKey&&1===e.rawValue})))||(t=o.find(e.metadataRaw,(function(e){return"Slot"===e.rawKey})))&&(t=t.value)),{autosave:n,slot:t}}n(48),i.requestCloudConflictResolution=function(e){void 0!==e&&i.loadLocalization().then((function(){g(),a("#cloudSave h1 .online").text(c.getTextCached("CloudSaveConflict","HomeSignin","Cloud Sync Conflict"));var t,n,r,o,s=e.conflicts.map(i.sanitizeConflicts);(b(s,l.resolutionEnum.ignore),0!==s.length)&&(1===s.length?(r=s[0],(o=a("#cloudSave .chooseSave.cloudSave")).removeClass("hide"),a("#cloudSave .chooseMulti").addClass("hide"),a("#cloudSave .choice").addClass("hide"),n=r,(t=o).find(".useLocal strong").html(E(n,!1)),t.find(".useCloud strong").html(E(n,!0)),i.isDeleted(n.cloud)?a("#cloudSave .useCloud > h3, #cloudSave .useCloud > p:first").addClass("hide"):y(a("#cloudSave .useCloud > div")),i.isDeleted(n.local)?a("#cloudSave .useLocal > h3, #cloudSave .useLocal > p:first").addClass("hide"):y(a("#cloudSave .useLocal > div")),o.off("click","div.useCloud").on("click","div.useCloud",(function(e){v(e,r.fileName,l.resolutionEnum.useCloud)})).off("click","div.useLocal").on("click","div.useLocal",(function(e){v(e,r.fileName,l.resolutionEnum.useLocal)})),a("#cloudSave .binary div.antiscroll-wrap").antiscroll(),S(r,!1),u.trackPage("/CloudSave/Conflict/Single")):m(s,!1))}))},i.checkCloudSaveEnabled=function(){l.getCloudSavesEnabledSetting().then((function(e){s.isOffline()?function(e){if(d.isCloudSavesUnknown(e)||"enabled"!==e.Enabled)return s.pubsub.publish("cloudSave.destroy"),void l.sendCloudState(!1);g(),a("#cloudSave").off("click","a.confirm").on("click","a.confirm",(function(e){e&&e.preventDefault(),s.pubsub.publish("cloudSave.destroy"),l.sendCloudState(!0)}))}(e):d.isCloudSavesUnknown(e)?function(){var e=a("#cloudSave");e.find(".buttonActions a.ignore").css("display","none"),e.find(".buttonActions .right p").addClass("hide"),e.find(".preamble").addClass("hide"),e.find(".localBackupPreamble").addClass("hide"),e.find(".choicePreamble").removeClass("hide"),e.find(".buttonActions .confirm").addClass("disabled");var t=a("#cloudSave .choice");t.removeClass("hide"),a("#cloudSave .chooseMulti").addClass("hide"),a("#cloudSave div.chooseSave").addClass("hide"),t.off("click","div.enable").on("click","div.enable",p).off("click","div.disable").on("click","div.disable",h),a("#cloudSave").off("click","a.confirm").on("click","a.confirm",(function(e){e&&e.preventDefault(),i.processCloudSaveDecision()})),g(),u.trackPage("/CloudSave/Decide")}():l.sendCloudState("enabled"===e.Enabled)}))},i.requestLocalBackupResolution=function(e){void 0!==e&&i.loadLocalization().then((function(){var t;g(),(t=a("#cloudSave")).find("h1.online").text(c.getTextCached("LocalBackupTitle","HomeSignin","Restore Local Backup")),t.find(".localBackupPreamble").removeClass("hide"),t.find("#cloudSaveWarning").addClass("hide"),t.find(".buttonActions .ignore").hide();var n,r,o,s,d,f=e.conflicts.map((function(e){return i.sanitizeLocalBackupFiles(e)}));(b(f,l.resolutionEnum.ignore),0!==f.length)&&(1===f.length?(s=f[0],(d=a("#cloudSave .chooseSave.localBackup")).removeClass("hide"),a("#cloudSave .chooseMulti").addClass("hide"),a("#cloudSave .choice").addClass("hide"),d.find("div").removeClass("active").addClass("inactive"),n=d,r=s,o='<label><span><h3 class="delete"><i class="scicon-nav_notifications"></i> '+c.getTextCached("LocalBackupNoBackup","HomeSignin","no backup")+"</h3></label>",r.current&&n.find(".useCurrent strong").html(E(r,!1,!0,r.current)),r.localbackup1?n.find(".useLocalBackup1 strong").html(E(r,!1,!0,r.localbackup1)):n.find(".useLocalBackup1").html(o).addClass("disabled"),r.localbackup2?n.find(".useLocalBackup2 strong").html(E(r,!1,!0,r.localbackup2)):n.find(".useLocalBackup2").html(o).addClass("disabled"),y(a("#cloudSave .useCurrent > div")),y(a("#cloudSave .useLocalBackup1 > div")),y(a("#cloudSave .useLocalBackup2 > div")),d.off("click","div.useCurrent").on("click","div.useCurrent",(function(e){v(e,s.fileName,l.resolutionEnum.useCurrent)})).off("click","div.useLocalBackup1").on("click","div.useLocalBackup1",(function(e){v(e,s.fileName,l.resolutionEnum.useLocalBackup1)})).off("click","div.useLocalBackup2").on("click","div.useLocalBackup2",(function(e){v(e,s.fileName,l.resolutionEnum.useLocalBackup2)})),a("#cloudSave .triple div.antiscroll-wrap").antiscroll(),S(s,!0),u.trackPage("/LocalBackup/Single")):m(f,!0))}))},i.loadLocalization=function(){switch(s.getTitleName()){case"gta5":return c.getTextAsync("CloudSaveMetaSlot","General","Completion","gta5");default:return}},i.setCloudSaveDecision=function(e){t=e},i.getCloudSaveDecision=function(){return t},i.sanitizeConflicts=function(e){var t={fileName:s.htmlEncode(e.fileName),local:e.local,cloud:e.cloud};return i.isDeleted(e.local)||(t.local=w(e.local)),i.isDeleted(e.cloud)||(t.cloud=w(e.cloud)),t},i.processCloudSaveDecision=function(){var e=i.getCloudSaveDecision();void 0!==e&&(s.pubsub.publish("cloudSave.destroy"),l.updateCloudSavesEnabledSetting(e),l.sendCloudState(e))},i.showCloudDisabledConfirmModal=function(){var e={title:c.getTextCached("CloudSaveDisabledModalTitle","HomeSignin","Cloud Saves Disabled"),statusMessage:c.getTextCached("CloudSaveDisabledModalMsg","HomeSignin","Are you sure you want to disable cloud saves on this machine?"),subMessage:c.getTextCached("CloudSaveDisabledModalSubMsg","HomeSignin","Cloud saves can be enabled later from the in-game Social Club settings menu."),pubsubKey:"cloudSave.confirmDisable"};s.pubsub.publish("modal.showConfirmModal",e)},i.showConfirmModal=function(e,t){var n={title:c.getTextCached("CloudSaveModalTitle","HomeSignin","Cloud Save Conflict"),statusMessage:"",subMessage:c.getTextCached("CloudSaveModalMsgEnd","HomeSignin","Are you sure you are happy with your selections?"),pubsubKey:"cloudSave.confirmSelection"},a=i.getSavedResolutions(),r=e||o.some(a,(function(e){return e.resolutionEnum===l.resolutionEnum.ignore})),u=!e&&o.some(a,(function(e){return e.resolutionEnum!==l.resolutionEnum.ignore}));if(t)!function(e,t,n){var i={title:c.getTextCached("LocalBackupTitle","HomeSignin","Restore Local Backup"),statusMessage:"",subMessage:c.getTextCached("CloudSaveModalMsgEnd","HomeSignin","Are you sure you are happy with your selections?"),pubsubKey:"localBackup.confirmSelection"};if(t||!n)i.statusMessage=c.getTextCached("LocalBackupAllCurrent","HomeSignin","You have not selected any Backup Saves to restore."),i.subMessage="",i.btn1Text="OK";else{var a=o.filter(e,(function(e){return e.resolutionEnum===l.resolutionEnum.useLocalBackup1})),r=o.filter(e,(function(e){return e.resolutionEnum===l.resolutionEnum.useLocalBackup2}));a.length||r.length?i.statusMessage+=" "+c.getTextCached("LocalBackupModalMsg","HomeSignin","Your Current Saves will be backed up before the selected Backup Files are restored."):i.statusMessage+=" "+c.getTextCached("LocalBackupNoBackupsSelected","HomeSignin","You have not selected any Backup Files to restore.")}s.pubsub.publish("modal.showConfirmModal",i)}(a,e,u);else{if(u){var d,f=o.filter(a,(function(e){return e.resolutionEnum===l.resolutionEnum.useLocal})),p=o.filter(a,(function(e){return e.resolutionEnum===l.resolutionEnum.useCloud})),h=o.every(a,(function(e){return e.resolutionEnum===l.resolutionEnum.useLocal})),g=o.every(a,(function(e){return e.resolutionEnum===l.resolutionEnum.useCloud}));n.statusMessage=c.getTextCached("CloudSaveModalMsg","HomeSignin","Your selections are final, overwritten save files are not able to be recovered."),f.length&&(h?n.statusMessage+=" "+c.getTextCached("CloudSaveModalAllLocal","HomeSignin","All conflicts will be replaced with local versions."):(d=o.map(f,(function(e){return e.filename})),n.statusMessage+=" "+c.getTextCached("CloudSaveModalSomeLocal","HomeSignin","One or more local files are being kept ({0}).").format(d.join(", ")))),p.length&&(g?n.statusMessage+=" "+c.getTextCached("CloudSaveModalAllCloud","HomeSignin","All conflicts will be replaced with cloud versions."):(d=o.map(p,(function(e){return e.filename})),n.statusMessage+=" "+c.getTextCached("CloudSaveModalSomeCloud","HomeSignin","One or more cloud files are being kept ({0}).").format(d.join(", "))))}r&&(n.statusMessage+=" "+c.getTextCached("CloudSaveModalSomeIgnore","HomeSignin","Ignored conflicts will still be conflicted next time.")),s.pubsub.publish("modal.showConfirmModal",n)}},i.formatResolution=function(e,t){if(t!==l.resolutionEnum[t])throw new Error("invalid resolution enum: "+t);return{filename:e,resolutionEnum:t}},i.isDeleted=function(e){return"boolean"==typeof e},i.getDescData=function(e,t,n,a){if(n||(a=t?e.cloud:e.local),i.isDeleted(a))return{isDeleted:!0};if(void 0===a)return{};var r=f(a.lastModified),s=r.fromNow();if(n)return{date:s=f(a.lastModified).format("lll"),metadata:o.without(a.metadata,""),metadataRaw:a.metadataRaw};var l=t?e.local:e.cloud,c=f(l.lastModified);return s===c.fromNow()&&(s=f(a.lastModified).format("lll")),{date:s,isNewer:r.isAfter(c),metadata:o.without(a.metadata,""),metadataRaw:a.metadataRaw}},i.getRowTitle=function(e,t){switch(s.getTitleName()){case"gta5":return function(e,t){if(!e||"object"!==(0,r.default)(e)||0===e.length||o.all(e,(function(e){return!e.metadataRaw})))return t;var n=o.map(e,A),i=o.find(n,(function(e){return void 0!==e.slot}));void 0===i&&(i=n[0]);void 0===i&&(i={});var a=void 0!==i.slot,s="";a&&(s=i.slot+1);return i.autosave?c.getTextCached("CloudSaveAutoSaveSlot","HomeSignin","Auto Save Slot"):a?c.getTextCached("CloudSaveSlot","HomeSignin","Save Slot {0}").format(s):t}(e,t);default:return t}},i.sanitizeLocalBackupFiles=function(e){var t={fileName:s.htmlEncode(e.fileName)};return e.current&&(t.current=w(e.current)),e.localbackup1&&(t.localbackup1=w(e.localbackup1)),e.localbackup2&&(t.localbackup2=w(e.localbackup2)),t};var R=[];return i.getSavedResolutions=function(){return R},i.addSavedResolution=function(e){R.push(e)},i.updateSavedResolution=function(e,t){R[t]=e},s.pubsub.subscribe("cloudSave.confirmSelection",(function(){l.resolveCloudConflict(i.getSavedResolutions()),s.pubsub.publish("cloudSave.destroy")})),s.pubsub.subscribe("cloudSave.destroy",(function(){var e=a("#cloudSave");e.off().find(".active").removeClass("active"),e.find("h1.online").text(c.getTextCached("CloudSaves","HomeSignin","Cloud Saves")),e.find("input[type=reset]").click(),e.find(".buttonActions a.ignore").css("display","inline-block"),e.find(".buttonActions .right p").removeClass("hide"),e.find(".choicePreamble").addClass("hide"),e.find(".preamble").removeClass("hide"),e.find(".buttonActions .confirm").removeClass("disabled"),e.find(".useCloud > h3, #cloudSave .useCloud > p:first").removeClass("hide"),e.find(".useLocal > h3, #cloudSave .useLocal > p:first").removeClass("hide"),e.find("#cloudSaveWarning").removeClass("hide"),e.find(".chooseMulti .optionSummary").removeClass("hide"),e.find(".localBackupPreamble").addClass("hide"),e.find(".chooseSave.localBackup").addClass("hide"),e.find(".chooseMulti .optionSummary.localBackup").addClass("hide"),e.find(".buttonActions .ignore").show(),R=[]})),s.pubsub.subscribe("localBackup.confirmSelection",(function(){l.resolveLocalBackup(i.getSavedResolutions()),s.pubsub.publish("cloudSave.destroy")})),s.pubsub.subscribe("cloudSave.confirmDisable",(function(){a("#cloudSave .choice>div").removeClass("active").addClass("inactive"),a("#cloudSave .buttonActions .confirm").removeClass("disabled"),a("#cloudSave .choice div.disable").removeClass("inactive").addClass("active"),i.setCloudSaveDecision(!1)})),i}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(){var e={isCloudSavesUnknown:function(e){return null==e||void 0===e||void 0===e.Enabled||"unknown"===e.Enabled}};return e}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a,r=n(3)(n(5));void 0===(a=function(e){var t=n(0),i=n(4),a=n(6),o=n(1),s=n(22),l=n(28),c=n(10),u=n(23),d=n(56),f=n(24),p=n(211),h=n(83),g=n(77),m=n(11),v=n(13),b=n(18),C=n(7),S=n(8);n(19),void 0===window.globals&&(window.globals={});var y=window.globals;function E(e){return null!=e&&null!=e.Data&&null!=e.Data.Referrer}function w(e){var n=!M();if(f.ActivationCodeValidation(M(),n)){var i=t(e.currentTarget);if(!i.hasClass("disabled")){i.addClass("disabled"),t("#spanActivate").show();var a=t("#activationWrapper").data("voucherContentsRequested");null!=a&&a.length&&a==t("#activationCode").val()?p.ConsumeVoucher():p.ShowVoucherContents()}}}function k(e){e.find("#buttonQuitGame").show(),e.find("#buttonQuitGame").unbind("click"),e.find("#buttonQuitGame").click((function(){p.ActivateCode(4),c.clearActivePanel((function(){c.quitGame(),c.requestUiState(!1)}))})),e.find("#buttonQuitGame").unbind("keydown"),e.find("#buttonQuitGame").keydown((function(n){var i=n.keyCode||n.which;9==i&&(n.preventDefault(),e.find("#activationCode").focus()),13==i&&t(this).click()}))}function _(){if(c.isActivation()){var e=t("#activation");p.resetActivationForm(),e.find("#buttonActivate, #buttonDeactivate, #buttonQuitGame, #buttonCheck, #buttonCancel").hide(),e.find(".requestCode, #spanActivate, #spanDeactivate").hide(),c.setUpLoadingPanel("#activation");var n=C.getTextCached("i43","Activation");e.find(".message").text(n),e.find("#linkSteamAccounts").hide(),c.initHeaderMenu(!0),e.find("#buttonActivateOk").off("click").on("click",(function(){c.clearActivePanel((function(){c.requestUiState(!1)}))})),e.find("#buttonActivateOk").show()}}function T(e){if(c.initStyling(!0),c.showHeaderMenu(),c.initHeaderMenu(!1),o.isOffline()||o.isLoadedInOfflineMode())return c.retryConnection(C.getTextCached("OnlineRequired","Activation")),void setTimeout((function(){S.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible": true }',"RGSC_UI_STATE_RESPONSE_DEMO")}),300);var n=t("#activation");n.addClass("pending"),n.hasClass("localized")||n.find("[rel*=localize]").localize("Activation",{language:o.getTitleLang(),pathPrefix:y.baseAssetUrl+"xml/shared"}),p.resetActivationForm(),n.find("#lblActivation, #activationDesc").html(""),n.find("#buttonDeactivate, #buttonQuitGame, #buttonCheck, .requestCode").hide(),n.find(".title").text(C.getTextCached("SteamSetup","Activation")),n.find("#activationCode").prop("disabled",!0).hide(),n.find("label[for=activationCode]").hide(),n.find("#buttonActivate").hide(),n.find("#buttonActivateOk").show(),f.clearErrorClasses(),t("div.errorText:not(.emailerror,.nickerror), div.errorCode").remove(),function(e){e.find("#activationContent").hide(),e.addClass("steam"),e.find("#linkSteam .message").html(C.getTextCached("i42new","Activation").replace("[content name]","<span class='purple'>"+D(y.titleDisplayName)+"</span>").replace(new RegExp(/\n/g),"<br />"));var t=l.getLoginAccount(),n=e.find("#linkSteam .accountPanel.SC");n.find(".username").text(t.Nickname),n.find(".email").text(t.Email);var i=b.getAvatarUrl(t.AvatarUrl,t.Nickname);n.find(".avatar img").attr("src",i),S.CallGameMethodAsync("RGSC_GET_STEAM_PERSONA",null,"RGSC_GET_STEAM_PERSONA_DEMO").then((function(e){return null!==e&&"object"===(0,r.default)(e)&&o.stringHasContent(e.Name)?e.Name:C.getTextCached("CurrentSteamAccount","Activation")})).catch((function(){return C.getTextCached("CurrentSteamAccount","Activation")})).then((function(t){e.find("#linkSteam .accountPanel.STEAM").find(".username").text(t),u.getUserNetworks().then(I).catch(A)})),e.find("#linkSteam").show(),e.find(".inner").addClass("noBackground")}(n),n.find("#buttonActivateOk").unbind("click").click((function(){t(this).hasClass("disabled")||(t(this).addClass("disabled"),n.find("#buttonCancel").addClass("disabled"),t("#spanActivate").show(),g.BindSteamAccount(o.getSteamAppId(),o.getSteamAuthTicket(),e).catch((function(e){o.pubsub.publish("signin.handleSigninError",e)})))})),n.find("#buttonCancel").show(),n.find("#buttonCancel").unbind("click").click((function(){t(this).hasClass("disabled")||c.clearActivePanel((function(){t("a.disabled:first").removeClass("disabled"),t("a.buttonSignIn.disabled").removeClass("disabled"),a.stopSpinner(t("div.buttonSignInWrapper span")).hide(),o.pubsub.publish("signin.signOut")}))})),n.hasClass("active")||c.clearActivePanel((function(){c.setUpLoadingPanel("#activation")})),c.pendingAccountCompletion()&&(s.showDOBPrompt(),S.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible": true }',"RGSC_UI_STATE_RESPONSE_DEMO"))}function I(e){var n=e.data,a=t("#linkSteam"),r=a.find(".linkedAccounts"),o=a.find(".currentLink");if(r.empty(),n&&n.OnlineServiceAccounts&&0!==n.OnlineServiceAccounts.length){var s="";i.each(n.OnlineServiceAccounts,(function(e){var t=e.OnlineService,n=i.find([{name:"np",class:"account-psn"},{name:"xbl",class:"account-xbl"},{name:"legacyds",class:"account-ds"},{name:"legacygfwl",class:"account-windows"}],(function(e){return e.name===t}));if(void 0!==n){o.find("span.username").text(l.getLoginAccount().Nickname),o.find("span.alreadyLinked").text(C.getTextCached("AlreadyLinked","Activation"));var a=n.class;void 0!==a&&""!==a&&(s+='<li class="'+a+'">'+e.UserName+"</li>")}})),o.show(),r.html(s)}else o.hide()}function A(e){o.WriteDebugLog("steamSetupLinkedAccountsFailure","Failed to get linked accounts",o.extractErrorFromResponse(e),o.logType.error,o.logController[o.getTitleName()])}function R(e){o.WriteDllLog("RGSC_JS_ACTIVATION_RESULT","json",e),t("#activationWrapper span").hide();var n=D(y.titleDisplayName);if((e=t.parseJSON(e||"null")).Result&&1==e.Result){null!=e.ContentName&&(n=D(e.ContentName));var i="";if(null!=e.Message&&0!==e.Message&&(i=isNaN(e.Message)?C.getTextCached(e.Message,"Activation"):C.getTextCached("i"+e.Message,"Activation")),i&&0!==i.length||(i=C.getTextCached("i35","Activation")),i=o.safeReplace(i,"[content name]",n),null!=e.Message&&e.Message>35&&e.Message<42)c.showMessagePanel(C.getTextCached("CodeRedemption","Activation"),"&nbsp;",i);else if(null!=e.Message&&e.Message>41&&e.Message<45)c.showMessagePanel(C.getTextCached("Success","Register"),"&nbsp;",i);else{var a;a=null!=e.ContentId&&1==e.ContentId?C.getTextCached("YouHaveDLC","Activation"):C.getTextCached("i21","Activation"),c.showMessagePanel(C.getTextCached("i35","Activation"),"&nbsp;",o.safeReplace(a,"[content name]",n))}t("#buttonCancelMessage").hide(),t("#messagePanel .closeCurrentPanel").unbind("click").show().click((function(){c.clearActivePanel((function(){c.requestUiState(!1)}))}))}else{var r="";if(void 0!==e.Message)if(isNaN(e.Message))r=C.getTextCached(e.Message,"Activation");else{if("22"==e.Message)return c.showMessagePanel(C.getTextCached("NotPassed","Activation"),"",C.getTextCached("i"+e.Data.Message,"Activation")),t("#buttonCancelMessage").hide(),t("#buttonCloseMessage").show(),t("#messagePanel .closeCurrentPanel").unbind("click").show().click((function(){return c.clearActivePanel((function(){c.requestUiState(!1)})),!1})),void t("#activationWrapper a.disabled").removeClass("disabled");r=C.getTextCached("i"+e.Message,"Activation")}if(0==r.length&&(r=C.getError("ErrorActivate")),"confirmPanel"==t("div.panel.active").attr("id"))t("#confirmPanelTextLong").html('<span class="errorText">'+r+"</span>");else{var s=t("#activationCode");s.after('<div class="errorText">'+r+"</div>"),s.is(":visible")&&s.after('<span class="error"></span>')}}t("#activationWrapper a.disabled").removeClass("disabled")}function P(e){o.WriteDllLog("RGSC_JS_LICENSE_EXPIRATION_RESULT","json",e),t("#activationWrapper span").hide(),null!=(e=t.parseJSON(e||"null")).Result&&1==e.Result?(t("#lblActivation").html(e.Message),setTimeout((function(){c.requestUiState(!1)}),2e3)):(t("#activationCode").before('<span class="errorText">'+C.getError("ErrorActivate")+"</span>"),t("#activationCode").before('<span class="error"></span>')),t("#activationWrapper a.disabled").removeClass("disabled")}function x(e){o.WriteDllLog("RGSC_JS_LICENSE_RECOVERY_RESULT","json",e),t("#activationWrapper span").hide(),(e=t.parseJSON(e||"null")).Result&&1==e.Result?(t("#lblActivation").html(e.Message),setTimeout((function(){c.requestUiState(!1)}),2e3)):(t("#activationCode").before('<span class="errorText">'+C.getError("ErrorActivate")+"</span>"),t("#activationCode").before('<span class="error"></span>')),t("#activationWrapper a.disabled").removeClass("disabled")}function L(e){o.WriteDllLog("RGSC_JS_REDEMPTION_RESULT","json",e),d.RGSC_JS_ACTIVATION_RESULT(e)}function N(e,t){var n,a="",r=", ",o="",s="";return t&&(a="<li>",r="</li>",o="<ul>",s="</ul>"),(n="string"==typeof e?a+e+r:i.reduce(e,(function(e,t){if(h.isEntitlementVisible(t)){var n=t.Count;void 0===n&&(n=1);var i=t.FriendlyName;n>1&&(i=n+"x "+i),e+=a+i+r}return e}),"")).length&&(t||(n=n.substr(0,n.length-2)),n=o+n+s),n}function D(e){return e&&e.replace(/ /g,"&nbsp;")}function M(){return t("#activation").hasClass("redemption")}function O(e){var n=t("#activation");n.removeData("offer");var a=e;"string"==typeof e&&(o.WriteDllLog("RGSC_JS_VOUCHER_CONTENT_RESULT","jsonResult",a),a=JSON.parse(e||"null"));var r=h.handleVoucherContentResult(a);if(!r.isSuccess)return function(e){t("#activationWrapper").removeData("voucherContentsRequested");var n=C.localizeError(e);t("#activationCode").data("error",n),p.showActivationError(n)}(r.error),void(M()?m.trackPage("/Store/CheckCodeFail"):m.trackPage("/Activation/CheckCodeFail"));var s=a.EntitlementsGranted.length>0,l=C.getTextCached("YouWillReceive","Activation");s?(null!=a.Offers&&a.Offers.length&&(n.data("offer",r.friendlyName),n.data("offerCodes",h.getOfferCodes(a.Offers))),i.any(a.EntitlementsGranted,h.isEntitlementVisible)||(l=""),n.find("#buttonActivate").show()):(t("#activationWrapper").removeData("voucherContentsRequested"),l="");n.find("#buttonCheck").hide(),p.resetActivationForm(),t("#buttonActivate").focus(),function(e,n,a){var r=e.length?N(a.EntitlementsGranted,!0):"",s=(d=a,N(h.getEntitlementsNotGranted(d),!0)),l=t("#activation"),c=n.split("<br>"),u=c.length;var d;if(u>0&&i.any(c,(function(e){return o.stringHasContent(e)}))){var f=C.getTextCached("ThisCodeUnlocks","Activation");l.find("#activationVoucherContents").append('<span class="unlock" data-ui-name="unlockList">'+f+"<ul></ul></span>");for(var p=0;p<u;p++)l.find("#activationVoucherContents ul").append("<li>"+c[p]+"</li>")}if(l.find("#activationVoucherContents").append('<span class="unlock" data-ui-name="entitlementList">'+e+r+"</span>"),s.length){var g=C.getTextCached("NotGrantedTitle","Activation");r.length||(g=C.getTextCached("NotGrantedTitle2","Activation")),l.find("#activationVoucherContents").append('<span class="notGranted">'+g+s+"</span>")}l.find("#activationVoucherContents").show(),l.find("#activationCodeEntry").hide(),l.find("#buttonCancel").hide();var m=l.find("#buttonBackToCodeEntry");m.unbind("keyup").click((function(e){13==e.which&&t(this).visible()&&t(this).click()})),m.unbind("click").click((function(){U()})),m.show(),t("#activationContent").antiscroll()}(l,r.friendlyName,a);var c=h.getOfferCodes(a.Offers);n.find("#formActivation").data("offerCodes",c),m.setCustomDimensionOrMetric(v.dimensions.offerRedeemed,c),M()?m.trackPage("/Store/CheckCodeSuccess"):m.trackPage("/Activation/CheckCodeSuccess")}function U(){var e=t("#activation"),n=e.find("#activationVoucherContents");n.empty(),n.hide(),e.find("#buttonActivate").hide(),e.find("#buttonBackToCodeEntry").hide(),e.find("#activationCodeEntry").show(),e.find("#buttonCheck").show(),e.find("#buttonCancel").show(),t("#activationWrapper").removeData("voucherContentsRequested"),t("#activationContent").antiscroll()}function G(e){U();var n=e;if("string"==typeof e&&(o.WriteDllLog("RGSC_JS_VOUCHER_CONSUME_RESULT","jsonResult string",e),n=JSON.parse(e||"null")),!h.isVoucherConsumeSuccess(n))return p.ActivateCode(0),void(M()?m.trackPage("/Store/ConsumeCodeFail"):m.trackPage("/Activation/ConsumeCodeFail"));var i=function(e){var n=t("#activation").data("offer");return null!=n&&n.length||(n=N(e.EntitlementsGranted)),null!=n&&n.length||(n="Code"),n}(n);!function(e,n){var i;i=n?function(e){e.preventDefault(),t("#storeButton").click()}:F,c.showMessagePanel(e.title,"&nbsp;",e.message,i)}(p.getResultMessage(n.ErrorStringId,i,M()),M()),t("#buttonCancelMessage").hide(),t("#buttonCloseMessage").unbind("click").hide(),p.resetActivationForm();var a=t("#activation").find("#formActivation").data("offerCodes");m.setCustomDimensionOrMetric(v.dimensions.offerRedeemed,a),M()?m.trackPage("/Store/ConsumeCodeSuccess"):m.trackPage("/Activation/ConsumeCodeSuccess")}function F(e){e&&e.preventDefault(),M()?p.RedeemCode(1):(p.ActivateCode(1),c.launcherNotifyEvent("Activate")),c.clearActivePanel((function(){c.requestUiState(!1)}))}function V(e,t){C.getTextAsync("OnlineRequired","Activation").then((function(){e(t)}))}return a.pubsub.on("steam:showActivationSteamLink",(function(e){o.WriteDebugLog("showActivationSteamLink","signedinJSON",JSON.stringify(e)),V(T,e)})),a.pubsub.on("steam:showActivationSteamSuccess",(function(){V(_)})),a.pubsub.on("gamefunctions:showActivation",(function(e,n,i){o.WriteDebugLog("showActivation","jsonRequest, stateValue, subStateValue",JSON.stringify(e)+","+n+","+i),p.loadLocalization().then((function(){!function(e,n,i){if(!o.isSignedIn())return void o.pubsub.publish("signin.signOut");E(e)||c.initHeaderMenu(!1);if(!e.Online||o.isOffline()||o.isLoadedInOfflineMode())return c.retryConnection(C.getTextCached("OnlineRequired","Activation")),void setTimeout((function(){S.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible": true }',"RGSC_UI_STATE_RESPONSE_DEMO")}),300);var r=t("#activation"),l=t("#activationContent");r.addClass("pending"),U(),r.hasClass("localized")||(r.find("[rel*=localize]").localize("Activation",{language:o.getTitleLang(),pathPrefix:y.baseAssetUrl+"xml/shared"}),r.addClass("localized"));var u=!0;r.find("#lblActivation").html(""),r.find("#activationDesc").html(""),p.resetActivationForm(),r.find("#ContentId").val(null!=e.Data&&null!=e.Data.ContentId?e.Data.ContentId:""),r.find(".requestCode").hide(),r.find("#buttonDeactivate").hide(),f.clearErrorClasses(),t("div.errorText:not(.emailerror,.nickerror), div.errorCode").remove();var g=r.find("#activationCode"),v=g.data("error");void 0!==v&&(o.WriteDebugLog("showActivation","displaying previous error",v),p.showActivationError(v),g.removeData("error"));switch(i){case"REDEMPTIONCODE":case"MAIN":var b=function(){var e="";null!=y.account&&(o.stringHasContent(y.account.Nickname)?e=y.account.Nickname:o.stringHasContent(y.account.Email)&&(e=y.account.Email));return e}();if(g.val(null!=e.Data&&null!=e.Data.CurrentSerialNumber?e.Data.CurrentSerialNumber:""),"MAIN"==i){var _=C.getTextCached("i20","Activation");if(r.find(".title").text(_),r.find("#buttonActivate").text(_),a.isLegacyServiceLayer())r.find("#activationDesc").html(C.getTextCached("ActivationDesc","Activation").replace("[content name]","<span class='purple'>"+D(y.titleDisplayName)+"</span>").replace("[Nickname]","<span class='purple'>"+b+"</span>"));else if(r.find("label[for=activationCode]").html(C.getTextCached("ActivationUser","Activation").replace("[Nickname]","<span class='purple'>"+b+"</span>")),r.find("#activationDesc").html(C.getTextCached("ActivationUserDesc","Activation").replace("[Nickname]","<span>"+b+"</span>")+t("#activationDesc").text()),l.find(".message").html(C.getTextCached("i19","Activation").replace("[content name]","<span class='purple'>"+D(y.titleDisplayName)+"</span>")),a.isActLglEnabled()){var T="",I="";switch(o.getTitleName()){case o.titles.gta5:T=C.getTextCached("Gta5LegalText","General","",o.getTitleName()),I=C.getTextCached("Gta5LegalCheckbox","General","",o.getTitleName());break;case o.titles.rdr2:T=C.getTextCached("Rdr2LegalText","General","",o.getTitleName()),I=C.getTextCached("Rdr2LegalCheckbox","General","",o.getTitleName());break;case o.titles.gta4:T=C.getTextCached("Gta4LegalText","General","",o.getTitleName()),I=C.getTextCached("Gta4LegalCheckbox","General","",o.getTitleName())}r.find("#legalText1").text(T).show();var A=r.find("#legalActivation");A.find("#legalText2").text(I).show(),A.show()}r.removeClass("redemption"),m.trackPage("/Activation/CodeEntry")}else"REDEMPTIONCODE"==i&&(r.find(".title").text(C.getTextCached("CodeRedemption","Activation")),r.find("label[for=activationCode]").text(C.getTextCached("RedemptionCode","Activation")),r.find("#activationDesc").html(C.getTextCached("RedemptionUserDesc","Activation").replace("[Nickname]","<span>"+b+"</span>")+t("#activationDesc").text()),r.find("#buttonActivate").text(C.getTextCached("Redeem","Activation")),l.find(".message").html(C.getTextCached("i41","Activation").replace("[content name]","<span class='purple'>"+D(y.titleDisplayName)+"</span>")),a.isActLglEnabled()&&(r.find(".legal").hide(),r.find("#legalActivation").hide(),C.getTextAsync("RedemptionCodeLegal","Store").then((function(e){r.find("#redemptionCodeLegal").html(e).show()}))),r.addClass("redemption"),m.trackPage("/Store/CodeRedemption"));if(r.find("#activationWrapper a").hide(),null!=e.Data&&null!=e.Data.IsAlreadyActivated&&e.Data.IsAlreadyActivated)g.prop("disabled",!0).hide(),r.find("label[for=activationCode]").hide(),l.find(".message").text(C.getTextCached("YouHaveDLC","Activation"));else{if(function(e){var n=e.find("#activationCode");if(n.val())return void n.prop("disabled",!0).show();n.prop("disabled",!1).show(),n.unbind("keyup").bind("keyup",(function(e){var n=t(this),i=h.formatVoucherCode(n.val(),e.keyCode,o.getCaretPosition(this));n.val(i.text),13===e.keyCode&&t("#buttonCheck").click()})),n.unbind("paste").bind("paste",(function(){var e=t(this);e.val(""),setTimeout((function(){var t=e.val(),n=o.chunkCodeLength(),i=h.maxVoucherCodeLength(o.numChunks(),n);o.areChunkedVoucherCodesEnabled()&&(t=(t=h.chunk(t.replace(/-/g,"").replace(/\s+/g,""),n).join("-")).substr(0,i)),t=t.substr(0,50),e.val(t.toUpperCase())}),100)})),n.unbind("keydown").bind("keydown",(function(e){o.areChunkedVoucherCodesEnabled()&&189==e.keyCode&&e.preventDefault()}))}(r),null!=e.Data&&null!=e.Data.ContentId&&1===e.Data.ContentId)l.find(".message").text(C.getTextCached("ActivateDLC","Activation").replace("[content name]",D(y.titleDisplayName))),r.find("#activationDesc").html(C.getTextCached("InstructionDLC","Activation").replace("[content name]",D(y.titleDisplayName)));else if(r.find("label[for=activationCode]").show(),null!=e.Data&&null!=e.Data.Message){var R=C.getTextCached("i"+e.Data.Message,"Activation");R=o.safeReplace(R,"[content name]","<span class='purple'>"+D(y.titleDisplayName)+"</span>"),R=o.safeReplace(R,"[Nickname]","<span class='purple'>"+b+"</span>"),l.find(".message").html(R)}a.isEntitlementsV2Enabled()?function(e,n){e.find("#buttonActivate").hide(),e.find("#buttonCheck").show(),t("#activationWrapper").removeData("voucherContentsRequested"),"REDEMPTIONCODE"==n?(e.find("#buttonActivate, #buttonCheck").unbind("click").click(w),e.find("#buttonActivate, #buttonCheck").unbind("keydown").keydown((function(e){13==e.which&&t(this).click()}))):"MAIN"==n&&(e.find("#buttonActivate, #buttonActivateOk, #buttonCheck").unbind("click").click((function(e){w(e)})),e.find("#buttonActivate, #buttonActivateOk, #buttonCheck").unbind("keydown").keydown((function(e){13==e.which&&t(this).click()})))}(r,i):function(e,n){e.find("#buttonActivate").show(),"REDEMPTIONCODE"==n?e.find("#buttonActivate").unbind("click").click((function(){f.ActivationCodeValidation(!0)&&(t(this).hasClass("disabled")||(t(this).addClass("disabled"),t("#spanActivate").show(),p.RedeemCode(1)))})):"MAIN"==n&&e.find("#buttonActivate, #buttonActivateYes, #buttonActivateOk").unbind("click").click((function(){f.ActivationCodeValidation()&&(t(this).hasClass("disabled")||(t(this).addClass("disabled"),t("#spanActivate").show(),p.ActivateCode(1)))}))}(r,i)}a.isLegacyServiceLayer()||t("div#headerLogin a").removeClass("disabled dimLayer"),function(e,n,i){var r="#buttonCancel";o.isLaNoire()&&(r="#buttonQuitGame");var s=e.find(r);s.show().unbind("click"),E(i)?s.click((function(){d.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": '+o.isOnline()+', "State": "COMMERCE", "Data" : { "Url" : "" } }')})):"REDEMPTIONCODE"===n?s.click((function(){p.RedeemCode(2),c.clearActivePanel((function(){c.requestUiState(!1)}))})):a.isLegacyServiceLayer()?s.click((function(){t("#legalActivation input:checkbox").prop("checked",!1),p.ActivateCode(3),c.clearActivePanel((function(){c.requestUiState(!1)}))})):s.click((function(){t("#legalActivation input:checkbox").prop("checked",!1),p.ActivateCode(3),c.clearActivePanel((function(){o.pubsub.publish("signin.signOut")}))}))}(r,i,e),"MAIN"!=i||a.isLegacyServiceLayer()||k(r);break;case"LICENSECORRUPTED":u=!1,function(e,t){c.showMessagePanel(C.getTextCached("LicenseCorrupt","Activation"),"",C.getTextCached("i"+t.Data.Message,"Activation")),e.find("#buttonCancelMessage, #buttonActivateYes, #buttonActivateOk, #buttonCheck").hide(),e.find("#messagePanel .closeCurrentPanel").unbind("click").show().click((function(){c.clearActivePanel((function(){S.CallGameMethod("RGSC_CORRUPT_LICENSE_DIALOG_RESPONSE",null,"RGSC_UI_STATE_RESPONSE_DEMO")}))}))}(r,e);break;case"LICENSERECOVERY":a.isLegacyServiceLayer()||k(r),function(e,n){e.find("#buttonActivateYes, #buttonActivateOk, #buttonCheck").hide(),e.find("#requestCode").val(n.Data.RequestCode),e.find(".requestCode").show(),e.find(".title").text(C.getTextCached("i15","Activation")),e.find(".message").text(C.getTextCached("i"+n.Data.Message,"Activation")),e.find("#buttonActivate").show(),e.find("#buttonActivate").unbind("click"),e.find("#buttonActivate").click((function(){f.ActivationCodeValidation()&&(t(this).hasClass("disabled")||(t(this).addClass("disabled"),t("#spanActivate").show(),p.ActivateCodeRecovery(1)))})),e.find("#buttonCancel").unbind("keydown"),e.find("#buttonCancel").keydown((function(e){13==e.which&&t(this).click()})),e.find("#buttonCancel").unbind("click"),e.find("#buttonCancel").click((function(){p.ActivateCodeRecovery(3),c.clearActivePanel((function(){c.requestUiState(!1)}))}))}(r,e);break;case"LICENSEEXPIRATION":!function(e,n){e.find("#buttonActivateYes, #buttonActivateOk, #buttonCheck").hide(),e.find("#activationCode").val(n.Data.CurrentSerialNumber),e.find(".title").text("License Expiration"),e.find(".message").text(C.getTextCached("i"+n.Data.Message,"Activation")),e.find("#buttonActivate").show(),e.find("#buttonActivate").unbind("click"),e.find("#buttonActivate").click((function(){f.ActivationCodeValidation()&&(t(this).hasClass("disabled")||(t(this).addClass("disabled"),t("#spanActivate").show(),p.ActivateCodeExpiration(1)))})),e.find("#buttonCancel").unbind("click"),e.find("#buttonCancel").click((function(){p.ActivateCodeExpiration(3),c.clearActivePanel((function(){c.requestUiState(!1)}))}))}(r,e)}if(c.pendingAccountCompletion())return s.showDOBPrompt(),void S.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible":'+(e.Visible?"true":"false")+" }","RGSC_UI_STATE_RESPONSE_DEMO");u&&(o.areChunkedVoucherCodesEnabled()||g.attr("placeholder",""),c.clearActivePanel((function(){c.setUpLoadingPanel("#activation",(function(){l.antiscroll(),g.focus()}))})));!t("#linkSteam").is(":visible")&&l.is(":visible")||(r.find(".inner").removeClass("noBackground"),l.show(),r.find("#linkSteam").hide())}(e,0,i)}))})),o.pubsub.subscribe("SDK.RGSC_JS_ACTIVATION_RESULT",(function(e,t){V(R,t)})),o.pubsub.subscribe("SDK.RGSC_JS_LICENSE_EXPIRATION_RESULT",(function(e,t){V(P,t)})),o.pubsub.subscribe("SDK.RGSC_JS_LICENSE_RECOVERY_RESULT",(function(e,t){V(x,t)})),o.pubsub.subscribe("SDK.RGSC_JS_REDEMPTION_RESULT",(function(e,t){V(L,t)})),o.pubsub.subscribe("SDK.RGSC_JS_VOUCHER_CONTENT_RESULT",(function(e,t){V(O,t)})),o.pubsub.subscribe("SDK.RGSC_JS_VOUCHER_CONSUME_RESULT",(function(e,t){V(G,t)})),{}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(7),o=n(8),s=n(24),l=n(83),c={};function u(){var e=Number(t("#activation #ContentId").val()||0);return isNaN(e)?0:e}function d(){return t("#activationCode").val()}function f(){t("#activation").removeClass("pending")}return c.loadLocalization=function(){switch(a.getTitleName()){case a.titles.gta5:r.getTextAsync("Gta5LegalText","General","",a.getTitleName());break;case a.titles.rdr2:r.getTextAsync("Rdr2LegalText","General","",a.getTitleName());break;case a.titles.gta4:r.getTextAsync("Gta4LegalText","General","",a.getTitleName())}return r.getTextAsync("OnlineRequired","Activation")},c.ActivateCode=function(e){s.clearErrorClasses(),c.loadLocalization(),l.activateCodeSdk(e,u(),d()),f()},c.ActivateCodeRecovery=function(e){s.clearErrorClasses(),c.activateCodeRecoverySdk(e,u(),t("#requestCode").val(),d()),f()},c.ActivateCodeExpiration=function(e){s.clearErrorClasses(),c.activateCodeExpirationSdk(e,u(),d()),f()},c.RedeemCode=function(e){s.clearErrorClasses(),c.loadLocalization(),l.redeemCodeSdk(e,d()),f()},c.showActivationError=function(e,n){if(a.WriteDebugLog("showActivationError","errorMsg, codeDescription",e+", "+n),"confirmPanel"==t("div.panel.active").attr("id"))t("#confirmPanelTextLong").html('<span class="errorText">'+e+"</span>");else{t("#activation").find("#buttonBackToCodeEntry").click();var i=t("#activationCode");i.siblings(".error, .errorText, .errorCode").remove(),n&&i.after('<div class="errorCode">'+n+"</div>"),i.after('<div class="errorText">'+e+"</div>"),i.is(":visible")&&i.after('<span class="error"></span>')}c.resetActivationForm(),t("#activationCode").focus().select()},c.activateCodeRecoverySdk=function(e,t,n,i){var a='{ "ContentId":'+t+', "RequestCode":"'+n+'", "ResponseCode":"'+i+'", "Action": '+e+"}";o.CallGameMethod("RGSC_LICENSE_RECOVERY_RESPONSE",a,"RGSC_JS_LICENSE_RECOVERY_RESULT")},c.activateCodeExpirationSdk=function(e,t,n){var i='{ "ContentId":'+t+', "ActivationCode":"'+n+'", "Action": '+e+"}";o.CallGameMethod("RGSC_LICENSE_EXPIRATION_RESPONSE",i,"RGSC_JS_LICENSE_EXPIRATION_RESULT")},c.resetActivationForm=function(){var e=t("#activation");e.find("#spanActivate").hide(),e.find(".unlock, .unlockContinue").remove(),t("#activationWrapper").find("a.disabled").removeClass("disabled")},c.ShowVoucherContents=function(){var e=t("#activation");s.clearErrorClasses(),t("#activationWrapper").removeData("voucherContentsRequested"),c.loadLocalization();var n=l.showVoucherContents(d(),globals.titlelang);if(n.success)t("#activationWrapper").data("voucherContentsRequested",n.code);else{var i=r.getErrorWithCode(n.code);c.showActivationError(i.Message,i.CodeDescription)}e.removeClass("pending")},c.ConsumeVoucher=function(){s.clearErrorClasses(),t("#activationWrapper").removeData("voucherContentsRequested"),c.loadLocalization();var e=l.consumeVoucher(d());if(!e.success){var n=r.getErrorWithCode(e.code);c.showActivationError(n.Message,n.CodeDescription)}f()},c.getResultMessage=function(e,t,n){var i,o;return n?(o=r.getTextCached("CodeRedemption","Activation"),i=a.stringHasContent(t)?r.getTextCached("i36","Activation").replace("[content name]",t):r.getTextCached("i35","Activation")):(o=r.getTextCached("i35","Activation"),i=a.stringHasContent(t)?r.getTextCached("i21","Activation").replace("[content name]",t):""),null!=e&&(e>41&&e<45&&(o=r.getTextCached("Success","Register")),i=isNaN(e)?r.getTextCached(e,"Activation").replace("[content name]",t):r.getTextCached("i"+e,"Activation").replace("[content name]",t)),{title:o,message:i}},i.pubsub.on("entitlements.activateCode",c.ActivateCode),c}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(10),o=n(7),s=n(12);return a.pubsub.subscribe("SDK.RGSC_JS_CHECKOUT_URL_REQUEST_RESULT",(function(e,n){a.WriteDllLog("RGSC_JS_CHECKOUT_URL_REQUEST_RESULT","jsonResponse",n);var s=t.parseJSON(n||"null");if(null!=s&&s.Result&&null!=s.Url)i.pubsub.trigger("gamefunctions:checkoutUrl",s);else{if(a.WriteDebugLog("RGSC_JS_CHECKOUT_URL_REQUEST_RESULT","failed",JSON.stringify(n),a.logType.error,a.logController[globals.titleName]),!r.isActivePanel("#storev2Panel"))return;var l=a.errorCode("7000.64"),c=o.getErrorWithCode(l,"RGSC_JS_CHECKOUT_URL_REQUEST_RESULT").Message;r.showGenericFatalError(l,c)}})),a.pubsub.subscribe("SDK.RGSC_JS_INSTALL_PRODUCT_RESULT",(function(e,n){a.WriteDllLog("RGSC_JS_INSTALL_PRODUCT_RESULT","jsonstring",n);var i=t.parseJSON(n||"null");if(void 0===i||!i.Result){var r=a.errorCode("7000.90"),l=o.getErrorWithCode(r);s.ShowErrorModal({errorCode:r,message:l.Message,supportText:l.SupportText,errorCodeDesc:l.CodeDescription})}})),a.pubsub.subscribe("SDK.RGSC_JS_COMMERCE_MANIFEST_REQUEST_RESULT",(function(e,n){var i=window.amd.store.StoreView;if(void 0!==i){var a;try{a=t.parseJSON(n||"null")}catch(e){a=t.parseJSON(n.replace(/\\\\\"/g,"'")||"null")}void 0!==a&&a.Manifest&&(a=t.parseJSON(a.Manifest)),i.model.getCommerceCatalogSuccess(a)}})),{}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a,r=n(3),o=r(n(5)),s=r(n(25));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}void 0===(a=function(e){var t=n(0),i=n(4),a=n(6),r=n(1),s=n(10),l=n(20),u=n(7),d=n(58),f=n(72),p=n(12),h=n(31);n(46);function g(e,n){if(a.WriteDllLog("RGSC_JS_PLAYER_LIST_RESPONSE"),n=t.parseJSON(n||"null")){var r=n.PageIndex;void 0!==n.Total&&0!==n.Total||(n.Total="");var o,l=n.PlayerListType;switch(l){case 4:o=t("#friendInvitesList"),t("#friendInvitesLink span.count").html(n.Total);break;case 8:if(o=t("#blockListPlayercards"),0===r){void 0!==n.Total&&""!==n.Total||(n.Total=0);var p=t("#blockedUsersHeader");0==n.Total?(p.find(".noBlockedUsers").show(),p.find(".blockInfo").show(),p.show()):(t("#blockListLink span.count").html(n.Total),p.find(".noBlockedUsers").hide(),p.find(".blockInfo").show(),p.show())}break;case 99:o=t("#findFriendsList");break;default:o=t("#friendsList"),t("#myFriendsLink span.count").html(n.Total),h.setSocialCountTotals(-1,n.Total)}if(o.data("total",n.Total),void 0!==r&&0!==r||o.empty(),n.Count>0){a.WriteDebugLog("handlePlayerListResponse","type",l);var g=function(e,t,n){var i=0,a=e.length;if(4==t){n>0&&(i=20*n),a=i+20}return e.slice(i,a)}(n.Players.map((function(e){return c(c({},e),{},{ViewerRelationship:e.Relationship||e.ViewerRelationship})})),l,r);!function(e,t,n,a){var r=window.amd.friends;switch(e){case 4:i.extend(a,{activePanel:"friendsPanel"}),null==r.FriendInvitesView?r.FriendInvitesView=new d.ProfileFriendsView(a):n>0?r.FriendInvitesView.collection.push(t):r.FriendInvitesView.collection.reset(t);break;case 8:i.extend(a,{activePanel:"editProfile"}),null==r.BlockedPlayersView?r.BlockedPlayersView=new d.ProfileFriendsView(a):n>0?r.BlockedPlayersView.collection.push(t):r.BlockedPlayersView.collection.reset(t);break;case 99:i.extend(a,{activePanel:"friendsPanel"}),null==r.FriendSearchView?r.FriendSearchView=new d.ProfileFriendsView(a):n>0?r.FriendSearchView.collection.push(t):r.FriendSearchView.collection.reset(t);break;default:i.extend(a,{activePanel:"friendsPanel"}),null==r.MyFriendsView?r.MyFriendsView=new d.ProfileFriendsView(a):n>0?r.MyFriendsView.collection.push(t):r.MyFriendsView.collection.reset(t)}}(l,g,r,{collection:new f.FriendCollection(g),model:new f.ProfileCard(i.extend(g[0])),el:"#"+o.attr("id")}),o.parent().find("div.content").removeAttr("style"),o.show()}else o.parent().find("div.content").removeAttr("style"),99===l&&0===o.find("div.profileButton").length?o.append('<div class="emptyContainer"><p rel="localize[NoSearchResults]">Sorry. Your search returned no results.</p></div>'):4===l?v(null,o):3===l&&b(null,o);switch(o.find("[rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),l){case 8:s.removeLoading("editProfile"),t("#editProfileContainer").data("antiscroll").refresh();break;case 99:s.removeLoading("friendsPanel"),s.resetScrollbar("#friendsPanel");break;default:s.removeLoading("friendsPanel"),n&&null!=n.Success&&0==n.Success&&void 0!==o&&o.append("<tr><td>"+u.getError("InternetAccess")+"</td></tr>"),t("#friendsContainer").data("antiscroll").refresh()}}}function m(e,t){a.WriteDebugLog(t+".GetNickname","ERROR",e.errorThrown),a.WriteDebugLog(t+".GetNickname","ERROR status",e.textStatus),a.WriteDebugLog(t+".GetNickname","ERROR responseText",e.jqXhr.responseText,a.logType.error,a.logController.friend)}function v(e,n){n.append('<div id="noFriendInvites" class="emptySocial"><p rel="localize[NoFriendInvites]">No pending friend invites</p><span></span><a class="btn btnPurple" href="#" rel="localize[FindFriends]">Find friends</a></div>'),t("#noFriendInvites [rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),t("#noFriendInvites.emptySocial .btn").click((function(){t("#findPlayerLink").click()}))}function b(e,n){n.append('<div id="noFriends" class="emptySocial"><p rel="localize[NoFriendsAdded]">No friends added yet</p><span></span><a class="btn btnPurple" href="#" rel="localize[FindFriends]">Find friends</a></div>'),t("#noFriends [rel*=localize]").localize("Social",{language:globals.titlelang,pathPrefix:globals.baseAssetUrl+"xml/shared"}),t("#noFriends.emptySocial .btn").click((function(){t("#findPlayerLink").click()}))}function C(e,t){var n=e.replace("[PlayerNickname]","<strong><em> "+t+" </em></strong>");r.pubsub.publish("notificationFn.infoMessage",n)}function S(e){var t;a.WriteDebugLog("showError","errorCode",e);var n=(0,o.default)(e);"undefined"!==n&&"400"===e?t=a.errorCodeLocKey(a.errorCode("8000")):"undefined"!==n&&(t=i.findKey(y,(function(t){return t===e}))),void 0===t&&(t="GenericFriendActionError"),p.ShowErrorModal({errorCode:"",message:u.getError(t)})}var y={RL_SC_FRIENDS_ERR_AUTHENTICATION_FAILED:1,RL_SC_FRIENDS_ERR_INVITE_DOES_NOT_EXIST:6,RL_SC_FRIENDS_ERR_INVITER_FRIEND_LIMIT_REACHED:7,RL_SC_FRIENDS_ERR_INVITEE_FRIEND_LIMIT_REACHED:8,RL_SC_FRIENDS_ERR_FRIEND_INVITE_BLOCKED:9,RL_SC_FRIENDS_ERR_ALREADY_FRIENDS:10,RL_SC_FRIENDS_ERR_ALREADY_BLOCKED:13,RL_SC_FRIENDS_ERR_BLOCKER_FRIEND_LIMIT_REACHED:14,RL_SC_FRIENDS_ERR_FRIEND_INVITE_DOES_NOT_EXIST:15,RL_SC_FRIENDS_ERR_INVALID_INVITEE_ID:17,RL_SC_FRIENDS_ERR_PENDING_SENT_LIMIT_REACHED:18,RL_SC_FRIENDS_ERR_FRIEND_INVITE_EXISTS:20,RL_SC_FRIENDS_ERR_FRIEND_DOES_NOT_EXIST:21,RL_SC_FRIENDS_ERR_BLOCK_DOES_NOT_EXIST:22};return r.pubsub.subscribe("SDK.RGSC_JS_PLAYER_LIST_RESPONSE",g),r.pubsub.subscribe("SDK.RGSC_JS_PLAYER_LIST_MINI_RESPONSE",(function(e,n){a.WriteDllLog("RGSC_JS_PLAYER_LIST_MINI_RESPONSE","jsonFriendList",n),n=t.parseJSON(n||"null");var i="",r=t("#compareSelectList").empty();n.Count>0?(t.each(n.Players,(function(e,t){var n='<li><a data-userid="'+t.RockstarId+'">'+t.DisplayName+"</a></li>";i+=n})),r.append(i)):r.append("<li>"+u.getTextCached("NoFriends","Social")+"</li>")})),r.pubsub.subscribe("SDK.RGSC_JS_FRIEND_SEND_INVITE_RESULT",(function(e,n){a.WriteDllLog("RGSC_JS_FRIEND_SEND_INVITE_RESULT","jsonResponse",n);try{n=t.parseJSON(n||"null")}catch(e){n=!1}if(!n||!n.Success)return n&&0!=n.ResultCode&&S(n.ResultCode),void t("#friendsContainer").find(".friend.add.addFriend").removeClass("disabled");var i=n.RockstarId;l.getNicknameAsync(i).then((function(e){var n=t("div.panel.active").find("div.profileButton[data-id='"+i+"']");s.updateUIAFterFriendInviteSent(i,e,n);var a=u.getTextCached("Cancel","Social");n.find(".options").prepend('<a class="optionCancelInvite btn btnGrey btnSmall"><span>'+a+"</span></a>")})).catch((function(e){m(e,"RGSC_JS_FRIEND_SEND_INVITE_RESULT")}))})),r.pubsub.subscribe("SDK.RGSC_JS_FRIEND_DECLINE_INVITE_RESULT",(function(e,n){if(a.WriteDllLog("RGSC_FRIEND_DECLINE_INVITE_RESULT","jsonResponse",n),n=t.parseJSON(n||"null")){var i=n.RockstarId;l.getNicknameAsync(i).then((function(e){t("#friendsPanel #friendInvitesList").find("div.profileButton[data-id='"+n.RequestId+"']").remove(),s.UpdateSocialSideMenuCount("subtract","#friendInvitesLink",!1),a.pubsub.trigger("gameFnFriends:UpdateFriendStatus_"+n.RockstarId,{RockstarId:n.RockstarId,Relationship:0}),C(u.getTextCached("FriendInviteDeclined","Social"),e)})).catch((function(e){m(e,"RGSC_JS_FRIEND_DECLINE_INVITE_RESULT")}))}else S()})),r.pubsub.subscribe("SDK.RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT",(function(e,n){if(a.WriteDllLog("RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT","jsonResponse",n),!(n=t.parseJSON(n||"null"))||!n.Success)return a.WriteDebugLog("RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT","Success",n.Success),void(n&&0!=n.ResultCode&&S(n.ResultCode));var i=n.RockstarId;l.getNicknameAsync(i).then((function(e){a.pubsub.trigger("gameFnFriends:UpdateFriendStatus_"+n.RockstarId,{RockstarId:n.RockstarId,Relationship:6});var i=t("#friendsPanel");i.hasClass("active")&&(s.UpdateSocialSideMenuCount("add","#myFriendsLink",!0),0===s.UpdateSocialSideMenuCount("subtract","#friendInvitesLink",!1)&&i.hasClass("friendInvites")?t("#myFriendsLink").click():i.find("#friendInvitesList .profileButton[data-id='"+n.RockstarId+"']").remove(),C(u.getTextCached("FriendInviteAccepted","Social"),e))})).catch((function(e){m(e,"RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT")}))})),r.pubsub.subscribe("SDK.RGSC_JS_GAME_INVITE_SEND_RESULT",(function(e,n){a.WriteDllLog("RGSC_JS_GAME_INVITE_SEND_RESULT","jsonResponse",n);var i=(n=t.parseJSON(n||"null")).RockstarId;l.getNicknameAsync(i).then((function(e){n&&null!=n.Success&&n.Success?C(u.getTextCached("GameInviteSent","Social"),e):C(u.getTextCached("GameInviteFail","Social"),e)})).catch((function(e){m(e,"RGSC_JS_GAME_INVITE_SEND_RESULT")}))})),r.pubsub.subscribe("SDK.RGSC_JS_JOIN_VIA_PRESENCE_RESULT",(function(e,n){a.WriteDllLog("RGSC_JS_JOIN_VIA_PRESENCE_RESULT","jsonResponse",n);var i=(n=t.parseJSON(n||"null")).RockstarId;l.getNicknameAsync(i).then((function(e){n&&null!=n.Success&&n.Success?C(u.getTextCached("JoinGameSent","Social"),e):C(u.getTextCached("JoinGameFail","Social"),e)})).catch((function(e){m(e,"RGSC_JS_JOIN_VIA_PRESENCE_RESULT")}))})),r.pubsub.subscribe("SDK.RGSC_JS_FRIEND_DELETE_FRIEND_RESULT",(function(e,n){if(a.WriteDllLog("RGSC_JS_FRIEND_DELETE_FRIEND_RESULT","jsonResponse",n),t("#friendProfilePanel").find("a.backFriendLink").click(),(n=t.parseJSON(n||"null"))&&n.Success){var i=n.RockstarId;l.getNicknameAsync(i).then((function(e){a.pubsub.trigger("gameFnFriends:UpdateFriendStatus_"+n.RockstarId,{RockstarId:n.RockstarId,Relationship:0}),t("#friendsList").find("div.profileButton[data-id='"+n.RequestId+"']").remove(),C(u.getTextCached("FriendRemoved","Social"),e),s.UpdateSocialSideMenuCount("subtract","#myFriendsLink",!0)})).catch((function(e){m(e,"RGSC_JS_FRIEND_DELETE_FRIEND_RESULT")}))}else n&&0!=n.ResultCode&&S(n.ResultCode)})),r.pubsub.subscribe("SDK.RGSC_JS_FRIEND_CANCEL_INVITE_RESULT",(function(e,n){if(a.WriteDllLog("RGSC_JS_FRIEND_CANCEL_INVITE_RESULT","jsonResponse",n),t("#friendProfilePanel").find("a.backFriendLink").click(),(n=t.parseJSON(n||"null"))&&n.Success){var i=n.RockstarId;l.getNicknameAsync(i).then((function(e){s.updateUIAFterFriendCancelInviteSent(i,e)})).catch((function(e){m(e,"RGSC_JS_FRIEND_CANCEL_INVITE_RESULT")}))}else n&&0!=n.ResultCode&&S(n.ResultCode)})),r.pubsub.subscribe("SDK.RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT",(function(e,n){a.WriteDllLog("RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT","jsonResponse",n),t("#friendProfilePanel").find("a.backFriendLink").click();var i=(n=t.parseJSON(n||"null")).RockstarId;l.getNicknameAsync(i).then((function(e){n&&null!=n.Success&&n.Success?C(u.getTextCached("PlayerBlocked","Social"),e):C(u.getTextCached("PlayerBlockFail","Social"),e)})).catch((function(e){m(e,"RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT")}))})),r.pubsub.subscribe("SDK.RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT",(function(e,n){if(a.WriteDllLog("RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT","jsonResponse",n),(n=t.parseJSON(n||"null"))&&n.Success){var i=n.RockstarId;l.getNicknameAsync(i).then((function(e){t("#blockListPlayercards").find("div.profileButton[data-id='"+i+"']").remove(),C(u.getTextCached("PlayerUnBlocked","Social"),e),a.pubsub.trigger("gameFnFriends:UpdateFriendStatus_"+i,{RockstarId:i,Relationship:0});var n=t("#blockListLink span.count"),r=parseInt(n.html(),10)-1;n.html(r>0?r:"")})).catch((function(e){m(e,"RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT")}))}else n&&0!=n.ResultCode&&S(n.ResultCode)})),r.pubsub.subscribe("SDK.RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE",(function(e,n){if(a.WriteDllLog("RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE","jsonResponse",n),n=t.parseJSON(n||"null")){a.WriteDebugLog("RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE","jsonResponse.NumFriends",n.NumFriends);var i=n.NumFriends>0?n.NumFriends:"",r=n.NumInvitesReceieved>0?n.NumInvitesReceieved:"",o=n.NumGameInvites>0?n.NumGameInvites:"",c=n.NumBlocked>0?n.NumBlocked:"";s.updatePlayerListCounts(i,r,o,c),"true"!==t("#menuMessages").attr("countRetrieved")&&globals.account&&l.GetAccountActivity(globals.account.RockstarId),t("#friendsPanel").attr("countsRetrieved",!0)}})),r.pubsub.subscribe("SDK.RGSC_JS_PLAYER_INFO_RESPONSE",(function(e,n){a.WriteDllLog("RGSC_JS_PLAYER_INFO_RESPONSE","jsonResponse",n);try{var i;(n=t.parseJSON(n||"null")).IsOnline?(i='<span title="online" class="status"></span><span class="title">'+u.getTextCached("NowPlaying","Social")+"</span>",null!=n.IsPlayingSameTitle&&n.IsPlayingSameTitle&&(i+=" "+globals.titleDisplayName),t("#friendProfile").removeClass("offline").addClass("online")):(i='<span title="offline" class="status"></span><span class="title">'+u.getTextCached("Offline","Social")+"</span>",t("#friendProfile").removeClass("online").addClass("offline")),t("#friendProfileHead .nowPlaying").html(i)}catch(e){a.WriteDebugLog("RGSC_JS_PLAYER_INFO_RESPONSE","error",e.message,a.logType.error,a.logController[globals.titleName])}})),r.pubsub.subscribe("friendFn.handlePlayerListResponse",g),r.pubsub.subscribe("friendFn.showNoFriendInvites",v),r.pubsub.subscribe("friendFn.showNoFriends",b),{}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i=n(215),a=n(37),r=n(10),o=n(8),s=n(36),l=n(4),c=n(82),u=n(55);n(14);function d(e){var a;i.validateTitleInfo(e),t.processTitleIdInfo(e),s.setGamePlatform(t.getGamePlatform()),(a=function(e){var n,i=["de","es","fr","it","ja","ko","pl","pt-BR","ru","zh-TW","zh-CN"];if(l.contains(i,e))n=e;else{var a=t.getShortLanguageCode(e);n=!!l.contains(i,a)&&a}return!!n&&n.toLowerCase()}(t.getTitleLang()))&&n(61)("./"+a),e.IsLauncher&&(u.initLauncher(),c.initLauncher()),o.CallGameMethodAsync("RGSC_GET_VERSION_INFO",null,"RGSC_GET_VERSION_INFO_DEMO").then(r.setVersionNum).catch((function(){t.WriteDebugLog("SetGameTitleAsync","Error","Get Version Info Failed",t.logType.error,t.logController[t.getTitleName()])})),r.initLocalization(t.getTitleLang()),r.setBodyClass(t.getTitleName()),globals.isLauncher?(globals.top="-537px",globals.panelHeight=537):(globals.top="-416px",globals.panelHeight=416),r.loadHomeFeed(),r.setupInputElementEvents(),null!=e.TitleDisplayName&&r.setTitleDisplayName(globals.titleDisplayName);try{r.LoadLocalizedValues()}catch(e){t.WriteDebugLog("LoadLocalizedValues","Error","Exception thrown",t.logType.error,t.logController[t.getTitleName()])}r.initOsDeprecation();try{s.startSession(),s.setCurrentlyPlaying(t.getTitleName(),globals.platform)}catch(e){t.WriteDebugLog("Analytics Setup","Error","Exception thrown",t.logType.error,t.logController[t.getTitleName()])}}return globals.panelHeight=416,globals.top="-416px",t.pubsub.subscribe("SDK.RGSC_JS_PING",(function(){i.handlePing()})),t.pubsub.subscribe("SDK.RGSC_JS_READY_TO_ACCEPT_COMMANDS",(function(){i.handleReadyToAcceptCommands(d)})),t.pubsub.subscribe("SDK.RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED",(function(e,n){var i=JSON.parse(n||"null");t.WriteDllLog("RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED","",""),t.isOnline(i.Result),r.setHeaderOnlineStatus()})),t.pubsub.subscribe("SDK.RGSC_JS_NETWORK_CHANGE",(function(e,n){t.WriteDllLog("RGSC_JS_NETWORK_CHANGE","jsonString",n);var i=JSON.parse(n||"null");t.isOnline(i.Online),a.processNetworkStatusChange()})),t.pubsub.subscribe("SDK.RGSC_JS_SET_CAPSLOCK_STATE",(function(e,n){t.WriteDllLog("RGSC_JS_SET_CAPSLOCK_STATE","jsonString",n);var i={Toggled:!1};try{i=JSON.parse(n||'{"Toggled":false}')}catch(e){t.WriteDebugLog("RGSC_JS_SET_CAPSLOCK_STATE","Error","Exception thrown",t.logType.error,t.logController[t.getTitleName()])}t.setCapsLockStatus(i.Toggled)})),{}}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(8),i=n(1),a=n(76),r={};return r.handlePing=function(){if(i.WriteDllLog("RGSC_JS_PING"),window.cssErr)return t.CallGameMethod("RGSC_PAGE_LOAD_ERROR",'{ "Reason": "cssError" }',"RGSC_PAGE_LOAD_ERROR_DEMO"),void i.WriteDebugLog("RGSC_JS_PING","Error","CSS load error",i.logType.error,i.logController[i.getTitleName()]);t.CallGameMethod("RGSC_PONG",null,"RGSC_PONG_DEMO")},r.handleReadyToAcceptCommands=function(e){if(window.cssErr)return t.CallGameMethod("RGSC_PAGE_LOAD_ERROR",'{ "Reason": "cssError" }',"RGSC_PAGE_LOAD_ERROR_DEMO"),void i.WriteDebugLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS","Error","CSS load error",i.logType.error,i.logController[globals.titleName]);i.WriteDllLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS"),t.launcherData("ScuiVersion",i.versionNum()),t.CallGameMethodAsync("RGSC_GET_TITLE_ID",null,"RGSC_GET_TITLE_ID_DEMO").then(e).then((function(){a((function(){setTimeout((function(){i.pubsub.publish("init.readyToAcceptCommands"),t.CallGameMethod("RGSC_READY_TO_ACCEPT_COMMANDS",null,"RGSC_READY_TO_ACCEPT_COMMANDS_DEMO")}),10)}))}),(function(e){throw i.WriteDebugLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS","Error","Set Game Title Failed: "+e,i.logType.error,i.logController[globals.titleName]),e}))},r.validateTitleInfo=function(e){if(null==e)throw new Error("titleInfo is null or undefined");if(null==e.RosTitleName||void 0===e.RosTitleName||null==e.RosTitleVersion||void 0===e.RosTitleVersion)throw t.CallGameMethod("RGSC_PAGE_LOAD_ERROR",'{ "Reason": "Missing RosTitleName or RosTitleVersion data from RGSC_GET_TITLE_ID response" }',"RGSC_PAGE_LOAD_ERROR_DEMO"),new Error("missing titlename/version");return!0},r}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(4),o=n(7),s=n(12),l=n(217),c=n(51);return a.pubsub.subscribe("SDK.RGSC_JS_SET_INPUT_METHOD",(function(e,n){a.WriteDllLog("RGSC_JS_SET_INPUT_METHOD","jsonString",n);var r=t.parseJSON(n||"null");null!=r&&null!=r.InputMethod&&(globals.inputMethod=r.InputMethod,globals.padType=r.PadType,a.inGamePadMode()||i.pubsub.trigger("virtualKeyboard",!1),i.pubsub.trigger("setCloseInstructions"))})),a.pubsub.subscribe("SDK.RGSC_JS_SHOW_VIRTUAL_KEYBOARD",(function(){a.WriteDllLog("RGSC_JS_SHOW_VIRTUAL_KEYBOARD"),i.pubsub.trigger("virtualKeyboard",!0)})),a.pubsub.subscribe("SDK.RGSC_JS_VIRTUAL_KEYBOARD_RESULT",(function(e,n){a.WriteDllLog("RGSC_JS_VIRTUAL_KEYBOARD_RESULT","jsonstring",n);var i=t.parseJSON(n||"null").Result;c.setFocusedInput(i)})),a.pubsub.subscribe("SDK.RGSC_JS_IME_EVENT",(function(e,n){if(globals.ime){var i=t.parseJSON(n||"null");if(r.isObject(i)){var c=t(document.activeElement);if(!c.attr("data-allow-ime-input")){var u=a.errorCode("5002.93"),d=o.getErrorWithCode(u);return void s.ShowErrorModal({errorCode:u,message:d})}l.notifyEvent(i,c)}}})),{}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i,a;i=[n(0),n(4),n(16),n(218),n(220)],void 0===(a=function(e,t,n,i){var a={},r=null,o=n.Model.extend({defaults:{candidates:[],val:""}}),s="WM_IME_STARTCOMPOSITION",l="WM_IME_COMPOSITION",c="WM_IME_ENDCOMPOSITION",u="WM_IME_NOTIFY";function d(){p()}function f(t){13===t.which&&(e(this).off(t),t.stopImmediatePropagation(),e(this).keyup())}function p(){r.clear(),r.trigger("cleanup")}return a.attachTo=function(e){r=new o,new i.SuggestionsView({$inputEl:e,model:r}),e.one("focusout",d),e.onFirst("keyup",f)},a.detach=p,a.notifyEvent=function(e,n){n.hasClass("js-ime-input-ready")||(a.attachTo(n),n.addClass("js-ime-input-ready")),e.CompositionOpen&&t.find([s,l],(function(t){return t===e.Event}))&&(t.has(e,"Composition")?r.set("val",e.Composition):t.has(e,"Result")&&(r.set("val",e.Result),r.trigger("update:parent"))),function(e){if(e.eventName===u&&"IMN_CHANGECANDIDATE"===e.eventParam){var n=t.map(e.candidates,(function(e,t){return{candidate:e,id:t+1,active:r.get("val")===e}}));r.set("candidates",n)}e.eventName===u&&"IMN_CLOSECANDIDATE"===e.eventParam&&r.set("candidates",[])}({eventName:e.Event,eventParam:e.Param,candidates:e.Candidates}),e.Event===c&&(p(),function(e){e.off("focusout",d)}(n))},a}.apply(t,i))||(e.exports=a)},function(e,t,n){"use strict";var i,a;i=[n(0),n(16),n(4),n(219)],void 0===(a=function(e,t,n,i){var a={};return a.SuggestionsView=t.View.extend({initialize:function(e){n.bindAll(this,"render","cleanup","updateParent"),this.$inputEl=e.$inputEl,this.$inputEl.attr("data-ime-composition","true"),this.$inputEl.addClass("ime-active-input-highlight"),this.$inputEl.parent(".js-ime-wrapper").append(this.$el),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"update:parent",this.updateParent),this.listenTo(this.model,"cleanup",this.cleanup),this.render()},render:function(){var e=i(this.model.toJSON());this.$el.html(e)},updateParent:function(){var e=this.$inputEl.val();this.$inputEl.val(e+this.model.get("val"))},cleanup:function(){this.undelegateEvents(),this.stopListening(),this.$inputEl.removeClass("ime-active-input-highlight"),this.$inputEl.removeClass("js-ime-input-ready"),this.$inputEl.removeAttr("data-ime-composition"),this.$el.remove()}}),a}.apply(t,i))||(e.exports=a)},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o,s,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},f="\t\t\t<li ";return o=null!=(o=d(n,"active")||(null!=t?d(t,"active"):t))?o:c,s={name:"active",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:6,column:7},end:{line:6,column:49}}},r="function"==typeof o?o.call(l,s):o,d(n,"active")||(r=e.hooks.blockHelperMissing.call(t,r,s)),null!=r&&(f+=r),f+"> "+u("function"==typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:c)?o.call(l,{name:"id",hash:{},data:a,loc:{start:{line:6,column:51},end:{line:6,column:57}}}):o)+": "+u("function"==typeof(o=null!=(o=d(n,"candidate")||(null!=t?d(t,"candidate"):t))?o:c)?o.call(l,{name:"candidate",hash:{},data:a,loc:{start:{line:6,column:59},end:{line:6,column:72}}}):o)+" </li>\r\n"},2:function(e,t,n,i,a){return' class="ime-active" '},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o,s,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},d='<div id="js-ime-suggestions-container" class="ime-container">\r\n\t<div class="ime-suggestions">\r\n\t\t<input type="text" class="js-ime-input" value="'+e.escapeExpression("function"==typeof(o=null!=(o=u(n,"val")||(null!=t?u(t,"val"):t))?o:c)?o.call(l,{name:"val",hash:{},data:a,loc:{start:{line:3,column:49},end:{line:3,column:56}}}):o)+'" />\r\n\t\t<ul>\r\n';return o=null!=(o=u(n,"candidates")||(null!=t?u(t,"candidates"):t))?o:c,s={name:"candidates",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:5,column:3},end:{line:7,column:18}}},r="function"==typeof o?o.call(l,s):o,u(n,"candidates")||(r=e.hooks.blockHelperMissing.call(t,r,s)),null!=r&&(d+=r),d+"\t\t</ul>\r\n\t</div>\r\n</div>"},useData:!0})},function(e,t,n){(function(t){var i=n(0),a=n(3)(n(5));!function(e){
/*!
   * jQuery.bind-first library v0.2.3
   * Copyright (c) 2013 Vladimir Zhuravlev
   *
   * Released under MIT License
   * @license
   *
   * Date: Thu Feb  6 10:13:59 ICT 2014
   **/
var t=e.fn.jquery.split("."),n=parseInt(t[0]),i=parseInt(t[1]),r=n<1||1==n&&i<7;function o(t,n,i){var a=function(t){return r?t.data("events"):e._data(t[0]).events}(t),o=a[n];if(r)i?a.live.unshift(a.live.pop()):o.unshift(o.pop());else{var s=i?o.splice(o.delegateCount-1,1)[0]:o.pop();o.splice(i?0:o.delegateCount||0,0,s)}}function s(t,n,i){var a=n.split(/\s+/);t.each((function(){for(var t=0;t<a.length;++t){var n=e.trim(a[t]).match(/[^\.]+/i)[0];o(e(this),n,i)}}))}function l(t){e.fn[t+"First"]=function(){var n=e.makeArray(arguments),i=n.shift();return i&&(e.fn[t].apply(this,arguments),s(this,i)),this}}l("bind"),l("one"),e.fn.delegateFirst=function(){var t=e.makeArray(arguments),n=t[1];return n&&(t.splice(0,2),e.fn.delegate.apply(this,arguments),s(this,n,!0)),this},e.fn.liveFirst=function(){var t=e.makeArray(arguments);return t.unshift(this.selector),e.fn.delegateFirst.apply(e(document),t),this},r||(e.fn.onFirst=function(t,n){var i=e(this),r="string"==typeof n;if(e.fn.on.apply(i,arguments),"object"===(0,a.default)(t))for(type in t)t.hasOwnProperty(type)&&s(i,type,r);else"string"==typeof t&&s(i,t,r);return i})}(t),e.exports=i}).call(this,n(0))},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(1),a=n(222),r=n(15),o=n(20),s=n(47),l=n(42);return i.pubsub.subscribe("SDK.RGSC_JS_RECEIVE_MESSAGE",(function(e,t){a.handleReceiveMessage(e,t)})),i.pubsub.subscribe("SDK.RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE",(function(e,t){i.WriteDllLog("RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE","jsonResponse",t);var n=JSON.parse(t||"null");n&&n.Success&&n.Players&&s.processMpPresenceInfo(n)})),i.pubsub.subscribe("SDK.RGSC_JS_PRESENCE_MESSAGE_RECEIVED",(function(e,n){if(i.WriteDllLog("RGSC_JS_PRESENCE_MESSAGE_RECEIVED","presenceJson",JSON.stringify(n)),n){var a=JSON.parse(n||"null"),s={Count:0,Notifications:[]};for(var c in a){var u=c.toUpperCase(),d=a[c];switch(u){case"ROS.FRIENDS.CHANGED":case"ROS.FRIENDS.INVITE.CANCELED":case"ROS.FRIENDS.INVITE.RECEIVED":var f=JSON.stringify(d);i.WriteDebugLog("handlePresenceMsgReceived","debug info",f),o.ClearFriendsCache(d&&d.ee);break;case"ROS.CLAN.NOTIFY":var p,h=d.type.toUpperCase();p="JOINREQUEST"===h?d.clanid:d,r.ClearCrewCache(p),r.GetCrewById(p,(function(e){var n=t(e);if("true"==n.find("Status").text()){var a=n.find("CrewName").text();i.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",JSON.stringify({Count:1,Notifications:[{Type:h,Data:[{cn:a}]}]}))}}));break;case"ROS.CLAN.INVITE":r.ClearCrewCache(d.ci),i.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",JSON.stringify({Count:1,Notifications:[{Type:u,Data:[{cn:d.cn}]}]}));break;case"ROS.CLAN.MEMBER.PROMOTED":r.GetCrewById(d.clanid,(function(e){var n=t(e);if("true"==n.find("Status").text()){r.ClearCrewCache(d.clanid);var a=n.find("CrewName").text();i.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",JSON.stringify({Count:1,Notifications:[{Type:u,Data:[{cn:a}]}]}))}}));break;case"ROS.CLAN.MEMBER.DEMOTED":r.ClearCrewCache(d.clanid);break;case"ROS.CLAN.JOINED":t("#crewInvitesLink span.count").html("");case"ROS.CLAN.LEFT":case"ROS.CLAN.PRIMARY.CHANGED":r.ClearCrewCache(d);break;case"ROS.ACCOUNT.LINK":l.UpdateAccountLinking("scui"==d.r,d.n,d.s)}}s.Count>0&&i.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",JSON.stringify(s))}})),{}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(1),i=n(8),a=n(4),r={},o=[];function s(e,n){try{n=n||JSON.parse(e||"{}")}catch(t){throw i.retailOutput("Recieved malformed json: "+e),t}var a=n.Commands;void 0!==a&&a.forEach((function(e){t.pubsub.publish("launcher.launcherCommand",{command:e.Command,parameter:e.Parameter})}))}return r.handleReceiveMessage=function(e,t,n,i){r.logReceivedMessage(t,n),r.publishLauncherCommand(t,i)},r.logReceivedMessage=function(e,n){("boolean"!=typeof n||n)&&(t.WriteDllLog("RGSC_JS_RECEIVE_MESSAGE","messageText",e),globals.receiveMsgEnabled||t.WriteDebugLog("RGSC_JS_RECEIVE_MESSAGE","ignored",e))},r.publishLauncherCommand=function(e,t){globals.receiveMsgEnabled?(o&&o.length>0&&(a.each(o,(function(e){s(e.messageText,e.json)})),o=[]),s(e,t)):e&&o.push({messageText:e,json:t})},r.processCachedLauncherCommands=function(){return r.publishLauncherCommand()},r}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i){var a;void 0===(a=function(e){var t=n(0),i=n(6),a=n(1),r=n(22),o=n(10),s=n(37),l=n(20),c=n(47),u=n(7),d=n(12),f=n(49),p=n(42),h=n(59),g=n(8);function m(e){return!e.Visible||(i.WriteDebugLog("SIGNIN","json",JSON.stringify(e.Data)),f.showSignin(e.Online))}return a.pubsub.subscribe("SDK.RGSC_JS_REQUEST_UI_STATE",(function(e,n){var d=n.request,f=n.noResponse;i.WriteDllLog("RGSC_JS_REQUEST_UI_STATE","json",d),globals.waitingResponse=!0;var v=t.parseJSON(d||"null"),b="";null!=v.State&&(b=v.State.toUpperCase());var C="";if(null!=v.SubState&&(C=v.SubState.toUpperCase()),o.closeModalsAndHideMenu(),function(e){if(null==globals.titleName||""==globals.titleName){o.initStyling(e);var t=i.errorCode("1000.34"),n=u.getErrorWithCode(t),a={errorCode:t,message:n.Message,supportText:n.SupportText,codeDesc:n.CodeDescription};return o.showFatalError(a),!1}return!0}(v.Visible)&&(null!=v.Online&&1==v.Online&&(v.Online=!0),o.clearSelectedTabsAndPages(),o.resetCommerceStyling(b,C),o.initStyling(v.Visible,!0),!function(e,t){if(globals.isLauncher&&"MAIN"==e)return i.WriteDebugLog("isLauncherStateRequestIgnored","skipped"),globals.receiveMsgEnabled=!0,g.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible":'+(t?"true":"false")+" }","RGSC_UI_STATE_RESPONSE_DEMO"),!0;return globals.receiveMsgEnabled=!1,!1}(b,v.Visible))){if(o.pendingAccountCompletion()&&"ACTIVATION"!=b)return r.showDOBPrompt(),void g.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible":'+(v.Visible?"true":"false")+" }","RGSC_UI_STATE_RESPONSE_DEMO");switch(i.WriteDebugLog("request","state",b),b){case"ACCOUNTLINKING":v.Visible?(o.initHeaderMenu(!0),o.setSelected(),t("#accountsLink").click()):o.clearActivePanel();break;case"ACHIEVEMENTS":case"STATS":v.Visible?(o.initHeaderMenu(!0),t("#awardsLink2").click()):o.clearActivePanel();break;case"ACTIVATION":v.Visible&&i.pubsub.trigger("gamefunctions:showActivation",v,b,C);break;case"COMMERCE":if(!1===function(e,n,a){if(!e.Visible)return!0;switch(a){case"REDEMPTIONCODE":case"SERIALKEYREDEMPTION":i.pubsub.trigger("gamefunctions:showActivation",e,n,a);break;default:var r=null!=e.Data&&null!=e.Data.Url?e.Data.Url:"";if(i.isStoreV2Enabled()){if(o.initHeaderMenu(!0),!e.Online||o.isOffline()||o.isLoadedInOfflineMode())return u.getTextAsync("OnlineRequired","Store").then((function(e){o.retryConnection(e),setTimeout((function(){g.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible": true }',"RGSC_UI_STATE_RESPONSE_DEMO")}),300)})),!1;h.clearAutoSearch(),void 0!==e.Data&&(void 0!==e.Data.Category&&h.setAutoSearchCategory(decodeURI(e.Data.Category)),void 0!==e.Data.Product&&h.setAutoSearchProduct(decodeURI(e.Data.Product)));var s=t("#header #storeButton"),l=setInterval((function(){s.is(":visible")&&(clearInterval(l),h.showCommerceV2(r))}),1e3);setTimeout((function(){clearInterval(l)}),6e4)}else h.showCommerce(r)}return!0}(v,b,C))return;break;case"GAMEINVITES":v.Visible?(o.initHeaderMenu(!0),t("#gameInvitesLink").click(),c.localize()):o.clearActivePanel();break;case"MESSAGES":v.Visible?(o.initHeaderMenu(!0),s.showMessagesPage(),c.localize()):o.clearActivePanel();break;case"FRIENDS":if(v.Visible){switch(o.initHeaderMenu(!0),C){case"REQUEST":s.showSocialSection("#friendInvitesLink");break;case"SENDINVITE":null!=v.Data&&null!=v.Data.RockstarId&&i.pubsub.trigger("datafnfriends:SendFriendRequest",v.Data.RockstarId),s.showSocialSection();break;case"FRIENDSEARCH":s.showSocialSection("#findPlayerLink");break;default:s.showSocialSection()}c.localize()}else o.clearActivePanel();break;case"SETTINGS":v.Visible&&p.loadSettings();break;case"EULA":v.Visible&&s.ShowEULA(v.Online);break;case"SIGNUP":v.Visible&&!a.isSignedIn()&&s.ShowSignup(v.Online);break;case"SIGNIN":if(!1===m(v))return;break;case"ERROR":o.showMessagePanel(u.getError("ServerError"),"",u.getError("SorryTry"));break;case"MAIN":var S=i.isQuitDisabled();if(!o.isSignedIn()&&S){if(!1===m(v))return}else v.Visible&&s.StartUp(!v.Online);break;case"PLAYERS":v.Visible&&(o.initHeaderMenu(!0),null!=v.Data&&null!=v.Data.RockstarId&&v.Data.RockstarId&&l.friendProfileViewByRockstarId(v.Data.RockstarId));break;case"LAUNCHER":break;case"CREWINVITES":v.Visible?(o.initHeaderMenu(!0),s.loadCrewInvites()):o.clearActivePanel();break;case"CREWREQUESTS":v.Visible?(o.initHeaderMenu(!0),s.loadCrewRequests()):o.clearActivePanel();break;default:if(!1===function(e){if(i.WriteDebugLog("onNoState","Visible",e.Visible),!e.Visible)return o.cancelAndCloseMsgPanel(e),!1;if(t("div.panel.active").length<=0){var n=!e.Online;return s.StartUp(n),!0}return function(e){var n=!1;i.WriteDebugLog("onNetworkChangeRequest","Online",e.Online),e.Online?o.isLoadedInOfflineMode()?(a.pubsub.publish("SDK.RGSC_JS_NETWORK_CHANGE",JSON.stringify({Online:!0})),n=!0):(o.setOffline(!1),t("#confirmPanel").hide(),o.initHeaderMenu(!0)):o.isOnline()&&(o.isLoadedInOnlineMode()?(a.pubsub.publish("SDK.RGSC_JS_NETWORK_CHANGE",JSON.stringify({Online:!1})),n=!0):o.setOffline(!0));n||o.reloadActiveStatsPage()}(e),!0}(v))return}f||g.CallGameMethod("RGSC_UI_STATE_RESPONSE",'{ "Visible":'+(v.Visible?"true":"false")+" }","RGSC_UI_STATE_RESPONSE_DEMO")}})),a.pubsub.subscribe("SDK.RGSC_JS_UI_STATE_RESPONSE",(function(e,n){i.WriteDllLog("RGSC_JS_UI_STATE_RESPONSE","jsonResponse",n);var r=t.parseJSON(n||"null");if(null!=r&&null!=r.Visible)if(a.setIsScuiVisible(r.Visible,!0),r.Visible){o.isHeaderRequired()?o.showHeaderMenu():o.hideHeaderMenu();var s=t("div.panel.active");s.length>=0&&!function(e){if(!e)return!1;var t=!1;return e.css&&e.css("top")&&e.css("top").indexOf&&(t=0===e.css("top").indexOf("-")),!t&&e.hasClass("active")&&"none"!==e.css("display")}(s)&&o.clearActivePanel((function(){o.setUpLoadingPanel(s,(function(){var e=s.attr("id");e&&o.removeLoading(e)}))}))}else o.hideUI();i.pubsub.trigger("RGSC_JS_UI_STATE_RESPONSE")})),a.pubsub.subscribe("SDK.RGSC_JS_REQUEST_URL",(function(e,t){var n=JSON.parse(t||"{}");if(n&&a.stringHasContent(n.Url)){var i=n.Url;i.length>75&&(i=i.substr(0,75)+"...");var r=u.getTextCached("LinkConfirm","HomeSignin").replace("[linkText]",'"'+i+'"');d.ShowConfirmModal(r,"","sdk.launchExternalBrowserForUrl",n.Url)}})),{}}.call(t,n,t,e))||(e.exports=a)}).call(this,n(0))},function(e,t,n){"use strict";var i,a=n(3)(n(5));void 0===(i=function(e){var t=n(6),i=n(1),r=n(10),o=n(49),s=n(42),l=n(7),c=n(8),u=n(18),d=n(11),f=n(13);return i.pubsub.subscribe("SDK.RGSC_JS_SIGN_IN",(function(e,n){t.WriteDllLog("RGSC_JS_SIGN_IN","json",n),i.isSignedIn()||(n=JSON.parse(n||"null"),o.sdkAutoSignInRequest(n))})),i.pubsub.subscribe("SDK.RGSC_JS_FINISH_SIGN_IN",(function(e,n){t.WriteDllLog("RGSC_JS_FINISH_SIGN_IN","json",n),o.gameFinishedSignin(n),t.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN","MethodCompleted","")})),i.pubsub.subscribe("SDK.RGSC_JS_SIGN_OUT",(function(e,n){t.WriteDllLog("RGSC_JS_SIGN_OUT");var a="";if(JSON.parse(n||"null").DuplicateSignIn&&globals.account){var r=l.getTextCached("DuplicateSignedOut","Notifications").replace("[nickname]",globals.account.Nickname),s={Count:1,Notifications:[{Type:"DUPLICATESIGNEDOUT",Count:1,Data:[{Id:"DuplicateSignedOut",Name:globals.account.Nickname,Description:r}]}]};a=r,i.pubsub.publish("SDK.RGSC_JS_NOTIFICATION",JSON.stringify(s))}t.WriteDebugLog("RGSC_JS_SIGN_OUT","finished",""),o.signOut(a)})),i.pubsub.subscribe("SDK.RGSC_JS_FINISH_MODIFY_PROFILE",(function(e,n){t.WriteDllLog("RGSC_JS_FINISH_MODIFY_PROFILE","json",n),s.modifyProfileComplete(n)})),i.pubsub.subscribe("SDK.RGSC_JS_REFRESH_STEAM_TICKET_RESULT",(function(e,n){t.WriteDllLog("RGSC_JS_REFRESH_STEAM_TICKET_RESULT","jsonstring",n);var a=JSON.parse(n||"null");if(void 0!==a&&void 0!==a.Ticket&&a.Ticket.length){if(i.setSteamAuthTicket(a.Ticket),r.isSignedIn())return void t.WriteDebugLog("RGSC_JS_REFRESH_STEAM_TICKET_RESULT","aborted","user is signed in already");o.signInOnline()}})),i.pubsub.subscribe("SDK.RGSC_JS_REFRESH_EPIC_ACCESS_TOKEN_RESULT",(function(e,n){i.WriteDllLog("RGSC_JS_REFRESH_EPIC_ACCESS_TOKEN_RESULT","jsonstring",n);var s=JSON.parse(n||"null");if("object"===(0,a.default)(s)&&i.stringHasContent(s.EpicAccessToken)){if(i.setEpicAccessToken(s.EpicAccessToken),r.isSignedIn())return void t.WriteDebugLog("RGSC_JS_REFRESH_EPIC_ACCESS_TOKEN_RESULT","aborted","user is signed in already");o.signInOnline()}})),i.pubsub.subscribe("SDK.RGSC_JS_GET_AVATAR_URL",(function(e,n){var i=JSON.parse(n||"null");null===i&&t.WriteDebugLog("handleGetAvatarUrl","aborted","missing required parameter data");var a=u.getAvatarUrl("",i.Nickname,i.Size);c.CallGameMethod("RGSC_GET_AVATAR_URL_RESPONSE",{AvatarUrl:a,RequestId:i.RequestId||0})})),i.pubsub.subscribe("SDK.RGSC_JS_GET_AVATAR_LAYOUT_URL",(function(e,t){var n=JSON.parse(t||"null"),i=n&&n.RequestId||0;c.CallGameMethod("RGSC_GET_AVATAR_LAYOUT_URL_RESPONSE",{AvatarLayoutUrl:"https://socialclub.rockstargames.com/xml/avatar.xml",RequestId:i})})),i.pubsub.subscribe("SDK.RGSC_JS_SHUTDOWN",(function(){t.WriteDebugLog("handleGameShutDown"),d.trackEvent(f.category.game,f.action.game_quit),c.CallGameMethod("RGSC_SHUTDOWN_RESPONSE",null,"RGSC_SHUTDOWN_RESPONSE_DEBUG")})),{}}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){"use strict";(function(i,a){var r,o,s,l,c=n(3)(n(5));
/*! Native Promise Only
    v0.8.0-a (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
l=function(){var e,t,n,i=Object.prototype.toString,r=void 0!==a?function(e){return a(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,i){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function o(e,i){n.add(e,i),t||(t=r(n.drain))}function s(e){var t,n=(0,c.default)(e);return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function l(){for(var e=0;e<this.chain.length;e++)u(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function u(e,t,n){var i,a;try{!1===t?n.reject(e.msg):(i=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(a=s(i))?a.call(i,n.resolve,n.reject):n.resolve(i)}catch(e){n.reject(e)}}function d(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=s(e))?o((function(){var i=new h(n);try{t.call(e,(function(){d.apply(i,arguments)}),(function(){f.apply(i,arguments)}))}catch(e){f.call(i,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&o(l,n))}catch(e){f.call(new h(n),e)}}}function f(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(l,t))}function p(e,t,n,i){for(var a=0;a<t.length;a++)!function(a){e.resolve(t[a]).then((function(e){n(a,e)}),i)}(a)}function h(e){this.def=e,this.triggered=!1}function g(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new g(this);this.then=function(e,n){var i={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return i.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t})),t.chain.push(i),0!==t.state&&o(l,t),i.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){d.call(t,e)}),(function(e){f.call(t,e)}))}catch(e){f.call(t,e)}}n=function(){var e,n,i;function a(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,r){i=new a(t,r),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var i=e;for(e=n=t=void 0;i;)i.fn.call(i.self),i=i.next}}}();var v=e({},"constructor",m,!1);return m.prototype=v,e(v,"__NPO__",0,!1),e(m,"resolve",(function(e){return e&&"object"==(0,c.default)(e)&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)}))})),e(m,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)}))})),e(m,"all",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var a=e.length,r=Array(a),o=0;p(t,e,(function(e,t){r[e]=t,++o===a&&n(r)}),i)}))})),e(m,"race",(function(e){var t=this;return"[object Array]"!=i.call(e)?t.reject(TypeError("Not an array")):new t((function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");p(t,e,(function(e,t){n(t)}),i)}))})),m},(s=void 0!==i?i:void 0)[o="Promise"]=s[o]||l(),e.exports?e.exports=s[o]:void 0===(r=function(){return s[o]}.call(t,n,t,e))||(e.exports=r)}).call(this,n(29),n(226).setImmediate)},,,,function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li>\r\n    <a href="#" class="'+c(typeof(r=null!=(r=u(n,"ClickClass")||(null!=t?u(t,"ClickClass"):t))?r:s)===l?r.call(o,{name:"ClickClass",hash:{},data:a,loc:{start:{line:2,column:23},end:{line:2,column:37}}}):r)+'" data-action="'+c(typeof(r=null!=(r=u(n,"ActionData")||(null!=t?u(t,"ActionData"):t))?r:s)===l?r.call(o,{name:"ActionData",hash:{},data:a,loc:{start:{line:2,column:52},end:{line:2,column:66}}}):r)+'" data-title="'+c(typeof(r=null!=(r=u(n,"LinkText")||(null!=t?u(t,"LinkText"):t))?r:s)===l?r.call(o,{name:"LinkText",hash:{},data:a,loc:{start:{line:2,column:80},end:{line:2,column:92}}}):r)+'">\r\n        <img src="'+c(typeof(r=null!=(r=u(n,"ImageUrl")||(null!=t?u(t,"ImageUrl"):t))?r:s)===l?r.call(o,{name:"ImageUrl",hash:{},data:a,loc:{start:{line:3,column:18},end:{line:3,column:30}}}):r)+'" />\r\n        <div>\r\n            <h2>'+c(typeof(r=null!=(r=u(n,"Title")||(null!=t?u(t,"Title"):t))?r:s)===l?r.call(o,{name:"Title",hash:{},data:a,loc:{start:{line:5,column:16},end:{line:5,column:25}}}):r)+"</h2>\r\n            <h3>"+c(typeof(r=null!=(r=u(n,"Body")||(null!=t?u(t,"Body"):t))?r:s)===l?r.call(o,{name:"Body",hash:{},data:a,loc:{start:{line:6,column:16},end:{line:6,column:24}}}):r)+"</h3>\r\n        </div>\r\n    </a>\r\n</li>"},useData:!0})},function(e,t,n){"use strict";var i;void 0===(i=function(){var e={LoadHomeScreen:function(){}};return e}.apply(t,[]))||(e.exports=i)},function(e,t,n){"use strict";var i;void 0===(i=function(e){var t=n(35),i=n(87),a=n(7),r={LoadHomeScreen:function(){a.getTextAsync("Yes","Social").then((function(){t.LoadHomeScreen(),globals.advertsEnabled&&i.load()}))}};return r}.call(t,n,t,e))||(e.exports=i)}]]);
//# sourceMappingURL=common.d2ad8b302c681bedca50.chunk.js.map